(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,n,t){"use strict";e.exports=t(29)},function(e,n,t){e.exports=t(54)()},function(e,n,t){"use strict";var r,a=t(14),i=Object.prototype.toString,s=(r=Object.create(null),function(e){var n=i.call(e);return r[n]||(r[n]=n.slice(8,-1).toLowerCase())});function o(e){return e=e.toLowerCase(),function(n){return s(n)===e}}function l(e){return Array.isArray(e)}function u(e){return"undefined"===typeof e}var c=o("ArrayBuffer");function d(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==s(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}var f=o("Date"),p=o("File"),m=o("Blob"),g=o("FileList");function _(e){return"[object Function]"===i.call(e)}var y=o("URLSearchParams");function v(e,n){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),l(e))for(var t=0,r=e.length;t<r;t++)n.call(null,e[t],t,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.call(null,e[a],a,e)}var E,b=(E="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return E&&e instanceof E});e.exports={isArray:l,isArrayBuffer:c,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return e&&("function"===typeof FormData&&e instanceof FormData||"[object FormData]"===i.call(e)||_(e.toString)&&"[object FormData]"===e.toString())},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&c(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:d,isPlainObject:h,isUndefined:u,isDate:f,isFile:p,isBlob:m,isFunction:_,isStream:function(e){return d(e)&&_(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:v,merge:function e(){var n={};function t(t,r){h(n[r])&&h(t)?n[r]=e(n[r],t):h(t)?n[r]=e({},t):l(t)?n[r]=t.slice():n[r]=t}for(var r=0,a=arguments.length;r<a;r++)v(arguments[r],t);return n},extend:function(e,n,t){return v(n,function(n,r){e[r]=t&&"function"===typeof n?a(n,t):n}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,n,t,r){e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,t&&Object.assign(e.prototype,t)},toFlatObject:function(e,n,t){var r,a,i,s={};n=n||{};do{for(a=(r=Object.getOwnPropertyNames(e)).length;a-- >0;)s[i=r[a]]||(n[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},kindOf:s,kindOfTest:o,endsWith:function(e,n,t){e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=n.length;var r=e.indexOf(n,t);return-1!==r&&r===t},toArray:function(e){if(!e)return null;var n=e.length;if(u(n))return null;for(var t=new Array(n);n-- >0;)t[n]=e[n];return t},isTypedArray:b,isFileList:g}},function(e,n,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(56)},function(e,n,t){"use strict";var r=t(2);function a(e,n,t,r,a){Error.call(this),this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),a&&(this.response=a)}r.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=a.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){s[e]={value:e}}),Object.defineProperties(a,s),Object.defineProperty(i,"isAxiosError",{value:!0}),a.from=function(e,n,t,s,o,l){var u=Object.create(i);return r.toFlatObject(e,u,function(e){return e!==Error.prototype}),a.call(u,e.message,n,t,s,o),u.name=e.name,l&&Object.assign(u,l),u},e.exports=a},function(e,n,t){"use strict";e.exports=t(26)},function(e,n,t){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,n){for(var t,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in t=Object(arguments[l]))a.call(t,u)&&(o[u]=t[u]);if(r){s=r(t);for(var c=0;c<s.length;c++)i.call(t,s[c])&&(o[s[c]]=t[s[c]])}}return o}},function(e,n,t){"use strict";var r=t(4);function a(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}t(2).inherits(a,r,{__CANCEL__:!0}),e.exports=a},function(e,n,t){(function(n,r,a){e.exports=function(e,t,i){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),l=s(t),u=s(i);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){g(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function p(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,n,t){return n&&p(e.prototype,n),t&&p(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&v(e,n)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,n){return(v=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,r=y(e);if(n){var a=y(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,t)}}function C(){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var r=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=y(e)););return e}(e,n);if(r){var a=Object.getOwnPropertyDescriptor(r,n);return a.get?a.get.call(arguments.length<3?e:t):a.value}}).apply(this,arguments)}function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}}(e,n)||O(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){if(e){if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function A(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=O(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw i}}}}var w=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"3.1.33"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}(),I={},R=function(){function e(e){this._container=e}return e.create=function(n,t){return I[n]=new e(t),I[n]},e.get=function(e){return e||(e=Ma.getInstance()._iid),I[e]},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._container[e]},e.prototype.set=function(e,n){this._container[e]=n},e.prototype.remove=function(e){this._container.hasOwnProperty(e)&&delete this._container[e]},e}(),k=function(e,n){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function M(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}k(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var U=function(){return(U=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function L(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(s,o)}l((r=r.apply(e,n||[])).next())})}function P(e,n){var t,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function D(e,n,t){if(t||2===arguments.length)for(var r,a=0,i=n.length;a<i;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}var x,F=function(e){function n(t,r){var a=e.call(this,r)||this;return a.name="SendBirdException",a.code=r||0,a.message=t,Object.setPrototypeOf(a,n.prototype),a}return M(n,e),Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===n.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===n.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===n.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenRevokedError",{get:function(){return this.code===n.SESSION_TOKEN_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n,"INVALID_TOKEN",{get:function(){return 400111},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_KEY_EXPIRED",{get:function(){return 400309},enumerable:!1,configurable:!0}),Object.defineProperty(n,"USER_DEACTIVATED",{get:function(){return 400300},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NON_EXISTING_USER",{get:function(){return 400301},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_TOKEN_EXPIRED",{get:function(){return 400302},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_TOKEN_REVOKED",{get:function(){return 400310},enumerable:!1,configurable:!0}),Object.defineProperty(n,"INVALID_INITIALIZATION",{get:function(){return 800100},enumerable:!1,configurable:!0}),Object.defineProperty(n,"CONNECTION_REQUIRED",{get:function(){return 800101},enumerable:!1,configurable:!0}),Object.defineProperty(n,"CONNECTION_CANCELED",{get:function(){return 800102},enumerable:!1,configurable:!0}),Object.defineProperty(n,"INVALID_PARAMETER",{get:function(){return 800110},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NETWORK_ERROR",{get:function(){return 800120},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NETWORK_ROUTING_ERROR",{get:function(){return 800121},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MALFORMED_DATA",{get:function(){return 800130},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MALFORMED_ERROR_DATA",{get:function(){return 800140},enumerable:!1,configurable:!0}),Object.defineProperty(n,"WRONG_CHANNEL_TYPE",{get:function(){return 800150},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MARK_AS_READ_RATE_LIMIT_EXCEEDED",{get:function(){return 800160},enumerable:!1,configurable:!0}),Object.defineProperty(n,"QUERY_IN_PROGRESS",{get:function(){return 800170},enumerable:!1,configurable:!0}),Object.defineProperty(n,"ACK_TIMEOUT",{get:function(){return 800180},enumerable:!1,configurable:!0}),Object.defineProperty(n,"LOGIN_TIMEOUT",{get:function(){return 800190},enumerable:!1,configurable:!0}),Object.defineProperty(n,"WEBSOCKET_CONNECTION_CLOSED",{get:function(){return 800200},enumerable:!1,configurable:!0}),Object.defineProperty(n,"WEBSOCKET_CONNECTION_FAILED",{get:function(){return 800210},enumerable:!1,configurable:!0}),Object.defineProperty(n,"REQUEST_FAILED",{get:function(){return 800220},enumerable:!1,configurable:!0}),Object.defineProperty(n,"FILE_UPLOAD_CANCEL_FAILED",{get:function(){return 800230},enumerable:!1,configurable:!0}),Object.defineProperty(n,"REQUEST_CANCELED",{get:function(){return 800240},enumerable:!1,configurable:!0}),Object.defineProperty(n,"REQUEST_DUPLICATED",{get:function(){return 800250},enumerable:!1,configurable:!0}),Object.defineProperty(n,"FILE_SIZE_LIMIT_EXCEEDED",{get:function(){return 800260},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_TOKEN_REQUEST_FAILED",{get:function(){return 800500},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_REFRESH_SUCCESS",{get:function(){return 800501},enumerable:!1,configurable:!0}),Object.defineProperty(n,"SESSION_REFRESH_FAILED",{get:function(){return 800502},enumerable:!1,configurable:!0}),Object.defineProperty(n,"CHANNEL_NOT_FOUND",{get:function(){return 900500},enumerable:!1,configurable:!0}),Object.defineProperty(n,"USER_NOT_MEMBER",{get:function(){return 900020},enumerable:!1,configurable:!0}),n}(Error),H=function(){function e(){this.sessionToken=null,this.sessionKey=null,this.eKey=null}return e.prototype.hasSession=function(){return!!this.sessionKey},e}(),G={},j=function(){function e(e,n){void 0===n&&(n={});var t=this;this._iid=e,Object.keys(n).forEach(function(e){var r=n[e];"function"==typeof r&&(t[e]=t.getClonedClass(r))}),G[e]=this}return e.get=function(e){return e?G[e]:{}},e.prototype.getClonedClass=function(e){var n=this._iid,t=function(t){function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,e)||this}return M(r,t),Object.defineProperty(r,"_iid",{get:function(){return n},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_name",{get:function(){return e.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_iid",{get:function(){return n},enumerable:!1,configurable:!0}),r}(e);return t},e}(),B={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},z=function(e){_(t,e);var n=b(t);function t(){return f(this,t),n.apply(this,arguments)}return m(t,[{key:"log",value:function(e){for(var n,t,r,a,i,s=this.getLogLevelText(e);s.length<8;)s+=" ";for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];switch(l.unshift("[".concat(s,"]")),e){case"verbose":(n=console).log.apply(n,l);break;case"debug":(t=console).log.apply(t,l);break;case"info":(r=console).info.apply(r,l);break;case"warn":(a=console).warn.apply(a,l);break;case"error":(i=console).error.apply(i,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),t}(function(){function e(){f(this,e)}return m(e,[{key:"getLogLevelText",value:function(e){return B[e]}}]),e}()),V={DEBUG:"debug",PRODUCTION:"production"},q=V.PRODUCTION,K={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},Y=[K.NONE,K.ERROR,K.WARN,K.INFO,K.DEBUG,K.VERBOSE],Q=K.WARN,W=Y.indexOf(Q),J=[new z],X=function(){function e(){f(this,e)}return m(e,null,[{key:"Mode",get:function(){return V}},{key:"mode",get:function(){return q},set:function(n){Object.keys(e.Mode).map(function(n){return e.Mode[n]}).indexOf(n)>-1&&(q=n)}},{key:"supportedLogLevels",get:function(){return K}},{key:"logLevel",get:function(){return Y[W]},set:function(e){Y.includes(e)||(e=Q),W=Y.indexOf(e)}},{key:"defaultLogLevel",get:function(){return Q}},{key:"isDisplayableLogLevel",value:function(e){var n=Y.indexOf(e);return 0<=n&&n<=W}},{key:"log",value:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];e.isDisplayableLogLevel(n)&&J.forEach(function(e){return e.log.apply(e,[n].concat(r))})}},{key:"verbose",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.log.apply(e,[K.VERBOSE].concat(t))}},{key:"debug",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.log.apply(e,[K.DEBUG].concat(t))}},{key:"info",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.log.apply(e,[K.INFO].concat(t))}},{key:"warn",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.log.apply(e,[K.WARN].concat(t))}},{key:"error",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.log.apply(e,[K.ERROR].concat(t))}},{key:"group",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var a=[];Array.isArray(t[t.length-1])&&(a=t.pop()),a.some(function(n){return e.isDisplayableLogLevel(n.level)})&&J.filter(function(e){return e instanceof z}).forEach(function(e){e.groupStart.apply(e,t),a.forEach(function(n){return e.log.apply(e,[n.level].concat(S(n.messages)))}),e.groupEnd()})}}]),e}(),$=function(){function e(){f(this,e),this._queue=[],this.locked=!1}return m(e,[{key:"lock",value:function(e){var n=this;this.locked?this._queue.push(e):(this.locked=!0,e(function(){return n.unlock()}))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),Z=function(){function e(n){f(this,e),this.sb=n,this.mutex=new $,this.pingTimer=null,this.pingTimeoutTimer=null}return m(e,[{key:"ping",value:function(){var e=this,n=j.get(this.sb._iid).Command.bPing(),t=R.get(this.sb._iid).container,r=t.wsAdapter,a=t.pongTimeout;r.client.send(n),X.debug("`PING`"),this.pingTimeoutTimer=setTimeout(function(){X.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()},a)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,n=R.get(this.sb._iid).container.pingInterval;this.mutex.lock(function(t){e.stop(),e.pingTimer=setInterval(function(){e.ping()},n),t()})}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),ee=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},ne=function(){return"undefined"==typeof window&&"undefined"!=typeof n&&("node"===n.title||void 0!==n.versions&&n.versions.node||"[object process]"===String(n))};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(x||(x={}));var te=function(){function e(){}var n;return e.isFileLikeObject=function(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type},n=e,e.convertFileToDataUrl=function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(e){return n(r.result)},r.onerror=function(e){return t(r.error)},r.readAsDataURL(e)})},e.convertFileToArrayBuffer=function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(e){return n(r.result)},r.onerror=function(e){return t(r.error)},r.readAsArrayBuffer(e)})},e.convertDataUrlToByteArray=function(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],r=atob(n[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return[i,t]},e.convertDataURLtoFile=function(e,t){var r=n.convertDataUrlToByteArray(e),a=r[0],i=r[1];return new File([a],t,{type:i})},e.convertDataURLtoBlob=function(e){var t=n.convertDataUrlToByteArray(e),r=t[0],a=t[1];return new Blob([r],{type:a})},e.convertArrayBufferToFile=function(e,n){return new File([e],n)},e.isFile=function(e){return"undefined"!=typeof window&&"File"in window&&"undefined"!=typeof File&&e instanceof File},e.isBlob=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},e.isFileTypeBlob=function(e){return e===x.BLOB||e===x.FILE},e.convertBlobToBuffer=function(t){return L(void 0,void 0,void 0,function(){var a;return P(n,function(n){switch(n.label){case 0:return[4,e.convertFileToArrayBuffer(t)];case 1:return a=n.sent(),[2,r.from(a)]}})})},e}(),re=[F.CONNECTION_REQUIRED,F.NETWORK_ERROR,F.ACK_TIMEOUT,F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED,F.FILE_UPLOAD_CANCEL_FAILED,F.REQUEST_CANCELED,500901,500910,900200],ae=[F.SESSION_TOKEN_EXPIRED,F.SESSION_TOKEN_REVOKED,F.USER_DEACTIVATED,F.NON_EXISTING_USER],ie=[F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED],se=function(){function e(){}return e.deepEqual=function(e,n){if(e!==n){var t=U({},e),r=U({},n);return(!t.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||t.messageId===r.messageId)&&(!t.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||t.reqId===r.reqId)&&(t.hasOwnProperty("messageId")&&delete t.messageId,t.hasOwnProperty("reqId")&&delete t.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(t)===JSON.stringify(r))}return!0},e.isResendableError=function(e){return e>0&&re.indexOf(e)>=0},e.isAutoResendableError=function(e){return e>0&&ie.indexOf(e)>=0},e.isNonAutoReconnectableError=function(e){return e>0&&ae.indexOf(e)>=0},e.isFile=function(e){var n=te.isFileLikeObject(e);return n||(ne()?"undefined"!=typeof r&&e instanceof r:"undefined"!=typeof Blob?e instanceof Blob:"undefined"!=typeof File&&e instanceof File)},e}(),oe=function(){function e(e){var n=this;this.fields={},e&&Object.keys(e).forEach(function(t){n.fields[t]={value:e[t]},se.isFile(e[t])&&(n.fields[t].filename=e[t].name)}),this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return e.prototype.add=function(e,n,t){void 0===t&&(t=null),this.fields[e]={value:n,filename:t}},e.prototype.remove=function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]},e.prototype.yield=function(){return L(this,void 0,void 0,function(){var e,t,r,a,i,s,o,u,c,d,h,f,p=this;return P(this,function(m){switch(m.label){case 0:for(e=!1,t=Object.keys(this.fields),r=0,a=t;r<a.length;r++)if(u=a[r],se.isFile(this.fields[u].value)){e=!0;break}if(!e)return[3,10];i=new l.default,s=0,o=t,m.label=1;case 1:return s<o.length?(u=o[s],c=this.fields[u],se.isFile(c.value)?(d=c.value).filename||d.name?(i.append(u,c.value,d.filename||d.name),[3,6]):[3,2]:[3,7]):[3,9];case 2:return d.data?(i.append(u,c.value,d.data.name),[3,6]):[3,3];case 3:return h=c.value,"undefined"!=typeof window&&"undefined"!=typeof n&&n.title.endsWith("node")&&n.versions&&n.versions.node&&"undefined"!=typeof Blob&&h instanceof Blob||"undefined"!=typeof File&&h instanceof File?[4,te.convertBlobToBuffer(h)]:[3,5];case 4:h=m.sent(),m.label=5;case 5:i.append(u,h,"unnamed"),m.label=6;case 6:return[3,8];case 7:ee()&&Array.isArray(c.value)?i.append(u,String(c.value)):i.append(u,c.value),m.label=8;case 8:return s++,[3,1];case 9:return[2,i];case 10:return f={},Object.keys(this.fields).forEach(function(e){f[e]=p.fields[e].value}),[2,f]}})})},e}(),le=function(e,n,t){return void 0===t&&(t=null),new Promise(function(r,a){var i=function(n,i){void 0===i&&(i=null),t&&(R.get(e).get("isErrorFirstInCallback")?t(n,i):t(i,n)),n?a(n):r(i)};i.isPromisifyCallback=!0,n(i)})},ue=function(){function e(n){f(this,e),this.sb=n,this.cls=j.get(this.sb._iid)}return m(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var n=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(n,".sendbird.com"),wsHost:"wss://ws-".concat(n,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var n=e.apiHost,t=e.url,r=e.params;return t?r&&r.internal?"".concat(n,"/v").concat(w.SDK_MAJOR_VERSION,"/sdk").concat(t):"".concat(n,"/v").concat(w.SDK_MAJOR_VERSION).concat(t):n}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.noSessionKey,r=void 0!==t&&t,a=n.accessToken,i=void 0===a?null:a,s=e instanceof l.default&&"function"==typeof e.getHeaders?e.getHeaders():{},o=R.get(this.sb._iid),u=o.container,c=u.appId,d=u.auth,h=u.extensions,f=u.getUserAgentWithExtensions,p=Ma.getAppVersion(),m="JS,".concat(w.OS_VERSION,",").concat(w.SDK_VERSION,",").concat(c);return p&&(m+=",".concat(p)),s.SendBird=m,s["SB-User-Agent"]=encodeURIComponent(f(h)),!r&&d.sessionKey&&(s["Session-Key"]=d.sessionKey),i&&(s["App-Id"]=c,s["Access-Token"]=i),s["Request-Sent-Timestamp"]=(new Date).getTime().toString(),e instanceof l.default&&ee()&&(s["Content-Type"]="multipart/form-data"),s}},{key:"_createQuery",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var t=[];return Object.keys(n).forEach(function(e){var r=n[e];if(null!=r){var a="";a="object"===h(r)?Array.isArray(r)?r.map(function(e){return encodeURIComponent("string"==typeof e?e.trim():e)}).join(","):encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),t.push("".concat(e,"=").concat(a))}}),t.length>0?"".concat(e,"?").concat(t.join("&")):e}catch(n){return X.debug("createWithEncodedGetParams is failed. - ",n),e}}},{key:"_request",value:function(e,n,t,r){var a=this;this.checkRouting(function(i,s){if(i)r(new F("Request failed.",F.REQUEST_FAILED),null);else{var u=a._buildUrl({apiHost:s.apiHost,url:n,params:t});(t?t.yield():Promise.resolve({})).then(function(i){var s=a._createHeader(i,t?t.options:{}),c=[{level:X.supportedLogLevels.DEBUG,messages:["url:",n]},{level:X.supportedLogLevels.DEBUG,messages:["data:",i]}],d=null;switch(e){case"GET":case"DELETE":d=a._createQuery(u,i);break;case"POST":case"PUT":d=u}var h=null;if(("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer)&&"undefined"==typeof Worker||ne()||"function"!=typeof fetch)switch(e){case"GET":h=o.default.get(d,{headers:s,validateStatus:a._validateStatus});break;case"POST":var f={headers:s,validateStatus:a._validateStatus,onUploadProgress:function(e){t.upload.progressHandler&&t.upload.progressHandler(e,t.upload.reqId)}};if(i instanceof l.default){var p=null;"function"==typeof AbortController?(p=new AbortController,f.signal=p.signal):(p=o.default.CancelToken.source(),f.cancelToken=p.token);var m=a.cls.FileMessageQueue,g=t.upload.reqId;g&&(c.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",g]}),m.uploadRequest[g]=p)}h=o.default.post(d,"function"==typeof i.getBuffer?i.getBuffer():i,f);break;case"PUT":h=o.default.put(d,i,{headers:s,validateStatus:a._validateStatus});break;case"DELETE":h=o.default.delete(d,{headers:s,validateStatus:a._validateStatus})}else{var _={method:e,headers:s};switch(e){case"GET":break;case"POST":if(i instanceof l.default){if("function"==typeof AbortController){var y=new AbortController,v=y.signal;_.signal=v;var E=a.cls.FileMessageQueue,b=t.upload.reqId;b&&(c.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",b]}),E.uploadRequest[b]=y)}_.body="function"==typeof i.getBuffer?i.getBuffer():i}else s["Content-Type"]="application/json; charset=utf-8",_.body=JSON.stringify(i);break;case"PUT":i instanceof l.default?_.body="function"==typeof i.getBuffer?i.getBuffer():i:(s["Content-Type"]="application/json; charset=utf-8",_.body=JSON.stringify(i))}h=fetch(d,_).then(function(e){return e.json().then(function(n){if(!a._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:n}};return Promise.resolve({data:n})})})}X.group("".concat(e," request"),c),c=[],h.then(function(n){try{var a=n.data;"POST"===e&&"function"==typeof t.upload.deleteRequest&&t.upload.deleteRequest(),c.push({level:X.supportedLogLevels.DEBUG,messages:["data:",a]}),r(null,a)}catch(e){throw{code:888e3,rawError:e}}}).catch(function(i){if(888e3===i.code)throw i.rawError;"POST"===e&&"function"==typeof t.upload.deleteRequest&&t.upload.deleteRequest();var s=a._handleError(i);if(c.push({level:X.supportedLogLevels.DEBUG,messages:["error:",s]}),n&&t)if(t.options&&t.options.isSessionRefresh)r(s,null);else{var o=R.get(a.sb._iid).container.sessionManager;o.isSessionError(s)?o.refreshSessionIfExpiredError(s).then(function(){return r(new F("Session is refreshed successfully.",F.SESSION_REFRESH_SUCCESS),null)}).catch(function(e){return r(new F("Session refresh failed.",F.SESSION_REFRESH_FAILED),null)}):r(s,null)}else r(s,null)}).finally(function(){return X.group("".concat(e," response"),c)})})}})}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var n=e.request,t=e.response;if(n){if(n.isAbort||n.aborted)return new F("Request has been canceled.",F.REQUEST_CANCELED);if(t){var r=t.data,a=r?r.message:"Request failed.",i=r?r.code:F.REQUEST_FAILED;return new F(a,i)}return new F("Request failed.",F.REQUEST_FAILED)}return new F("There was a network error.",F.NETWORK_ERROR)}},{key:"get",value:function(e,n,t){this._request("GET",e,n,t)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,n,t){this._request("POST",e,n,t)}},{key:"put",value:function(e,n,t){this._request("PUT",e,n,t)}},{key:"delete",value:function(e,n,t){this._request("DELETE",e,n,t)}},{key:"refreshSessionKey",value:function(n,t){var r=this,a=n.accessToken;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(i.userId)),o=new oe;o.add("expiring_session",!0),o.options.isSessionRefresh=!0,o.options.noSessionKey=!0,o.options.accessToken=a,r.post(s,o,t)}})}},{key:"updateCurrentUserInfo",value:function(n,t){var r=this,a=n.nickname,i=n.profileUrl,s=n.profileImage,o=n.preferredLanguages;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),c=new oe;a&&c.add("nickname",a),i&&c.add("profile_url",i),s&&c.add("profile_file",s,s.name),o&&c.add("preferred_languages",o),r.put(u,c,t)}})}},{key:"getMyGroupChannelChangeLogs",value:function(n,t){var r=this;return le(this.sb._iid,function(t){var a=n.ts,i=n.token,s=n.customTypes,o=n.includeEmpty,l=n.includeFrozen;r.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(u.userId)),d=new oe({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});i&&d.add("token",i),a&&d.add("change_ts",a),s&&s.length>0&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof l&&d.add("show_frozen",l),r.get(c,d,t)}})},t)}},{key:"getChannelInvitationPreference",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,t)}})}},{key:"getGroupChannelCount",value:function(n,t){var r=this,a=n.memberStateFilter;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=r.cls.GroupChannel,o=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId)),l="";switch(a){case s.MemberStateFilter.JOINED:l="joined";break;case s.MemberStateFilter.INVITED:l="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;case s.MemberStateFilter.LEFT:l="left";default:l="all"}var u=new oe({state:l});r.get(o,u,t)}})}},{key:"getUnreadItemCount",value:function(n,t){var r=this,a=n.keys;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(i.userId)),o=new oe({item_keys:a});r.get(s,o,t)}})}},{key:"getTotalUnreadMessageCount",value:function(n,t){var r=this,a=n.customTypesFilter,i=n.superChannelFilter;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,t)}})}},{key:"getTotalUnreadChannelCount",value:function(n,t){var r=this,a=n.customTypesFilter,i=n.superChannelFilter;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,t)}})}},{key:"searchMessages",value:function(n,t){var r=this,a=n.keyword,i=n.limit,s=n.reverse,o=n.exactMatch,l=n.channelUrl,u=n.channelCustomType,c=n.messageTimestampFrom,d=n.messageTimestampTo,h=n.order,f=n.nextToken,p=n.advancedQuery,m=n.targetFields;this.sb.ConnectionManager.ready(function(n,g){if(n)t(n,null);else{var _=e.Path.SEARCH_MESSAGE,y=new oe({limit:i,reverse:s,query:a,custom_type:u});c&&y.add("message_ts_from",c),d&&y.add("message_ts_to",d),l&&y.add("channel_url",l),h&&y.add("sort_field",h),"boolean"==typeof o&&y.add("exact_match",o),null!==f&&f.length>0&&y.add("after",f),"boolean"==typeof p&&y.add("advanced_query",p),m&&Array.isArray(m)&&y.add("target_fields",m),r.get(_,y,t)}})}},{key:"markAsReadAll",value:function(n,t){var r=this,a=n.channelUrls;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("channel_urls",a),r.put(s,o,t)}})}},{key:"markAsDelivered",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(a)),l=new oe;i&&l.add("user_id",i),r.put(o,l,t)}})}},{key:"setChannelInvitationPreference",value:function(n,t){var r=this,a=n.isAutoAccept;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({auto_accept:a});r.put(s,o,t)}})}},{key:"blockUser",value:function(n,t){var r=this,a=n.blockedUserId;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(i.userId)),o=new oe({target_id:a});r.post(s,o,t)}})}},{key:"unblockUser",value:function(n,t){var r=this,a=n.unblockedUserId;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"getPushTriggerOption",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,t)}})}},{key:"setPushTriggerOption",value:function(n,t){var r=this,a=n.pushTriggerOption;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({push_trigger_option:a});r.put(s,o,t)}})}},{key:"getPushTokens",value:function(n,t){var r=this,a=n.ts,i=n.token,s=n.type;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),u=new oe;i&&u.add("token",i),a&&u.add("created_ts",a),r.get(l,u,t)}})}},{key:"getPushTemplate",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,t)}})}},{key:"setPushTemplate",value:function(n,t){var r=this,a=n.templateName;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId)),o=new oe({name:a});r.put(s,o,t)}})}},{key:"getDoNotDisturb",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,t)}})}},{key:"setDoNotDisturb",value:function(n,t){var r=this,a=n.doNotDisturbOn,i=n.startHour,s=n.startMin,o=n.endHour,l=n.endMin,u=n.timezone;this.sb.ConnectionManager.ready(function(n,c){if(n)t(n,null);else{var d=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(c.userId)),h=new oe({do_not_disturb:a,start_hour:i,start_min:s,end_hour:o,end_min:l,timezone:u});r.put(d,h,t)}})}},{key:"getSnoozePeriod",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,t)}})}},{key:"setSnoozePeriod",value:function(n,t){var r=this,a=n.snoozeOn,i=n.startTs,s=n.endTs;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),u=new oe({snooze_enabled:a,snooze_start_ts:i,snooze_end_ts:s});r.put(l,u,t)}})}},{key:"registerGCMPushToken",value:function(n,t){var r=this,a=n.token;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId)),o=new oe({gcm_reg_token:a,always_push:!0});r.post(s,o,t)}})}},{key:"unregisterGCMPushToken",value:function(n,t){var r=this,a=n.token;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"unregisterAllGCMPushTokens",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,t)}})}},{key:"registerAPNSPushToken",value:function(n,t){var r=this,a=n.token;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId)),o=new oe({apns_device_token:a,always_push:!0});r.post(s,o,t)}})}},{key:"unregisterAPNSPushToken",value:function(n,t){var r=this,a=n.token;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"unregisterAllAPNSPushTokens",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,t)}})}},{key:"unregisterAllPushTokens",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,t)}})}},{key:"loadFriendList",value:function(n,t){var r=this,a=n.token,i=n.limit;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),l=new oe({limit:i,token:a});r.get(o,l,t)}})}},{key:"getFriendChangeLogsByToken",value:function(n,t){var r=this,a=n.token;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("token",a),r.get(s,o,t)}})}},{key:"addFriends",value:function(n,t){var r=this,a=n.userIds;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.post(s,o,t)}})}},{key:"deleteFriends",value:function(n,t){var r=this,a=n.userIds;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.delete(s,o,t)}})}},{key:"uploadFriendDiscoveries",value:function(n,t){var r=this,a=n.discoveries;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=[];a.forEach(function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})});var l=new oe({friend_discoveries:o});r.put(s,l,t)}})}},{key:"deleteFriendDiscoveries",value:function(n,t){var r=this,a=n.discoveryKeys;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=new oe({friend_discovery_keys:a});r.delete(s,o,t)}})}},{key:"loadUserList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.userIdsFilter,o=n.metaDataKeyFilter,l=n.metaDataValuesFilter,u=n.nicknameStartsWithFilter;this.sb.ConnectionManager.ready(function(n,c){if(n)t(n,null);else{var d=e.Path.USERS,h=new oe({token:a,limit:i});s&&s.length>0&&h.add("user_ids",s),o&&l&&l.length>0&&(h.add("metadatakey",o),h.add("metadatavalues_in",l)),u&&h.add("nickname_startswith",u),r.get(d,h,t)}})}},{key:"loadBlockedUserList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.userIdsFilter;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),u=new oe({token:a,limit:i});s&&s.length>0&&u.add("user_ids",s),r.get(l,u,t)}})}},{key:"createUserMetaData",value:function(n,t){var r=this,a=n.metaData;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId)),o=new oe({metadata:a});r.post(s,o,t)}})}},{key:"updateUserMetaData",value:function(n,t){var r=this,a=n.metaData,i=n.upsert;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),l=new oe({metadata:a,upsert:i});r.put(o,l,t)}})}},{key:"deleteUserMetaData",value:function(n,t){var r=this,a=n.metaDataKey;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"deleteAllUserMetaData",value:function(n,t){var r=this;this.sb.ConnectionManager.ready(function(n,a){if(n)t(n,null);else{var i=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,t)}})}},{key:"getMessageChangeLogs",value:function(n,t){var r=this;return le(this.sb._iid,function(t){var a=n.channelUrl,i=n.ts,s=n.timestamp,o=n.token,l=n.isOpenChannel,u=n.includeMetaArray,c=n.includeReaction,d=n.includeReactions,h=n.includeReplies,f=n.includeParentMessageText,p=n.includeThreadInfo,m=n.replyType,g=n.includeParentMessageInfo;r.sb.ConnectionManager.ready(function(n,_){if(n)t(n,null);else{var y=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)),v=new oe;o&&v.add("token",o),i&&v.add("change_ts",i),s&&v.add("change_ts",s),"boolean"==typeof u&&v.add("with_sorted_meta_array",u),"boolean"==typeof d?v.add("include_reactions",d):v.add("include_reactions","boolean"==typeof c&&c),"boolean"==typeof p&&v.add("include_thread_info",p),"string"==typeof m?v.add("include_reply_type",m):v.add("include_reply_type","boolean"==typeof h&&h?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof g?v.add("include_parent_message_info",g):v.add("include_parent_message_info","boolean"==typeof f&&f),r.get(y,v,t)}})},t)}},{key:"getMyMutedInfo",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId,s=n.isGroupChannel;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.get(l,null,t)}})}},{key:"loadBannedUserList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.channelUrl,o=n.isOpenChannel;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),c=new oe({token:a,limit:i});r.get(u,c,t)}})}},{key:"loadMutedUserList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.channelUrl,o=n.isOpenChannel;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),c=new oe({token:a,limit:i});r.get(u,c,t)}})}},{key:"getMessageList",value:function(n,t){var r=this;return le(this.sb._iid,function(t){var a=n.channel,i=n.token,s=n.tokenType,o=n.isInclusive,l=n.prevResultSize,u=void 0===l?0:l,c=n.nextResultSize,d=void 0===c?0:c,h=n.shouldReverse,f=n.messageType,p=n.customType,m=n.customTypes,g=n.senderUserIds,_=n.includeMetaArray,y=n.includeReaction,v=n.includeReactions,E=n.includeReplies,b=n.includeParentMessageText,C=n.includeThreadInfo,N=n.replyType,S=n.includeParentMessageInfo,O=n.showSubchannelMessagesOnly,T=n.rootMessageId,A=n.parentMessageId;r.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var c=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url),w=new oe({is_sdk:String(!0),prev_limit:String(u),next_limit:String(d),include:String(o),reverse:String(h)});"timestamp"===s?w.add("message_ts",i):"messageId"===s&&w.add("message_id",String(i)),f&&w.add("message_type",String(f)),Array.isArray(m)&&(0===m.length&&("string"==typeof p?m.push(p):m.push("*")),w.add("custom_types",m)),Array.isArray(g)&&g.length>0&&w.add("sender_ids",g),"boolean"==typeof _&&w.add("with_sorted_meta_array",_),"boolean"==typeof v?w.add("include_reactions",v):w.add("include_reactions","boolean"==typeof y&&y),"boolean"==typeof C&&w.add("include_thread_info",C),"string"==typeof N?w.add("include_reply_type",N):w.add("include_reply_type","boolean"==typeof E&&E?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof S?w.add("include_parent_message_info",S):w.add("include_parent_message_info","boolean"==typeof b&&b),"boolean"==typeof O&&a.isOpenChannel()&&w.add("show_subchannel_messages_only",O),T&&w.add("root_message_id",T),A&&w.add("parent_message_id",A),r.get(c,w,t)}})},t)}},{key:"checkMessageHugeGap",value:function(n,t){var r=this;return le(this.sb._iid,function(t){var a=n.channelUrl;n.channelType;var i=n.messageType,s=void 0===i?"":i,o=n.customTypes,l=void 0===o?["*"]:o,u=n.senderUserIds,c=void 0===u?[]:u,d=n.includeReactions,h=void 0===d||d,f=n.includeMetaArray,p=void 0!==f&&f,m=n.showSubchannelMessagesOnly,g=void 0!==m&&m,_=n.threshold,y=n.previous,v=n.next,E="".concat(e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_GAP.replace("%s",encodeURIComponent(a))),b=new oe({huge_gap_threshold:_,prev_start_ts:y.from,prev_end_ts:y.to,prev_cache_count:y.cachedCount,next_start_ts:v.from,next_end_ts:v.to,next_cache_count:v.cachedCount,reverse:!0,custom_types:l,message_type:s,include_reactions:h,with_sorted_meta_array:p,show_subchannel_messages_only:g});Array.isArray(c)&&c.length>0&&b.add("sender_ids",c),r.get(E,b,t)},t)}},{key:"translateUserMessage",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.messageId,o=n.translationTargetLanguages;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s),c=new oe({target_langs:o});r.post(u,c,t)}})}},{key:"getMessage",value:function(n,t){var r=this,a=n.channel,i=n.messageId,s=n.includeMetaArray,o=n.includeReactions,l=n.includeParentMessageText,u=n.includeThreadInfo,c=n.includeParentMessageInfo;this.sb.ConnectionManager.ready(function(n,d){if(n)t(n,null);else{var h=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)),f=new oe({is_sdk:String(!0)});"boolean"==typeof s&&f.add("with_sorted_meta_array",s),"boolean"==typeof o&&f.add("include_reactions",o),"boolean"==typeof u&&f.add("include_thread_info",u),"boolean"==typeof c?f.add("include_parent_message_info",c):f.add("include_parent_message_info","boolean"==typeof l&&l),r.get(h,f,t)}})}},{key:"deleteMessage",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.messageId;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s));r.delete(l,null,t)}})}},{key:"muteUser",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId,s=n.description,o=n.seconds,l=n.isGroupChannel;this.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});o&&(o>0||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(c,d,t)}})}},{key:"unmuteUser",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId,s=n.isGroupChannel;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,t)}})}},{key:"banUser",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId,s=n.description,o=n.seconds,l=n.isGroupChannel;this.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});s&&d.add("description",s),d.add("seconds",String(o)),r.post(c,d,t)}})}},{key:"unbanUser",value:function(n,t){var r=this,a=n.channelUrl,i=n.userId,s=n.isGroupChannel;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,t)}})}},{key:"getMetaCounters",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.keys;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),u=new oe({keys:s});r.get(l,u,t)}})}},{key:"createMetaCounters",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.metaCounter;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),u=new oe({metacounter:s});r.post(l,u,t)}})}},{key:"updateMetaCounters",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.metaCounter,o=n.upsert,l=n.mode;this.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),d=new oe({metacounter:s,upsert:o,mode:l});r.put(c,d,t)}})}},{key:"deleteMetaCounter",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.key;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s);r.delete(l,null,t)}})}},{key:"deleteAllMetaCounters",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a));r.delete(o,null,t)}})}},{key:"getMetaData",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.keys;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new oe({keys:s,include_ts:!0});r.get(l,u,t)}})}},{key:"createMetaData",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.metaData;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new oe({metadata:s,include_ts:!0});r.post(l,u,t)}})}},{key:"updateMetaData",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.metaData,o=n.upsert;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new oe({metadata:s,upsert:o,include_ts:!0});r.put(u,c,t)}})}},{key:"deleteMetaData",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.key;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s),u=new oe({include_ts:!0});r.delete(l,u,t)}})}},{key:"deleteAllMetaData",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new oe({include_ts:!0});r.delete(o,l,t)}})}},{key:"loadOperatorList",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.token,o=n.limit;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=i?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)),c=new oe({token:s,limit:o});r.get(u,c,t)}})}},{key:"getOpenChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.internalCall;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),l=new oe({});l.internal=i===w.INTERNAL_CALL,r.get(o,l,t)}})}},{key:"loadOpenChannelList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.nameKeyword,o=n.urlKeyword,l=n.customTypes,u=n.includeFrozen,c=n.includeMetaData;this.sb.ConnectionManager.ready(function(n,d){if(n)t(n,null);else{var h=e.Path.OPENCHANNELS,f=new oe({token:a,limit:i});s&&f.add("name_contains",s),o&&f.add("url_contains",o),l&&l.length>0&&f.add("custom_types",l),"boolean"==typeof u&&f.add("show_frozen",u),"boolean"==typeof c&&f.add("show_metadata",c),r.get(h,f,t)}})}},{key:"loadParticipantList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.channelUrl;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),u=new oe({token:a,limit:i});r.get(l,u,t)}})}},{key:"createOpenChannel",value:function(n,t){var r=this,a=n.name,i=n.coverUrlOrImage,s=n.data,o=n.operatorUserIds,l=n.customType,u=n.channelUrl;this.sb.ConnectionManager.ready(function(n,c){if(n)t(n,null);else{var d=e.Path.OPENCHANNELS,h=new oe;"string"==typeof i&&h.add("cover_url",i),se.isFile(i)&&h.add("cover_file",i),null!==u&&"string"==typeof u&&h.add("channel_url",u),null!==a&&"string"==typeof a&&h.add("name",a),s&&h.add("data",s),o&&(Array.isArray(o)?h.add("operators",o):h.add("operators",[o])),l&&h.add("custom_type",l),r.post(d,h,t)}})}},{key:"updateOpenChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.name,s=n.coverUrlOrImage,o=n.data,l=n.operatorUserIds,u=n.customType;this.sb.ConnectionManager.ready(function(n,c){if(n)t(n,null);else{var d=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),h=new oe;"string"==typeof s&&h.add("cover_url",s),se.isFile(s)&&h.add("cover_file",s,s.name),null!==i&&"string"==typeof i&&h.add("name",i),null!==o&&"string"==typeof o&&h.add("data",o),null!==l&&(Array.isArray(l)?h.add("operator_ids",l):h.add("operator_ids",[l])),null!==u&&"string"==typeof u&&h.add("custom_type",u),r.put(d,h,t)}})}},{key:"deleteOpenChannel",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"getGroupChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.showMember,s=n.internalCall;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),u=new oe({show_member:i,show_read_receipt:!0,show_delivery_receipt:!0});u.internal=s===w.INTERNAL_CALL,r.get(l,u,t)}})}},{key:"loadGroupChannelList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.includeEmpty,o=n.order,l=n.userIdsFilter,u=n.nicknameContainsFilter,c=n.nicknameStartsWithFilter,d=n.nicknameExactMatchFilter,h=n.channelNameContainsFilter,f=n.channelUrlsFilter,p=n.customTypesFilter,m=n.customTypeStartsWithFilter,g=n.memberStateFilter,_=n.superChannelFilter,y=n.publicChannelFilter,v=n.unreadChannelFilter,E=n.metadataOrderKeyFilter,b=n.metadataKey,C=n.metadataValues,N=n.metadataValueStartsWith,S=n.hiddenChannelFilter,O=n.searchFilter,T=n.includeFrozen,A=n.includeMetaData;return le(this.sb._iid,function(n){r.sb.ConnectionManager.ready(function(t,w){if(t)n(t,null);else{var I=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(w.userId)),R=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:g});p&&p.length>0&&R.add("custom_types",p),u&&R.add("members_nickname_contains",u),c&&R.add("members_nickname_startswith",c),d&&R.add("members_nickname",d),h&&R.add("name_contains",h),O&&O.hasOwnProperty("search_query")&&O.hasOwnProperty("search_fields")&&(R.add("search_query",O.search_query),R.add("search_fields",O.search_fields)),l&&l.userIds&&l.userIds.length>0&&(l.includeMode?(R.add("members_include_in",l.userIds),R.add("query_type",l.queryType.toUpperCase())):R.add("members_exactly_in",l.userIds)),f&&f.length>0&&R.add("channel_urls",f),R.add("super_mode",_),R.add("public_mode",y),R.add("unread_filter",v),E&&R.add("metadata_order_key",E),b&&R.add("metadata_key",b),C&&C.length>0&&R.add("metadata_values",C),N&&R.add("metadata_value_startswith",N),m&&R.add("custom_type_startswith",m),S&&R.add("hidden_mode",S),"boolean"==typeof T&&R.add("show_frozen",T),"boolean"==typeof A&&R.add("show_metadata",A),r.get(I,R,n)}})},t)}},{key:"loadPublicGroupChannelList",value:function(n,t){var r=this,a=n.token,i=n.limit,s=n.includeEmpty,o=n.order,l=n.channelNameContainsFilter,u=n.channelUrlsFilter,c=n.customTypesFilter,d=n.customTypeStartsWithFilter,h=n.superChannelFilter,f=n.membershipFilter,p=n.metadataOrderKeyFilter,m=n.metadataKey,g=n.metadataValues,_=n.metadataValueStartsWith,y=n.includeFrozen,v=n.includeMetaData;this.sb.ConnectionManager.ready(function(n,E){if(n)t(n,null);else{var b=r.cls.GroupChannel,C=e.Path.GROUPCHANNELS,N=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:b.PublicChannelFilter.PUBLIC,public_membership_mode:f});c&&c.length>0&&N.add("custom_types",c),l&&N.add("name_contains",l),u&&u.length>0&&N.add("channel_urls",u),N.add("super_mode",h),p&&N.add("metadata_order_key",p),m&&N.add("metadata_key",m),g&&g.length>0&&N.add("metadata_values",g),_&&N.add("metadata_value_startswith",_),d&&N.add("custom_type_startswith",d),"boolean"==typeof y&&N.add("show_frozen",y),"boolean"==typeof v&&N.add("show_metadata",v),r.get(C,N,t)}})}},{key:"createGroupChannel",value:function(n,t){var r=this,a=n.isDistinct,i=n.isSuper,s=n.isBroadcast,o=n.isPublic,l=n.channelUrl,u=n.isDiscoverable,c=n.isStrict,d=n.name,h=n.data,f=n.customType,p=n.coverUrl,m=n.coverImage,g=n.accessCode,_=n.isEphemeral,y=n._invitedUserIds,v=void 0===y?[]:y,E=n.operatorUserIds,b=n.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(n,y){if(n)t(n,null);else{var C=e.Path.GROUPCHANNELS,N=new oe({user_ids:[y.userId].concat(S(v)).filter(function(e,n,t){return n===t.indexOf(e)})});null!==p&&"string"==typeof p&&N.add("cover_url",p),se.isFile(m)&&N.add("cover_file",m,m.name),null!==l&&N.add("channel_url",l),null!==a&&N.add("is_distinct",a),null!==i&&N.add("is_super",i),null!==s&&N.add("is_broadcast",s),null!==o&&N.add("is_public",o),null!==u&&N.add("is_discoverable",u),null!==c&&N.add("strict",c),null!==_&&N.add("is_ephemeral",_),g&&N.add("access_code",g),null!==d&&"string"==typeof d&&N.add("name",d),h&&N.add("data",h),f&&N.add("custom_type",f),Array.isArray(E)&&E.length>0&&N.add("operator_ids",E),null!==b&&b>-1&&N.add("message_survival_seconds",b),r.post(C,N,t)}})}},{key:"updateGroupChannel",value:function(n,t){var r=this,a=n.isDistinct,i=n.isPublic,s=n.channelUrl,o=n.isDiscoverable,l=n.name,u=n.data,c=n.customType,d=n.coverUrl,h=n.coverImage,f=n.accessCode,p=n.operatorUserIds,m=n.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(n,g){if(n)t(n,null);else{var _=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),y=new oe;null!==a&&y.add("is_distinct",a),null!==i&&y.add("is_public",i),null!==o&&y.add("is_discoverable",o),null!==f&&y.add("access_code",f),null!==d&&"string"==typeof d&&y.add("cover_url",d),se.isFile(h)&&y.add("cover_file",h,h.name),null!==l&&"string"==typeof l&&y.add("name",l),null!==u&&"string"==typeof u&&y.add("data",u),null!==c&&"string"==typeof c&&y.add("custom_type",c),null!==p&&(Array.isArray(p)?y.add("operator_ids",p):p&&y.add("operator_ids",[p])),null!==m&&m>-1&&y.add("message_survival_seconds",m),r.put(_,y,t)}})}},{key:"addOperators",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=void 0!==i&&i,o=n.operatorUserIds;this.sb.ConnectionManager.ready(function(n,i){if(!n){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),u=new oe({operator_ids:o});r.post(l,u,t)}})}},{key:"removeOperators",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=void 0!==i&&i,o=n.operatorUserIds;this.sb.ConnectionManager.ready(function(n,i){if(!n){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),u=new oe({operator_ids:o});r.delete(l,u,t)}})}},{key:"inviteToGroupChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.userIds;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(a)),l=new oe({user_ids:i});r.post(o,l,t)}})}},{key:"acceptInvitation",value:function(n,t){var r=this,a=n.channelUrl,i=n.accessCode;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,t)}})}},{key:"declineInvitation",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,t)}})}},{key:"joinGroupChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.accessCode;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,t)}})}},{key:"leaveGroupChannel",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,t)}})}},{key:"hideGroupChannel",value:function(n,t){var r=this,a=n.channelUrl,i=n.hidePreviousMessages,s=n.allowAutoUnhide;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a)),u=new oe({user_id:o.userId,hide_previous_messages:i,allow_auto_unhide:s});r.put(l,u,t)}})}},{key:"unhideGroupChannel",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"freeze",value:function(n,t){var r=this,a=n.channelUrl,i=n.isGroupChannel,s=n.freezing;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=i?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)),u=new oe({freeze:s});r.put(l,u,t)}})}},{key:"deleteGroupChannel",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,t)}})}},{key:"loadMemberList",value:function(n,t){var r=this,a=n.channelUrl,i=n.token,s=n.limit,o=n.mutedMemberFilter,l=n.order,u=n.memberStateFilter,c=n.nicknameStartsWithFilter;this.sb.ConnectionManager.ready(function(n,d){if(n)t(n,null);else{var h=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(a)),f=new oe({token:i,limit:s,order:l.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:u,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});c&&f.add("nickname_startswith",c),r.get(h,f,t)}})}},{key:"report",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.reportCategory,o=n.reportingUserId,l=n.reportDescription;this.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)),d=new oe({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=l&&d.add("report_description",l),r.post(c,d,t)}})}},{key:"reportUser",value:function(n,t){var r=this,a=n.offendingUserId,i=n.channelUrl,s=n.isOpenChannel,o=n.reportCategory,l=n.reportingUserId,u=n.reportDescription;this.sb.ConnectionManager.ready(function(n,c){if(n)t(n,null);else{var d=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(a)),h=new oe({channel_url:i,channel_type:s?"open_channels":"group_channels",report_category:o});null!=l&&h.add("reporting_user_id",l),null!=u&&h.add("report_description",u),r.post(d,h,t)}})}},{key:"reportMessage",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.messageId,o=n.reportCategory,l=n.reportingUserId,u=n.reportDescription,c=n.offendingUserId;this.sb.ConnectionManager.ready(function(n,d){if(n)t(n,null);else{var h=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),f=new oe({report_category:o,offending_user_id:c});null!=l&&f.add("reporting_user_id",l),null!=u&&f.add("report_description",u),r.post(h,f,t)}})}},{key:"sendUserMessage",value:function(n,t){var r=this,a=n.channelUrl,i=n.isOpenChannel,s=n.message,o=n.data,l=n.customType,u=n.translationTargetLanguages,c=n.metaArrays,d=n.mentionType,h=n.mentionedUserIds,f=n.mentionedMessageTemplate,p=n.pushNotificationDeliveryOption,m=n.rootMessageId,g=n.parentMessageId,_=n.appleCriticalAlertOptions,y=n.isReplyToChannel;this.sb.ConnectionManager.ready(function(n,v){if(n)t(n,null);else{var E=r.cls.FileMessageParams,b=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),C=new oe({message_type:"MESG",user_id:v.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&C.add("data",o),null!=l&&C.add("custom_type",l),u&&C.add("translation_target_langs",u),c&&c.length>0&&C.add("sorted_metaarray",c.map(function(e){return e.encode()})),d===r.cls.BaseMessageParams.MentionType.CHANNEL?C.add("mentioned_user_ids",[]):Array.isArray(h)&&h.length>0&&C.add("mentioned_user_ids",h),f&&C.add("mentioned_message_template",f),p&&p!==E.PushNotificationDeliveryOption.DEFAULT&&C.add("push_option",p),m&&C.add("root_message_id",m),g&&C.add("parent_message_id",g),_&&C.add("apple_critical_alert_options",_.serialize()),y&&C.add("reply_to_channel",y),r.post(b,C,t)}})}},{key:"sendFileMessage",value:function(n,t){var r=this,a=n.reqId,i=n.channelUrl,s=n.isOpenChannel,o=n.fileUrl,l=n.fileName,u=n.fileSize,c=n.fileType,d=n.data,h=n.customType,f=n.thumbnailSizes,p=n.requireAuth,m=n.metaArrays,g=n.mentionType,_=n.mentionedUserIds,y=n.pushNotificationDeliveryOption,v=n.rootMessageId,E=n.parentMessageId,b=n.appleCriticalAlertOptions,C=n.isReplyToChannel;this.sb.ConnectionManager.ready(function(n,N){if(n)t(n,null);else{var S=r.cls.FileMessageParams,O=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),T=new oe({message_type:"FILE",user_id:N.userId,url:o,mention_type:g,mentioned_user_ids:[],req_id:a});null!=l&&T.add("file_name",l),null!=u&&T.add("file_size",u),null!=c&&T.add("file_type",c),null!=d&&T.add("custom_field",d),null!=h&&T.add("custom_type",h),f&&T.add("thumbnails",f),p&&T.add("require_auth",p),m&&m.length>0&&T.add("sorted_metaarray",m.map(function(e){return e.encode()})),g===r.cls.BaseMessageParams.MentionType.CHANNEL?T.add("mentioned_user_ids",[]):Array.isArray(_)&&_.length>0&&T.add("mentioned_user_ids",_),y&&y!==S.PushNotificationDeliveryOption.DEFAULT&&T.add("push_option",y),v&&T.add("root_message_id",v),E&&T.add("parent_message_id",E),b&&T.add("apple_critical_alert_options",b.serialize()),C&&T.add("reply_to_channel",C),r.post(O,T,t)}})}},{key:"uploadFile",value:function(n,t){var r=this,a=n.file,i=n.thumbnailSizes,s=n.channelUrl,o=n.progressHandler,l=n.reqId;this.sb.ConnectionManager.ready(function(n,u){if(n)t(n,null);else{var c=R.get(r.sb._iid).container.appInfo;if(c)if("number"==typeof a.size||a.size||(a.size=0),"number"==typeof a.size)if(a.size<=c.uploadSizeLimit){var d=e.Path.STORAGE_FILE,h=new oe;if(h.add("file",a,a.name),s&&"string"==typeof s&&h.add("channel_url",s),i)for(var f=0;f<i.length;f++)h.add("thumbnail"+(f+1),i[f].maxWidth+","+i[f].maxHeight);h.upload.reqId=l,h.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},h.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,l)},r.post(d,h,t)}else t(new F("The file size exceeded the upload limit: ".concat(c.uploadSizeLimit),F.FILE_SIZE_LIMIT_EXCEEDED),null);else t(new F("Invalid file size: ".concat(a.size),F.INVALID_PARAMETER),null);else t(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)}})}},{key:"registerScheduledUserMessage",value:function(n,t){var r=this,a=n.groupChannelParams,i=n.channelUrl,s=n.isOpenChannel;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)),u=new oe({scheduled_dt:a._getScheduleString(),user_id:o.userId,message:a.message,data:a.data});a.customType&&u.add("custom_type",a.customType),a.metaArrayKeys&&Object.keys(a.metaArrayKeys).length>0&&u.add("metaarray",a.metaArrayKeys),a.mentionType&&u.add("mention_type",a._mentionType),a._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?u.add("mentioned_user_ids",[]):Array.isArray(a._mentionedUserIds)&&a._mentionedUserIds.length>0&&u.add("mentioned_user_ids",a._mentionedUserIds),a.translationTargetLanguages&&a.translationTargetLanguages.length>0&&u.add("translation_target_langs",a.translationTargetLanguages),a.pushNotificationDeliveryOption&&a.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&u.add("push_option",a.pushNotificationDeliveryOption),a.appleCriticalAlertOptions&&u.add("apple_critical_alert_options",a.appleCriticalAlertOptions.serialize()),r.post(l,u,t)}})}},{key:"getMyPushTriggerOption",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.get(s,null,t)}})}},{key:"setMyPushTriggerOption",value:function(n,t){var r=this,a=n.channelUrl,i=n.pushTriggerOption,s=n.enable;this.sb.ConnectionManager.ready(function(n,o){if(n)t(n,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(a)),u=new oe;i&&u.add("push_trigger_option",i),"boolean"==typeof s&&u.add("enable",s),r.put(l,u,t)}})}},{key:"setMyCountPreference",value:function(n,t){var r=this,a=n.channelUrl,i=n.countPreference;this.sb.ConnectionManager.ready(function(n,s){if(n)t(n,null);else{var o=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(a)),l=new oe({count_preference:i});r.put(o,l,t)}})}},{key:"resetMyHistory",value:function(n,t){var r=this,a=n.channelUrl;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(a));r.put(s,null,t)}})}},{key:"addReaction",value:function(n,t){var r=this,a=n.isGroupChannel,i=n.channelUrl,s=n.messageId,o=n.key;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new oe({reaction:o});r.post(u,c,t)}})}},{key:"deleteReaction",value:function(n,t){var r=this,a=n.isGroupChannel,i=n.channelUrl,s=n.messageId,o=n.key;this.sb.ConnectionManager.ready(function(n,l){if(n)t(n,null);else{var u=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new oe({reaction:o});r.delete(u,c,t)}})}},{key:"getAllEmoji",value:function(n){var t=this;this.sb.ConnectionManager.ready(function(r,a){r?n(r,null):t.get(e.Path.EMOJI_CATEGORIES,null,n)})}},{key:"getEmojiCategory",value:function(n,t){var r=this,a=n.categoryId;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",a);r.get(s,null,t)}})}},{key:"getEmoji",value:function(n,t){var r=this,a=n.emojiKey;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.EMOJIS_EMOJIKEY.replace("%s",a);r.get(s,null,t)}})}},{key:"getAllowFriendDiscovery",value:function(n){var t=this;this.sb.ConnectionManager.ready(function(r,a){if(r)n(r,null);else{var i=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId));t.get(i,null,n)}})}},{key:"setAllowFriendDiscovery",value:function(n,t){var r=this,a=n.allowFriendDiscovery;this.sb.ConnectionManager.ready(function(n,i){if(n)t(n,null);else{var s=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId)),o=new oe;"boolean"==typeof a&&o.add("allow_friend_discovery",a),r.put(s,o,t)}})}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_MESSAGES_GAP:"/group_channels/%s/messages_gap",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s"}}}]),e}(),ce=function(){function e(n,t){f(this,e),this.sb=n,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=t||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?u.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return m(e,[{key:"connect",value:function(e,n,t){var r=this;X.debug("`WebSocketClient.connect` called.");var a=R.get(this.sb._iid).container,i=a.pinger,s=a.auth,o=a.extensions,l=a.getUserAgentWithExtensions,u=a.sessionManager,c=Ma.getAppVersion();this.wsHost=t;try{var d="/?p=JS"+"&pv=".concat(encodeURIComponent(w.OS_VERSION))+"&sv=".concat(encodeURIComponent(w.SDK_VERSION))+"&ai=".concat(encodeURIComponent(this.sb.getApplicationId()));if(c&&(d+="&av=".concat(encodeURIComponent(c))),s.sessionKey?d+="&key=".concat(encodeURIComponent(s.sessionKey)):d+="&user_id=".concat(encodeURIComponent(e),"&access_token=").concat(encodeURIComponent(n)),d+="&active=1",d+="&SB-User-Agent=".concat(encodeURIComponent(l(o))),d+="&Request-Sent-Timestamp=".concat((new Date).getTime().toString()),d+="&include_extra_data=".concat(encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(","))),u.handler&&(d+="&expiring_session=1"),d+="&use_local_cache=1",this.ws=new this.WebSocket(this.wsHost+d),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError({message:"ws does not exist."})}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){X.debug("`window` object does not exist.")}var h=!1;this.ws.onopen=function(e){X.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();for(var n=e.data.split("\n"),t=0;t<n.length;t++){var a=n[t];if(a&&"string"==typeof a){try{if("PONG"===a.substring(0,4)){i.pong();continue}}catch(e){X.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(a)}}},this.ws.onerror=function(e){X.debug("`WebSocket.onerror` called:",e),i&&i.stop(),h=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){X.group("`WebSocket.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["e",e]},{level:X.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),i&&i.stop(),r.explicitDisconnect?r.handler.onClose(e):h||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,n){X.group("`WebSocketClient.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var t=R.get(this.sb._iid).container.pinger;t&&t.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){n&&n()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,n){if(1!==this.ws.readyState)n&&n(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);else{var t=R.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&t.refreshTimer(),n&&n(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();ce.ConnectionHandler=m(function e(){f(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}});var de,he={},fe=function(){function e(){this._observers=[]}return e.of=function(n){return he[n]||(he[n]=new e),he[n]},e.prototype.invokeConnect=function(){for(var e=0,n=this._observers;e<n.length;e++){var t=n[e];t.onConnect&&t.onConnect()}},e.prototype.invokeDisconnect=function(){for(var e=0,n=this._observers;e<n.length;e++){var t=n[e];t.onDisconnect&&t.onDisconnect()}},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var n=this._observers.indexOf(e);n>-1&&this._observers.splice(n,1)},e}();!function(e){e[e.EVENT_CHANNEL_CHANGED=0]="EVENT_CHANNEL_CHANGED",e[e.EVENT_USER_RECEIVED_INVITATION=1]="EVENT_USER_RECEIVED_INVITATION",e[e.EVENT_USER_DECLINED_INVITATION=2]="EVENT_USER_DECLINED_INVITATION",e[e.EVENT_USER_JOINED=3]="EVENT_USER_JOINED",e[e.EVENT_USER_LEFT=4]="EVENT_USER_LEFT",e[e.EVENT_CHANNEL_ENTER=5]="EVENT_CHANNEL_ENTER",e[e.EVENT_CHANNEL_EXIT=6]="EVENT_CHANNEL_EXIT",e[e.EVENT_CHANNEL_FROZEN=7]="EVENT_CHANNEL_FROZEN",e[e.EVENT_CHANNEL_UNFROZEN=8]="EVENT_CHANNEL_UNFROZEN",e[e.EVENT_CHANNEL_HIDDEN=9]="EVENT_CHANNEL_HIDDEN",e[e.EVENT_CHANNEL_UNHIDDEN=10]="EVENT_CHANNEL_UNHIDDEN",e[e.EVENT_TYPING_STATUS_UPDATED=11]="EVENT_TYPING_STATUS_UPDATED",e[e.EVENT_OPERATOR_UPDATED=12]="EVENT_OPERATOR_UPDATED",e[e.EVENT_CHANNEL_METADATA_UPDATED=13]="EVENT_CHANNEL_METADATA_UPDATED",e[e.EVENT_CHANNEL_METADATA_DELETED=14]="EVENT_CHANNEL_METADATA_DELETED",e[e.EVENT_CHANNEL_METACOUNTER_UPDATED=15]="EVENT_CHANNEL_METACOUNTER_UPDATED",e[e.EVENT_CHANNEL_METACOUNTER_DELETED=16]="EVENT_CHANNEL_METACOUNTER_DELETED",e[e.EVENT_CHANNEL_DELETED=17]="EVENT_CHANNEL_DELETED",e[e.EVENT_USER_MUTED=18]="EVENT_USER_MUTED",e[e.EVENT_USER_UNMUTED=19]="EVENT_USER_UNMUTED",e[e.EVENT_USER_BANNED=20]="EVENT_USER_BANNED",e[e.EVENT_USER_UNBANNED=21]="EVENT_USER_UNBANNED",e[e.EVENT_MESSAGE_RECEIVED=22]="EVENT_MESSAGE_RECEIVED",e[e.EVENT_MESSAGE_SENT=23]="EVENT_MESSAGE_SENT",e[e.EVENT_MESSAGE_UPDATED=24]="EVENT_MESSAGE_UPDATED",e[e.EVENT_MESSAGE_DELETED=25]="EVENT_MESSAGE_DELETED",e[e.EVENT_READ_RECEIPT_UPDATED=26]="EVENT_READ_RECEIPT_UPDATED",e[e.EVENT_DELIVERY_RECEIPT_UPDATED=27]="EVENT_DELIVERY_RECEIPT_UPDATED",e[e.EVENT_MENTION=28]="EVENT_MENTION",e[e.EVENT_REACTION_UPDATED=29]="EVENT_REACTION_UPDATED",e[e.EVENT_THREAD_INFO_UPDATED=30]="EVENT_THREAD_INFO_UPDATED",e[e.CHANNEL_BACKGROUND=1e3]="CHANNEL_BACKGROUND",e[e.CHANNEL_CHANGELOG=1001]="CHANNEL_CHANGELOG",e[e.MESSAGE_BACKGROUND=1002]="MESSAGE_BACKGROUND",e[e.MESSAGE_FILL=1003]="MESSAGE_FILL",e[e.MESSAGE_CHANGELOG=1004]="MESSAGE_CHANGELOG",e[e.LOCAL_MESSAGE_PENDING_CREATED=2e3]="LOCAL_MESSAGE_PENDING_CREATED",e[e.LOCAL_MESSAGE_FAILED=2001]="LOCAL_MESSAGE_FAILED",e[e.LOCAL_MESSAGE_CANCELED=2002]="LOCAL_MESSAGE_CANCELED",e[e.LOCAL_MESSAGE_RESEND_STARTED=2003]="LOCAL_MESSAGE_RESEND_STARTED",e[e.MESSAGE_COLLECTION_FILTER_MISMATCH=2004]="MESSAGE_COLLECTION_FILTER_MISMATCH"}(de||(de={}));var pe,me={},ge=function(){function e(){this._observers=[]}return e.of=function(n){return me[n]||(me[n]=new e),me[n]},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var n=this._observers.indexOf(e);n>=0&&this._observers.splice(n,1)},e.prototype.send=function(e){for(var n=0,t=this._observers;n<t.length;n++)t[n].onevent(e)},e}(),_e=function(){function e(n){f(this,e),this.sb=n,this.cls=j.get(this.sb._iid),this.client=new ce(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return m(e,[{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}},{key:"connect",value:function(e,n){var t=this,r=R.get(this.sb._iid).container,a=r.auth,i=r.apiClient,s=r.commandHandler;a.sessionToken=n||null;var o=this.cls.GroupChannel,l=null,u=new ce.ConnectionHandler;this.client=new ce(this.sb,u),u.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,n){if(t.sb.connecting=!1,t.sb.reconnecting=!1,e)t.disconnect({clearSession:!0,err:e},null);else{clearInterval(t.sb.globalTimer);var r=ge.of(t.sb._iid),a=function(){o.cachedChannels&&Object.keys(o.cachedChannels).forEach(function(e){var n=o.cachedChannels[e];n.invalidateTypingStatus()&&(Object.keys(t.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onTypingStatusUpdated(n)}),r.send({source:de.EVENT_TYPING_STATUS_UPDATED,payload:{channel:n}}))})};a(),t.sb.globalTimer=setInterval(function(){return a()},1e3),t.flushConnectionCallbacks(null,n),t.sb.ConnectionManager.processAllReadyHandler(null)}},u.onOpen=function(){t.connectCount=0,t.sb.loginTimer=setTimeout(function(){t.sb.loginTimer=null,t.sb.onLoginTimerCancel=null,t.flushConnectionCallbacks(new F("Connection timeout.",F.LOGIN_TIMEOUT),null),t.sb.disconnect(null)},t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=function(){t.connectCount=0,t.flushConnectionCallbacks(new F("Connection has been canceled.",F.REQUEST_FAILED),null)},t.sb.connecting=!1},u.onError=function(r){if(X.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),a.sessionKey)t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0),t.sb.connecting=!1;else if(t.connectCount<t.connectParams.retryCount)t.connectCount++,t.client.connect(e,n,l);else{var i=r?r.message:"Unknown error occurred.";t.connectCount=0,t.flushConnectionCallbacks(new F("Websocket connection failed. ".concat(i),F.WEBSOCKET_CONNECTION_FAILED),null),t.sb.connecting=!1}},u.onClose=function(){X.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),t.connectCount=0,t.sb.connecting=!1},i.checkRouting(function(r,a){if(r)return t.sb.connecting=!1,void t.flushConnectionCallbacks(new F("Connection routing failed.",F.REQUEST_FAILED),null);l=a.wsHost,i.dummyCall(function(e){e&&X.error("API dummy call failed:",e)}),t.client.connect(e,n,l)})}},{key:"reconnect",value:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=R.get(this.sb._iid),a=r.container,i=a.auth,s=a.apiClient,o=a.commandHandler,l=a.ackStateMap,u=a.sessionManager,c=this.cls.OpenChannel;if(this.sb.connecting=!1,this.sb.reconnecting=!0,this.sb.reconnectTimer)X.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(t){Object.keys(l).forEach(function(e){var n=l[e];n&&(clearTimeout(n.timer),(0,n.handler)(new F("Command received no ack.",F.ACK_TIMEOUT),null)),delete l[e]});var d=fe.of(this.sb._iid);d.invokeDisconnect(),Object.keys(this.sb.connectionHandlers).forEach(function(e){n.sb.connectionHandlers[e].onReconnectStarted()})}this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!i.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount)return this.disconnect({clearSession:!1,err:new F("Websocket connection failed with a number of retries.",F.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,Object.keys(this.sb.connectionHandlers).forEach(function(e){n.sb.connectionHandlers[e].onReconnectFailed()}),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler();this.sb.onReconnectTimerCancel=function(){n.reconnectCount=0},this.sb.reconnectTimer=setTimeout(function(){n.sb.reconnectTimer=null,n.sb.onReconnectTimerCancel=null,n.client&&n.client.disconnect(!0);var t=new ce.ConnectionHandler;n.client=new ce(n.sb,t),n.sb.loginHandler=function(t,r){t?u.isSessionError(t)?u.refreshSessionIfExpiredError(t).then(function(){clearTimeout(n.sb.reconnectTimer),n.sb.reconnectTimer=null,n.reconnectCount=0,n.reconnect(e,!1)}).catch(function(){}):(clearTimeout(n.sb.reconnectTimer),n.sb.reconnectTimer=null,n.reconnect(e,!1)):(n.reconnectCount=0,n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.isReconnectingOnError=!1,fe.of(n.sb._iid).invokeConnect(),Object.keys(n.sb.connectionHandlers).forEach(function(e){n.sb.connectionHandlers[e].onReconnectSucceeded()}),n.sb.ConnectionManager.processAllReadyHandler(null),n.sb.isReconnectingOnError&&Object.keys(n.sb.ConnectionManager.networkHandlers).forEach(function(e){n.sb.ConnectionManager.networkHandlers[e].onReconnected()}),Object.keys(c.enteredChannels).forEach(function(e){c.enteredChannels[e].enter(function(t,r){if(t){var a=n.cls.FileMessageQueue;delete c.enteredChannels[e],a.delete(e)}})}))},t.onOpen=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),n.sb.loginTimer=setTimeout(function(){X.debug("Reconnect: `loginTimer` timeout."),n.sb.loginTimer=null,n.reconnect(e,!0)},n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=null},t.onMessage=function(e){o.onRawCommandReceived(e)},t.onError=function(t){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",t),n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0)},t.onClose=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),n.sb.reconnecting=!1},s.checkRouting(function(t,r){t?n.reconnect(e,!0):(n.sb.getCurrentApiHost()!==r.apiHost&&s.get("/",null,function(){}),n.client.connect(e,null,r.wsHost))})},this.reconnectDelay)}}},{key:"disconnect",value:function(e,n){var t=R.get(this.sb._iid),r=t.container.ackStateMap,a=this.cls,i=a.GroupChannel,s=a.OpenChannel,o=e.clearSession,l=e.err;this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),Object.keys(r).forEach(function(e){var n=r[e];n&&(clearTimeout(n.timer),(0,n.handler)(new F("WebSocket connection must be made first.",F.WEBSOCKET_CONNECTION_CLOSED),null))}),t.set("ackStateMap",{}),o&&(s.clearEnteredChannels(),s.clearCache(),i.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),this.sb.currentUser=null,t.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),t.set("auth",new H)),l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),n&&n(null,null)}},{key:"flushConnectionCallbacks",value:function(e,n){var t=this,r=R.get(this.sb._iid).container,a=r.store,i=r.localCacheEnabled,s=this.sb.connectionCallbacks;if(this.sb.connectionCallbacks=[],e)if(i){var o=this.sb._getCurrentUserDataKey();se.isNonAutoReconnectableError(e.code)?a.remove(o).catch(function(e){return X.debug("Sendbird connect store remove error: ",e)}).finally(function(){return s.forEach(function(n){return n(e,null)})}):a.get(o).then(function(e){t.sb._populateVaultFromCurrentUserData(e)}).catch(function(e){X.debug("Sendbird connect store fetch error: ",e)}).finally(function(){t.sb.currentUser?s.forEach(function(n){return n(e,t.sb.currentUser)}):s.forEach(function(n){return n(e,null)})})}else s.forEach(function(n){return n(e,null)});else fe.of(this.sb._iid).invokeConnect(),i?a.set({key:this.sb._getCurrentUserDataKey(),value:this._createCurrentUserData(n),generation:1}).catch(function(e){return X.debug("Sendbird connect store write error: ",e)}).finally(function(){return s.forEach(function(e){return e(null,t.sb.currentUser)})}):s.forEach(function(e){return e(null,n)})}},{key:"_createCurrentUserData",value:function(e){var n=R.get(this.sb._iid).container,t=n.auth,r=n.maxUnreadCountOfSuperGroupChannel,a=n.profileImageEncryption,i=n.appInfo,s=n.connectedAt,o=n.firstConnectedAt,l=n.concurrentCallLimit,u=n.backOffDelay,c={currentUser:(e||this.sb.currentUser).serialize(),maxUnreadCountOfSuperGroupChannel:w.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,profileImageEncryption:!1};return t.sessionKey&&(c.sessionKey=t.sessionKey),t.eKey&&(c.eKey=t.eKey),r&&(c.maxUnreadCountOfSuperGroupChannel=r),a&&(c.profileImageEncryption=a),i&&(c.appInfo=i._objectify()),s&&o&&(c.connectedAt=s,c.firstConnectedAt=o),l&&u&&(c.concurrentCallLimit=l,c.backOffDelay=u),c}}]),e}(),ye=function(){function e(n){var t=n.type,r=n.nullable,a=void 0!==r&&r,i=n.optional,s=void 0!==i&&i,o=n.optionalIf,l=void 0===o?null:o,u=n.ignoreIf,c=void 0===u?null:u,d=n.defaultValue,h=void 0===d?null:d,p=n.constraint,m=void 0===p?null:p;f(this,e),this.type=t,this.nullable=a,this.optional=s,this.optionalIf=l,this.ignoreIf=c,this.defaultValue=h,this.constraint=m}return m(e,[{key:"isMatchingType",value:function(e){var n=function(n,t){return"string"==typeof t?h(n)===t||"array"===t&&Array.isArray(n)||"file"===t&&se.isFile(n)||"null"===t&&null===n||"date"===t&&n instanceof Date:"function"==typeof t?n instanceof t:"object"===h(t)&&Object.keys(t).map(function(e){return t[e]}).indexOf(e)>-1};return n(e,this.type)||Array.isArray(this.type)&&this.type.some(function(t){return n(e,t)})||this.nullable&&null===e}}],[{key:"parse",value:function(n,t){for(n=e.toArray(n);n.length>0&&void 0===n[n.length-1];)n.pop();var r=!1,a=null;"callback"===t[t.length-1].type&&("function"==typeof n[n.length-1]&&(a=n.pop()),t.pop(),r=!0);var i=[],s=null,o=0;return t.forEach(function(t){"function"==typeof t.ignoreIf&&t.ignoreIf(n)?i.push(t.hasOwnProperty("defaultValue")?t.defaultValue:null):t.isMatchingType(n[o])?(t.nullable&&null===n[o]||!t.constraint||t.constraint(n[o])||(s=e.error),i.push(n[o]),o++):t.optional||"function"==typeof t.optionalIf&&t.optionalIf(n)?i.push(t.hasOwnProperty("defaultValue")?t.defaultValue:null):(s=e.error,i.push(n[o]),o++)}),r&&a&&i.push(a),n.length!==o&&(s=e.error),[s].concat(i)}},{key:"error",get:function(){return new F("Invalid parameter.",F.INVALID_PARAMETER)}},{key:"toArray",value:function(e){for(var n=[],t=0;t<e.length;t++)n.push(e[t]);return n}}]),e}(),ve=function(){function e(n){f(this,e),this.sb=n,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return m(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=R.get(this.sb._iid),r=t.container,a=r.auth,i=r.isInBackground;n&&a.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||i||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var n=this.sb.currentUser,t=this.readyHandlers;this.readyHandlers=[],t.forEach(function(t){t&&"function"==typeof t&&t(e,n)})}}},{key:"errorAllReadyHandler",value:function(){var e=R.get(this.sb._iid).container.auth;this.processAllReadyHandler(e&&e.hasSession()?new F("WebSocket connection must be made first.",F.WEBSOCKET_CONNECTION_CLOSED):new F("Connection should be made first.",F.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,n){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers[e]=n}},{key:"removeNetworkHandler",value:function(e){X.warn("`ConnectionManager` will be deprecated."),delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers={}}},{key:"authenticate",value:function(e){var n=this;if(X.warn("`ConnectionManager` will be deprecated."),this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var t=setTimeout(function(){t=null,n.authCount--,0===n.authCount&&0===n.sb.connectionCallbacks.length&&(n.sb.connecting=!1),n.errorAllReadyHandler(),e(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)},this.authenticateTimer);this.authInfoRequester(function(r){if(t){clearTimeout(t),t=null,n.authCount--;var a=function(t,r){n.sb.connecting=!1,e(t,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?n.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,a):n.sb.connect(r.userId,r.accessToken,a):r.apiHost&&r.wsHost?n.sb.connect(r.userId,r.apiHost,r.wsHost,a):n.sb.connect(r.userId,a):e(ye.error,null)}})}else e(ye.error,null)}}]),e}(),Ee=function(){this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,n){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},be=function(){function e(){f(this,e),this.handler=null,this.resolvers=[]}return m(e,[{key:"_refreshSessionToken",value:function(){var n=this;return new Promise(function(t,r){var a=null,i=function(){a&&(clearTimeout(a),a=null)},s=function(){a&&(i(),r(e.sessionTokenRequestFailedError))};a=setTimeout(function(){return s()},3e4),n.handler.onSessionTokenRequired(function(e){a&&(i(),t(e))},s)})}},{key:"_refreshSessionKey",value:function(){var n=this;return new Promise(function(t,r){var a=R.get(n._iid).container,i=a.auth,s=a.wsAdapter;i.sessionToken?s.isConnected?n._refreshSessionKeyByCommand().then(function(){return t()}).catch(function(e){e.isSessionTokenExpiredError?r(e):n._refreshSessionKeyByApi().then(function(){return t()}).catch(function(e){return r(e)})}):n._refreshSessionKeyByApi().then(function(){return t()}).catch(function(e){return r(e)}):r(e.sessionTokenNotFoundError)})}},{key:"_refreshSessionKeyByCommand",value:function(){var n=this;return new Promise(function(t,r){var a=Ma.getInstance(n._iid),i=R.get(n._iid).container.auth,s=j.get(n._iid).Command,o=s.bSessionRefresh({token:i.sessionToken,requestId:s.generateRequestId()});a.sendCommand(o,function(n,s){if(!a.getErrorFirstCallback()){var o=[n,s];s=o[0],n=o[1]}n?r(n):s?s.hasOwnProperty("error")?r(e.sessionKeyRefreshFailedError):(s.hasOwnProperty("new_key")&&(i.sessionKey=s.new_key),t()):r(e.sessionKeyRefreshFailedError)})})}},{key:"_refreshSessionKeyByApi",value:function(){var n=this;return new Promise(function(t,r){!function a(i){if(i<3){var s=R.get(n._iid).container,o=s.auth,l=s.apiClient,u={};o.sessionToken&&(u.accessToken=o.sessionToken),l.refreshSessionKey(u,function(e,n){if(e)e.isSessionTokenExpiredError||e.isSessionTokenRevokedError?r(e):a(i+1);else{var s=n.key;o.sessionKey=s,t()}})}else r(e.sessionKeyRefreshFailedError)}(0)})}},{key:"_handleSessionToken",value:function(n){var t=this;n?(R.get(this._iid).container.auth.sessionToken=n,this._refreshSessionKey().then(function(){return t._handleSessionRefreshSuccess()}).catch(function(){return t._handleSessionRefreshError(e.sessionTokenRequestFailedError)})):this._handleSessionClosed(e.sessionTokenRequestFailedError)}},{key:"_handleSessionRefreshSuccess",value:function(){this.handler.onSessionRefreshed(),this._flushResolvers(null)}},{key:"_handleSessionRefreshError",value:function(e){this._cancelConnection(),this.handler.onSessionError(e),this._flushResolvers(e)}},{key:"_handleSessionClosed",value:function(e){this._cancelConnection(),this.handler.onSessionClosed(),this._flushResolvers(e)}},{key:"_cancelConnection",value:function(){var e=Ma.getInstance(this._iid);e.reconnecting&&(Object.keys(e.connectionHandlers).forEach(function(n){e.connectionHandlers[n].onReconnectFailed()}),e.reconnecting=!1),e.disconnect()}},{key:"_flushResolvers",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=0;t<this.resolvers.length;t++)e?this.resolvers[t].reject(e):this.resolvers[t].resolve(n);this.resolvers=[]}},{key:"setHandler",value:function(e){e instanceof Ee&&(this.handler=e)}},{key:"isSessionError",value:function(e){return e.isSessionTokenExpiredError||e.isSessionTokenRevokedError||e.isSessionKeyExpiredError}},{key:"refreshSessionToken",value:function(){var n=this;return new Promise(function(t,r){n.handler?(n.resolvers.push({resolve:t,reject:r}),1===n.resolvers.length&&n._refreshSessionToken().then(function(e){return n._handleSessionToken(e)}).catch(function(){return n._handleSessionRefreshError(e.sessionTokenRequestFailedError)})):t()})}},{key:"refreshSessionKey",value:function(){var e=this;return new Promise(function(n,t){e.handler?(e.resolvers.push({resolve:n,reject:t}),1===e.resolvers.length&&e._refreshSessionKey().then(function(){return e._handleSessionRefreshSuccess()}).catch(function(n){n.isSessionTokenExpiredError?e._refreshSessionToken().then(function(n){return e._handleSessionToken(n)}).catch(function(n){return e._handleSessionRefreshError(n)}):n.isSessionTokenRevokedError?e._handleSessionClosed(n):e._handleSessionRefreshError(n)})):n()})}},{key:"refreshSessionIfExpiredError",value:function(e){var n=this;return e.isSessionTokenExpiredError?this.refreshSessionToken():e.isSessionKeyExpiredError?this.refreshSessionKey():e.isSessionTokenRevokedError?new Promise(function(e,t){return t(n.closeSession())}):Promise.reject(e)}},{key:"closeSession",value:function(){var n=e.sessionTokenRequestFailedError;return this._handleSessionClosed(n),n}}],[{key:"sessionTokenNotFoundError",get:function(){return new F("Session token is not found.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionTokenExpiredError",get:function(){return new F("Session token is expired.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionKeyRefreshFailedError",get:function(){return new F("Failed to refresh the session key.",F.SESSION_KEY_REFRESH_FAILED)}},{key:"sessionTokenRequestFailedError",get:function(){return new F("Failed to get the session token.",F.SESSION_TOKEN_REQUEST_FAILED)}}]),e}(),Ce=function(){function e(e){var n=this;this.sb=e,this.unsubscribes=[],this.isOnline=!1,this.onlineWorker=function(){n.isOnline=!0;var e=R.get(n.sb._iid).container.auth;n.sb.reconnecting||n.sb.connecting||!e.sessionKey||n.sb.getConnectionState()===n.sb.ConnectionState.OPEN||n.sb.reconnect()},this.offlineWorker=function(){n.isOnline=!1,n.sb.setIsProcessingAutoResend(!1);var e=R.get(n.sb._iid).container,t=e.auth,r=e.pinger;n.sb.reconnecting||n.sb.connecting||!t.sessionKey||(r&&r.stop(),n.sb.reconnect())},this.onlineListener=function(e){try{if("undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}return function(){}},this.offlineListener=function(e){try{if("undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}return function(){}},this.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(n.onlineListener=e)},this.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(n.offlineListener=e)},this.sb=e,"undefined"!=typeof window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(this.isOnline=window.navigator.onLine)}return e.prototype.start=function(){this.unsubscribes=[this.onlineListener(this.onlineWorker),this.offlineListener(this.offlineWorker)]},e.prototype.stop=function(){this.unsubscribes.forEach(function(e){try{null==e||e()}catch(e){}})},e}(),Ne=(new Date).getTime(),Se=function(){function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(f(this,e),this.command=n,this.requestId=r,arguments.length){case 1:if(!n||n.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(n),this.isRequestIdCommand){var a=this.getJsonElement();a&&(this.requestId=a.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),t.req_id=this.requestId||"",this.payload=JSON.stringify(t)}}return m(e,[{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"LOGI"===this.command||"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}},{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token,expiring_session:1},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var n=e.channelUrl,t=e.message,r=e.data,a=e.customType,i=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,l=e.mentionedMessageTemplate,u=e.translationTargetLanguages,c=e.pushNotificationDeliveryOption,d=e.appleCriticalAlertOptions,h=e.requestId,f=void 0===h?null:h,p=e.silent,m=void 0!==p&&p,g=e.rootMessageId,_=void 0===g?null:g,y=e.parentMessageId,v=void 0===y?null:y,E=e.isReplyToChannel,b=void 0!==E&&E,C=j.get(this._iid),N=C.UserMessageParams,S=C.BaseMessageParams,O={};return O.channel_url=n,O.message=t,O.data=r,i&&i.length>0&&(O.metaarray=i.map(function(e){return e.encode()})),s&&(O.mention_type=s),O.mentioned_user_ids=[],s===S.MentionType.CHANNEL?O.mentioned_user_ids=[]:Array.isArray(o)&&o.length>0&&(O.mentioned_user_ids=o),l&&(O.mentioned_message_template=l),a&&(O.custom_type=a),u&&u.length>0&&(O.target_langs=u),c&&c!==N.PushNotificationDeliveryOption.DEFAULT&&(O.push_option=c),d&&(O.apple_critical_alert_options=d.serialize()),m&&(O.silent=m),_&&(O.root_message_id=_),v&&(O.parent_message_id=v),b&&(O.reply_to_channel=b),new this("MESG",O,f)}},{key:"bFile",value:function(e){var n=e.channelUrl,t=e.url,r=e.name,a=e.type,i=e.size,s=e.data,o=e.customType,l=e.thumbnailSizes,u=e.requireAuth,c=e.metaArrays,d=e.mentionType,h=e.mentionedUserIds,f=e.pushNotificationDeliveryOption,p=e.appleCriticalAlertOptions,m=e.requestId,g=void 0===m?null:m,_=e.silent,y=void 0!==_&&_,v=e.rootMessageId,E=void 0===v?null:v,b=e.parentMessageId,C=void 0===b?null:b,N=e.isReplyToChannel,S=void 0!==N&&N,O=j.get(this._iid),T=O.BaseMessageParams,A=O.FileMessageParams,w={};return w.channel_url=n,w.url=t,w.name=r||"",w.type=a||"",w.size=i||0,w.custom=s,o&&(w.custom_type=o),l&&(w.thumbnails=l),u&&(w.require_auth=u),c&&c.length>0&&(w.metaarray=c.map(function(e){return e.encode()})),d&&(w.mention_type=d),w.mentioned_user_ids=[],d===T.MentionType.CHANNEL?w.mentioned_user_ids=[]:Array.isArray(h)&&h.length>0&&(w.mentioned_user_ids=h),f&&f!==A.PushNotificationDeliveryOption.DEFAULT&&(w.push_option=f),p&&(w.apple_critical_alert_options=p.serialize()),y&&(w.silent=y),E&&(w.root_message_id=E),C&&(w.parent_message_id=C),S&&(w.reply_to_channel=S),new this("FILE",w,g)}},{key:"bUpdateUserMessage",value:function(e){var n=e.channelUrl,t=e.messageId,r=e.appleCriticalAlertOptions,a=e.message,i=void 0===a?null:a,s=e.data,o=void 0===s?null:s,l=e.customType,u=void 0===l?null:l,c=e.mentionType,d=void 0===c?null:c,h=e.mentionedUserIds,f=void 0===h?null:h,p=e.mentionedMessageTemplate,m=void 0===p?null:p,g=e.metaArrayParams,_=void 0===g?null:g,y=j.get(this._iid).BaseMessageParams,v={};return v.channel_url=n,v.msg_id=t,null!=i&&void 0!==i&&(v.message=i),null!=o&&void 0!==o&&(v.data=o),null!=u&&void 0!==u&&(v.custom_type=u),d&&(v.mention_type=d),d===y.MentionType.CHANNEL?v.mentioned_user_ids=[]:Array.isArray(f)&&f.length>=0&&(v.mentioned_user_ids=f),m&&(v.mentioned_message_template=m),_&&(v.metaarray=_),r&&(v.apple_critical_alert_options=r.serialize()),new this("MEDI",v)}},{key:"bUpdateFileMessage",value:function(e){var n=e.channelUrl,t=e.messageId,r=e.appleCriticalAlertOptions,a=e.data,i=void 0===a?null:a,s=e.customType,o=void 0===s?null:s,l=e.mentionType,u=void 0===l?null:l,c=e.mentionedUserIds,d=void 0===c?null:c,h=e.metaArrayParams,f=void 0===h?null:h,p=j.get(this._iid).BaseMessageParams,m={};return m.channel_url=n,m.msg_id=t,null!=i&&void 0!==i&&(m.data=i),null!=o&&void 0!==o&&(m.custom_type=o),u&&(m.mention_type=u),u===p.MentionType.CHANNEL?m.mentioned_user_ids=[]:Array.isArray(d)&&d.length>=0&&(m.mentioned_user_ids=d),f&&(m.metaarray=f),r&&(m.apple_critical_alert_options=r.serialize()),new this("FEDI",m)}},{key:"bRead",value:function(e){var n=e.channelUrl,t={};return t.channel_url=n,new this("READ",t)}},{key:"bMessageAck",value:function(e){var n=e.channelUrl,t=e.messageId,r={};return r.channel_url=n,r.msg_id=t,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var n=e.channelUrl,t=e.time,r={};return r.channel_url=n,r.time=t,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var n=e.channelUrl,t=e.time,r={};return r.channel_url=n,r.time=t,new this("TPEN",r)}},{key:"bEnter",value:function(e){var n=e.channelUrl,t={};return t.channel_url=n,new this("ENTR",t)}},{key:"bExit",value:function(e){var n=e.channelUrl,t={};return t.channel_url=n,new this("EXIT",t)}},{key:"generateRequestId",value:function(){return String(++Ne)}}]),e}(),Oe=1048576,Te=function(){function e(e){void 0===e&&(e={}),this._emojiHash=e.emoji_hash||"",this._uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*Oe:Number.MAX_VALUE,this._useReaction=!!e.use_reaction,this._applicationAttributes=e.application_attributes||[],this._premiumFeatureList=e.premium_feature_list||[],this._disableSupergroupMack=e.disable_supergroup_mack||!1}return Object.defineProperty(e.prototype,"emojiHash",{get:function(){return this._emojiHash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploadSizeLimit",{get:function(){return this._uploadSizeLimit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingReaction",{get:function(){return this._useReaction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationAttributes",{get:function(){return this._applicationAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premiumFeatureList",{get:function(){return this._premiumFeatureList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupergroupMackDisabled",{get:function(){return this._disableSupergroupMack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabledChannelMemberShipHistory",{get:function(){return this._applicationAttributes.includes("channel_membership_history")},enumerable:!1,configurable:!0}),e.prototype._objectify=function(){var e={};return e.emoji_hash=this._emojiHash,this._uploadSizeLimit!==Number.MAX_VALUE&&(e.file_upload_size_limit=this._uploadSizeLimit/Oe),e.use_reaction=this._useReaction,e.application_attributes=this._applicationAttributes,e.premium_feature_list=this._premiumFeatureList,e.disable_supergroup_mack=this._disableSupergroupMack,e},e}(),Ae=function(){function e(e){this._source=e}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),e}(),we=function(e){return L(void 0,void 0,void 0,function(){return P(this,function(n){return[2,new Promise(function(n){return setTimeout(n,e)})]})})},Ie=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===n?t:3&t|8).toString(16)})},Re=new Map,ke=new Map,Me=function(){function e(n){var t=n.key,r=n.concurrentCallLimit,a=void 0===r?2:r,i=n.backOffDelay,s=void 0===i?0:i;this._holdersKey=e.createSemaphoreHoldersKey(t),this._resolversKey=e.createSemaphoreResolversKey(t),this._numLocks=a,this._backOffDelay=s,this.holders||(this.holders=[]),this.resolvers||(this.resolvers=[])}return e.createSemaphoreHoldersKey=function(e){return"collection@semaphore_holders_for:"+e},e.createSemaphoreResolversKey=function(e){return"collection@semaphore_resolvers_for:"+e},e.createChainProcessStateKey=function(e){return"collection@semaphore_chain_process_state_for:"+e},Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){return this._numLocks-this.holders.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolvers",{get:function(){return ke[this._resolversKey]},set:function(e){ke[this._resolversKey]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"holders",{get:function(){return Re[this._holdersKey]},set:function(e){Re[this._holdersKey]=e},enumerable:!1,configurable:!0}),e.prototype.tryObtainLock=function(){this.numLocksAvailable>0&&this.resolvers.length>0&&this.giveLockToFirstResolver()},e.prototype.giveLockToFirstResolver=function(){var e=this.resolvers.shift();this.holders=D(D([],this.holders,!0),[e.key],!1),e.resolver(e.key)},e.prototype.queueForLock=function(){return L(this,void 0,void 0,function(){var e=this;return P(this,function(n){return[2,new Promise(function(n){var t={key:Ie(),resolver:function(e){return n(e)}};e.resolvers.push(t),e.tryObtainLock()})]})})},e.prototype.releaseLock=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return(n=this.holders.indexOf(e))>=0?(this.holders.splice(n,1),[4,we(this._backOffDelay)]):[3,2];case 1:t.sent(),this.tryObtainLock(),t.label=2;case 2:return[2]}})})},e}();!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(pe||(pe={}));var Ue,Le=function(){},Pe=function(){function e(e,n,t,r){void 0===t&&(t=2),void 0===r&&(r=10),this._worker=null,this._state=pe.IDLE,this._retryCount=0,this._retryLimit=3,this._isPaused=!1,this.onProgress=Le,this.onStop=Le,this.onError=Le,this.onEnd=Le,this._key=e,this._worker=n,this._semaphore=new Me({key:e,concurrentCallLimit:t,backOffDelay:r})}return Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._state===pe.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._state===pe.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDone",{get:function(){return this._state===pe.END},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,n){return void 0===n&&(n=!1),this._isPaused=!1,this.isDone&&n&&(this._state=pe.IDLE),this.run(e)},e.prototype.run=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return this._isPaused||!this.isIdle?[3,5]:(n=this,[4,this._semaphore.queueForLock()]);case 1:n._key=a.sent(),this._state=pe.RUNNING,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this._worker(e)];case 3:return t=a.sent(),this._retryCount=0,this.onProgress(t),t.hasNext?(this._state=pe.IDLE,this._isPaused?(this._semaphore.releaseLock(this._key),this.onStop()):(this.run(t.nextParams),this._semaphore.releaseLock(this._key))):(this._state=pe.END,this._semaphore.releaseLock(this._key),this.onEnd(),this._isPaused&&this.onStop()),[3,5];case 4:return r=a.sent(),X.warn("Collection sync run error: ",r),this._state=pe.IDLE,this._semaphore.releaseLock(this._key),this.onError(r),this._retryCount<this._retryLimit?(this._retryCount++,X.debug("Failed collection sync retry count: ",this._retryCount),this.run(e)):(X.debug("Failed collection sync all retries failed."),this.stop(),this.onStop()),[3,5];case 5:return[2]}})})},e.prototype.stop=function(){this._isPaused=!0},e}(),De=function(){function e(e){var n=e.top,t=e.bottom;this.top=n,this.bottom=t}return e.prototype.include=function(e){return this.top<=e&&e<=this.bottom},e.prototype.overlap=function(e){return this.include(e.top)||this.include(e.bottom)},e}(),xe={},Fe=function(){function e(e){var n=e.iid,t=e.limit,r=void 0===t?We:t,a=this;this._token="",this._sync=null,this._syncRange=new De({top:Number.MAX_SAFE_INTEGER,bottom:0}),this._completed=!1,this._pkIndex=Date.now(),this._iid=n,this._limit=r;var i=j.get(this._iid).GroupChannel,s=R.get(this._iid),o=s.get("currentUserId"),l=s.get("apiClient"),u=s.get("store"),c=Ze.of(this._iid),d=ge.of(this._iid),h="sendbird:".concat(o,"@groupchannel/sync");this._sync=new Pe(h,function(e){return L(a,void 0,void 0,function(){var e,n,t,r,a,s,o=this;return P(this,function(f){switch(f.label){case 0:return e={hasNext:!0,nextParams:""},[4,u.get(h)];case 1:if((n=f.sent())&&n.completed)return[3,10];n&&(this._token=n.token,this._syncRange=n.range,this._pkIndex=n.primaryKeyIndex),t={token:this._token,limit:this._limit,includeEmpty:!0,order:"chronological"},f.label=2;case 2:return f.trys.push([2,6,,9]),[4,l.loadGroupChannelList(t)];case 3:return r=f.sent(),a=r.channels.map(function(e){return r.ts&&(e.ts=r.ts),e.cached_primary_key=o._pkIndex--,i.upsert(e)}),this._syncRange.top=Math.min(this._syncRange.top,Math.min.apply(Math,a.map(function(e){return e.createdAt}))),this._syncRange.bottom=Math.max(this._syncRange.bottom,Math.max.apply(Math,a.map(function(e){return e.createdAt}))),e.hasNext=a.length>=this._limit,e.nextParams=this._token=r.next,this._token||(e.hasNext=!1),this._completed=!e.hasNext,X.debug("Group channel collection background sync fetched channels count: ",a.length),[4,c.upsert(a)];case 4:return f.sent(),[4,u.set({key:h,value:{token:this._token,range:this._syncRange,completed:this._completed,primaryKeyIndex:this._pkIndex},generation:1})];case 5:return f.sent(),s={source:de.CHANNEL_BACKGROUND,payload:{channels:a}},d.send(s),[3,9];case 6:return f.sent().isInvalidTokenError?[4,u.remove(h)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,9];case 9:return[3,11];case 10:X.debug("Group channel collection background sync has finished."),e.hasNext=!1,f.label=11;case 11:return[2,e]}})})})}return e.of=function(n,t){return void 0===t&&(t=We),xe[n]||(xe[n]=new e({iid:n,limit:t})),xe[n]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Group channel collection background sync has resumed."),this._sync.resume("")},e.prototype.pause=function(){X.debug("Group channel collection background sync has paused."),this._sync.stop()},e}(),He={},Ge=function(){function e(e){var n=e.iid,t=this;this._token=0,this._sync=null,this._pkIndex=Date.now(),this._iid=n;var r=j.get(this._iid).GroupChannel,a=R.get(this._iid);this._token=a.get("firstConnectedAt")/1e3;var i=a.get("currentUserId"),s=a.get("store"),o=a.get("apiClient"),l=a.container.localCacheEnabled,u=Ze.of(this._iid),c=ge.of(this._iid),d="sendbird:".concat(i,"@groupchannel/changelogs");this._sync=new Pe(d,function(e){return L(t,void 0,void 0,function(){var e,n,t,a,i,h,f,p,m=this;return P(this,function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:""},l?[4,s.get(d)]:[3,2];case 1:return t=g.sent(),[3,3];case 2:t=null,g.label=3;case 3:(n=t)&&(this._token=n.token,this._pkIndex=n.primaryKeyIndex),a={},"number"==typeof this._token?a.ts=this._token:a.token=this._token,g.label=4;case 4:return g.trys.push([4,10,,13]),[4,o.getMyGroupChannelChangeLogs(a)];case 5:return i=g.sent(),h={updatedChannels:i.updated.map(function(e){return e.cached_primary_key=m._pkIndex--,r.upsert(e)}),deletedChannelUrls:i.deleted},e.hasNext=i.has_more,(h.updatedChannels.length>0||h.deletedChannelUrls.length>0)&&(e.nextParams=this._token=i.next),X.debug("Group channel collection changelog sync update channels count: ",h.updatedChannels.length),X.debug("Group channel collection changelog sync deleted channel urls count: ",h.deletedChannelUrls.length),l?[4,u.upsert(h.updatedChannels)]:[3,9];case 6:return g.sent(),[4,u.remove(h.deletedChannelUrls)];case 7:return g.sent(),[4,s.set({key:d,value:{token:this._token,primaryKeyIndex:this._pkIndex},generation:1})];case 8:g.sent(),g.label=9;case 9:return f={source:de.CHANNEL_CHANGELOG,payload:h},c.send(f),[2,e];case 10:return(p=g.sent()).isInvalidTokenError?[4,s.remove(d)]:[3,12];case 11:g.sent(),g.label=12;case 12:throw p;case 13:return[2]}})})})}return e.of=function(n){return He[n]||(He[n]=new e({iid:n})),He[n]},e.prototype.resume=function(){X.debug("Group channel collection changelog sync has resumed."),this._sync.resume(0,!0)},e.prototype.pause=function(){X.debug("Group channel collection changelog sync has paused."),this._sync.stop()},e}(),je=function(e,n){for(var t=0;t<e.length;t++)if(e[t].url===n.url)return t;return-1},Be=function(e,n,t){if(e.length>0){for(var r=0,a=e.length-1,i=Math.floor((r+a)/2);r<a;){var s=Ve(e[i],n,t);if(s>0)a=i,i=Math.floor((r+a)/2);else{if(!(s<0))return i;r=i+1,i=Math.floor((r+a)/2)}}return Ve(e[i],n,t)>0?i:i+1}return e.length},ze=function(e,n){return n-e},Ve=function(e,n,t){switch(t){case Ue.LATEST_LAST_MESSAGE:if(e.lastMessage&&!n.lastMessage)return-1;if(!e.lastMessage&&n.lastMessage)return 1;if(e.lastMessage&&n.lastMessage){var r=e.lastMessage.createdAt;if(0===(i=n.lastMessage.createdAt-r)){var a=e.createdAt;0===(i=n.createdAt-a)&&(i=ze(e.cachedPrimaryKey,n.cachedPrimaryKey))}return i}return r=e.createdAt,0===(i=n.createdAt-r)&&(i=ze(e.cachedPrimaryKey,n.cachedPrimaryKey)),i;case Ue.CHRONOLOGICAL:return 0===(i=n.createdAt-e.createdAt)&&(i=ze(e.cachedPrimaryKey,n.cachedPrimaryKey)),i;case Ue.CHANNEL_NAME_ALPHABETICAL:var i;return 0===(i=e.name.localeCompare(n.name))&&(i=ze(e.cachedPrimaryKey,n.cachedPrimaryKey)),i}},qe=function(){},Ke={NAME_ALPHABETICAL:["name","-pk"],CHRONOLOGICAL:["-createdAt","-pk"],LATEST_LAST_MESSAGE:["-lastMessageCreatedAt","-createdAt","-pk"]},Ye={LATEST:["channelUrl","-createdAt","-messageId"],LATEST_UNSENT:["channelUrl","sendingStatus","createdAt"],CHILD_MESSAGE_FIRST:["channelUrl","-parentMessageId","-createdAt"]},Qe=function(){function e(){}return e.prototype.isNetworkConnected=function(){return!("undefined"==typeof navigator||!navigator.onLine)},e.ready=function(){return L(this,void 0,void 0,function(){return P(this,function(e){return"undefined"!=typeof navigator&&navigator&&"boolean"==typeof navigator.onLine?[2,navigator.onLine]:[2,new Promise(function(e,n){o.default.get("https://www.google.com").then(function(){return e(!0)}).catch(function(){return e(!1)})})]})})},e}(),We=40;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical"}(Ue||(Ue={}));var Je,Xe=function(){function e(e){var n=e.iid,t=e.filter,r=e.order,a=e.limit,i=void 0===a?20:a,s=this;this._channels=[],this._token=null,this._hasMore=!0,this._iid=n,this._filter=t,this._order=r,this._limit=i,this._syncLimit=Math.max(i,We),this._eventObserver={onevent:function(e){return L(s,void 0,void 0,function(){return P(this,function(n){return[2,this._handleEvent(e)]})})}},this._eventHandler={onChannelsAdded:qe,onChannelsUpdated:qe,onChannelsDeleted:qe};var o=R.get(this._iid);this._localCacheEnabled=o.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=Fe.of(this._iid,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=Ge.of(this._iid),this._changelogSync.resume(),ge.of(this._iid).addObserver(this._eventObserver),this._connectionStateObserver={onConnect:function(){s._localCacheEnabled&&s._backgroundSync.resume(),s._changelogSync.resume()},onDisconnect:function(){return L(s,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,Qe.ready()];case 1:return e.sent()||(this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}})})}},fe.of(this._iid).addObserver(this._connectionStateObserver)}return e.prototype._handleEvent=function(e){var n=this,t=e.source,r=e.payload,a=R.get(this._iid),i=new Ae(t);switch(t){case de.CHANNEL_BACKGROUND:break;case de.CHANNEL_CHANGELOG:var s=r,o=s.updatedChannels,l=s.deletedChannelUrls,u=o.filter(function(e){return n._filter.match(e)});this._addChannelsToView(u,{context:i}),this._removeChannelsFromView(l,{context:i});break;case de.EVENT_USER_DECLINED_INVITATION:var c=a.get("currentUserId"),d=r,h=d.channel;d.invitee.userId===c?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_USER_LEFT:c=a.get("currentUserId");var f=r;h=f.channel,f.user.userId===c?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_USER_BANNED:case de.EVENT_USER_UNBANNED:break;case de.EVENT_USER_MUTED:case de.EVENT_USER_UNMUTED:case de.EVENT_TYPING_STATUS_UPDATED:case de.EVENT_OPERATOR_UPDATED:case de.EVENT_CHANNEL_METADATA_UPDATED:case de.EVENT_CHANNEL_METADATA_DELETED:case de.EVENT_CHANNEL_METACOUNTER_UPDATED:case de.EVENT_CHANNEL_METACOUNTER_DELETED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_READ_RECEIPT_UPDATED:case de.EVENT_USER_RECEIVED_INVITATION:case de.EVENT_USER_JOINED:case de.EVENT_CHANNEL_FROZEN:case de.EVENT_CHANNEL_UNFROZEN:case de.EVENT_CHANNEL_HIDDEN:case de.EVENT_CHANNEL_UNHIDDEN:case de.EVENT_CHANNEL_CHANGED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_CHANNEL_DELETED:var p=r.channelUrl;this._removeChannelsFromView([p],{context:i})}},e.prototype._getRemoteChannels=function(){return L(this,void 0,void 0,function(){var e,n,t;return P(this,function(r){switch(r.label){case 0:return e=j.get(this._iid).GroupChannel,[4,R.get(this._iid).get("apiClient").loadGroupChannelList(U(U({},this._filter),{order:this._order,token:this._token,limit:this._limit,userIdsFilter:this._filter.userIdsFilter,searchFilter:(a=this._filter.searchFilter,a.searchQuery&&a.searchFields?{search_query:a.searchQuery,search_fields:a.searchFields.join(",").toLocaleLowerCase()}:{})}))];case 1:return n=r.sent(),t=n.channels.map(function(t){return"number"==typeof n.ts&&(t.ts=n.ts),e.upsert(t)}),[4,Ze.of(this._iid).upsert(t)];case 2:return r.sent(),[2,[t,n.next]]}var a})})},e.prototype._addChannelsToView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=[],i=[],s=0,o=e;s<o.length;s++){var l=o[s],u=je(this._channels,l);if(u<0)a.push(l),(c=Be(this._channels,l,this._order))===this._channels.length?this._channels.push(l):this._channels.splice(c,0,l);else{i.push(l),this._channels.splice(u,1);var c=Be(this._channels,l,this._order);this._channels.splice(c,0,l)}}r&&(a.length>0&&this._eventHandler.onChannelsAdded(r,a),i.length>0&&this._eventHandler.onChannelsUpdated(r,i))},e.prototype._removeChannelsFromView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._channels.map(function(e){return e.url}).indexOf(o);l>=0&&(a.push(this._channels[l].url),this._channels.splice(l,1))}return r&&a.length>0&&this._eventHandler.onChannelsDeleted(r,a),a},Object.defineProperty(e.prototype,"channelList",{get:function(){return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a;return P(this,function(i){switch(i.label){case 0:return this._hasMore?[4,Qe.ready()]:[3,5];case 1:return i.sent()?[3,3]:(X.debug("Group channel collection loadMore() from the cache."),e=Ze.of(this._iid),n=e.getNextContainerToken(this._order,this._channels),[4,e.getNextChannels(this._filter,this._order,n,this._limit)]);case 2:return r=i.sent(),this._addChannelsToView(r),[2,r];case 3:return X.debug("Group channel collection loadMore() from the server."),[4,this._getRemoteChannels()];case 4:return t=i.sent(),r=t[0],a=t[1],this._token=a,this._token||(this._hasMore=!1),this._addChannelsToView(r),[2,r];case 5:return[2,[]]}})})},e.prototype.dispose=function(){fe.of(this._iid).removeObserver(this._connectionStateObserver),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause(),ge.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setGroupChannelCollectionHandler=function(e){this._eventHandler=e},e.GroupChannelOrder=Ue,e}(),$e={},Ze=function(){function e(e){var n=e.iid,t=e.collection,r=void 0===t?null:t;this._collection=null,this._pkIndex=Date.now(),this._lastFetchedPrimaryKey=Date.now(),this._iid=n,this._collection=r,$e[n]=this}return e.of=function(e){return $e[e]},e.prototype._serialize=function(e){var n=this._createPk();return e.cachedPrimaryKey=n,U(U({},e.serialize()),{lastMessageCreatedAt:e.lastMessage?e.lastMessage.createdAt:-1,pk:n})},e.prototype._deserialize=function(e){return e?j.get(this._iid).GroupChannel.buildFromSerializedData(e):null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return R.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._createPk=function(){return this._pkIndex++},e.prototype._fetch=function(e,n,t){return L(this,void 0,void 0,function(){var r,a,i,s,o,l,u,c=this;return P(this,function(d){switch(d.label){case 0:if(!this._localCacheEnabled)return[3,2];switch(r=Ke.LATEST_LAST_MESSAGE,n){case Ue.CHANNEL_NAME_ALPHABETICAL:r=Ke.NAME_ALPHABETICAL;break;case Ue.CHRONOLOGICAL:r=Ke.CHRONOLOGICAL;break;case Ue.LATEST_LAST_MESSAGE:r=Ke.LATEST_LAST_MESSAGE}return a=t.containerToken,i=a.lastMessageCreatedAt,s=a.createdAt,o=a.name,l=a.lastFetchedPrimaryKey,u={where:function(t){switch(n){case Ue.LATEST_LAST_MESSAGE:if(t.lastMessageCreatedAt>i)return!1;if(t.lastMessageCreatedAt===i&&ze(l,t.pk)>=0)return!1;if(t.lastMessageCreatedAt<0){if(t.createdAt>s)return!1;if(t.createdAt===s&&ze(l,t.pk)>=0)return!1}break;case Ue.CHANNEL_NAME_ALPHABETICAL:var r=t.name.localeCompare(o);if(r<0)return!1;if(0===r&&ze(l,t.pk)>=0)return!1;break;case Ue.CHRONOLOGICAL:if(t.createdAt>s)return!1;if(t.createdAt===s&&ze(l,t.pk)>=0)return!1}return e.match(c._deserialize(t))},index:r},[4,this._collection.query(u).fetch({limit:t.limit})];case 1:return[2,d.sent().map(function(e){return c._deserialize(e)})];case 2:return[2,[]]}})})},e.prototype.getNextContainerToken=function(e,n){switch(e){case Ue.LATEST_LAST_MESSAGE:return n.length>0?{lastMessageCreatedAt:(t=n[n.length-1]).lastMessage?t.lastMessage.createdAt:-1,createdAt:t.createdAt,lastFetchedPrimaryKey:t.cachedPrimaryKey}:{lastMessageCreatedAt:Number.MAX_SAFE_INTEGER,createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case Ue.CHRONOLOGICAL:return n.length>0?{createdAt:(t=n[n.length-1]).createdAt,lastFetchedPrimaryKey:t.cachedPrimaryKey}:{createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case Ue.CHANNEL_NAME_ALPHABETICAL:var t;return n.length>0?{name:(t=n[n.length-1]).name,lastFetchedPrimaryKey:t.cachedPrimaryKey}:{name:"",lastFetchedPrimaryKey:this._lastFetchedPrimaryKey}}},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return this._localCacheEnabled?(n=this._deserialize,[4,this._collection.getByKey(e)]):[3,2];case 1:return[2,n.apply(this,[t.sent()])];case 2:return[2,null]}})})},e.prototype.getNextChannels=function(e,n,t,r){return void 0===r&&(r=100),L(this,void 0,void 0,function(){return P(this,function(a){switch(a.label){case 0:return[4,this._fetch(e,n,{containerToken:t,limit:r})];case 1:return[2,a.sent()]}})})},e.prototype.upsert=function(e){return L(this,void 0,void 0,function(){var n,t=this;return P(this,function(r){switch(r.label){case 0:return this._localCacheEnabled?(n=e.map(function(e){return t._serialize(e)}),[4,this._collection.upsertMany(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,this._collection.removeIf({where:{url:{"/in":e}}})]:[3,3];case 1:return n.sent(),[4,Ma.getInstance(this._iid).clearCachedMessages(e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return this._localCacheEnabled?[4,this._collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e}(),en=function(){function e(){this.messageType="",this.customTypes=["*"],this.senderUserIds=[],this.sendingStatus=null}return e.prototype.clone=function(){var n=new e,t=JSON.parse(JSON.stringify(this));return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},e.prototype.match=function(e){if(this.messageType&&this.messageType!==e.messageType)return!1;if(!this.customTypes.includes("*")&&!this.customTypes.includes(e.customType))return!1;if(this.senderUserIds.length>0){if(!e.isUserMessage()&&!e.isFileMessage())return!1;if(!this.senderUserIds.includes(e.sender.userId))return!1}return!this.sendingStatus||this.sendingStatus===e.sendingStatus},e}(),nn=function(e,n){if(e.length>0){for(var t=0,r=e.length-1,a=Math.floor((t+r)/2);t<r;){var i=e[a].createdAt-n.createdAt;if(i>0)r=a,a=Math.floor((t+r)/2);else{if(!(i<0))return a;t=a+1,a=Math.floor((t+r)/2)}}return e[a].createdAt>n.createdAt?a:a+1}return e.length},tn=function(e){var n=e.channel,t=e.ts,r=e.prevLimit,a=void 0===r?0:r,i=e.nextLimit,s=void 0===i?0:i,o=e.filter,l={channel:n,token:t,tokenType:"timestamp",isInclusive:!0,prevResultSize:a,nextResultSize:s,shouldReverse:!1,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeReplies:!0,includeParentMessageText:!0,showSubchannelMessagesOnly:!0};if(o){var u=o.messageType,c=o.customTypes,d=o.senderUserIds;u&&(l.messageType=u),c.length>0&&(l.customTypes=c),d.length>0&&(l.senderUserIds=d)}return l},rn=function(e,n,t){if(t.length>0){var r=t.map(function(e){return e.createdAt});n.includes("prev")&&(e.top=Math.min.apply(Math,D([e.top],r,!1))),n.includes("next")&&(e.bottom=Math.max.apply(Math,D([e.bottom],r,!1)))}},an=function(e){return new Promise(function(n,t){setTimeout(function(){return n()},e)})},sn={};!function(e){e.SUCCEEDED="succeeded",e.UNSENT="unsent"}(Je||(Je={}));var on,ln=function(){function e(e){var n=e.iid,t=e.collections;this._iid=n,this._collections=t,sn[n]=this}return e.of=function(e){return sn[e]},e.prototype._serialize=function(e){return e.serialize()},e.prototype._deserialize=function(e){if(e){var n=U(U({},e),{messageId:parseInt(e.messageId)}),t=j.get(this._iid),r=t.UserMessage,a=t.FileMessage,i=t.AdminMessage;if("user"===n.messageType)return r.buildFromSerializedData(n);if("file"===n.messageType)return a.buildFromSerializedData(n);if("admin"===n.messageType)return i.buildFromSerializedData(n)}return null},e.deserialize=function(e,n){if(n){var t=U(U({},n),{messageId:parseInt(n.messageId)}),r=j.get(e),a=r.UserMessage,i=r.FileMessage,s=r.AdminMessage;if("user"===t.messageType)return a.buildFromSerializedData(t);if("file"===t.messageType)return i.buildFromSerializedData(t);if("admin"===t.messageType)return s.buildFromSerializedData(t)}return null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return R.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._getMessageCollectionByType=function(e){return e?this._collections[e]:this._collections.succeeded},e.prototype._getIndexByCollection=function(e){return"UnsentMessage"===e.name?Ye.LATEST_UNSENT:Ye.LATEST},e.prototype._fetch=function(e,n,t){return L(this,void 0,void 0,function(){var r,a,i=this;return P(this,function(s){switch(s.label){case 0:return this._localCacheEnabled?(r={where:function(r){if(!r)return!1;if(e&&r.channelUrl!==e)return!1;if(t.parentMessageId&&r.parentMessageId!==t.parentMessageId)return!1;if(t.backward){if(r.createdAt<=t.token)return!1}else if(r.createdAt>=t.token)return!1;return!!n.match(i._deserialize(r))},index:t.index,backward:t.backward},[4,t.collection.query(r)]):[3,3];case 1:return[4,s.sent().fetch({limit:t.limit})];case 2:return a=s.sent(),[2,Promise.all(a.map(function(e){return L(i,void 0,void 0,function(){var n,r,a;return P(this,function(i){switch(i.label){case 0:return n=this._deserialize(e),(r=e.messageParams)&&r.file&&te.isFileTypeBlob(r.fileType)&&"string"==typeof n._messageParams.file?(a=n._messageParams,[4,t.collection.getBlob(r.file)]):[3,2];case 1:a._file=i.sent(),i.label=2;case 2:return[2,n]}})})}))];case 3:return[2,[]]}})})},e.fetch=function(n,t,r){return L(this,void 0,void 0,function(){var a,i,s=this;return P(this,function(o){switch(o.label){case 0:return a={where:function(a){if(!a)return!1;if(r.backward){if(a.createdAt<=r.token)return!1}else if(a.createdAt>=r.token)return!1;return!!t.match(e.deserialize(n,a))},index:r.index,backward:r.backward},[4,r.collection.query(a)];case 1:return[4,o.sent().fetch({limit:r.limit})];case 2:return i=o.sent(),[2,Promise.all(i.map(function(t){return L(s,void 0,void 0,function(){var a,i,s;return P(this,function(o){switch(o.label){case 0:return a=e.deserialize(n,t),(i=t.messageParams)&&i.file&&te.isFileTypeBlob(i.fileType)&&"string"==typeof a._messageParams.file?(s=a._messageParams,[4,r.collection.getBlob(i.file)]):[3,2];case 1:s.file=o.sent(),o.label=2;case 2:return[2,a]}})})}))]}})})},e.prototype.get=function(e,n){return L(this,void 0,void 0,function(){var t,r;return P(this,function(a){switch(a.label){case 0:return this._localCacheEnabled?(t=this._getMessageCollectionByType(n),r=this._deserialize,[4,t.getByKey(e)]):[3,2];case 1:return[2,r.apply(this,[a.sent()])];case 2:return[2,null]}})})},e.prototype.getPreviousAndNextMessages=function(e,n,t,r,a){return void 0===r&&(r=30),L(this,void 0,void 0,function(){var i,s;return P(this,function(o){switch(o.label){case 0:return[4,this.getPreviousMessages(e,n,t,r,a)];case 1:return i=o.sent(),[4,this.getNextMessages(e,n,t,r,a)];case 2:return s=o.sent(),[2,function(e){for(var n=[],t={},r=0,a=e;r<a.length;r++){var i=a[r];i.messageId?t[i.messageId]||(t[i.messageId]=!0,n.push(i)):n.push(i)}return n}(D(D([],i,!0),s,!0))]}})})},e.prototype.getPreviousMessages=function(e,n,t,r,a){return void 0===r&&(r=30),L(this,void 0,void 0,function(){var i;return P(this,function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,n,{token:t,limit:r,backward:!1,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent().reverse()]}})})},e.prototype.getNextMessages=function(e,n,t,r,a){return void 0===r&&(r=30),L(this,void 0,void 0,function(){var i;return P(this,function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,n,{token:t,limit:r,backward:!0,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent()]}})})},e.prototype.getAllChildMessages=function(e,n,t){return L(this,void 0,void 0,function(){return P(this,function(r){switch(r.label){case 0:return[4,this._fetch(e.channelUrl,n,{token:Date.now(),limit:null,collection:t,backward:!1,index:Ye.CHILD_MESSAGE_FIRST,parentMessageId:e.messageId})];case 1:return[2,r.sent()]}})})},e.prototype.getUnsentMessages=function(e,n){return L(this,void 0,void 0,function(){var t;return P(this,function(r){switch(r.label){case 0:return t=this._getMessageCollectionByType(Je.UNSENT),[4,this._fetch(e,n,{token:0,limit:null,collection:t,backward:!0,index:Ye.LATEST_UNSENT})];case 1:return[2,r.sent()]}})})},e.prototype.getAllUnsentMessages=function(n){return L(this,void 0,void 0,function(){var t;return P(this,function(r){switch(r.label){case 0:return t=this._getMessageCollectionByType(Je.UNSENT),[4,e.fetch(this._iid,n,{token:Date.now(),limit:null,collection:t,backward:!1,index:Ye.LATEST_UNSENT})];case 1:return[2,r.sent()]}})})},e.prototype.countBetween=function(e,n,t,r,a){return L(this,void 0,void 0,function(){var i,s=this;return P(this,function(o){switch(o.label){case 0:return this._localCacheEnabled?(i={where:function(a){return a.channelUrl===e&&!(t>a.createdAt||a.createdAt>r)&&n.match(s._deserialize(a))},index:Ye.LATEST},[4,this._getMessageCollectionByType(a).query(i)]):[3,3];case 1:return[4,o.sent().count()];case 2:return[2,o.sent()];case 3:return[2,0]}})})},e.prototype._serializeMessages=function(e,n){return L(this,void 0,void 0,function(){var t,r,a=this;return P(this,function(i){switch(i.label){case 0:return t=this._getMessageCollectionByType(n),r=[],[4,Promise.all(e.map(function(e){return L(a,void 0,void 0,function(){var n,a;return P(this,function(i){switch(i.label){case 0:return(n=e.serialize())?((n=U({},n)).messageParams&&(n.messageParams=U({},n.messageParams)),e.sendingStatus&&"succeeded"!==e.sendingStatus?n.messageId="unsent-".concat(e.reqId):n.messageId="".concat(e.messageId),e.isFileMessage()&&e._messageParams&&e._messageParams.file&&te.isBlob(e._messageParams.file)&&te.isFileTypeBlob(e._messageParams.fileType)?[4,t.saveBlob(e._messageParams.file,e.reqId)]:[3,2]):[3,3];case 1:a=i.sent(),n.messageParams.file=a,i.label=2;case 2:r.push(n),i.label=3;case 3:return[2]}})})}))];case 1:return i.sent(),[2,r]}})})},e.prototype.upsert=function(e,n){return L(this,void 0,void 0,function(){var t,r,a,i,s,o,l,u,c,d,h,f,p,m,g;return P(this,function(_){switch(_.label){case 0:return this._localCacheEnabled?(t=Ma.getInstance(this._iid),r=this._getMessageCollectionByType(n),[4,this._serializeMessages(e,n)]):[3,13];case 1:return a=_.sent(),[4,r.upsertMany(a)];case 2:if(_.sent(),n&&n!==Je.SUCCEEDED)return[3,13];i=[],s=[],o=0,_.label=3;case 3:return o<e.length?(l=e[o]).sendingStatus&&l.sendingStatus===t.MessageSendingStatus.SUCCEEDED&&l.updatedAt>0?(c=(u=i).concat,[4,this._locallyUpdateChildMessages(l,Je.SUCCEEDED)]):[3,6]:[3,7];case 4:return i=c.apply(u,[_.sent()]),h=(d=s).concat,[4,this._locallyUpdateChildMessages(l,Je.UNSENT)];case 5:s=h.apply(d,[_.sent()]),_.label=6;case 6:return o++,[3,3];case 7:return i.length>0?(f=this._getMessageCollectionByType(Je.SUCCEEDED),[4,this._serializeMessages(i,Je.SUCCEEDED)]):[3,10];case 8:return p=_.sent(),[4,f.upsertMany(p)];case 9:_.sent(),_.label=10;case 10:return s.length>0?(m=this._getMessageCollectionByType(Je.UNSENT),[4,this._serializeMessages(s,Je.UNSENT)]):[3,13];case 11:return g=_.sent(),[4,m.upsertMany(g)];case 12:_.sent(),_.label=13;case 13:return[2]}})})},e.prototype._locallyUpdateChildMessages=function(e,n){return L(this,void 0,void 0,function(){var t,r,a;return P(this,function(i){switch(i.label){case 0:return t=new en,r=[],a=this._getMessageCollectionByType(n),[4,this.getAllChildMessages(e,t,a)];case 1:return i.sent().forEach(function(n){n.applyParentMessage(e)&&r.push(n)}),[2,r]}})})},e.prototype.remove=function(e,n){return L(this,void 0,void 0,function(){var t,r;return P(this,function(a){switch(a.label){case 0:return this._localCacheEnabled?[4,an(500)]:[3,3];case 1:return a.sent(),t=this._getMessageCollectionByType(n),r={messageId:{"/in":e.map(function(e){return"".concat(e)})}},[4,t.removeIf({where:r})];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.removeUnsentMessages=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s;return P(this,function(o){switch(o.label){case 0:return n=e.channelUrl,t=e.sendingStatus,r=e.reqIds,a=[],this._localCacheEnabled?[4,an(500)]:[3,3];case 1:return o.sent(),i=this._getMessageCollectionByType(Je.UNSENT),s={channelUrl:{"=":n}},t&&(s.sendingStatus={"=":t}),r&&r.length>0&&(s.reqId={"/in":r}),[4,i.removeIf({where:s})];case 2:a=o.sent(),o.label=3;case 3:return[2,a]}})})},e.prototype.removeFailedMessages=function(e,n){return L(this,void 0,void 0,function(){var t,r,a,i;return P(this,function(s){switch(s.label){case 0:return t=[],this._localCacheEnabled?[4,an(500)]:[3,3];case 1:return s.sent(),r=this._getMessageCollectionByType(Je.UNSENT),a=Ma.getInstance(this._iid),i={channelUrl:{"=":e},sendingStatus:{"=":a.MessageSendingStatus.FAILED}},n&&n.length>0&&(i.reqId={"/in":n}),[4,r.removeIf({where:i})];case 2:t=s.sent(),s.label=3;case 3:return[2,t]}})})},e.prototype.clearByChannelUrl=function(e){return L(this,void 0,void 0,function(){var n=this;return P(this,function(t){switch(t.label){case 0:return[4,Promise.all(Object.keys(Je).map(function(t){var r=n._getMessageCollectionByType(Je[t]),a={channelUrl:{"=":e}};return r.removeIf({where:a})}))];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(e).clear()]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.clearAll=function(){return L(this,void 0,void 0,function(){var e=this;return P(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,Promise.all(Object.keys(Je).map(function(n){return e.clear(Je[n])}))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.clearAbove=function(e,n){return L(this,void 0,void 0,function(){var t,r;return P(this,function(a){switch(a.label){case 0:return this._localCacheEnabled?(t=this._getMessageCollectionByType(n),r={createdAt:{"<":e}},[4,t.removeIf({where:r})]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e}(),un=function(){function e(){this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return e.createFromJson=function(e){var n=parseInt(e.msg_id),t=e.user_id,r=e.operation,a=e.reaction,i=e.updated_at;if(n&&"string"==typeof t&&"string"==typeof r&&["add","delete"].indexOf(r.toLowerCase())>=0&&"string"==typeof a&&a&&"number"==typeof i){var s=new this;return s.messageId=n,s.userId=t,s.key=a,s.operation=r.toLowerCase(),s.updatedAt=i,s}return null},e}(),cn=function(){function e(){}return e.serialize=function(e,n){void 0===n&&(n=null);var t=JSON.parse(JSON.stringify(e));return n&&n(t),function e(n){return Object.keys(n).forEach(function(t){n[t]&&"object"==typeof n[t]&&e(n[t])}),Object.freeze(n)}(t)},e.serializeWithoutFreeze=function(e,n){void 0===n&&(n=null);var t=JSON.parse(JSON.stringify(e));return n&&n(t),t},e.deserialize=function(e,n){void 0===n&&(n=null);var t=JSON.parse(JSON.stringify(e));return n&&n(t),t},e}(),dn={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},hn=new WeakMap,fn=function(){function e(n){f(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.mentionedUserIds=[],this.mentionedMessageTemplate=null,this.sendingStatus=null,hn.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.isReplyToChannel=!1,this.parentMessage=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,this.reqId="",this._isAutoResendRegistered=!1,n&&this.__update(n)}return m(e,[{key:"serialize",value:function(e){var n=this;return cn.serialize(this,function(t){t.hasOwnProperty("_sender")&&(t.sender=t._sender,delete t._sender),t.hasOwnProperty("_isAutoResendRegistered")&&(t.isAutoResendRegistered=t._isAutoResendRegistered,delete t._isAutoResendRegistered),n.appleCriticalAlertOptions&&(t.appleCriticalAlertOptions=n.appleCriticalAlertOptions.serialize()),e&&e(t)})}},{key:"isIdentical",value:function(e){return!("object"!==h(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return se.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var n=this,t=Ma.getInstance(this._iid),r=j.get(this._iid),a=r.User,i=r.BaseChannel,s=r.BaseMessageParams,o=r.BaseMessage,l=r.Reaction,u=r.MessageMetaArray,c=r.ThreadInfo,h=r.OGMetaData,f=r.AppleCriticalAlertOptions;if(e.hasOwnProperty("msg_id")&&e.msg_id&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("type"))switch(e.type){case"MESG":this.messageType=o.MESSAGE_TYPE_USER;break;case"FILE":this.messageType=o.MESSAGE_TYPE_FILE;break;case"BRDM":case"ADMM":this.messageType=o.MESSAGE_TYPE_ADMIN}e.hasOwnProperty("message_id")&&e.message_id&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",e.hasOwnProperty("silent")&&(this.silent=e.silent),this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):i.CHANNEL_TYPE_GROUP;var p=e.hasOwnProperty("metaarray")?e.metaarray:{},m=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(p).sort(function(e,n){return e.localeCompare(n)});this.metaArrays=[];for(var g=0;g<m.length;g++){var _=m[g];this.metaArrays.push(new u(_,p[_]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var y=e.sorted_metaarray;Array.isArray(y)&&(this.metaArrays=y.map(function(e){return new u(e.key,e.value)}))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var v=0;v<e.reactions.length;v++){var E=l.createFromJson(e.reactions[v]);E&&this.reactions.push(E)}if(this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:s.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach(function(e){var t=new a(e);n.mentionedUsers.push(t)}),this.mentionedUserIds=[],e.hasOwnProperty("mentioned_user_ids")&&(this.mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&e.mentioned_message_template&&(this.mentionedMessageTemplate=e.mentioned_message_template),this.sendingStatus=this.messageId>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&e.root_message_id&&hn.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&e.parent_message_id&&(this.parentMessageId=parseInt(e.parent_message_id)),this.threadInfo=new c(e.thread_info),this.isReplyToChannel=!!e.hasOwnProperty("is_reply_to_channel")&&e.is_reply_to_channel,e.hasOwnProperty("parent_message_info")){var b=d({},e.parent_message_info);e.parent_message_info.hasOwnProperty("file")&&(b.require_auth=!!e.parent_message_info.file.require_auth);var C={channelType:this.channelType,channelUrl:this.channelUrl};switch(this.parentMessage=i.buildMessage(b,C),this.parentMessage.messageType){case o.MESSAGE_TYPE_USER:this.parentMessageText=this.parentMessage.message;break;case o.MESSAGE_TYPE_FILE:this.parentMessageText=this.parentMessage.name}}e.hasOwnProperty("og_tag")&&(this.ogMetaData=new h(e.og_tag)),e.hasOwnProperty("is_op_msg")&&(this.isOperatorMessage=e.is_op_msg),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new f(e.apple_critical_alert_options)),e.hasOwnProperty("is_auto_resend_registered")&&(this._isAutoResendRegistered=e.is_auto_resend_registered),this.reqId=e.hasOwnProperty("req_id")?e.req_id:""}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter(function(n){return e.indexOf(n.key)>-1}):[]}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(n){e[n.key]=n.value}),e},set:function(e){if("object"===h(e)&&e){var n=j.get(this._iid).MessageMetaArray,t=[];Object.keys(e).forEach(function(r){t.push(new n(r,e[r]))}),this.metaArrays=t}}},{key:"getMetaArrayByKeys",value:function(e){var n={};return this.getMetaArraysByKeys(e).forEach(function(e){n[e.key]=e.value}),n}},{key:"applyReactionEvent",value:function(e){var n=this,t=j.get(this._iid),r=t.Reaction,a=null,i=ye.parse(arguments,[new ye({type:un,constraint:function(e){return parseInt(e.messageId)===parseInt(n.messageId)}})]),s=N(i,2);if(a=s[0],e=s[1],!a){for(var o=!1,l=0;l<this.reactions.length;l++)if(this.reactions[l].key===e.key){this.reactions[l]._applyEvent(e),this.reactions[l].isEmpty&&this.reactions.splice(l,1),o=!0;break}o||"add"!==e.operation||this.reactions.push(new r(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(n,t,r,a){var i=this,s=j.get(this._iid),o=s.ThreadedMessageListParams,l=null,u=ye.parse(arguments,[new ye({type:"number"}),new ye({type:"string",constraint:function(e){return Object.values(dn).includes(e)}}),new ye({type:o,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),c=N(u,5);return l=c[0],n=c[1],t=c[2],r=c[3],a=c[4],le(this._iid,function(a){if(l)a(l,null);else{var s=j.get(i._iid),o=s.GroupChannel,u=s.OpenChannel;i.isGroupChannel()?o.getChannel(i.channelUrl,w.INTERNAL_CALL,function(s,o){if(Ma.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):R.get(i._iid).container.apiClient.getMessageList(d(d({channel:s,token:n,tokenType:t},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then(function(e){var n=j.get(i._iid).BaseChannel,t=e.messages.map(function(e){return n.buildMessage(e,s)}).filter(function(e){return null!==e}),r=t.filter(function(e){return e.messageId===i.messageId})[0],o=t.filter(function(e){return e.parentMessageId===i.messageId});a(null,{parentMessage:r,threadedReplies:o})}).catch(function(e){a(e,null)})}):i.isOpenChannel()&&u.getChannel(i.channelUrl,w.INTERNAL_CALL,function(s,o){if(Ma.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):R.get(i._iid).container.apiClient.getMessageList(d(d({channel:s,token:n,tokenType:t},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then(function(e){var n=j.get(i._iid).BaseChannel,t=e.messages.map(function(e){return n.buildMessage(e,s)}).filter(function(e){return null!==e}),r=t.filter(function(e){return e.messageId===i.messageId})[0],o=t.filter(function(e){return e.parentMessageId===i.messageId});a(null,{parentMessage:r,threadedReplies:o})}).catch(function(e){a(e,null)})})}},a)}},{key:"getThreadedMessagesByTimestamp",value:function(e,n,t){return this._getThreadedMessageList(e,dn.TIMESTAMP,n,t)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var n=this,t=j.get(this._iid),r=t.ThreadInfoUpdateEvent,a=null,i=ye.parse(arguments,[new ye({type:r,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(n.messageId)}})]),s=N(i,2);return a=s[0],e=s[1],!a&&(this.threadInfo=e.threadInfo,!0)}},{key:"applyParentMessage",value:function(e){if(this.parentMessageId===e.messageId){var n=this.parentMessage.updatedAt;if(e.updatedAt>=n)return this.parentMessage=e,!0}return!1}},{key:"_setRootMessageId",value:function(e){hn.set(this,e)}}],[{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"ReplyType",get:function(){return{ALL:"all",NONE:"none",ONLY_REPLY_TO_CHANNEL:"only_reply_to_channel"}}},{key:"getMessage",value:function(e,n){var t=this,r=j.get(this._iid),a=r.BaseChannel,i=r.MessageRetrievalParams,s=null,o=ye.parse(arguments,[new ye({type:i,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],n=l[2],le(this._iid,function(n){if(s)n(s,null);else{var r=j.get(t._iid),i=r.GroupChannel,o=r.OpenChannel;switch(e.channelType){case a.CHANNEL_TYPE_GROUP:i.getChannel(e.channelUrl,w.INTERNAL_CALL,function(r,i){if(Ma.getInstance(t._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?n(i,null):R.get(t._iid).container.apiClient.getMessage(d({channel:r},e),function(e,t){if(e)n(e,null);else{var i=a.buildMessage(t,r);n(null,i)}})});break;case a.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,w.INTERNAL_CALL,function(r,i){if(Ma.getInstance(t._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?n(i,null):R.get(t._iid).container.apiClient.getMessage(d({channel:r},e),function(e,t){if(e)n(e,null);else{var i=a.buildMessage(t,r);n(null,i)}})})}}},n)}}]),e}(),pn=function(){function e(e){this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,e&&this.__update(e)}return e.objectify=function(e){var n=e.userId,t=void 0===n?null:n,r=e.nickname,a=void 0===r?"":r,i=e.plainProfileUrl,s=void 0===i?"":i,o=e.connectionStatus,l=void 0===o?"":o,u=e.lastSeenAt,c=void 0===u?0:u,d=e.metaData,h=void 0===d?{}:d,f=e.isActive,p=void 0===f||f,m=e.friendDiscoveryKey,g=void 0===m?null:m,_=e.friendName,y=void 0===_?null:_,v=e.preferredLanguages,E=void 0===v?null:v,b=e.requireAuth;return{user_id:t,nickname:a,profile_url:s,is_online:l,last_seen_at:c,metadata:h,is_active:p,friend_discovery_key:g,friend_name:y,preferred_languages:E,require_auth_for_profile_image:void 0!==b&&b}},e.buildFromSerializedData=function(e){var n=j.get(this._iid).User,t=cn.deserialize(e);return new n(n.objectify(t))},Object.defineProperty(e.prototype,"preferredLanguages",{get:function(){return this._preferredLanguages},enumerable:!1,configurable:!0}),e.prototype.__update=function(n){var t=R.get(this._iid).container.auth;n.hasOwnProperty("guest_id")&&(this.userId=n.guest_id),n.hasOwnProperty("user_id")&&(this.userId=n.user_id),n.hasOwnProperty("name")&&(this.nickname=n.name),n.hasOwnProperty("nickname")&&(this.nickname=n.nickname),n.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=n.require_auth_for_profile_image:this.requireAuth=null,(n.hasOwnProperty("image")||n.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=n.image||n.profile_url||"",Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(t.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),n.hasOwnProperty("is_online")?n.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=n.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,n.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(n.last_seen_at):this.lastSeenAt=0,n.hasOwnProperty("metadata")?this.metaData=n.metadata:this.metaData={},n.hasOwnProperty("is_active")?this.isActive=void 0===n.is_active||n.is_active:this.isActive=!0,n.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=n.friend_discovery_key:this.friendDiscoveryKey=null,n.hasOwnProperty("friend_name")?this.friendName=n.friend_name:this.friendName=null,n.hasOwnProperty("preferred_languages")?this._preferredLanguages=n.preferred_languages||null:this._preferredLanguages=null},e.prototype._updateMetaData=function(e,n){var t=this;void 0===n&&(n=!1);var r=j.get(this._iid).GroupChannel;Object.keys(e).forEach(function(r){n?delete t.metaData[r]:t.metaData[r]=e[r]}),Object.keys(r.cachedChannels).forEach(function(e){if(r.cachedChannels.hasOwnProperty(e)){var n=r.cachedChannels[e];n.memberMap.hasOwnProperty(t.userId)&&(n.memberMap[t.userId].metaData=t.metaData)}})},e.prototype.serialize=function(){return cn.serialize(this,function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)})},e.prototype.getOriginalProfileUrl=function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("sendbirdtest.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var n=this.plainProfileUrl.replace("profile_images/","");return n===this.plainProfileUrl?"":n}return""},e.prototype.createMetaData=function(e,n){var t,r=this,a=null;return t=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new ye({type:"callback"})]),a=t[0],e=t[1],n=t[2],le(this._iid,function(n){a?n(a,null):R.get(r._iid).container.apiClient.createUserMetaData({metaData:e},function(e,t){e||r._updateMetaData(t),n(e,t)})},n)},e.prototype.updateMetaData=function(e,n,t){var r,a=this,i=null;return r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){return e[n]}).every(function(e){return"string"==typeof e})}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),i=r[0],e=r[1],n=r[2],t=r[3],le(this._iid,function(t){i?t(i,null):R.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:n},function(e,n){e||a._updateMetaData(n),t(e,n)})},t)},e.prototype.deleteMetaData=function(e,n){var t,r=this,a=null;return t=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),a=t[0],e=t[1],n=t[2],le(this._iid,function(n){if(a)n(a,null);else{var t={};t[e]="",R.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},function(e,a){e||r._updateMetaData(t,!0),n(e,a)})}},n)},e.prototype.deleteAllMetaData=function(e){var n=this;return le(this._iid,function(e){var t=n.metaData;R.get(n._iid).container.apiClient.deleteAllUserMetaData({},function(r,a){r||n._updateMetaData(t,!0),e(r,a)})},e)},Object.defineProperty(e,"NON_AVAILABLE",{get:function(){return"nonavailable"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONLINE",{get:function(){return"online"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OFFLINE",{get:function(){return"offline"},enumerable:!1,configurable:!0}),e}(),mn=function(){function e(e,n){this._source=e,this._sendingStatus=n}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendingStatus",{get:function(){return this._sendingStatus},enumerable:!1,configurable:!0}),e}(),gn={},_n=function(e,n){return"sendbird:".concat(e,"@channel/").concat(n,"/message/sync")},yn=function(){function e(e){var n=e.iid,t=e.channel,r=e.limit,a=void 0===r?Sn:r,i=this;this._prevSync=null,this._nextSync=null,this._syncRange=new De({top:Number.MAX_SAFE_INTEGER,bottom:-1}),this._isPrevSyncComplete=!1,this._isNextSyncComplete=!1,this._iid=n,this._channel=t,this._limit=a;var s=j.get(this._iid).BaseChannel,o=R.get(this._iid),l=o.get("currentUserId"),u=o.get("store"),c=o.get("apiClient"),d=ln.of(this._iid),h=ge.of(this._iid),f=_n(l,this._channel.url),p=o.container.concurrentCallLimit,m=o.container.backOffDelay;this._prevSync=new Pe(f,function(e){return L(i,void 0,void 0,function(){var e,n,r,a,i,o,l,p,m,g=this;return P(this,function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(n=_.sent())&&n.isPrevSyncComplete?[3,7]:(n&&(this._syncRange=n.range,this._isPrevSyncComplete=n.isPrevSyncComplete),r=tn({channel:this._channel,ts:this._syncRange.top,prevLimit:this._limit}),[4,c.getMessageList(r)]);case 2:return a=_.sent(),i=[],o=a.messages.map(function(e){var n=s.buildMessage(e,g._channel);return(n.isUserMessage()||n.isFileMessage())&&n._isSentByMe()&&i.push(n.reqId),n}),l=this.getMinCreatedAt(o),this._syncRange.top=Math.min(this._syncRange.top,l),this._syncRange.bottom<0&&(this._syncRange.bottom=this.getMaxCreatedAt(o)),this._isPrevSyncComplete=o.length<this._limit,X.debug("Message collection background sync fetched messages count: ",o.length),[4,d.upsert(o)];case 3:return _.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:_.sent(),_.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:n?n.isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:return _.sent(),m={source:de.MESSAGE_BACKGROUND,payload:{channel:t,messages:o}},h.send(m),e.hasNext=!this._isPrevSyncComplete,[3,8];case 7:X.debug("Message collection background sync has finished."),e.hasNext=!1,_.label=8;case 8:return[2,e]}})})},p,m),this._nextSync=new Pe(f,function(e){return L(i,void 0,void 0,function(){var e,n,r,a,i,o,l,p,m,g=this;return P(this,function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(n=_.sent())?(this._syncRange=n.range,r=tn({channel:this._channel,ts:this._syncRange.bottom,nextLimit:this._limit}),[4,c.getMessageList(r)]):[3,7];case 2:return a=_.sent(),i=[],o=a.messages.map(function(e){var n=s.buildMessage(e,g._channel);return(n.isUserMessage()||n.isFileMessage())&&n._isSentByMe()&&i.push(n.reqId),n}),l=this.getMaxCreatedAt(o),this._syncRange.bottom=Math.max(this._syncRange.bottom,l),this._isNextSyncComplete=o.length<this._limit,[4,d.upsert(o)];case 3:return _.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:_.sent(),_.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:n?n.isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:_.sent(),m={source:de.MESSAGE_BACKGROUND,payload:{channel:t,messages:o}},h.send(m),e.hasNext=!this._isNextSyncComplete,_.label=7;case 7:return[2,e]}})})},p,m)}return e.of=function(n,t,r){return void 0===r&&(r=Sn),gn[n]||(gn[n]={}),gn[n][t.url]||(gn[n][t.url]=new e({iid:n,channel:t,limit:r})),gn[n][t.url]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Message collection background sync has resumed."),this._isPrevSyncComplete||this._prevSync.resume(null),this._isNextSyncComplete||this._nextSync.resume(null)},e.prototype.pause=function(){X.debug("Message collection background sync has paused."),this._prevSync.stop(),this._nextSync.stop()},e.prototype.getMinCreatedAt=function(e){var n=Number.MAX_SAFE_INTEGER;return e.forEach(function(e){var t=e.createdAt;t<n&&(n=t)}),n},e.prototype.getMaxCreatedAt=function(e){var n=0;return e.forEach(function(e){var t=e.createdAt;t>n&&(n=t)}),n},e}(),vn={},En=function(e,n){return"sendbird:".concat(e,"@channel/").concat(n,"/message/changelogs")},bn=function(){function e(e){var n=e.iid,t=e.channel,r=this;this._token=0,this._sync=null,this._iid=n,this._channel=t;var a=j.get(this._iid).BaseChannel,i=R.get(this._iid),s=i.get("currentUserId"),o=i.get("store"),l=i.get("apiClient"),u=i.container.localCacheEnabled,c=ln.of(this._iid),d=ge.of(this._iid),h=En(s,this._channel.url);this._sync=new Pe(h,function(e){return L(r,void 0,void 0,function(){var e,n,r,s,f,p,m,g,_,y,v=this;return P(this,function(E){switch(E.label){case 0:return e={hasNext:!0,nextParams:""},u?[4,o.get(h)]:[3,2];case 1:return r=E.sent(),[3,3];case 2:r=null,E.label=3;case 3:n=r,this._token=n?n.token:i.get("firstConnectedAt")/1e3,s={channelUrl:this._channel.url,isOpenChannel:this._channel.isOpenChannel(),includeMetaArray:!0,includeReactions:!0,includeReplies:!0,includeParentMessageText:!0,includeThreadInfo:!0},"number"==typeof this._token?s.timestamp=this._token:s.token=this._token,E.label=4;case 4:return E.trys.push([4,12,,15]),[4,l.getMessageChangeLogs(s)];case 5:return f=E.sent(),p=f.updated.map(function(e){return a.buildMessage(e,v._channel)}),m={updatedMessages:p,deletedMessageIds:f.deleted.map(function(e){return parseInt(e.message_id)})},e.hasNext=f.has_more,(m.updatedMessages.length>0||m.deletedMessageIds.length>0)&&(e.nextParams=this._token=f.next),u?(g=[],p.forEach(function(e){(e.isUserMessage()||e.isFileMessage())&&e._isSentByMe()&&g.push(e.reqId)}),g.length>0?[4,c.removeUnsentMessages({channelUrl:this._channel.url,reqIds:g})]:[3,7]):[3,11];case 6:E.sent(),E.label=7;case 7:return[4,c.upsert(p)];case 8:return E.sent(),[4,c.remove(m.deletedMessageIds)];case 9:return E.sent(),[4,o.set({key:h,value:{token:this._token},generation:1})];case 10:E.sent(),E.label=11;case 11:return X.debug("Message collection changelog sync update messages count: ",m.updatedMessages.length),X.debug("Message collection changelog sync deleted message ids count: ",m.deletedMessageIds.length),_={source:de.MESSAGE_CHANGELOG,payload:U({channel:t},m)},d.send(_),[2,e];case 12:return(y=E.sent()).isInvalidTokenError?[4,o.remove(h)]:[3,14];case 13:E.sent(),E.label=14;case 14:throw y;case 15:return[2]}})})})}return e.of=function(n,t){return vn[n]||(vn[n]={}),vn[n][t.url]||(vn[n][t.url]=new e({iid:n,channel:t})),vn[n][t.url]},e.prototype.resume=function(){X.debug("Message collection changelog sync has resumed."),this._sync.resume(null,!0)},e.prototype.pause=function(){X.debug("Message collection changelog sync has paused."),this._sync.stop()},e}();!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api",e.CACHE_ONLY="cache_only"}(on||(on={}));var Cn,Nn=function(){function e(){this._onCacheResult=null,this._onApiResult=null}return e.prototype.invokeCacheResult=function(e,n){this._onCacheResult(e,n)},e.prototype.invokeApiResult=function(e,n){this._onApiResult(e,n)},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}();!function(e){e[e.BACKGROUND_SYNC_CLOSE=0]="BACKGROUND_SYNC_CLOSE",e[e.BACKGROUND_SYNC_OPEN=1]="BACKGROUND_SYNC_OPEN",e[e.FILL=2]="FILL",e[e.USER_CALL=3]="USER_CALL"}(Cn||(Cn={}));var Sn=100,On=new De({top:Number.MAX_SAFE_INTEGER,bottom:0}),Tn=new Map,An=function(e){return"sendbird@message/fill/".concat(e,"/").concat(Ie())},wn=function(){function e(e){var n=e.iid,t=e.channel,r=e.startingPoint,a=e.filter,i=e.limit,s=void 0===i?100:i,o=this;this._hugeGapCheckTimer=null,this._messages=[],this._syncRange=new De(U({},On)),this._hasPrevious=!0,this._hasNext=!0,this._unsentMessages=[],this._iid=n,this._channel=t,this._startingPoint=r,this._filter=a,this._limit=s,this._syncLimit=Math.max(s,Sn),this._eventObserver={onevent:function(e){return L(o,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,this._handleEvent(e)];case 1:return n.sent(),[2]}})})}},this._eventHandler={onMessagesAdded:qe,onMessagesUpdated:qe,onMessagesDeleted:qe,onChannelUpdated:qe,onChannelDeleted:qe,onHugeGapDetected:qe};var l=R.get(this._iid);this._localCacheEnabled=l.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=yn.of(this._iid,this._channel,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=bn.of(this._iid,this._channel),this._changelogSync.resume(),this._connectionObserver={onConnect:function(){o._checkHugeGap(),o._localCacheEnabled&&o._backgroundSync.resume(),o._changelogSync.resume()},onDisconnect:function(){return L(o,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,Qe.ready()];case 1:return e.sent()||(this._previousFillSync.stop(),this._nextFillSync.stop(),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}})})}},this._previousFillSync=new Pe(An("prev"),function(e){return L(o,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,prevLimit:this._syncLimit})];case 1:return(n=a.sent()).length>0?(t=Math.min.apply(Math,n.map(function(e){return e.createdAt})),this._syncRange.top=Math.min(this._syncRange.top,t),r=new mn(de.MESSAGE_FILL,n[0].sendingStatus),this._addOnlyMessageToView(n,{context:r}),[2,{hasNext:n.length<this._syncLimit||this._syncRange.top>=t,nextParams:this._syncRange.top}]):[2,{hasNext:!1,nextParams:0}]}})})}),this._nextFillSync=new Pe(An("next"),function(e){return L(o,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,nextLimit:this._syncLimit})];case 1:return(n=a.sent()).length>0?(t=Math.max.apply(Math,n.map(function(e){return e.createdAt})),this._syncRange.bottom=Math.max(this._syncRange.bottom,t),r=new mn(de.MESSAGE_FILL,n[0].sendingStatus),this._addOnlyMessageToView(n,{context:r}),[2,{hasNext:n.length<this._syncLimit||this._syncRange.bottom<=t,nextParams:this._syncRange.bottom}]):[2,{hasNext:!1,nextParams:0}]}})})}),fe.of(this._iid).addObserver(this._connectionObserver)}return e.prototype._handleEvent=function(e){var n=e.source,t=e.payload,r=void 0===t?{}:t,a=Ma.getInstance(this._iid);switch(e.source){case de.MESSAGE_BACKGROUND:break;case de.MESSAGE_CHANGELOG:var i=r,s=i.channel,o=i.updatedMessages,l=i.deletedMessageIds;if(s&&s.url===this._channel.url){if(o&&o.length>0){this._removeMatchingUnsentMessagesFromView(o);var u=new mn(n,o[0].sendingStatus);this._addMessagesToView(o,{context:u})}l&&l.length>0&&(f=this._removeMessagesFromView(l,{})).length>0&&(u=new mn(n,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f))}break;case de.LOCAL_MESSAGE_PENDING_CREATED:case de.LOCAL_MESSAGE_RESEND_STARTED:case de.LOCAL_MESSAGE_CANCELED:var c=r,d=(s=c.channel,c.message);u=new mn(n,d.sendingStatus),s.url===this._channel.url&&this._upsertUnsentMessagesToView([d],{context:u});break;case de.EVENT_MESSAGE_SENT:var h=r;if(s=h.channel,d=h.message,s.url===this._channel.url){var f=this._removeMatchingUnsentMessagesFromView([d]);if(this._hasNext)f.length>0&&(u=new mn(n,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,s,f));else{this._addMessagesToView([d],{});var u=new mn(n,d.sendingStatus);f.length>0?this._eventHandler.onMessagesUpdated(u,s,[d]):this._eventHandler.onMessagesAdded(u,s,[d])}}break;case de.EVENT_MESSAGE_RECEIVED:var p=r;s=p.channel,d=p.message,s.url!==this._channel.url||this._hasNext||(u=new mn(n,d.sendingStatus),this._addMessagesToView([d],{context:u}));break;case de.LOCAL_MESSAGE_FAILED:var m=r;s=m.channel,d=m.message,s.url===this._channel.url&&d.sendingStatus===a.MessageSendingStatus.FAILED&&(u=new mn(n,d.sendingStatus),this._upsertUnsentMessagesToView([d],{context:u}));break;case de.EVENT_MESSAGE_UPDATED:var g=r;s=g.channel,d=g.message,s.url===this._channel.url&&(u=new mn(n,d.sendingStatus),this._addMessagesToView([d],{context:u,isUpdateOnly:!0}));break;case de.EVENT_MESSAGE_DELETED:var _=r,y=(s=_.channel,_.messageId);s.url===this._channel.url&&(Tn.delete(y),(f=this._removeMessagesFromView([y],{})).length>0&&(u=new mn(n,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f)));break;case de.EVENT_DELIVERY_RECEIPT_UPDATED:case de.EVENT_READ_RECEIPT_UPDATED:if((s=r.channel).isGroupChannel()){o=[];for(var v=0,E=this._messages;v<E.length;v++)d=E[v],(Tn.get(d.messageId)||0)!==(A=this.channel.getUnreadMemberCount(d))&&(o.push(d),A>0?Tn.set(d.messageId,A):Tn.delete(d.messageId));o.length>0&&(u=new mn(n,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}break;case de.EVENT_USER_LEFT:var b=R.get(this._iid),C=r,N=(s=C.channel,C.user),S=b.get("currentUserId");if(N.userId!==S){o=[];for(var O=0,T=this._messages;O<T.length;O++){var A;d=T[O],(Tn.get(d.messageId)||0)!==(A=this.channel.getUnreadMemberCount(d))&&(o.push(d),A>0?Tn.set(d.messageId,A):Tn.delete(d.messageId))}o.length>0&&(u=new mn(n,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}else u=new Ae(n),this._eventHandler.onChannelDeleted(u,s.url);break;case de.EVENT_CHANNEL_CHANGED:case de.EVENT_USER_RECEIVED_INVITATION:case de.EVENT_USER_JOINED:case de.EVENT_CHANNEL_FROZEN:case de.EVENT_CHANNEL_UNFROZEN:case de.EVENT_CHANNEL_HIDDEN:case de.EVENT_CHANNEL_UNHIDDEN:case de.EVENT_USER_MUTED:case de.EVENT_USER_UNMUTED:case de.EVENT_TYPING_STATUS_UPDATED:case de.EVENT_OPERATOR_UPDATED:case de.EVENT_CHANNEL_METADATA_UPDATED:case de.EVENT_CHANNEL_METADATA_DELETED:case de.EVENT_CHANNEL_METACOUNTER_UPDATED:case de.EVENT_CHANNEL_METACOUNTER_DELETED:s=r.channel,u=new Ae(n),this._eventHandler.onChannelUpdated(u,s);break;case de.EVENT_CHANNEL_DELETED:s=r.channel,u=new Ae(n),this._eventHandler.onChannelDeleted(u,s.url)}},e.prototype._createRemoteMessageParams=function(e){var n=e.prevLimit,t=void 0===n?0:n,r=e.nextLimit,a=void 0===r?0:r,i=new(0,j.get(this._iid).MessageListParams);return i.isInclusive=!0,i.prevResultSize=t,i.nextResultSize=a,i.includeMetaArray=!0,i.includeReactions=!0,i.includeThreadInfo=!0,i.includeReplies=!0,i.includeParentMessageText=!0,this._filter.messageType&&(i.messageType=this._filter.messageType),this._filter.customTypes.length>0&&(i.customTypes=this._filter.customTypes),this._filter.senderUserIds.length>0&&(i.senderUserIds=this._filter.senderUserIds),i},e.prototype._getRemoteMessages=function(e){var n=e.ts,t=e.prevLimit,r=void 0===t?0:t,a=e.nextLimit,i=void 0===a?0:a;return L(this,void 0,void 0,function(){var e,t,a,s;return P(this,function(o){switch(o.label){case 0:return e=[],r>0?(a=this._createRemoteMessageParams({prevLimit:r,nextLimit:0}),[4,this._channel.getMessagesByTimestamp(n,a)]):[3,2];case 1:t=o.sent(),e=e.concat(t),this._hasPrevious=t.length>=r,o.label=2;case 2:return i>0?(a=this._createRemoteMessageParams({prevLimit:0,nextLimit:i}),[4,this._channel.getMessagesByTimestamp(n,a)]):[3,4];case 3:s=o.sent(),e=e.concat(s),this._hasNext=s.length>=i,o.label=4;case 4:return e.length>0?[4,this._upsertRemotelyFetchedMessages(e)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2,e]}})})},e.prototype._upsertRemotelyFetchedMessages=function(e,n){return void 0===n&&(n={}),L(this,void 0,void 0,function(){var t,r,a,i;return P(this,function(s){switch(s.label){case 0:return t=n.context,r=void 0===t?null:t,a=ln.of(this._iid),i=e.map(function(e){return e.reqId}),[4,a.removeUnsentMessages({channelUrl:this.channel.url,reqIds:i})];case 1:return s.sent(),this._removeMatchingUnsentMessagesFromView(e,{context:r}),[4,a.upsert(e,Je.SUCCEEDED)];case 2:return s.sent(),[2]}})})},e.prototype._checkHugeGap=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a,i,s,o,l,u,c,d,h,f,p,m=this;return P(this,function(g){switch(g.label){case 0:return g.trys.push([0,12,,13]),e=j.get(this._iid).BaseChannel,n=R.get(this._iid),t=n.get("apiClient"),this._messages.length>0?(r=ln.of(this._iid),a={from:this._messages[0].createdAt,to:Math.min(this._syncRange.top,this._messages[this._messages.length-1].createdAt),cachedCount:0},i=a,[4,r.countBetween(this._channel.url,this._filter,a.from,a.to)]):[3,8];case 1:return i.cachedCount=g.sent(),s={from:Math.max(this._syncRange.bottom,this._messages[0].createdAt),to:this.hasNext?this._messages[this._messages.length-1].createdAt:Number.MAX_SAFE_INTEGER,cachedCount:0},o=s,[4,r.countBetween(this._channel.url,this._filter,s.from,s.to)];case 2:return o.cachedCount=g.sent(),l={iid:this._iid,channelUrl:this._channel.url,channelType:this._channel.channelType,filter:this._filter,previous:a,next:s},[4,t.checkMessageHugeGap(U(U({},l),l.filter))];case 3:return u=g.sent(),(c={isHugeGap:!!u.is_huge_gap,previousMessages:u.prev_messages.map(function(n){return e.buildMessage(n,m._channel)})||[],previousHasMore:!!u.prev_hasmore,nextMessages:u.next_messages.map(function(n){return e.buildMessage(n,m._channel)})||[],nextHasMore:!!u.next_hasmore}).isHugeGap?[3,6]:(h=D(D([],c.previousMessages,!0),c.nextMessages,!0),X.debug("Message collection non-huge gap message fill count: ",h.length),h.length>0?(f=new mn(de.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,5]);case 4:g.sent(),this._addOnlyMessageToView(h,{context:f}),this._extendSyncRange(["prev"],c.previousMessages),this._extendSyncRange(["next"],c.nextMessages),c.previousHasMore&&this._previousFillSync.run(this._syncRange.top),c.nextHasMore&&this._nextFillSync.run(this._syncRange.bottom),g.label=5;case 5:return[3,7];case 6:setTimeout(function(){return m._eventHandler.onHugeGapDetected()},10),g.label=7;case 7:return[3,11];case 8:return d=Math.floor(this._syncLimit/2),[4,this._getRemoteMessages({ts:this._startingPoint,prevLimit:d,nextLimit:d})];case 9:return(h=g.sent()).length>0?(f=new mn(de.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,11];case 10:g.sent(),this._addOnlyMessageToView(h,{context:f}),this._extendSyncRange(["prev","next"],this._messages),g.label=11;case 11:return[3,13];case 12:return p=g.sent(),X.warn("Message collection huge gap checker error: ",p),this._hugeGapCheckTimer=setTimeout(function(){m._hugeGapCheckTimer=null,m._checkHugeGap()},3e3),[3,13];case 13:return[2]}})})},e.prototype._extendSyncRange=function(e,n){if(n.length>0){var t=n.map(function(e){return e.createdAt});e.includes("prev")&&(this._syncRange.top=Math.min.apply(Math,D([this._syncRange.top],t,!1))),e.includes("next")&&(this._syncRange.bottom=Math.max.apply(Math,D([this._syncRange.bottom],t,!1)))}},e.prototype._updateChildMessagesInView=function(e){var n=[];return this._messages.forEach(function(t){t.applyParentMessage(e)&&n.push(t)}),n},e.prototype._addOnlyMessageToView=function(e,n){void 0===n&&(n={});var t=n.context,r=void 0===t?null:t;n.isUpdateOnly;for(var a=Ma.getInstance(this._iid),i=[],s=0,o=e;s<o.length;s++){var l=o[s];if(l.sendingStatus===a.MessageSendingStatus.SUCCEEDED){var u=this._messages.map(function(e){return e.messageId}).indexOf(l.messageId);if(this._filter.match(l)){var c=this._channel.getUnreadMemberCount(l);if(Tn.set(l.messageId,c),-1===u){var d=nn(this._messages,l);i.push(l),this._messages.splice(d,0,l)}}}}r&&i.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,i)},e.prototype._addMessagesToView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=n.isUpdateOnly,i=void 0!==a&&a,s=Ma.getInstance(this._iid),o=[],l=[],u=[],c=0,d=e;c<d.length;c++){var h=d[c];if(h.sendingStatus===s.MessageSendingStatus.SUCCEEDED){var f=this._messages.map(function(e){return e.messageId}).indexOf(h.messageId);if(this._filter.match(h)){var p=this._channel.getUnreadMemberCount(h);if(Tn.set(h.messageId,p),f>=0){if(l.push(h),this._messages[f]=h,h.updatedAt>0){var m=this._updateChildMessagesInView(h);l=l.concat(m)}}else if(!i){var g=nn(this._messages,h);o.push(h),this._messages.splice(g,0,h)}}else f>=0&&(u.push(h),this._messages.splice(f,1))}}r&&(o.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,o),l.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,l),u.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,u))},e.prototype._removeMessagesFromView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._messages.map(function(e){return e.messageId}).indexOf(o);if(l>=0){var u=this._messages[l];a.push(u),this._messages.splice(l,1)}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._upsertUnsentMessagesToView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=[],i=[],s=[],o=0,l=e;o<l.length;o++){var u=l[o],c=this._unsentMessages.map(function(e){return e.reqId}).indexOf(u.reqId);if(this._filter.match(u))if(c>=0)i.push(u),this._unsentMessages[c]=u;else{var d=nn(this._unsentMessages,u);a.push(u),this._unsentMessages.splice(d,0,u)}else c>=0&&(this._unsentMessages.splice(c,1),s.push(u))}r&&(a.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,a),i.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,i),s.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,s))},e.prototype._removeMatchingUnsentMessagesFromView=function(e,n){void 0===n&&(n={});for(var t=n.context,r=void 0===t?null:t,a=[],i=0,s=e;i<s.length;i++){var o=s[i];if((o.isUserMessage()||o.isFileMessage())&&o._isSentByMe()){var l=this._unsentMessages.map(function(e){return e.reqId}).indexOf(o.reqId);if(l>=0){var u=this._unsentMessages[l];a.push(u),this._unsentMessages.splice(l,1)}}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._removeFailedMessagesFromView=function(e){var n=Ma.getInstance(this._iid),t=[],r=[],a=this._unsentMessages.map(function(e){return e.reqId});if(e)for(var i=0,s=e;i<s.length;i++){var o=s[i],l=a.indexOf(o.reqId);l>=0&&this._unsentMessages[l].sendingStatus===n.MessageSendingStatus.FAILED?t.push(this._unsentMessages[l]):r.push(this._unsentMessages[l])}else for(var u=0,c=this._unsentMessages;u<c.length;u++)(o=c[u]).sendingStatus===n.MessageSendingStatus.FAILED?t.push(o):r.push(o);return this._unsentMessages=r,t},e._processNextAutoResend=function(e){if(e.isCacheEnabled&&!e.isInBackground&&e.getConnectionState()===e.ConnectionState.OPEN)try{var n=e.getAutoResendQueue();if(n.length>0){e.getIsProcessingAutoResend()||(X.debug("Auto-resend queue started."),e.setIsProcessingAutoResend(!0));var t=n[0];X.debug("Processing auto-resend for message request id: ",t.reqId),j.get(e._iid).GroupChannel.getChannel(t.channelUrl,w.INTERNAL_CALL,function(n,r){var a;if(e.getErrorFirstCallback()&&(r=(a=[n,r])[0],n=a[1]),r)throw r;t.isUserMessage()?n._autoResendUserMessage(t):t.isFileMessage()&&n._autoResendFileMessage(t)})}else X.debug("Auto-resend queue finished."),e.setIsProcessingAutoResend(!1)}catch(n){X.warn("Process auto-resend error: ",n),e.setIsProcessingAutoResend(!1)}},e._completeCurrentAndProcessNextAutoResend=function(e,n){if(e.isCacheEnabled&&n._isAutoResendRegistered){var t=e.getAutoResendQueue();if(n.sendingStatus===e.MessageSendingStatus.SUCCEEDED||n.sendingStatus===e.MessageSendingStatus.FAILED&&!se.isAutoResendableError(n.errorCode))t.length>0&&n.reqId===t[0].reqId&&(t.shift(),this._processNextAutoResend(e));else if(n.sendingStatus===e.MessageSendingStatus.PENDING){if(t.length>0&&t.map(function(e){return e.reqId}).indexOf(n.reqId)>-1)return;t.push(n),!e.getIsProcessingAutoResend()&&t.length>0&&this._processNextAutoResend(e)}}},e._processAutoResendRegisteredPendingMessages=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l,u,c,d,h;return P(this,function(f){switch(f.label){case 0:return n=ln.of(e._iid),t=ge.of(e._iid),(r=new en).sendingStatus=e.MessageSendingStatus.PENDING,[4,n.getAllUnsentMessages(r)];case 1:a=f.sent(),i=0,s=a,f.label=2;case 2:return i<s.length?(o=s[i],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,7];case 3:return l=f.sent(),o._isAutoResendRegistered?(u=(new Date).getTime(),c=o.createdAt+2592e5,u<=c?(-1===(d=e.getAutoResendQueue()).map(function(e){return e.reqId}).indexOf(o.reqId)&&d.push(o),[3,6]):[3,4]):[3,6];case 4:return X.debug("Auto-resend registered pending messaged expired. Expiration date: ",new Date(c).toLocaleString()),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h._isAutoResendRegistered=!1,[4,n.upsert([h],Je.UNSENT)];case 5:f.sent(),t.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=6;case 6:return i++,[3,2];case 7:return[2]}})})},e._processNonAutoResendRegisteredPendingMessages=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l,u;return P(this,function(c){switch(c.label){case 0:return n=ln.of(e._iid),t=ge.of(e._iid),(r=new en).sendingStatus=e.MessageSendingStatus.PENDING,[4,n.getAllUnsentMessages(r)];case 1:a=c.sent(),i=0,s=a,c.label=2;case 2:return i<s.length?(o=s[i],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,6];case 3:return l=c.sent(),o._isAutoResendRegistered?[3,5]:(X.debug("Cached pending message is not auto-resend registered. Changing its sending status to failed: ",o.reqId),(u=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,u.requestState=e.MessageRequestState.FAILED,u.errorCode=F.ACK_TIMEOUT,[4,n.upsert([u],Je.UNSENT)]);case 4:c.sent(),t.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:u}}),c.label=5;case 5:return i++,[3,2];case 6:return[2]}})})},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){var e=Ma.getInstance(this._iid);return this._unsentMessages.filter(function(n){return n.sendingStatus===e.MessageSendingStatus.PENDING})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){var e=Ma.getInstance(this._iid);return this._unsentMessages.filter(function(n){return n.sendingStatus===e.MessageSendingStatus.FAILED})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startingPoint",{get:function(){return this._startingPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var n=this,t=new Nn;this._messages=[],this._syncRange=new De(U({},On)),this._hasNext=!0,this._hasPrevious=!0;var r=Math.floor(this._limit/2),a=ln.of(this._iid),i=ge.of(this._iid);switch(e){case on.CACHE_ONLY:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint,r).then(function(e){return L(n,void 0,void 0,function(){var n;return P(this,function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return n=r.sent(),this._upsertUnsentMessagesToView(n),this._addMessagesToView(e),t.invokeCacheResult(null,e),[2]}})})}).catch(function(e){t.invokeCacheResult(e,null)}).finally(function(){i.addObserver(n._eventObserver)});break;case on.CACHE_AND_REPLACE_BY_API:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint,r).then(function(e){return L(n,void 0,void 0,function(){var n;return P(this,function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return n=r.sent(),this._upsertUnsentMessagesToView(n),this._addMessagesToView(e),t.invokeCacheResult(null,e),[2]}})})}).catch(function(e){t.invokeCacheResult(e,null)}).finally(function(){n._getRemoteMessages({ts:n._startingPoint,prevLimit:r,nextLimit:r}).then(function(e){n._messages=[],n._addMessagesToView(e),n._extendSyncRange(["prev","next"],n._messages),t.invokeApiResult(null,e)}).catch(function(e){t.invokeApiResult(e,null)}).finally(function(){i.addObserver(n._eventObserver)})})}return t},e.prototype.loadPrevious=function(){return L(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return this._hasPrevious?(e=this._messages.length>0?Math.min.apply(Math,this._messages.map(function(e){return e.createdAt})):Number.MAX_SAFE_INTEGER,[4,Qe.ready()]):[3,5];case 1:return t.sent()?[3,3]:(X.debug("Message collection loadPrevious() from the cache."),[4,ln.of(this._iid).getPreviousMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return n=t.sent(),this._addMessagesToView(n),[2,n];case 3:return X.debug("Message collection loadPrevious() from the server."),[4,this._getRemoteMessages({ts:e,prevLimit:this._limit})];case 4:return n=t.sent(),this._addMessagesToView(n),rn(this._syncRange,["prev"],this._messages),[2,n];case 5:return[2,[]]}})})},e.prototype.loadNext=function(){return L(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return this._hasNext?(e=this._messages.length>0?Math.max.apply(Math,this._messages.map(function(e){return e.createdAt})):0,[4,Qe.ready()]):[3,5];case 1:return t.sent()?[3,3]:(X.debug("Message collection loadNext() from the cache."),[4,ln.of(this._iid).getNextMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return n=t.sent(),this._addMessagesToView(n),[2,n];case 3:return X.debug("Message collection loadNext() from the server."),[4,this._getRemoteMessages({ts:e,nextLimit:this._limit})];case 4:return n=t.sent(),this._addMessagesToView(n),rn(this._syncRange,["next"],this._messages),[2,n];case 5:return[2,[]]}})})},e.prototype.removeFailedMessages=function(e){return L(this,void 0,void 0,function(){var n,t,r,a;return P(this,function(i){switch(i.label){case 0:return n=Ma.getInstance(this._iid),t=ln.of(this._iid),r=e.map(function(e){return e.reqId}),[4,t.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:n.MessageSendingStatus.FAILED,reqIds:r})];case 1:return a=i.sent(),this._removeFailedMessagesFromView(e),[2,a]}})})},e.prototype.removeAllFailedMessages=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return e=Ma.getInstance(this._iid),[4,ln.of(this._iid).removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:e.MessageSendingStatus.FAILED})];case 1:return n.sent(),this._removeFailedMessagesFromView(),[2]}})})},e.prototype.dispose=function(){this._localCacheEnabled&&(this._previousFillSync.stop(),this._nextFillSync.stop(),this._backgroundSync.pause()),this._changelogSync.pause(),fe.of(this._iid).removeObserver(this._connectionObserver),this._hugeGapCheckTimer&&(clearTimeout(this._hugeGapCheckTimer),this._hugeGapCheckTimer=null),ge.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setMessageCollectionHandler=function(e){this._eventHandler=e},e}(),In={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},Rn=new WeakMap,kn=new WeakMap,Mn=function(){function e(n){f(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,Rn.set(this,{}),kn.set(this,""),n&&this.__update(n)}return m(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===h(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new pn(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&(e.hasOwnProperty("ts")&&"number"==typeof e.ts?this._refreshMetaData(e.metadata,e.ts):this._refreshMetaData(e.metadata,-1)),e.hasOwnProperty("cached_primary_key")&&(this.cachedPrimaryKey=e.cached_primary_key)}},{key:"_addOrUpdateCachedMetaData",value:function(e,n){var t=this,r=Rn.get(this);Object.keys(e).forEach(function(a){var i=r[a],s=e[a];i?n>i.updatedAt&&(i.value=s,i.updatedAt=n,i.isRemoved=!1):r[a]={value:s,updatedAt:n,isRemoved:!1},Ze.of(t._iid).upsert([t]).then(function(){}).catch(function(e){X.error(e)})})}},{key:"_markAsDeletedCachedMetaData",value:function(e,n){var t=this,r=Rn.get(this);e.forEach(function(e){var a=r[e];a?n>a.updatedAt&&(a.isRemoved=!0,a.updatedAt=n):r[e]={value:null,updatedAt:n,isRemoved:!0},Ze.of(t._iid).upsert([t]).then(function(){}).catch(function(e){X.error(e)})})}},{key:"_refreshMetaData",value:function(e,n){var t={};Object.keys(e).forEach(function(r){t[r]={value:e[r],updatedAt:n,isRemoved:!1}}),Rn.set(this,t)}},{key:"_clearCachedMetaData",value:function(){Rn.set(this,{})}},{key:"cachedPrimaryKey",get:function(){return kn.get(this)},set:function(e){kn.set(this,e)}},{key:"isGroupChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,j.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,j.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,j.get(this._iid).PreviousMessageListQuery)(this)}},{key:"serialize",value:function(){var e=this;return cn.serialize(this,function(n){if(null!==n.lastMessage&&"object"===h(n.lastMessage)){var t=n.lastMessage;t.hasOwnProperty("_sender")&&(t.sender=t._sender,delete t._sender,n.lastMessage=t)}n.hasOwnProperty("_messageOffsetTimestamp")&&(n.messageOffsetTimestamp=n._messageOffsetTimestamp,delete n._messageOffsetTimestamp),n.metadata=e.getCachedMetaData(),e.cachedPrimaryKey&&(n.cachedPrimaryKey=e.cachedPrimaryKey)})}},{key:"getMessageChangeLogsByTimestamp",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:e,token:null,isOpenChannel:a.isOpenChannel(),includeMetaArray:n,includeReactions:t}).then(function(e){var n=j.get(a._iid).BaseChannel,t={updatedMessages:e.updated.map(function(e){return n.buildMessage(e,a)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};r(null,t)}).catch(function(e){r(e,null)})},r)}},{key:"getMessageChangeLogsByToken",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel(),includeMetaArray:n,includeReactions:t}).then(function(e){var n=j.get(a._iid).BaseChannel,t={updatedMessages:e.updated.map(function(e){return n.buildMessage(e,a)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};r(null,t)}).catch(function(e){r(e,null)})},r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,n,t){var r=this,a=j.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){o?t(o,null):R.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,ts:null,token:e,isOpenChannel:r.isOpenChannel()},n)).then(function(e){var n={updatedMessages:e.updated.map(function(e){return i.buildMessage(e,r)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};t(null,n)}).catch(function(e){t(e,null)})},t)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,n,t){var r=this,a=j.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){o?t(o,null):R.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,timestamp:e,token:null,isOpenChannel:r.isOpenChannel()},n)).then(function(e){var n={updatedMessages:e.updated.map(function(e){return i.buildMessage(e,r)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};t(null,n)}).catch(function(e){t(e,null)})},t)}},{key:"getMyMutedInfo",value:function(e){var n=this;return le(this._iid,function(e){var t=Ma.getInstance(n._iid);R.get(n._iid).container.apiClient.getMyMutedInfo({channelUrl:n.url,userId:t.currentUser?t.currentUser.userId:null,isGroupChannel:n.isGroupChannel()},function(n,t){var r=null;n||(r={isMuted:t.is_muted,startAt:t.start_at,endAt:t.end_at,remainingDuration:t.remaining_duration,description:t.description}),e(n,r)})},e)}},{key:"_parseMessageListParams",value:function(e){for(var n=j.get(this._iid),t=n.MessageListParams,r=new t,a=null,i=!1,s=0,o=0,l=!1,u="",c="",d=null,h=!1,f=!1,p=null,m=arguments.length,g=new Array(m>1?m-1:0),_=1;_<m;_++)g[_-1]=arguments[_];switch(e){case"prev":var y=ye.parse(g,[new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),v=N(y,11);a=v[0],i=v[2],s=v[3],l=v[4],u=v[5],c=v[6],d=v[7],h=v[8],f=v[9],p=v[10];break;case"next":var E=ye.parse(g,[new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),b=N(E,11);a=b[0],i=b[2],o=b[3],l=b[4],u=b[5],c=b[6],d=b[7],h=b[8],f=b[9],p=b[10];break;case"prevnext":var C=ye.parse(g,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),S=N(C,11);a=S[0],s=S[2],o=S[3],l=S[4],u=S[5],c=S[6],d=S[7],h=S[8],f=S[9],p=S[10],i=!0}return a?[null,p]:(r.isInclusive=i,r.prevResultSize=s,r.nextResultSize=o,r.reverse=l,r.messageType=u,r.customType=c,""===r.customType&&(r.customType="*"),r.senderUserIds=d,r.includeMetaArray=h,r.includeReactions=f,[r,p])}},{key:"_getMessageList",value:function(e,n,t,r){var a=this,i=j.get(this._iid),s=i.MessageListParams,o=null,l=ye.parse(arguments,[new ye({type:"number"}),new ye({type:"string",constraint:function(e){return Object.values(In).includes(e)}}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),u=N(l,5);return o=u[0],e=u[1],n=u[2],t=u[3],r=u[4],le(this._iid,function(r){o?r(o,null):R.get(a._iid).container.apiClient.getMessageList(d(d({channel:a,token:e,tokenType:n},t),{},{shouldReverse:t.reverse})).then(function(e){var n=j.get(a._iid).BaseChannel,t=e.messages.map(function(e){return n.buildMessage(e,a)}).filter(function(e){return null!==e});r(null,t)}).catch(function(e){r(e,null)})},r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var n=this._parseMessageListParams.apply(this,["prev"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.TIMESTAMP,r,a)}},{key:"getNextMessagesByTimestamp",value:function(e){var n=this._parseMessageListParams.apply(this,["next"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.TIMESTAMP,r,a)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var n=this._parseMessageListParams.apply(this,["prevnext"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.TIMESTAMP,r,a)}},{key:"getPreviousMessagesByID",value:function(e){var n=this._parseMessageListParams.apply(this,["prev"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.MESSAGE_ID,r,a)}},{key:"getNextMessagesByID",value:function(e){var n=this._parseMessageListParams.apply(this,["next"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.MESSAGE_ID,r,a)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var n=this._parseMessageListParams.apply(this,["prevnext"].concat(S(ye.toArray(arguments)))),t=N(n,2),r=t[0],a=t[1];return this._getMessageList(e,In.MESSAGE_ID,r,a)}},{key:"getMessagesByTimestamp",value:function(e,n,t){return this._getMessageList(e,In.TIMESTAMP,n,t)}},{key:"getMessagesByMessageId",value:function(e,n,t){return this._getMessageList(e,In.MESSAGE_ID,n,t)}},{key:"_sendUserMessage",value:function(e){var n=this,t=e.reqId,r=e.message,a=e.data,i=e.customType,s=e.metaArrays,o=e.mentionType,l=e.mentionedUserIds,u=e.mentionedUsers,c=e.mentionedMessageTemplate,h=e.pushNotificationDeliveryOption,f=e.rootMessageId,p=e.parentMessageId,m=e.translationTargetLanguages,g=e.appleCriticalAlertOptions,_=e.silent,y=void 0!==_&&_,v=e.isReplyToChannel,E=e.messageParams,b=e.oldMessage,C=void 0===b?null:b,N=e.isManualResend,S=void 0!==N&&N,O=e.callback,T=j.get(this._iid),A=T.Command,w=T.UserMessage,I=Ma.getInstance(this._iid),k=ln.of(this._iid),M=Ze.of(this._iid),U=ge.of(this._iid),L=R.get(this._iid).container.localCacheEnabled;t||(t=A.generateRequestId());var P={};Array.isArray(m)&&m.forEach(function(e){return P[e]=""});var D=w.objectify({messageId:0,reqId:t,user:I.currentUser||{},channel:this,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedUsers:u,mentionedMessageTemplate:c,rootMessageId:f,parentMessageId:p,translations:P,silent:y,appleCriticalAlertOptions:g,isReplyToChannel:v,messageParams:E,createdAt:(new Date).getTime()}),x=new w(D);if(x.requestState=I.MessageRequestState.PENDING,x.sendingStatus=I.MessageSendingStatus.PENDING,x.requestedMentionUserIds=l,x._messageParams=E,!I.currentUser){var H=new F("Connection should be made first.",F.CONNECTION_REQUIRED),G=new w(D);return G.requestState=I.MessageRequestState.FAILED,G.sendingStatus=I.MessageSendingStatus.FAILED,G.requestedMentionUserIds=l,G.errorCode=H.code,O(H,G),x}return(!n.isGroupChannel()||C&&C._isAutoResendRegistered?Promise.resolve():k.upsert([x],Je.UNSENT).then(function(){U.send({source:S?de.LOCAL_MESSAGE_RESEND_STARTED:de.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:n,message:x}})})).then(function(){var e=A.bMessage({channelUrl:n.url,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:c,requestId:t,rootMessageId:f,parentMessageId:p,silent:y,translationTargetLanguages:m,pushNotificationDeliveryOption:h,appleCriticalAlertOptions:g,isReplyToChannel:v});x.reqId=e.requestId,n.isGroupChannel()&&I.getConnectionState()!==I.ConnectionState.OPEN&&I.currentUser&&!I.connecting&&!I.reconnecting&&"string"==typeof i&&0===i.indexOf("SB_VIDEOCHAT")?R.get(I._iid).container.apiClient.sendUserMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),message:r,data:a,customType:i,translationTargetLanguages:m,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:c,pushNotificationDeliveryOption:h,rootMessageId:f,parentMessageId:p,appleCriticalAlertOptions:g,isReplyToChannel:v},function(e,r){var a=null;if(e){if(x._isAutoResendRegistered&&se.isAutoResendableError(e.code))return;(a=new w(D)).requestState=I.MessageRequestState.FAILED,a.requestedMentionUserIds=l,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),e.code===F.REQUEST_CANCELED?(a.sendingStatus=I.MessageSendingStatus.CANCELED,k.removeUnsentMessages({channelUrl:n.url,sendingStatus:I.MessageSendingStatus.PENDING,reqIds:[t]}).then(function(){U.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:n,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){O&&O(new F(e.message,e.code),a)})):(a.errorCode=e.code,a.sendingStatus=I.MessageSendingStatus.FAILED,L&&se.isAutoResendableError(e.code)&&(a.sendingStatus=I.MessageSendingStatus.PENDING,a.errorCode=0,a._isAutoResendRegistered=!0),k.upsert([a],Je.UNSENT).then(function(){wn._completeCurrentAndProcessNextAutoResend(I,a),U.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:n,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){var n=a._clone();n.sendingStatus=I.MessageSendingStatus.FAILED,n.errorCode=e.code,n._isAutoResendRegistered=!1,O&&O(new F(e.message,e.code),n)}))}else{for(var i in(a=new w(r)).reqId=t,a.requestState=I.MessageRequestState.SUCCEEDED,a.sendingStatus=I.MessageSendingStatus.SUCCEEDED,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),n.lastMessage=a,I.channelHandlers)I.channelHandlers[i].onChannelChanged(n);M.upsert([n]).then(function(){U.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}).then(function(){return k.removeUnsentMessages({channelUrl:n.url,sendingStatus:I.MessageSendingStatus.PENDING,reqIds:[t]})}).then(function(){return k.upsert([a],Je.SUCCEEDED)}).then(function(){wn._completeCurrentAndProcessNextAutoResend(I,a),U.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:n,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){O&&O(null,a)})}}):I.sendCommand(e,function(r,a){if(I.getErrorFirstCallback()){var i=[r,a];a=i[0],r=i[1]}if(a){if(x._isAutoResendRegistered&&se.isAutoResendableError(a.code))return;var s=new w(D);s.reqId=e.requestId,s.requestState=I.MessageRequestState.FAILED,a.code===F.REQUEST_CANCELED?(s.sendingStatus=I.MessageSendingStatus.CANCELED,n.isGroupChannel()&&k.removeUnsentMessages({channelUrl:n.url,sendingStatus:I.MessageSendingStatus.PENDING,reqIds:[t]}).then(function(){U.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:n,message:s}})}).catch(function(e){return X.error(e)}).finally(function(){O&&O(new F(a.message,a.code),s)})):(s.sendingStatus=I.MessageSendingStatus.FAILED,s.errorCode=a.code,s.requestedMentionUserIds=l,n.isGroupChannel()?(L&&se.isAutoResendableError(a.code)&&(s.sendingStatus=I.MessageSendingStatus.PENDING,s.errorCode=0,s._isAutoResendRegistered=!0),k.upsert([s],Je.UNSENT).then(function(){return wn._completeCurrentAndProcessNextAutoResend(I,s),U.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:n,message:s}})}).catch(function(e){return X.error(e)}).finally(function(){var e=s._clone();e.sendingStatus=I.MessageSendingStatus.FAILED,e.errorCode=a.code,e._isAutoResendRegistered=!1,O&&O(new F(a.message,a.code),e)})):O&&O(new F(a.message,a.code),s))}else{var o=new w(d(d({},r.getJsonElement()),{},{messageParams:E}));o.reqId=t,o.requestState=I.MessageRequestState.SUCCEEDED,o.sendingStatus=I.MessageSendingStatus.SUCCEEDED,C&&(o._isAutoResendRegistered=C._isAutoResendRegistered);var u=I.currentUser;if(u&&o._sender&&u.userId===o._sender.userId&&(u.nickname!==o._sender.nickname&&(u.nickname=o._sender.nickname),u.plainProfileUrl!==o._sender.plainProfileUrl&&(u.plainProfileUrl=o._sender.plainProfileUrl),se.deepEqual(u.metaData,o._sender.metaData)||(u.metaData=o._sender.metaData)),n.isGroupChannel()){n.lastMessage=o,Object.keys(I.channelHandlers).forEach(function(e){I.channelHandlers[e].onChannelChanged(n)});var c=ge.of(n._iid);Ze.of(n._iid).upsert([n]).then(function(){c.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}).then(function(){return k.removeUnsentMessages({channelUrl:n.url,sendingStatus:I.MessageSendingStatus.PENDING,reqIds:[t]})}).then(function(){return k.upsert([o],Je.SUCCEEDED)}).then(function(){wn._completeCurrentAndProcessNextAutoResend(I,o),c.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:n,message:o}})}).catch(function(e){return X.error(e)}).finally(function(){O&&O(null,o)})}else O&&O(null,o)}})}),x}},{key:"sendUserMessage",value:function(){var e=ye.toArray(arguments),n=e.pop(),t=null,r=null,a=j.get(this._iid),i=a.UserMessageParams;if("function"==typeof n)if(e[0]instanceof i)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new i).data="",r.customType="",r.message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:t=ye.error}else t=ye.error;else t=ye.error;var s=R.get(this._iid),o=s.container.isErrorFirstInCallback;return!t&&r._validate()&&r.message?this._sendUserMessage(d(d({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,mentionedUsers:r.mentionedUsers,mentionedMessageTemplate:r.mentionedMessageTemplate,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,messageParams:r,callback:function(e,t){o?n(e,t):n(t,e)}})):(o?n(ye.error,null):n(null,ye.error),null)}},{key:"_autoResendUserMessage",value:function(e){var n=this,t=Ma.getInstance(this._iid);if(t&&t.currentUser){var r=e._messageParams;return new Promise(function(t,a){return n._sendUserMessage(d(d({},r),{},{reqId:e.reqId,metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,pushNotificationDeliveryOption:r.pushNotificationDeliveryOption,messageParams:r,oldMessage:e,callback:function(e,n){e?a(e):t(n)}}))})}}},{key:"_autoResendFileMessage",value:function(e){var n=Ma.getInstance(this._iid);if(n&&n.currentUser){var t=this._parsePendingFileMessage(e),r=j.get(this._iid).FileMessageQueue;r.create(this).addJob(new r.Job({fileInfo:t,pendingMessage:e._clone(),requestId:e.reqId,error:t.error,response:null}))}}},{key:"resendUserMessage",value:function(e,n){var t=this,r=j.get(this._iid),a=r.UserMessage,i=r.UserMessageParams,s=null,o=ye.parse(arguments,[new ye({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===t.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===h(e.translations)&&!Array.isArray(e.translations)}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],n=l[2],le(this._iid,function(n){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(s,null);else{var r=Object.keys(e.translations),a=i.PushNotificationDeliveryOption.DEFAULT;t._sendUserMessage(d(d({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:a,reqId:e.reqId,messageParams:e._messageParams,isManualResend:!0,callback:n}))}},n)}},{key:"updateUserMessage",value:function(e,n,t,r,a){var i=this,s=j.get(this._iid),o=s.Command,l=s.UserMessage,u=s.UserMessageParams,c=arguments,h=null,f=null;if("number"==typeof e)switch(c.length){case 3:var p=ye.parse(c,[new ye({type:"number"}),new ye({type:u}),new ye({type:"callback"})]),m=N(p,4);h=m[0],e=m[1],f=m[2],a=m[3];break;case 5:f=new u;var g=ye.parse(c,[new ye({type:"number"}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),_=N(g,6);h=_[0],e=_[1],n=_[2],t=_[3],r=_[4],a=_[5],f.message=n,f.data=t,f.customType=r}return le(this._iid,function(n){if(!h&&f&&f._validate()){var t=o.bUpdateUserMessage(d(d({channelUrl:i.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds,mentionedMessageTemplate:f.mentionedMessageTemplate})),r=Ma.getInstance(i._iid);r.sendCommand(t,function(e,t){if(r.getErrorFirstCallback()){var a=[e,t];t=a[0],e=a[1]}var s=null;if(!t&&(s=new l(d(d({},e.getJsonElement()),{},{messageParams:f})),i.isGroupChannel())){var o=!1;i.lastMessage?(i.lastMessage.createdAt<s.createdAt||i.lastMessage.createdAt===s.createdAt&&i.lastMessage.messageId===s.messageId&&i.lastMessage.updatedAt<s.updatedAt)&&(i.lastMessage=s,o=!0):(i.lastMessage=s,o=!0);var u=ge.of(i._iid);!s.silent&&o&&(Object.keys(r.channelHandlers).forEach(function(e){r.channelHandlers[e].onChannelChanged(i)}),Ze.of(i._iid).upsert([i]).then(function(){u.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:i}})}).catch(function(e){return X.error(e)})),ln.of(i._iid).upsert([s],Je.SUCCEEDED).then(function(){u.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:i,message:s}})}).catch(function(e){return X.error(e)})}n(t,s)})}else n(ye.error,null)},a)}},{key:"translateUserMessage",value:function(e,n,t){var r=this,a=Ma.getInstance(this._iid),i=j.get(this._iid),s=i.UserMessage,o=null,l=ye.parse(arguments,[new ye({type:s,constraint:function(e){return e.channelUrl===r.url&&e.sendingStatus===a.MessageSendingStatus.SUCCEEDED}}),new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){o?t(o,null):R.get(r._iid).container.apiClient.translateUserMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:n},function(e,n){var r=null;e||(r=new s(n)),t(e,r)})},t)}},{key:"_parsePendingFileMessage",value:function(e){var n=e._messageParams.serialize(),t=n.data,r=n.customType,a=n.fileUrl,i=n.thumbnailSizes,s=n.mentionType,o=n.mentionedUserIds,l=n.metaArrays,u=n.parentMessageId,c=n.pushNotificationDeliveryOption,d=e._messageParams;return{file:d.file?d.file:a,name:e.name,type:e.type,size:e.size,data:t,customType:r,thumbnailSizes:i,metaArrays:l,mentionType:s,mentionedUserIds:o,pushNotificationDeliveryOption:c,rootMessageId:u,parentMessageId:u,appleCriticalAlertOptions:d.appleCriticalAlertOptions,messageParams:e._messageParams,silent:e.silent,error:null,progressHandler:null,callback:null}}},{key:"_parseFileMessageArguments",value:function(e){var n=j.get(this._iid),t=n.BaseMessageParams,r=n.FileMessageParams,a={reqId:null,error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:t.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,appleCriticalAlertOptions:null,isReplyToChannel:!1,messageParams:null,callback:null};if("function"==typeof e[e.length-1]&&(a.callback=e.pop()),"function"==typeof e[e.length-1]&&(a.progressHandler=e.pop()),e[0]instanceof r)a.reqId=e[0]._reqId,a.file=e[0].file||e[0].fileUrl,a.name=e[0].fileName,a.type=e[0].mimeType,a.size=e[0].fileSize,a.data=e[0].data,a.customType=e[0].customType,a.thumbnailSizes=e[0].thumbnailSizes,a.metaArrays=e[0].metaArrays,a.mentionType=e[0]._mentionType,a.mentionedUserIds=e[0]._mentionedUserIds,a.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,a.rootMessageId=e[0].rootMessageId,a.parentMessageId=e[0].parentMessageId,a.silent=e[0].silent,e[0]._validate()||(a.error=ye.error),a.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions,a.isReplyToChannel=e[0].isReplyToChannel,a.messageParams=e[0];else if(se.isFile(e[0])||"string"==typeof e[0]){switch(a.file=e[0],e.length){case 1:break;case 2:a.data=e[1];break;case 3:a.data=e[1],a.customType=e[2];break;case 4:a.data=e[1],a.customType=e[2],a.thumbnailSizes=e[3];break;case 5:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4];break;case 6:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5];break;case 7:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5],a.thumbnailSizes=e[6]}var i=N(ye.parse([a.file,a.name,a.type,a.size,a.data,a.customType,a.thumbnailSizes],[new ye({type:["file","string"]}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"array"})]),8);a.error=i[0],a.file=i[1],a.name=i[2],a.type=i[3],a.size=i[4],a.data=i[5],a.customType=i[6],a.thumbnailSizes=i[7];var s=se.isFile(a.file);s&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a.messageParams={mentionType:t.MentionType.USERS,mentionedUserIds:a.mentionedUserIds,cachedMentionedUsers:[],cachedMentionedUserIds:[],metaArrays:a.metaArrays,parentMessageId:a.parentMessageId,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption,appleCriticalAlertOptions:a.appleCriticalAlertOptions,fileName:a.name,mimeType:a.type,fileSize:a.size,data:a.data,customType:a.customType,isUpdate:!1,file:s?a.file:null,fileUrl:s?null:a.file,thumbnailSizes:a.thumbnailSizes}}else a.error=ye.error;return se.isFile(a.file)&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a}},{key:"_createTempFileMessage",value:function(e){try{var n,t=Ma.getInstance(this._iid),r=j.get(this._iid),a=r.Command,i=r.FileMessage,s=d(d({},e),{},{messageId:0,reqId:null!==(n=e.reqId)&&void 0!==n?n:a.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map(function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}}),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}),o=i.objectify(s);return new i(o)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this,n=ye.toArray(arguments),t=this._parseFileMessageArguments(n),r=j.get(this._iid),a=r.Command,i=null,s=a.generateRequestId();t.error||((i=this._createTempFileMessage(t)).requestedMentionUserIds=t.mentionedUserIds,s=i.reqId);var o=Ma.getInstance(this._iid);if(o&&o.currentUser||(t.error=new F("Connection should be made first.",F.CONNECTION_REQUIRED)),this.isGroupChannel()){var l=ln.of(this._iid),u=ge.of(this._iid);l.upsert([i],Je.UNSENT).then(function(){u.send({source:de.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:e,message:i}})})}var c=j.get(this._iid),d=c.FileMessageQueue,h=d.create(this);return h.addJob(new d.Job({fileInfo:t,pendingMessage:i,requestId:s,error:t.error,response:null})),i}},{key:"sendFileMessages",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.progress?t.progress:function(){},a=t.sent?t.sent:function(){},i=t.complete?t.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var s=[];return e.forEach(function(t,o){s.push(n.sendFileMessage(t,r,function(n,t){a(n,t),o===e.length-1&&i(null)}))}),s}return i(ye.error),null}},{key:"resendFileMessage",value:function(e,n,t){var r=this,a=j.get(this._iid),i=a.FileMessage,s=a.FileMessageParams,o=null,l=ye.parse(arguments,[new ye({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&Array.isArray(e.thumbnails)}}),new ye({type:"file",optionalIf:function(e){var n,t,r=!!e[0].plainUrl,a=se.isFile(null===(n=e[0])||void 0===n||null===(t=n.messageParams)||void 0===t?void 0:t.file);return r||a},defaultValue:null}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(o,null);else{var a,i=new s;i._reqId=e.reqId,e.plainUrl?i.fileUrl=e.plainUrl:n?i.file=n:se.isFile(null===(a=e.messageParams)||void 0===a?void 0:a.file)&&(i.file=e.messageParams.file),i.fileName=e.name,i.fileSize=e.size,i.mimeType=e.type,i.data=e.data,i.customType=e.customType,i.mentionType=e.mentionType,i.mentionedUserIds=e.requestedMentionUserIds,i.metaArrays=e.metaArrays,i.thumbnailSizes=e.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}}),i.appleCriticalAlertOptions=e.appleCriticalAlertOptions,r.sendFileMessage(i,t)}},t)}},{key:"updateFileMessage",value:function(e,n,t,r){var a=this,i=j.get(this._iid),s=i.Command,o=i.FileMessage,l=i.FileMessageParams,u=arguments,c=null,h=null;if("number"==typeof e)switch(u.length){case 3:var f=ye.parse(u,[new ye({type:"number"}),new ye({type:l}),new ye({type:"callback"})]),p=N(f,4);c=p[0],e=p[1],h=p[2],r=p[3],h&&(h._isUpdate=!0);break;case 4:h=new l;var m=ye.parse(u,[new ye({type:"number"}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),g=N(m,5);c=g[0],e=g[1],n=g[2],t=g[3],r=g[4],h.data=n,h.customType=t,h._isUpdate=!0}return le(this._iid,function(n){if(!c&&h&&h._validate()){var t=s.bUpdateFileMessage(d(d({channelUrl:a.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Ma.getInstance(a._iid);r.sendCommand(t,function(e,t){if(r.getErrorFirstCallback()){var i=[e,t];t=i[0],e=i[1]}var s=null;if(!t&&(s=new o(d(d({},e.getJsonElement()),{},{messageParams:h})),a.isGroupChannel())){var l=!1;a.lastMessage?(a.lastMessage.createdAt<s.createdAt||a.lastMessage.createdAt===s.createdAt&&a.lastMessage.messageId===s.messageId&&a.lastMessage.updatedAt<s.updatedAt)&&(a.lastMessage=s,l=!0):(a.lastMessage=s,l=!0);var u=ge.of(a._iid);!s.silent&&l&&(Object.keys(r.channelHandlers).forEach(function(e){r.channelHandlers[e].onChannelChanged(a)}),Ze.of(a._iid).upsert([a]).then(function(){u.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:a}})}).catch(function(e){return X.error(e)})),ln.of(a._iid).upsert([s],Je.SUCCEEDED).then(function(){u.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:a,message:s}})}).catch(function(e){return X.error(e)})}n(t,s)})}else n(ye.error,null)},r)}},{key:"cancelUploadingFileMessage",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:["number","string"]}),new ye({type:"callback"})]),a=N(r,3);t=a[0],e=a[1],n=a[2];var i=R.get(this._iid),s=i.container.isErrorFirstInCallback;if(t)return s?n(t,null):n(null,t),!1;var o=j.get(this._iid),l=o.FileMessageQueue,u=l.create(this);return u.cancelUploadItemByRequestId(e,function(e,t){return s?n(e,t):n(t,e)})}},{key:"addReaction",value:function(e,n,t){var r=this,a=Ma.getInstance(this._iid),i=j.get(this._iid),s=i.ReactionEvent,o=null,l=ye.parse(arguments,[new ye({type:fn}),new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){o?t(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?R.get(r._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:n},function(n,r){var a=null;n||(a=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),t(n,a)}):t(new F("Cannot add reaction to a non-succeeded message.",F.REQUEST_FAILED),null)},t)}},{key:"deleteReaction",value:function(e,n,t){var r=this,a=Ma.getInstance(this._iid),i=j.get(this._iid),s=i.ReactionEvent,o=null,l=ye.parse(arguments,[new ye({type:fn}),new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],n=u[2],t=u[3],le(this._iid,function(t){o?t(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?R.get(r._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:n},function(n,r){var a=null;n||(a=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),t(n,a)}):t(new F("Cannot remove reaction to a non-succeeded message.",F.REQUEST_FAILED),null)},t)}},{key:"deleteMessage",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.deleteMessage({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),messageId:e.messageId},function(r,a){if(!r&&t.isGroupChannel()){var i=ln.of(t._iid),s=ge.of(t._iid);i.remove([e.messageId],Je.SUCCEEDED).then(function(){s.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:t,message:e}})}).catch(function(e){return X.error(e)})}n(r,null)})},n)}},{key:"copyUserMessage",value:function(n,t,r){var a=j.get(this._iid);a.Command;var i=a.UserMessage,s=a.BaseMessageParams,o=null,l=ye.parse(arguments,[new ye({type:e}),new ye({type:i}),new ye({type:"callback"})]),u=N(l,4);o=u[0],n=u[1],t=u[2],r=u[3];var c=R.get(this._iid),h=c.container.isErrorFirstInCallback;if(o)return h?r(ye.error,null):r(null,ye.error),null;if(this.url!==t.channelUrl){var f=new F("The message does not belong to this channel",F.INVALID_PARAMETER);return h?r(f,null):r(null,f),null}var p=Object.keys(t.translations);p.forEach(function(e){return""});var m=s.PushNotificationDeliveryOption.DEFAULT;return n._sendUserMessage(d(d({},t),{},{reqId:null,pushNotificationDeliveryOption:m,translationTargetLanguages:p,rootMessageId:null,parentMessageId:null,parentMessageText:null,messageParams:t._messageParams,callback:r}))}},{key:"copyFileMessage",value:function(n,t,r){var a=this,i=j.get(this._iid),s=i.Command;i.GroupChannel;var o=i.FileMessage,l=i.BaseMessageParams;i.FileMessageParams;var u=i.User,c=null,d=ye.parse(arguments,[new ye({type:e}),new ye({type:o}),new ye({type:"callback"})]),h=N(d,4);c=h[0],n=h[1],t=h[2],r=h[3];var f=R.get(this._iid),p=f.container.isErrorFirstInCallback;if(c)return p?r(ye.error,null):r(null,ye.error),null;if(this.url!==t.channelUrl){var m=new F("The message does not belong to this channel");return p?r(m,null):r(null,m),null}var g=Ma.getInstance(this._iid),_=t,y=_.url,v=_.name,E=_.type,b=_.size,C=_.data,S=_.customType,O=_.mentionType,T=_.mentionedUserIds,A=_.mentionedUsers,w=_.metaArrays,I=_.thumbnails,k=_.requireAuth,M=_.messageSurvivalSeconds,U=_.silent,L=_.appleCriticalAlertOptions,P=s.generateRequestId(),D=g.currentUser||{},x=n.url,H=n.isOpenChannel(),G=A.filter(function(e){return new u(u.objectify(e))}),B=l.PushNotificationDeliveryOption.DEFAULT,z=o.objectify({messageId:0,reqId:P,user:D,channel:n,plainUrl:y,name:v,type:E,size:b,data:C,customType:S,mentionType:O,mentionedUserIds:T,mentionedUsers:G,requestedMentionUserIds:T,metaArrays:w,thumbnails:I,requireAuth:k,messageSurvivalSeconds:M,silent:U,createdAt:(new Date).getTime(),appleCriticalAlertOptions:L}),V=new o(z);if(V.requestState=g.MessageRequestState.PENDING,V.sendingStatus=g.MessageSendingStatus.PENDING,!g.currentUser){var q=new F("Connection should be made first.",F.CONNECTION_REQUIRED),K=new o(z);return K.requestState=g.MessageRequestState.FAILED,K.sendingStatus=g.MessageSendingStatus.FAILED,K.errorCode=q.code,p?r(q,K):r(K,q),V}var Y=s.bFile({requestId:P,channelUrl:x,url:y,name:v,type:E,size:b,data:C,customType:S,metaArrays:w,mentionType:O,mentionedUserIds:T,thumbnailSizes:I,requireAuth:k,pushNotificationDeliveryOption:B,silent:U,appleCriticalAlertOptions:L});return g.getConnectionState()===g.ConnectionState.OPEN||g.connecting||g.reconnecting?g.sendCommand(Y,function(e,t){if(g.getErrorFirstCallback()){var i=[e,t];t=i[0],e=i[1]}if(t)if(t.code!==F.INVALID_PARAMETER){var s=new o(z);s.requestState=g.MessageRequestState.FAILED,s.sendingStatus=g.MessageSendingStatus.FAILED,t.code!==F.FILE_UPLOAD_CANCEL_FAILED&&t.code!==F.REQUEST_CANCELED||(s.sendingStatus=g.MessageSendingStatus.CANCELED),s.errorCode=t.code,p?r(t,s):r(s,t)}else p?r(t,null):r(null,t);else{var l=new o(e.getJsonElement()),u=l._sender;if(D&&u&&D.userId===u.userId&&(D.nickname!==u.nickname&&(D.nickname=u.nickname),D.plainProfileUrl!==u.plainProfileUrl&&(D.plainProfileUrl=u.plainProfileUrl)),n.isGroupChannel()){n.lastMessage=l,Object.keys(g.channelHandlers).forEach(function(e){g.channelHandlers[e].onChannelChanged(n)});var c=ge.of(a._iid);Ze.of(a._iid).upsert([n]).then(function(){c.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}).catch(function(e){return X.error(e)}),ln.of(a._iid).upsert([l]).then(function(){c.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:a,message:l}})}).catch(function(e){return X.error(e)})}p?r(null,l):r(l,null)}}):f.container.apiClient.sendFileMessage({channelUrl:x,isOpenChannel:H,fileUrl:y,fileName:v,fileType:E,fileSize:b,data:C,customType:S,metaArrays:w,mentionType:O,mentionedUserIds:T,thumbnailSizes:I,requireAuth:k,pushNotificationDeliveryOption:B,appleCriticalAlertOptions:L},function(e,t){if(e)if(e.code!==F.INVALID_PARAMETER){var a=new o(commnad.getJsonElement());a.requestState=g.MessageRequestState.FAILED,a.sendingStatus=g.MessageSendingStatus.FAILED,e.code!==F.FILE_UPLOAD_CANCEL_FAILED&&e.code!==F.REQUEST_CANCELED||(a.sendingStatus=g.MessageSendingStatus.CANCELED),a.errorCode=e.code,p?r(e,a):r(a,e)}else p?r(e,null):r(null,e);else{var i=new o(t),s=i._sender;D&&s&&D.userId===s.userId&&(D.nickname!==s.nickname&&(D.nickname=s.nickname),D.plainProfileUrl!==s.plainProfileUrl&&(D.plainProfileUrl=s.plainProfileUrl)),n.isGroupChannel()&&(n.lastMessage=i,Object.keys(g.channelHandlers).forEach(function(e){g.channelHandlers[e].onChannelChanged(n)})),p?r(null,i):r(i,null)}}),V}},{key:"addOperators",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map(function(n){return e[n]}).every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.addOperators({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),operatorUserIds:e},function(e,t){return n(e,t)})},n)}},{key:"removeOperators",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map(function(n){return e[n]}).every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.removeOperators({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),operatorUserIds:e},function(e,t){return n(e,t)})},n)}},{key:"getMetaCounters",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map(function(n){return e[n]}).every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:e},function(e,t){return n(e,t)})},n)}},{key:"getAllMetaCounters",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:[]},function(n,t){return e(n,t)})},e)}},{key:"createMetaCounters",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){return e[n]}).every(function(e){return"number"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.createMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),metaCounter:e},function(e,t){return n(e,t)})},n)}},{key:"updateMetaCounters",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){return e[n]}).every(function(e){return"number"==typeof e})}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){a?t(a,null):R.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:n,mode:"set"},function(e,n){return t(e,n)})},t)}},{key:"increaseMetaCounters",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){return e[n]}).every(function(e){return"number"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.updateMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},function(e,t){return n(e,t)})},n)}},{key:"decreaseMetaCounters",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){return e[n]}).every(function(e){return"number"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.updateMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},function(e,t){var r=null;e||(r={},Object.keys(t).forEach(function(e){r[e]=t[e]})),n(e,r)})},n)}},{key:"deleteMetaCounter",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.deleteMetaCounter({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),key:e},function(e,t){return n(e,t)})},n)}},{key:"deleteAllMetaCounters",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.deleteAllMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel()},function(n,t){return e(n,t)})},e)}},{key:"getCachedMetaData",value:function(){var e=Rn.get(this),n={};return Object.keys(e).forEach(function(t){var r=e[t];r.isRemoved||(n[t]=r.value)}),n}},{key:"getMetaData",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map(function(n){return e[n]}).every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:e},function(e,r){if(r&&r.ts){var a=r.metadata;t._addOrUpdateCachedMetaData(a,r.ts),n(e,a)}else n(e,r)})},n)}},{key:"getAllMetaData",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:[]},function(t,r){if(r&&r.ts){var a=r.metadata;n._refreshMetaData(a,r.ts),e(t,a)}else e(t,r)})},e)}},{key:"createMetaData",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.createMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),metaData:e},function(e,t){n(e,t&&t.ts?t.metadata:t)})},n)}},{key:"updateMetaData",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){a?t(a,null):R.get(r._iid).container.apiClient.updateMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e,upsert:n},function(e,n){t(e,n&&n.ts?n.metadata:n)})},t)}},{key:"deleteMetaData",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.deleteMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),key:e},function(e,t){n(e,t&&t.ts?{}:t)})},n)}},{key:"deleteAllMetaData",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.deleteAllMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel()},function(n,t){return e(n,t&&t.ts?{}:t)})},e)}},{key:"_updateMessageMetaArray",value:function(e,n,t,r){var a=this;return le(this._iid,function(r){var i=j.get(a._iid),s=i.Command,o=i.UserMessage,l=i.FileMessage,u=i.AdminMessage,c=null;if(n.isUserMessage()?c=s.bUpdateUserMessage({channelUrl:e,messageId:n.messageId,metaArrayParams:t}):n.isFileMessage()&&(c=s.bUpdateFileMessage({channelUrl:e,messageId:n.messageId,metaArrayParams:t})),c){var d=Ma.getInstance(a._iid);d.sendCommand(c,function(e,t){if(d.getErrorFirstCallback()){var a=[e,t];t=a[0],e=a[1]}var i=null;t||(n.isUserMessage()?i=new o(e.getJsonElement()):n.isFileMessage()?i=new l(e.getJsonElement()):n.isAdminMessage()&&(i=new u(e.getJsonElement()))),r(t,i)})}else r(ye.error,null)},r)}},{key:"createMessageMetaArrayKeys",value:function(e,n,t){var r=j.get(this._iid),a=r.MessageMetaArray,i=null,s=ye.parse(arguments,[new ye({type:fn}),new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new ye({type:"callback"})]),o=N(s,4);if(i=o[0],e=o[1],n=o[2],t=o[3],i)return le(this._iid,function(e){e(i,null)},t);var l=[];if(Array.isArray(n))for(var u=0;u<n.length;u++){var c=n[u];l.push(new a(c,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map(function(e){return e.encode()}),mode:"add",upsert:!0},t)}},{key:"deleteMessageMetaArrayKeys",value:function(e,n,t){var r=j.get(this._iid),a=r.MessageMetaArray,i=null,s=ye.parse(arguments,[new ye({type:fn}),new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new ye({type:"callback"})]),o=N(s,4);if(i=o[0],e=o[1],n=o[2],t=o[3],i)return le(this._iid,function(e){e(i,null)},t);var l=[];if(Array.isArray(n))for(var u=0;u<n.length;u++){var c=n[u];l.push(new a(c,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map(function(e){return e.encode()}),mode:"remove",upsert:!0},t)}},{key:"addMessageMetaArrayValues",value:function(e,n,t){var r=j.get(this._iid),a=r.MessageMetaArray,i=null,s=ye.parse(arguments,[new ye({type:fn}),new ye({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every(function(e){return e instanceof a})||Object.keys(e).length>0&&Object.keys(e).every(function(n){return Array.isArray(e[n])&&e[n].length>0&&e[n].every(function(e){return"string"==typeof e&&e.length>0})}))}}),new ye({type:"callback"})]),o=N(s,4);if(i=o[0],e=o[1],n=o[2],t=o[3],i)return le(this._iid,function(e){e(i,null)},t);var l=Array.isArray(n)?n.map(function(e){return e.encode()}):Object.keys(n).map(function(e){return{key:e,value:n[e]}});return this._updateMessageMetaArray(this.url,e,{array:l,mode:"add",upsert:!0},t)}},{key:"removeMessageMetaArrayValues",value:function(e,n,t){var r=j.get(this._iid),a=r.MessageMetaArray,i=null,s=ye.parse(arguments,[new ye({type:fn}),new ye({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every(function(e){return e instanceof a})||Object.keys(e).length>0&&Object.keys(e).every(function(n){return Array.isArray(e[n])&&e[n].length>0&&e[n].every(function(e){return"string"==typeof e&&e.length>0})}))}}),new ye({type:"callback"})]),o=N(s,4);if(i=o[0],e=o[1],n=o[2],t=o[3],i)return le(this._iid,function(e){e(i,null)},t);var l=Array.isArray(n)?n.map(function(e){return e.encode()}):Object.keys(n).map(function(e){return{key:e,value:n[e]}});return this._updateMessageMetaArray(this.url,e,{array:l,mode:"remove",upsert:!0},t)}},{key:"report",value:function(e,n,t){var r=this,a=j.get(this._iid),i=a.BaseChannel,s=null,o=ye.parse(arguments,[new ye({type:i.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),l=N(o,4);return s=l[0],e=l[1],n=l[2],t=l[3],le(this._iid,function(t){if(s)t(s,null);else{var a=Ma.getInstance(r._iid);R.get(r._iid).container.apiClient.report({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),reportCategory:e,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:n},function(e,n){t(e,null)})}},t)}},{key:"reportUser",value:function(e,n,t,r){var a=this,i=j.get(this._iid),s=i.BaseChannel,o=null,l=ye.parse(arguments,[new ye({type:pn}),new ye({type:s.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),u=N(l,5);return o=u[0],e=u[1],n=u[2],t=u[3],r=u[4],le(this._iid,function(r){if(o)r(o,null);else{var i=Ma.getInstance(a._iid);R.get(a._iid).container.apiClient.reportUser({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:n,offendingUserId:e.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:t},function(e,n){r(e,null)})}},r)}},{key:"reportMessage",value:function(e,n,t,r){var a=this,i=j.get(this._iid),s=i.BaseChannel,o=null,l=ye.parse(arguments,[new ye({type:fn}),new ye({type:s.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),u=N(l,5);return o=u[0],e=u[1],n=u[2],t=u[3],r=u[4],le(this._iid,function(r){if(o)r(o,null);else{var i=Ma.getInstance(a._iid);R.get(a._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:n,offendingUserId:e.sender.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:t},function(e,n){r(e,null)})}},r)}}],[{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}},{key:"buildMessage",value:function(e,n){var t=j.get(this._iid),r=t.UserMessage,a=t.FileMessage,i=t.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=n.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new a(d(d({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new i(e)}return null}}]),e}(),Un=function(){function e(n){f(this,e),n&&(this.category=n.hasOwnProperty("cat")?parseInt(n.cat):0,this.data=n.hasOwnProperty("data")?n.data:null,this.channelUrl=n.hasOwnProperty("channel_url")?String(n.channel_url):"",this.channelType=n.hasOwnProperty("channel_type")?String(n.channel_type):Mn.CHANNEL_TYPE_GROUP,this.channel=n.hasOwnProperty("channel")?n.channel:null)}return m(e,[{key:"isGroupChannel",value:function(){return this.channelType===Mn.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===Mn.CHANNEL_TYPE_OPEN}}]),e}();Un.CATEGORY_NONE=0,Un.CATEGORY_CHANNEL_ENTER=10102,Un.CATEGORY_CHANNEL_EXIT=10103,Un.CATEGORY_USER_CHANNEL_MUTE=10201,Un.CATEGORY_USER_CHANNEL_UNMUTE=10200,Un.CATEGORY_USER_CHANNEL_BAN=10601,Un.CATEGORY_USER_CHANNEL_UNBAN=10600,Un.CATEGORY_CHANNEL_FREEZE=10701,Un.CATEGORY_CHANNEL_UNFREEZE=10700,Un.CATEGORY_TYPING_START=10900,Un.CATEGORY_TYPING_END=10901,Un.CATEGORY_CHANNEL_JOIN=1e4,Un.CATEGORY_CHANNEL_LEAVE=10001,Un.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,Un.CATEGORY_CHANNEL_INVITE=10020,Un.CATEGORY_CHANNEL_DECLINE_INVITE=10022,Un.CATEGORY_CHANNEL_PROP_CHANGED=11e3,Un.CATEGORY_CHANNEL_DELETED=12e3,Un.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,Un.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,Un.CATEGORY_CHANNEL_HIDE=13e3,Un.CATEGORY_CHANNEL_UNHIDE=13001;var Ln=m(function e(n){f(this,e),n&&(this.category=n.hasOwnProperty("cat")?parseInt(n.cat):0)});Ln.CATEGORY_USER_BLOCK=20001,Ln.CATEGORY_USER_UNBLOCK=2e4,Ln.CATEGORY_FRIEND_DISCOVERED=20900;var Pn=function(){function e(n){f(this,e),this.sb=n,this.cls=j.get(this.sb._iid)}return m(e,[{key:"onRawCommandReceived",value:function(e){var n=this,t=this.cls,r=t.Command,a=t.User,i=t.Member,s=t.RestrictedUser,o=t.BaseChannel,l=t.GroupChannel,u=t.OpenChannel,c=t.UserMessage,f=t.FileMessage,p=t.AdminMessage,m=t.BaseMessageParams,g=t.ReactionEvent,_=t.ReadStatus,y=t.ThreadInfoUpdateEvent,v=t.RestrictionInfo,E=R.get(this.sb._iid),b=E.container,C=b.pinger,N=b.auth,S=b.subscribedUnreadMessageCount,O=b.sessionManager,T=b.ackStateMap,I=new r(e),k=I.getJsonElement();if(k.hasOwnProperty("unread_cnt")&&"object"===h(k.unread_cnt)){var M=!1,U=k.unread_cnt.ts;"number"==typeof U&&U>S.ts&&(S.all!==k.unread_cnt.all&&(M=!0),S.all=k.unread_cnt.all>=0?k.unread_cnt.all:0,k.unread_cnt.custom_types&&Object.keys(k.unread_cnt.custom_types).forEach(function(e){S.custom_types[e]!==k.unread_cnt.custom_types[e]&&(M=!0),S.custom_types[e]=k.unread_cnt.custom_types[e]}),M=M&&S.ts>0,S.ts=U),M&&Object.keys(this.sb.userEventHandlers).forEach(function(e){n.sb.userEventHandlers[e].onTotalUnreadMessageCountUpdated(S.all,S.custom_types)})}var L=I.requestId;if(L){var P=T[L];if(P){clearTimeout(P.timer);var D=P.handler;T.hasOwnProperty(L)&&delete T[L],D&&("EROR"===I.command?D(new F(k.message,k.code),null):D(null,I))}}else{C&&"LOGI"!==I.command&&C.refreshTimer();var x,H=Ze.of(this.sb._iid),G=ln.of(this.sb._iid),j=ge.of(this.sb._iid);switch(I.command){case"LOGI":if(this.sb.loginTimer)if(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,k.hasOwnProperty("error"))this.sb.isSessionOpened=!1,this.sb.loginHandler(new F(k.message,k.code),null);else{if(this.sb.isSessionOpened=!0,k.hasOwnProperty("key")&&(N.sessionKey=k.key),k.hasOwnProperty("ekey")&&(N.eKey=k.ekey),k.hasOwnProperty("user_id")&&(this.sb.currentUser=new a(k)),"number"==typeof k.ping_interval&&k.ping_interval>0&&E.set("pingInterval",1e3*k.ping_interval),"number"==typeof k.pong_timeout&&k.pong_timeout>0&&E.set("pongTimeout",1e3*k.pong_timeout),"number"==typeof k.login_ts){var B=1e3*k.login_ts;E.set("connectedAt",B);var z=E.container,V=z.firstConnectedAt,q=z.localCacheEnabled,K=z.store;if(!V){var Y=B;if(q){var Q=(x=this.sb.currentUser.userId,"sendbird:".concat(x,"@firstConnectedAt"));K.get(Q).then(function(e){e&&(Y=e.ts)}).catch(function(e){n.handleCacheError(e)}).finally(function(){E.set("firstConnectedAt",Y)})}else E.set("firstConnectedAt",Y)}}if(k.hasOwnProperty("reconnect")&&"object"===h(k.reconnect)){var W=k.reconnect,J=E.container.wsAdapter;W.hasOwnProperty("interval")&&"number"==typeof W.interval&&(J.reconnectParams.interval=W.interval),W.hasOwnProperty("max_interval")&&"number"==typeof W.max_interval&&(J.reconnectParams.maxInterval=W.max_interval),W.hasOwnProperty("mul")&&"number"==typeof W.mul&&(J.reconnectParams.multiplier=W.mul),W.hasOwnProperty("retry_cnt")&&"number"==typeof W.retry_cnt&&(J.reconnectParams.retryCount=W.retry_cnt)}"number"==typeof k.max_unread_cnt_on_super_group?E.set("maxUnreadCountOfSuperGroupChannel",k.max_unread_cnt_on_super_group):E.set("maxUnreadCountOfSuperGroupChannel",w.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),k.profile_image_encryption&&E.set("profileImageEncryption",!0),C&&C.start(),k.hasOwnProperty("file_upload_size_limit")&&k.hasOwnProperty("premium_feature_list")&&k.hasOwnProperty("emoji_hash")&&E.set("appInfo",new Te(k)),k.hasOwnProperty("concurrent_call_limit")&&k.hasOwnProperty("back_off_delay")&&(E.set("concurrentCallLimit",k.concurrent_call_limit),E.set("backOffDelay",k.back_off_delay)),this.sb.loginHandler(null,this.sb.currentUser)}break;case"EXPR":var $=new F("The session would be expired.",k.reason||F.SESSION_KEY_EXPIRED);O.refreshSessionIfExpiredError($).then(function(){}).catch(function(){});break;case"MESG":case"FILE":case"BRDM":case"ADMM":var Z=null;if("MESG"===I.command?Z=new c(k):"FILE"===I.command?Z=new f(k):"BRDM"!==I.command&&"ADMM"!==I.command||(Z=new p(k)),Z){var ee=this.sb.currentUser?this.sb.currentUser.userId:null,ne=Z.silent,te=!!k.force_update_last_message,re=Z._sender&&Z._sender.userId===ee;if(Z.isGroupChannel()){var ae=l.cachedChannels.hasOwnProperty(Z.channelUrl);l.getChannel(Z.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var a=[e,t];t=a[0],e=a[1]}if(!t){if(!E.container.appInfo.isSupergroupMackDisabled||!e.isSuper||e.isBroadcast){var i=r.bMessageAck({channelUrl:Z.channelUrl,messageId:Z.messageId});n.sb.sendCommand(i)}if(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Z._sender&&e.memberMap.hasOwnProperty(Z._sender.userId)){var s=e.memberMap[Z._sender.userId];s.nickname!==Z._sender.nickname&&(s.nickname=Z._sender.nickname),s.plainProfileUrl!==Z._sender.plainProfileUrl&&(s.plainProfileUrl=Z._sender.plainProfileUrl),se.deepEqual(s.metaData,Z._sender.metaData)||(s.metaData=Z._sender.metaData),s.isBlockedByMe!==Z._sender.isBlockedByMe&&(s.isBlockedByMe=Z._sender.isBlockedByMe)}var o=n.sb.currentUser;o&&re&&(o.nickname!==Z._sender.nickname&&(o.nickname=Z._sender.nickname),o.plainProfileUrl!==Z._sender.plainProfileUrl&&(o.plainProfileUrl=Z._sender.plainProfileUrl),se.deepEqual(o.metaData,Z._sender.metaData)||(o.metaData=Z._sender.metaData));var u=!1;if(Z.mentionType===m.MentionType.CHANNEL)re||(u=!0);else if(Z.mentionType===m.MentionType.USERS)for(var c=0;c<Z.mentionedUsers.length;c++)if(!re&&Z.mentionedUsers[c].userId===ee){u=!0;break}ne&&!re||(e.isEphemeral||ae)&&((!e.lastMessage||e.lastMessage.createdAt<Z.createdAt)&&(e.lastMessage=Z),re||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(u?1:0))),te&&(!e.lastMessage||e.lastMessage.createdAt<Z.createdAt)&&(e.lastMessage=Z),ne&&!re||(H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)}),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)})),Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];r.onMessageReceived(e,Z),u&&r.onMentionReceived(e,Z)}),G.upsert([Z]).then(function(){j.send({source:de.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:Z}})}).catch(function(e){n.handleCacheError(e)})}})}else Z.isOpenChannel()&&u.getChannel(Z.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(!t){var a=!1;if(Z.mentionType===m.MentionType.CHANNEL)a=!0;else if(Z.mentionType===m.MentionType.USERS)for(var i=0;i<Z.mentionedUsers.length;i++)if(Z.mentionedUsers[i].userId===ee){a=!0;break}Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];u.enteredChannels[e.url]&&r.onMessageReceived(e,Z),a&&r.onMentionReceived(e,Z)}),u.enteredChannels[e.url]&&j.send({source:de.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:Z}})}})}break;case"MEDI":case"FEDI":case"AEDI":var ie=null;if("MEDI"===I.command?ie=new c(k):"FEDI"===I.command?ie=new f(k):"AEDI"===I.command&&(ie=new p(k)),ie){var oe=this.sb.currentUser?this.sb.currentUser.userId:null,le=ie.silent,ue=ie.sender&&ie.sender.userId===oe;if(ie.isGroupChannel()){var ce=l.cachedChannels.hasOwnProperty(ie.channelUrl);l.getChannel(ie.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(!t){var a=e.cachedReadReceiptStatus[oe],i=a&&a>=ie.createAt,s=n.sb.currentUser;s&&ue&&(s.nickname!==ie._sender.nickname&&(s.nickname=ie._sender.nickname),s.plainProfileUrl!==ie._sender.plainProfileUrl&&(s.plainProfileUrl=ie._sender.plainProfileUrl),se.deepEqual(s.metaData,ie._sender.metaData)||(s.metaData=ie._sender.metaData));var o=!1,l=!1;if(!ue&&!i&&k&&k.hasOwnProperty("old_values")){var u=k.old_values.mention_type||ie.mentionType,c=k.old_values.mentioned_user_ids||ie.mentionedUsers.map(function(e){return e.userId});if(u===m.MentionType.USERS&&ie.mentionType===m.MentionType.USERS){for(var d=!1,h=!1,f=0;f<c.length;f++)if(c[f]===oe){d=!0;break}for(var p=0;p<ie.mentionedUsers.length;p++)if(ie.mentionedUsers[p].userId===oe){h=!0;break}!d&&h&&(l=!0,!le&&ce&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(u===m.MentionType.USERS&&ie.mentionType===m.MentionType.CHANNEL){for(var g=!1,_=0;_<c.length;_++)if(c[_]===oe){g=!0;break}g||(l=!0,!le&&ce&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}e.lastMessage?e.lastMessage.createdAt<ie.createdAt?(e.lastMessage=ie,o=!0):e.lastMessage.createdAt===ie.createdAt&&e.lastMessage.messageId===ie.messageId&&(ce?e.lastMessage.updatedAt<ie.updatedAt&&(e.lastMessage=ie,o=!0):o=!0):(e.lastMessage=ie,o=!0),le&&!ue||!o||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})),Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];r.onMessageUpdated(e,ie),l&&r.onMentionReceived(e,ie)}),G.upsert([ie]).then(function(){j.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:ie}})}).catch(function(e){n.handleCacheError(e)})}})}else ie.isOpenChannel()&&u.getChannel(ie.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onMessageUpdated(e,ie)}),j.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:ie}}))})}break;case"DELM":var he=String(k.channel_type),fe=String(k.channel_url),pe=parseInt(k.msg_id);switch(he){case o.CHANNEL_TYPE_GROUP:l.getChannel(fe,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`")):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onMessageDeleted(e,pe)}),G.remove(["".concat(pe)]).then(function(){j.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:pe}})}).catch(function(e){n.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:u.getChannel(fe,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`")):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onMessageDeleted(e,pe)}),j.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:pe}}))})}break;case"READ":var me=new _(k),_e=l.cachedChannels.hasOwnProperty(me.channelUrl);l.getChannel(me.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t||(_e&&e.updateReadReceipt(me.reader.userId,me.timestamp),n.sb.currentUser&&(me.reader.userId===n.sb.currentUser.userId?_e?(e.unreadMessageCount>0||e.unreadMentionCount>0)&&(e._setGroupChannelUnreadCount(0,0),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})):0!==e.unreadMessageCount&&0!==e.unreadMentionCount||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})):Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onReadReceiptUpdated(e)}),j.send({source:de.EVENT_READ_RECEIPT_UPDATED,payload:{channel:e,user:me.reader}})))});break;case"MRCT":var ye=String(k.channel_type),ve=String(k.channel_url),Ee=g.createFromJson(k);switch(ye){case o.CHANNEL_TYPE_GROUP:l.getChannel(ve,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`")):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onReactionUpdated(e,Ee)}),G.get("".concat(Ee.messageId)).then(function(t){t&&(t.applyReactionEvent(Ee),G.upsert([t]).then(function(){j.send({source:de.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}})}).catch(function(e){n.handleCacheError(e)}))}).catch(function(e){n.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:u.getChannel(ve,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`")):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onReactionUpdated(e,Ee)}),j.send({source:de.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}}))})}break;case"DLVR":var be=String(k.channel_url),Ce=k.hasOwnProperty("updated")?k.updated:null,Ne=l.cachedChannels.hasOwnProperty(be);l.getChannel(be,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(!t){var a=!1;Object.keys(Ce).forEach(function(t){n.sb.currentUser&&t===n.sb.currentUser.userId&&(a=!0),Ne&&e.updateDeliveryReceipt(t,parseInt(Ce[t]))}),l.cachedChannels[e.url]=e,a&&1===Object.keys(Ce).length||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onDeliveryReceiptUpdated(e)}),j.send({source:de.EVENT_DELIVERY_RECEIPT_UPDATED,payload:{channel:e}}))}});break;case"MTHD":var Se=String(k.channel_url),Oe=String(k.channel_type),Ae=y.createFromJson(k);switch(Oe){case o.CHANNEL_TYPE_GROUP:l.getChannel(Se,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onThreadInfoUpdated(e,Ae)}),G.get("".concat(Ae.targetMessageId)).then(function(t){t&&(t.applyThreadInfoUpdateEvent(Ae),G.upsert([t]).then(function(){j.send({source:de.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ae}})}).catch(function(e){n.handleCacheError(e)}))}).catch(function(e){n.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:u.getChannel(Se,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t||(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onThreadInfoUpdated(e,Ae)}),j.send({source:de.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ae}}))})}break;case"MCNT":if(k.hasOwnProperty("group_channels")&&Array.isArray(k.group_channels)){var we,Ie=[],Re=A(k.group_channels);try{for(Re.s();!(we=Re.n()).done;){var ke=we.value;if(ke){var Me=l.cachedChannels[ke.channel_url];Me&&Me.isBroadcast&&Me.setLatestMemberCount(ke.member_count,ke.joined_member_count,ke.ts)&&Ie.push(Me)}}}catch(e){Re.e(e)}finally{Re.f()}Ie.length>0&&(Object.keys(this.sb.channelHandlers).forEach(function(e){n.sb.channelHandlers[e].onChannelMemberCountChanged(Ie)}),H.upsert(Ie).then(function(){var e,n=A(Ie);try{for(n.s();!(e=n.n()).done;){var t=e.value;j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:t}})}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){n.handleCacheError(e)}))}if(k.hasOwnProperty("open_channels")&&Array.isArray(k.open_channels)){var Ue,Le=[],Pe=A(k.open_channels);try{for(Pe.s();!(Ue=Pe.n()).done;){var De=Ue.value;if(De){var xe=u.cachedChannels[De.channel_url];xe&&xe.setLatestParticipantCount(De.participant_count,De.ts)&&Le.push(xe)}}}catch(e){Pe.e(e)}finally{Pe.f()}if(Le.length>0){Object.keys(this.sb.channelHandlers).forEach(function(e){n.sb.channelHandlers[e].onChannelParticipantCountChanged(Le)});var Fe,He=A(Le);try{for(He.s();!(Fe=He.n()).done;){var Ge=Fe.value;j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:Ge}})}}catch(e){He.e(e)}finally{He.f()}}}break;case"SYEV":var je=new Un(k),Be=k.ts;switch(je.category){case Un.CATEGORY_CHANNEL_JOIN:case Un.CATEGORY_CHANNEL_LEAVE:l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var s=je.data.hasOwnProperty("member_count")?je.data.member_count:null,o=je.data.hasOwnProperty("joined_member_count")?je.data.joined_member_count:null,u=!1;if(je.category===Un.CATEGORY_CHANNEL_JOIN)(je.data.hasOwnProperty("users")?je.data.users:[je.data]).forEach(function(t){e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,k.ts):(t.state=i.JOINED,e.addMember(new i(t),Be),e.updateJoinedMemberCount());var r=new a(t);n.sb.currentUser&&r.userId===n.sb.currentUser.userId&&(e.myMemberState="joined",l.cachedChannels[e.url]=e),Object.keys(n.sb.channelHandlers).forEach(function(t){var a=n.sb.channelHandlers[t];a.onUserJoined(e,r),e.isBroadcast&&u&&a.onChannelMemberCountChanged([e])}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_JOINED,payload:{channel:e,user:r}})}).catch(function(e){n.handleCacheError(e)})});else{var c=new a(je.data);n.sb.currentUser&&c.userId===n.sb.currentUser.userId?(e.isPublic||l.removeCachedChannel(je.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):l.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,k.ts):(E.container.appInfo.enabledChannelMemberShipHistory?(e.memberMap[c.userId].state=l.MemberStateFilter.LEFT,e.memberCount=je.data.member_count):e.removeMember(c),e.updateJoinedMemberCount()),Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];r.onUserLeft(e,c),e.isBroadcast&&u&&r.onChannelMemberCountChanged([e])}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_LEFT,payload:{channel:e,user:c}})}).catch(function(e){n.handleCacheError(e)})}}});break;case Un.CATEGORY_CHANNEL_OPERATOR_UPDATE:je.isGroupChannel()?l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{for(var i=je.data.operators.map(function(e){return new a(e)}),s=i.map(function(e){return e.userId}),o=0;o<e.members.length;o++)e.members[o].role=s.indexOf(e.members[o].userId)>=0?l.Role.OPERATOR:l.Role.NONE;e.myRole=n.sb.currentUser&&s.indexOf(n.sb.currentUser.userId)>=0?l.Role.OPERATOR:l.Role.NONE,Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onOperatorUpdated(e,i)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:i}})}).catch(function(e){n.handleCacheError(e)})}}):je.isOpenChannel()&&u.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):(e.operators=je.data.operators.map(function(e){return new a(e)}),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onOperatorUpdated(e,e.operators)}))});break;case Un.CATEGORY_CHANNEL_INVITE:l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var s=null;je.data&&je.data.inviter&&Object.keys(je.data.inviter).length>0&&(s=new a(je.data.inviter));for(var o=[],u=0;u<je.data.invitees.length;u++){var c=new a(je.data.invitees[u]);o.push(c),je.data.invitees[u].state=i.INVITED;var d=new i(je.data.invitees[u]);if(e.isSuper||e.isBroadcast){var h=je.data.hasOwnProperty("member_count")?je.data.member_count:null,f=je.data.hasOwnProperty("joined_member_count")?je.data.joined_member_count:null;e.setLatestMemberCount(h,f,k.ts)}else e.addMember(d,Be);n.sb.currentUser&&d.userId===n.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=k.ts,l.cachedChannels[e.url]=e)}Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserReceivedInvitation(e,s,o)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_RECEIVED_INVITATION,payload:{channel:e,inviter:s,invitees:o}})}).catch(function(e){n.handleCacheError(e)})}});break;case Un.CATEGORY_CHANNEL_DECLINE_INVITE:l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var i=null;je.data&&je.data.inviter&&Object.keys(je.data.inviter).length>0&&(i=new a(je.data.inviter));var s=new a(je.data.invitee);if(n.sb.currentUser&&s.userId===n.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||l.removeCachedChannel(je.channelUrl)),e.isSuper||e.isBroadcast){var o=je.data.hasOwnProperty("member_count")?je.data.member_count:null,u=je.data.hasOwnProperty("joined_member_count")?je.data.joined_member_count:null;e.setLatestMemberCount(o,u,k.ts)}else e.removeMember(s);n.sb.currentUser&&s.userId!==n.sb.currentUser.userId&&(l.cachedChannels[e.url]=e),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserDeclinedInvitation(e,i,s)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_DECLINED_INVITATION,payload:{channel:e,inviter:i,invitee:s}})}).catch(function(e){n.handleCacheError(e)})}});break;case Un.CATEGORY_TYPING_START:case Un.CATEGORY_TYPING_END:l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var i=new a(je.data);je.category===Un.CATEGORY_TYPING_START?e.updateTypingStatus(i,!0):e.updateTypingStatus(i,!1),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onTypingStatusUpdated(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_TYPING_STATUS_UPDATED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})}});break;case Un.CATEGORY_CHANNEL_ENTER:case Un.CATEGORY_CHANNEL_EXIT:u.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var i=je.data.hasOwnProperty("participant_count")?je.data.participant_count:null,s=e.setLatestParticipantCount(i,k.ts),o=new a(je.data);je.category===Un.CATEGORY_CHANNEL_ENTER?(Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];r.onUserEntered(e,o),s&&r.onChannelParticipantCountChanged([e])}),j.send({source:de.EVENT_CHANNEL_ENTER,payload:{channel:e,user:o}})):(Object.keys(n.sb.channelHandlers).forEach(function(t){var r=n.sb.channelHandlers[t];r.onUserExited(e,o),s&&r.onChannelParticipantCountChanged([e])}),j.send({source:de.EVENT_CHANNEL_EXIT,payload:{channel:e,user:o}}))}});break;case Un.CATEGORY_USER_CHANNEL_MUTE:case Un.CATEGORY_USER_CHANNEL_UNMUTE:var ze=je.category===Un.CATEGORY_USER_CHANNEL_MUTE,Ve=d({},je.data);ze&&(Ve.restriction_type=s.RestrictionType.MUTED);var qe=ze?new s(Ve):new a(je.data),Ke=ze?"muted":"unmuted";je.isOpenChannel()?u.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):ze?(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserMuted(e,qe)}),j.send({source:de.EVENT_USER_MUTED,payload:{channel:e,user:qe}})):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserUnmuted(e,qe)}),j.send({source:de.EVENT_USER_UNMUTED,payload:{channel:e,user:qe}}))}):l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):(n.sb.currentUser&&qe.userId===n.sb.currentUser.userId&&(e.myMutedState=Ke),Array.isArray(e.members)&&e.members.filter(function(e){return e&&e.userId===qe.userId}).forEach(function(e){e.isMuted=ze,e.restrictionInfo=new v(Ve)}),ze?(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserMuted(e,qe)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_MUTED,payload:{channel:e,user:qe}})}).catch(function(e){n.handleCacheError(e)})):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserUnmuted(e,qe)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_USER_UNMUTED,payload:{channel:e,user:qe}})}).catch(function(e){n.handleCacheError(e)})))});break;case Un.CATEGORY_USER_CHANNEL_BAN:case Un.CATEGORY_USER_CHANNEL_UNBAN:var Ye=je.category===Un.CATEGORY_USER_CHANNEL_BAN,Qe=d({},je.data);Ye&&(Qe.restriction_type=s.RestrictionType.BANNED);var We=Ye?new s(Qe):new a(je.data);je.isOpenChannel()?u.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):Ye?(n.sb.currentUser&&We.userId===n.sb.currentUser.userId&&(delete u.enteredChannels[je.channelUrl],n.cls.FileMessageQueue.delete(je.channelUrl)),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserBanned(e,We)}),j.send({source:de.EVENT_USER_BANNED,payload:{channel:e,user:We}})):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserUnbanned(e,We)}),j.send({source:de.EVENT_USER_UNBANNED,payload:{channel:e,user:We}}))}):l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else if(Ye){if(n.sb.currentUser&&We.userId===n.sb.currentUser.userId&&(e.isPublic||l.removeCachedChannel(je.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var a=je.data.hasOwnProperty("member_count")?je.data.member_count:null,i=je.data.hasOwnProperty("joined_member_count")?je.data.joined_member_count:null;e.setLatestMemberCount(a,i,k.ts)}else e.removeMember(We),e.updateJoinedMemberCount();Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserBanned(e,We)}),j.send({source:de.EVENT_USER_BANNED,payload:{channel:e,user:We}})}else Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onUserUnbanned(e,We)}),j.send({source:de.EVENT_USER_UNBANNED,payload:{channel:e,user:We}})});break;case Un.CATEGORY_CHANNEL_FREEZE:case Un.CATEGORY_CHANNEL_UNFREEZE:je.isOpenChannel()?u.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):(e.isFrozen=je.data.freeze,u.cachedChannels[e.url]=e,je.category===Un.CATEGORY_CHANNEL_FREEZE?(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelFrozen(e)}),j.send({source:de.EVENT_CHANNEL_FROZEN,payload:{channel:e}})):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelUnfrozen(e)}),j.send({source:de.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})))}):l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):(e.isFrozen=je.data.freeze,l.cachedChannels[e.url]=e,je.category===Un.CATEGORY_CHANNEL_FREEZE?(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelFrozen(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_FROZEN,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelUnfrozen(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})))});break;case Un.CATEGORY_CHANNEL_DELETED:je.isGroupChannel()?l.removeCachedChannel(je.channelUrl):u.removeCachedChannel(je.channelUrl);var Je=je.channelUrl,Xe=je.isGroupChannel()?"group":"open";Object.keys(this.sb.channelHandlers).forEach(function(e){n.sb.channelHandlers[e].onChannelDeleted(Je,Xe)}),H.remove([Je]).then(function(){j.send({source:de.EVENT_CHANNEL_DELETED,payload:{channelUrl:Je,channelType:Xe}})}).catch(function(e){n.handleCacheError(e)});break;case Un.CATEGORY_CHANNEL_PROP_CHANGED:je.isOpenChannel()?u.getChannelWithoutCache(je.channelUrl,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):(Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}}))}):l.getChannelWithoutCache(je.channelUrl,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t)X.debug("Discard command:","`".concat(I.command,"`"),je.category);else{var a=e.unreadMessageCount,i=e.unreadMentionCount;e.myCountPreference!==l.CountPreference.ALL&&(e.myCountPreference===l.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?i=0:e.myCountPreference===l.CountPreference.UNREAD_MENTION_COUNT_ONLY?a=0:(a=0,i=0)),e._setGroupChannelUnreadCount(a,i),Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})}});break;case Un.CATEGORY_CHANNEL_META_DATA_CHANGED:case Un.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var $e=je.data.hasOwnProperty("created"),en=je.data.hasOwnProperty("updated"),nn=je.data.hasOwnProperty("deleted");(je.isOpenChannel()?u.getChannel(je.channelUrl,w.INTERNAL_CALL):l.getChannel(je.channelUrl,w.INTERNAL_CALL)).then(function(e){var t=je.data.created,r=je.data.updated,a=je.data.deleted;Object.keys(n.sb.channelHandlers).forEach(function(i){var s=n.sb.channelHandlers[i];if(je.category===Un.CATEGORY_CHANNEL_META_DATA_CHANGED){var o=k.ts;$e&&e._addOrUpdateCachedMetaData(t,o),en&&e._addOrUpdateCachedMetaData(r,o),nn&&e._markAsDeletedCachedMetaData(a,o),$e&&s.onMetaDataCreated(e,t),en&&s.onMetaDataUpdated(e,r),nn&&s.onMetaDataDeleted(e,a),($e||en)&&j.send({source:de.EVENT_CHANNEL_METADATA_UPDATED,payload:{channel:e,metaData:d(d({},t),r)}}),nn&&j.send({source:de.EVENT_CHANNEL_METADATA_DELETED,payload:{channel:e,metaData:d({},a)}})}else $e&&s.onMetaCountersCreated(e,t),en&&s.onMetaCountersUpdated(e,r),nn&&s.onMetaCountersDeleted(e,a),($e||en)&&j.send({source:de.EVENT_CHANNEL_METACOUNTER_UPDATED,payload:{channel:e,metaData:d(d({},t),r)}}),nn&&j.send({source:de.EVENT_CHANNEL_METACOUNTER_DELETED,payload:{channel:e,metaData:d({},a)}})})}).catch(function(e){return X.debug("Discard command:","`".concat(I.command,"`"),je.category)});break;case Un.CATEGORY_CHANNEL_HIDE:case Un.CATEGORY_CHANNEL_UNHIDE:l.getChannel(je.channelUrl,w.INTERNAL_CALL,function(e,t){if(n.sb.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}t?X.debug("Discard command:","`".concat(I.command,"`"),je.category):je.category===Un.CATEGORY_CHANNEL_HIDE?(e.isHidden=!0,je.data&&(je.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=je.data.allow_auto_unhide?l.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:l.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),je.data.hasOwnProperty("hide_previous_messages")&&je.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),k.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=k.ts_message_offset),l.cachedChannels[e.url]=e,Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelHidden(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_HIDDEN,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)})):(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Object.keys(n.sb.channelHandlers).forEach(function(t){n.sb.channelHandlers[t].onChannelChanged(e)}),H.upsert([e]).then(function(){j.send({source:de.EVENT_CHANNEL_UNHIDDEN,payload:{channel:e}})}).catch(function(e){n.handleCacheError(e)}))})}break;case"USEV":var tn=new Un(k);switch(tn.category){case Ln.CATEGORY_USER_BLOCK:case Ln.CATEGORY_USER_UNBLOCK:var rn=tn.data.blocker.user_id,an=tn.data.blockee.user_id;Object.keys(l.cachedChannels).forEach(function(e){var t=l.cachedChannels[e];try{n.sb.currentUser&&(n.sb.currentUser.userId===rn?t.memberMap[an].isBlockedByMe=tn.category===Ln.CATEGORY_USER_BLOCK:n.sb.currentUser.userId===an&&(t.memberMap[rn].isBlockingMe=tn.category===Ln.CATEGORY_USER_BLOCK))}catch(e){}});break;case Ln.CATEGORY_FRIEND_DISCOVERED:var sn=tn.data.friend_discoveries.map(function(e){return new a(e)});Object.keys(this.sb.userEventHandlers).forEach(function(e){n.sb.userEventHandlers[e].onFriendsDiscovered(sn)})}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:X.debug("Discard command:","`".concat(I.command,"`"))}}}},{key:"handleCacheError",value:function(e){X.error(e)}}]),e}(),Dn={},xn={},Fn=function(){function e(n){f(this,e),this.channel=n,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,j.get(this._iid).FileMessageQueue.queueMap[n.url]=this}return m(e,[{key:"_handleMessageQueueUpdated",value:function(e){var n=this;switch(X.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var t=j.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===t.State.UPLOADED)if(r.state=t.State.SENDING,navigator&&"boolean"==typeof navigator.onLine)if(navigator.onLine){for(0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,function(e,a){r.state=t.State.SENT,r.error=e||null,r.response=a||null,n._handleMessageQueueUpdated("update")})}else r.state=t.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,this._finalizeMessage();else Qe.ready().then(function(e){if(e){for(0===n.latestTimestampToSendMessage&&(n.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-n.latestTimestampToSendMessage<200;);n.latestTimestampToSendMessage=(new Date).getTime(),n._sendUploadedMessage(r,function(e,a){r.state=t.State.SENT,r.error=e||null,r.response=a||null,n._handleMessageQueueUpdated("update")})}else r.state=t.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,n._finalizeMessage()});else r.state===t.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,n){var t=this;switch(X.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=j.get(this._iid).FileMessageQueue;if(n.state=r.State.UPLOADING,n.error){var a=this.messageQueue.map(function(e){return e.requestId}).indexOf(n.requestId);a>-1&&(n.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(n.requestId)}else navigator&&"boolean"==typeof navigator.onLine?navigator.onLine?this._uploadFile(n,function(e){n.error&&n.error.code===F.REQUEST_FAILED&&(n.error=new F("Failed to upload a file.",F.NETWORK_ERROR)),n.error&&n.state===r.State.SENT||(n.state=r.State.UPLOADED),n.fileInfo=e,t._handleMessageQueueUpdated("update"),t._finalizeUpload(n.requestId)}):(n.state=r.State.SENT,n.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),n.response=null,this._handleMessageQueueUpdated("update"),this._finalizeUpload(n.requestId)):Qe.ready().then(function(e){e?t._uploadFile(n,function(e){n.error&&n.error.code===F.REQUEST_FAILED&&(n.error=new F("Failed to upload a file.",F.NETWORK_ERROR)),n.error&&n.state===r.State.SENT||(n.state=r.State.UPLOADED),n.fileInfo=e,t._handleMessageQueueUpdated("update"),t._finalizeUpload(n.requestId)}):(n.state=r.State.SENT,n.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),n.response=null,t._handleMessageQueueUpdated("update"),t._finalizeUpload(n.requestId))});break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=j.get(this._iid).FileMessageQueue,n=this.messageQueue.filter(function(n){return n.state===e.State.PENDING});if(n.length>0){var t=n[0];this.uploadQueue.push(t),this._handleUploadQueueUpdated("add",t)}}},{key:"_sendUploadedMessage",value:function(e,n){var t=j.get(this._iid),r=t.Command,a=t.FileMessage,i=e.fileInfo,s=r.bFile(d(d({},i),{},{requestId:e.requestId,channelUrl:this.channel.url,url:i.file,metaArrays:i.metaArrays})),o=Ma.getInstance(this._iid),l=R.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(s,function(e,t){if(o.getErrorFirstCallback()){var r=[e,t];t=r[0],e=r[1]}if(t){var l=new a(s.getJsonElement());l.requestedMentionUserIds=i.mentionedUserIds,n(t,l)}else{var u=new a(e.getJsonElement());n(null,u)}}):l.container.apiClient.sendFileMessage(d(d({reqId:e.requestId,channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},i),{},{fileUrl:i.file,fileName:i.name,fileSize:i.size,fileType:i.type,metaArrays:i.metaArrays}),function(e,t){var r=new a(e?s.getJsonElement():t);e&&(r.requestedMentionUserIds=i.mentionedUserIds),n(e,r)})}},{key:"_uploadFile",value:function(e,n){var t=e.fileInfo,r=e.pendingMessage;if("string"!=typeof t.file&&t.file){var a=j.get(this._iid).FileMessageQueue;R.get(this._iid).container.apiClient.uploadFile(d(d({},t),{},{fileType:t.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),function(r,i){if(r)e.state=a.State.SENT,e.error=r,e.response=null,n(t);else{var s="object"===h(i)?i:JSON.parse(i);t.file=s.url,t.thumbnailSizes=s.hasOwnProperty("thumbnails")?s.thumbnails:[],t.requireAuth=!!s.hasOwnProperty("require_auth")&&s.require_auth,t.size=s.hasOwnProperty("file_size")?s.file_size:t.size,n(t)}})}else t.thumbnailSizes=[],t.requireAuth=!1,n(t)}},{key:"_finalizeUpload",value:function(e){var n=this.uploadQueue.map(function(e){return e.requestId}).indexOf(e);if(n>-1){var t=this.uploadQueue.splice(n,1);t.length>0&&this._handleUploadQueueUpdated("remove",t[0])}}},{key:"_finalizeMessage",value:function(){var e=this,n=R.get(this._iid),t=n.container.localCacheEnabled,r=n.container.isErrorFirstInCallback,a=Ma.getInstance(this._iid),i=Ze.of(this._iid),s=ln.of(this._iid),o=ge.of(this._iid),l=j.get(this._iid).FileMessageQueue,u=this.messageQueue[0],c=u.pendingMessage;if(u&&u.state===l.State.SENT){u.state=l.State.DONE;var d=u.response;d&&c&&(d._isAutoResendRegistered=c._isAutoResendRegistered);var h=u.error,f=h?new F(h.message,h.code):null,p=u.fileInfo.callback;if(d&&!h){d.reqId=c.reqId,d.requestState=a.MessageRequestState.SUCCEEDED,d.sendingStatus=a.MessageSendingStatus.SUCCEEDED;var m=a.currentUser;if(m&&d._sender&&m.userId===d._sender.userId&&(m.nickname!==d._sender.nickname&&(m.nickname=d._sender.nickname),m.plainProfileUrl!==d._sender.plainProfileUrl&&(m.plainProfileUrl=d._sender.plainProfileUrl)),this.channel.isGroupChannel())return this.channel.lastMessage=d,Object.keys(a.channelHandlers).forEach(function(n){a.channelHandlers[n].onChannelChanged(e.channel)}),void i.upsert([this.channel]).then(function(){o.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e.channel}})}).then(function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})}).then(function(){return s.upsert([d],Je.SUCCEEDED)}).then(function(){wn._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(p.isPromisifyCallback||r?p(null,d):p(d,null)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})}if(h){if(d&&d._isAutoResendRegistered&&se.isAutoResendableError(h.code))return this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove");if(u.pendingMessage&&(d=u.pendingMessage._clone()),d&&h.code!==F.INVALID_PARAMETER)if(d.requestState=a.MessageRequestState.FAILED,h.code===F.FILE_UPLOAD_CANCEL_FAILED||h.code===F.REQUEST_CANCELED){if(d.sendingStatus=a.MessageSendingStatus.CANCELED,this.channel.isGroupChannel())return void s.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]}).then(function(){o.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})}else if(d.sendingStatus=a.MessageSendingStatus.FAILED,d.errorCode=h.code,d.requestedMentionUserIds=u.fileInfo.mentionedUserIds,h.code===F.FILE_SIZE_LIMIT_EXCEEDED&&d._messageParams&&d._messageParams.file&&(d._messageParams.file=null),this.channel.isGroupChannel())return void(h.code===F.USER_NOT_MEMBER||h.code===F.CHANNEL_NOT_FOUND?i.remove([this.channel.url]).then(function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})}).then(function(){o.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}):(t&&se.isAutoResendableError(h.code)&&(d.sendingStatus=a.MessageSendingStatus.PENDING,d.errorCode=0,d._isAutoResendRegistered=!0),s.upsert([d],Je.UNSENT).then(function(){wn._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){var n=d._clone();n.sendingStatus=a.MessageSendingStatus.FAILED,n.errorCode=h.code,n._isAutoResendRegistered=!1,p&&(p.isPromisifyCallback||r?p(f,n):p(n,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})))}p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,n){this._finalizeUpload(e);var t=this.messageQueue.map(function(e){return e.requestId}).indexOf(e);if(t>-1){var r=j.get(this._iid).FileMessageQueue,a=this.messageQueue[t];!a||a.state!==r.State.UPLOADING&&a.state!==r.State.PENDING||(a.state=r.State.SENT,a.response=null,a.error=new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var i=r.uploadRequest[e];if(i)return"function"==typeof i.abort?i.abort():"function"==typeof i.cancel&&i.cancel("Upload has been canceled."),n(null,!0),!0;n(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1)}else n(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"getByChannelUrl",value:function(e){return j.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var n=j.get(this._iid).FileMessageQueue;return n.queueMap.hasOwnProperty(e.url)||(n.queueMap[e.url]=new n(e)),n.queueMap[e.url]}},{key:"delete",value:function(e){var n=j.get(this._iid).FileMessageQueue;n.queueMap.hasOwnProperty(e)&&delete n.queueMap[e]}},{key:"clear",value:function(){xn[this._iid]={}}},{key:"queueMap",get:function(){return xn[this._iid]||(xn[this._iid]={}),xn[this._iid]}},{key:"uploadRequest",get:function(){return Dn[this._iid]||(Dn[this._iid]={}),Dn[this._iid]}}]),e}();Fn.Job=m(function e(n){var t=n.fileInfo,r=n.requestId,a=n.pendingMessage,i=n.state,s=n.error,o=void 0===s?null:s,l=n.response,u=void 0===l?null:l;f(this,e),this.fileInfo=t,this.requestId=r,this.pendingMessage=a,this.state=i||Fn.State.PENDING,this.error=o,this.response=u});var Hn,Gn={},jn=function(){function e(e){var n=e.dbname,t=e.itemSizeLimit,r=void 0===t?1048576:t,a=e.cacheLimit,i=void 0===a?256:a,s=e.blockHashBase,o=void 0===s?2:s,l=e.blockHashMultiplier,u=void 0===l?10:l,c=e.blockHashConstant,d=void 0===c?11:c,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,m=void 0!==p&&p;return Gn[n]||(this.itemSizeLimit=r,this.cacheLimit=i,this.blockHashBase=o,this.blockHashMultiplier=u,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=m,Gn[n]=this),Gn[n]}return e.get=function(e){return Gn[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Hn||(Hn={}));var Bn,zn=function(e){function n(t){var r=t.code,a=void 0===r?Hn.UNKNOWN_ERROR:r,i=t.message,s=void 0===i?"Unknown error occurred.":i,o=e.call(this,s)||this;return o.code=a,Object.setPrototypeOf(o,n.prototype),o}return M(n,e),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:Hn.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:Hn.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:Hn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:Hn.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:Hn.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:Hn.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:Hn.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:Hn.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:Hn.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:Hn.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:Hn.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:Hn.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:Hn.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:Hn.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:Hn.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:Hn.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:Hn.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:Hn.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:Hn.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:Hn.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:Hn.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:Hn.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:Hn.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:Hn.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(Bn||(Bn={}));var Vn,qn=function e(n,t){if(void 0===t&&(t=new WeakMap),"object"==typeof n&&null!==n){if(t.has(n))throw zn.circularReferenceFound;t.set(n,!0);var r=null;if(Array.isArray(n))r=n.map(function(n){return e(n,t)});else if(n instanceof RegExp)r=n;else if(n instanceof Date)r=n;else for(var a in r={},n)r[a]=e(n[a],t);return t.delete(n),r}return n},Kn=function(e,n){if(null==n)return 1;if(null==e)return-1;if(typeof e!=typeof n)throw zn.compareTypesNotMatch;var t=0;switch(typeof e){case"boolean":case"number":t=e-n;break;case"string":t=e.localeCompare(n)}return t},Yn=function(e,n){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+(t<<6)+(t<<16)-t;return(t>>>0)%n},Qn=function(e){return new Promise(function(n){setTimeout(function(){return n()},e)})},Wn=function e(n,t){if(!t)return!1;if("function"!=typeof n){for(var r in n)if(["/and","&&"].includes(r)){if(n[r].some(function(n){return!e(n,t)}))return!1}else if(["/or","||"].includes(r)){if(n[r].every(function(n){return!e(n,t)}))return!1}else if("/where"===r){if(!(0,n[r])(t))return!1}else{var a=r;if("object"==typeof n[a]){var i=n[a];for(var s in i)switch(s){case"/eq":case"=":if((o=t[a])!==(l=i[s]))return!1;break;case"/neq":case"!=":if((o=t[a])===(l=i[s]))return!1;break;case"/gt":case">":var o=t[a],l=i[s];if(!(Kn(o,l)>0))return!1;break;case"/gte":case">=":if(o=t[a],l=i[s],!(Kn(o,l)>=0))return!1;break;case"/lt":case"<":if(o=t[a],l=i[s],!(Kn(o,l)<0))return!1;break;case"/lte":case"<=":if(o=t[a],l=i[s],!(Kn(o,l)<=0))return!1;break;case"/in":if(o=t[a],!(l=i[s]).includes(o))return!1;break;case"/nin":if(o=t[a],(l=i[s]).includes(o))return!1;break;case"/contain":if(o=t[a],l=i[s],!o.includes(l))return!1;break;case"/regex":if(o=t[a],!(l=i[s]).test(o))return!1;break;case"/where":if(o=t[a],!(0,i[s])(o))return!1}}else if("function"==typeof n[a]){if(!n[a](t[a]))return!1}else if(n[a]!==t[a])return!1}return!0}return n(t)},Jn=function(){},Xn=function(){return Promise.resolve()},$n=function(e){return e},Zn=function(e,n){n(null)};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Vn||(Vn={}));var et,nt,tt,rt=function(){function e(e){var n=e.initialPrevValue,t=void 0===n?null:n,r=e.initialNextValue,a=void 0===r?null:r,i=e.iterator,s=e.map,o=void 0===s?$n:s,l=e.backward,u=void 0===l?Xn:l,c=e.forward,d=void 0===c?Xn:c,h=e.complete,f=void 0===h?Jn:h;this._prevValue=t,this._nextValue=a,this._error=null,this._map=o,this._backward=u,this._forward=d,this._iterator=i,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return L(this,void 0,void 0,function(){var e,n,t;return P(this,function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,n=this,[4,this._backward()];case 2:return n._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return t=r.sent(),this._error=t,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.next=function(){return L(this,void 0,void 0,function(){var e,n,t;return P(this,function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,n=this,[4,this._forward()];case 2:return n._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return t=r.sent(),this._error=t,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),at=function(){function e(e){var n=e.condition,t=void 0===n?{}:n,r=e.backward,a=void 0!==r&&r,i=e.blockManager,s=e.indexer;this.condition=t,this.backward=a,this._blockManager=i,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,n=["=","/eq",">",">=","/gt","/gte"],t=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var a in this._indexer.fields){var i=this._indexer.fields[a],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),this.condition[i])if("object"==typeof this.condition[i]){var o=s>0?t:n;for(var l in this.condition[i])if(o.includes(l))for(var u=r;u>=0;u--)if(s*Kn(this._indexer.origin[u].columnValues[a],this.condition[i][l])<=0){r=u;break}}else for(u=r;u>=0;u--)if(s*Kn(this._indexer.origin[u].columnValues[a],this.condition[i])<=0){r=u;break}}return Math.min(r+1,this._indexer.origin.length-1)}var c=0;if("function"!=typeof this.condition)for(var d=function(r){var a=h._indexer.fields[r],i=1;if("-"===a[0]&&(a=a.slice(1),i=-1),h.condition[a])if("object"==typeof h.condition[a])Object.keys(h.condition[a]).forEach(function(s){if((i>0?n:t).includes(s))for(var o=c;o<e._indexer.origin.length;o++)if(i*Kn(e._indexer.origin[o].columnValues[r],e.condition[a][s])>=0){c=o;break}});else for(var s=c;s<h._indexer.origin.length;s++)if(i*Kn(h._indexer.origin[s].columnValues[r],h.condition[a])>=0){c=s;break}},h=this,a=0;a<this._indexer.fields.length;a++)d(a);return Math.max(c-1,0)},e.prototype.each=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l=this;return P(this,function(u){switch(u.label){case 0:if(n=this.findOptimizedStartPosition(),t=0,this.backward&&this._indexer.origin[n]&&(t=this._indexer.origin[n].keys.length-1),r=function(){if(l._indexer.origin[n]){if(!l._indexer.origin[n].keys[++t]){if(!l._indexer.origin[++n])return!1;t=0}return!0}return!1},a=function(){if(l._indexer.origin[n]){if(!l._indexer.origin[n].keys[--t]){if(!l._indexer.origin[--n])return!1;t=l._indexer.origin[n].keys.length-1}return!0}return!1},i=null,!this._indexer.origin[n])return[3,4];s=this.backward?a:r,u.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[n].keys[t])];case 2:if(o=u.sent(),Wn(this.condition,o))return i=o,[3,4];u.label=3;case 3:if(s())return[3,1];u.label=4;case 4:return[4,new Promise(function(s){var o=new rt({initialNextValue:qn(i),iterator:e,forward:function(){return L(l,void 0,void 0,function(){var e,i;return P(this,function(s){switch(s.label){case 0:e=this.backward?a:r,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[n].keys[t])]:[3,3];case 2:return i=s.sent(),Wn(this.condition,i)?[2,qn(i)]:[3,1];case 3:return[2,null]}})})},backward:function(){return L(l,void 0,void 0,function(){var e,i;return P(this,function(s){switch(s.label){case 0:e=this.backward?r:a,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[n].keys[t])]:[3,3];case 2:return i=s.sent(),Wn(this.condition,i)?[2,qn(i)]:[3,1];case 3:return[2,null]}})})},complete:s});e(o)})];case 5:return[2,u.sent()]}})})},e}(),it=function(){function e(e){var n=e.condition,t=void 0===n?{}:n,r=e.backward,a=void 0!==r&&r,i=e.mutex,s=e.blockManager,o=e.indexer;this._mutex=i,this._iterator=new at({condition:t,backward:a,blockManager:s,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),L(this,void 0,void 0,function(){var n,t,r,a,i=this;return P(this,function(s){switch(s.label){case 0:if(n=Math.max(e.offset||0,0),0===(t="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(t<0)throw zn.collectionQueryNotValid;s.label=1;case 1:return s.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return s.sent(),[4,this._iterator.each(function(e){return L(i,void 0,void 0,function(){return P(this,function(a){return e.error?e.stop():e.hasNext?0===n?(r.push(e.nextValue),0<t&&t<=r.length?e.stop():e.next()):(n--,e.next()):e.stop(),[2]})})})];case 3:return s.sent(),this._mutex.unlock(),[2,r];case 4:throw a=s.sent(),this._mutex.unlock(),a;case 5:return[2]}})})},e.prototype.count=function(){return L(this,void 0,void 0,function(){var e,n,t=this;return P(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each(function(n){return L(t,void 0,void 0,function(){return P(this,function(t){return n.error?n.stop():n.hasNext?(e++,n.next()):n.stop(),[2]})})})];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw n=r.sent(),this._mutex.unlock(),n;case 4:return[2]}})})},e}(),st=function(e){return"".concat("nest","@").concat(e)},ot=function(e,n){return"".concat(st(e),"/").concat(n)},lt=function(e,n){return"".concat(ot(e,n),".metadata")},ut=function(e,n){return"".concat(ot(e,n),"/block.")},ct=function(e,n){return"".concat(ot(e,n),"/blob.")},dt=function(e,n,t,r){return void 0===r&&(r=0),"".concat(ct(e,n)).concat(t,".").concat(r)},ht=function(){function e(e){var n=e.dbname,t=e.collectionName,r=e.store;this.dbname=n,this.collectionName=t,this._store=r}return e.prototype._makeShards=function(e,n){var t=Math.max(this._store.itemSizeLimit-1024,0);if(t>0){for(var r=Math.ceil(e.data.length/t),a="".concat(r,".").concat(e.type,".").concat(n),i=[],s=0;s<e.data.length;s+=t){var o=e.data.slice(s,s+t);i.push(o)}return{blobId:a,shards:i}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){var t=new FileReader;t.onload=function(){n({data:t.result,type:e.type})},t.readAsDataURL(e)})];case 1:return[2,n.sent()]}})})},e.prototype._decode=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s;return P(this,function(o){switch(o.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,o.sent().blob()];case 2:return[2,o.sent()];case 3:for(n=[],t=atob(e.data.split(",")[1]),r=0;r<t.length;r+=512){for(a=t.slice(r,r+512),i=new Array(a.length),s=0;s<a.length;s++)i[s]=a.charCodeAt(s);n.push(new Uint8Array(i))}return[2,new Blob(n,{type:e.type})]}})})},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l;return P(this,function(u){switch(u.label){case 0:if(n=[],t=e.split("."),r=t[0],a=t[1],!((i=parseInt(r))>0))return[3,6];s=0,u.label=1;case 1:return s<i?(o=dt(this.dbname,this.collectionName,e,s),[4,this._store.get(o)]):[3,4];case 2:if(!(l=u.sent())||!l.d)throw zn.storeBrokenBlob;n.push(l.d),u.label=3;case 3:return s++,[3,1];case 4:return[4,this._decode({data:n.join(""),type:a})];case 5:return[2,u.sent()];case 6:return[2,null]}})})},e.prototype.save=function(e,n){return void 0===n&&(n="".concat(Date.now())),L(this,void 0,void 0,function(){var t,r,a,i,s,o,l;return P(this,function(u){switch(u.label){case 0:return t=[],[4,this._encode(e)];case 1:if(r=u.sent(),a=this._makeShards(r,n),i=a.blobId,s=a.shards,!i)return[3,3];for(o=0;o<s.length;o++)l=dt(this.dbname,this.collectionName,i,o),t.push({key:l,value:{d:s[o]},generation:1});return[4,this._store.setMany(t)];case 2:if(u.sent().some(function(e){return e instanceof Error}))throw zn.storeWriteFailed;return[2,i];case 3:return[2,null]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){var n,t,r,a;return P(this,function(i){switch(i.label){case 0:if(n=[],t=e.split(".")[0],!((r=parseInt(t))>0))return[3,2];for(a=0;a<r;a++)n.push(dt(this.dbname,this.collectionName,e,a));return[4,this._store.removeMany(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a,i;return P(this,function(s){switch(s.label){case 0:return e=ct(this.dbname,this.collectionName),n=[],[4,this._store.getAllKeys()];case 1:for(t=s.sent(),r=0,a=t;r<a.length;r++)(i=a[r]).startsWith(e)&&n.push(i);return[4,this._store.removeMany(t)];case 2:return s.sent(),[2]}})})},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(et||(et={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(nt||(nt={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(tt||(tt={}));var ft=[nt.PENDING,nt.VOLATILE],pt={},mt=function(){function e(e){var n=e.dbname,t=e.limit,r=void 0===t?256:t;return pt[n]||(this.dbname=n,this._items=[],this._limit=r,pt[n]=this),pt[n]}return e.get=function(e){return pt[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,n,t){return void 0===t&&(t=tt.DEFAULT),L(this,void 0,void 0,function(){var r,a;return P(this,function(i){switch(i.label){case 0:return(r=this.get(n))?[3,2]:[4,e.get(n)];case 1:return(a=i.sent())&&(r={key:n,value:a,generation:1,state:t===tt.PERSISTENT?nt.PERSISTENT:nt.VOLATILE},this.put(r)),[3,3];case 2:t===tt.PERSISTENT&&(r.state=nt.PERSISTENT),i.label=3;case 3:return[2,r]}})})},e.prototype.get=function(e,n){void 0===n&&(n=tt.DEFAULT);var t=this._items.map(function(e){return e.key}).indexOf(e);if(t>-1){var r=this._items[t];return n===tt.PERSISTENT&&(r.state=nt.PERSISTENT),n!==tt.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){if(this._limit>0){var n=this._items.map(function(e){return e.key}).indexOf(e.key);if(n>-1)ft.includes(this._items[n].state)&&ft.includes(e.state)?(this._items.splice(n,1),this._items.push(e)):(this._items[n].state=e.state,this._items[n].generation=e.generation,this._items[n].value=e.value);else{this._items.push(e);var t=this._items.filter(function(e){return e.state===nt.VOLATILE}),r=t.length-this._limit;if(r>0){for(var a=[],i=0,s=this._items;i<s.length;i++){var o=s[i];o.state===nt.VOLATILE&&r>0?r--:a.push(o)}this._items=a}}}},e.prototype.remove=function(e){var n=this._items.map(function(e){return e.key}).indexOf(e);n>-1&&this._items.splice(n,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter(function(n){return!e(n)})},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter(function(e){return e.state!==nt.VOLATILE})},e}(),gt=function(){function e(e){var n=e.dbname,t=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=n,this.collectionName=t,this.metadataKey=function(e,n){return"".concat(ot(e,n),"/trans.metadata")}(n,t),this.recordsetKey=function(e,n){return"".concat(ot(e,n),"/trans.recordset")}(n,t),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(n=t.sent()||[]).push.apply(n,e),[2,this._reduceRecordSet(n)]}})})},e.prototype._reduceRecordSet=function(e){for(var n=[],t={},r=e.length-1;r>=0;r--){for(var a=e[r],i=[],s=a.requests.length-1;s>=0;s--){var o=a.requests[s],l=o.data;t[l.key]||(i.unshift(o),t[l.key]=!0)}i.length>0&&(a.requests=i,n.unshift(a))}return n},e.prototype._applyRecord=function(e,n){return L(this,void 0,void 0,function(){var t,r,a,i,s,o,l,u,c;return P(this,function(d){switch(d.label){case 0:t=mt.get(this.dbname),r=n.generation,a=n.requests,i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(a.map(function(e){return U(U({},e.data),{generation:r})}))];case 2:for(s=d.sent(),o=0;o<a.length;o++)s[o]instanceof Error&&(i||(i=s[o]),l=a[o].data,t.put(U(U({},l),{generation:r,state:nt.PERSISTENT})));return[3,4];case 3:return u=d.sent(),i=u,[3,4];case 4:return i?[3,6]:(c=e.filter(function(e){return e.generation!==r}),[4,this._store.set({key:this.recordsetKey,value:c,generation:r})]);case 5:return d.sent(),this._onWrite.forEach(function(e){e(a.map(function(e){return e.data}))}),[3,7];case 6:this._onError.forEach(function(e){return e(i)}),d.label=7;case 7:return[2]}})})},e.prototype.init=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a;return P(this,function(i){switch(i.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=i.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:n=i.sent(),t=0,r=n,i.label=3;case 3:return t<r.length?(a=r[t],[4,this._applyRecord(n,a)]):[3,6];case 4:i.sent(),i.label=5;case 5:return t++,[3,3];case 6:return[2]}})})},e.prototype.on=function(e,n,t){switch(e){case et.COMMIT:this._onCommit.set(n,t);break;case et.WRITE:this._onWrite.set(n,t);break;case et.ERROR:this._onError.set(n,t)}},e.prototype.requestWrite=function(e,n){void 0===n&&(n=null),this._requests.push({data:e,options:n}),mt.get(this.dbname).put(U({state:nt.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,n){void 0===n&&(n=null);for(var t=mt.get(this.dbname),r=0,a=e;r<a.length;r++){var i=a[r];this._requests.push({data:i,options:n}),t.put(U({state:nt.PENDING,generation:this.generation},i))}},e.prototype.clear=function(){return L(this,void 0,void 0,function(){return P(this,function(e){return mt.get(this.dbname).clearByCondition(function(e){return e.state===nt.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a,i,s,o,l,u,c,d,h=this;return P(this,function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(n=[],t={},o=e.length-1;o>=0;o--)r=e[o],u=r.data,t[u.key]||(t[u.key]=!0,n.unshift(r));return a={generation:this.generation,requests:n},[4,this._getReducedRecordset([a])];case 1:return i=f.sent(),[4,this._store.set({key:this.recordsetKey,value:i,generation:this.generation})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(f.sent(),s=mt.get(this.dbname),o=0;o<n.length;o++)l=n[o],u=l.data,c=l.options,s.put(U(U({},u),{generation:a.generation,state:c&&c.persistent?nt.PERSISTENT:nt.VOLATILE}));this._requests=[],this._onCommit.forEach(function(n){n(e.map(function(e){return e.data}))}),d=jn.get(this.dbname),setTimeout(function(){try{h._applyRecord(i,a)}catch(e){h._onError.forEach(function(t){return t(e)})}},d.transactionApplyDelay),f.label=4;case 4:return[2]}})})},e}(),_t=function(){function e(e){var n=e.blockId,t=e.keyName,r=e.items,a=void 0===r?[]:r,i=e.limit;this.blockId=n,this.keyName=t,this.limit=i,this._items=D([],a,!0)}return e.createFromCacheItem=function(n){return n?new e(n.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var n=this;return this._items.find(function(t){var r=t[n.keyName];return e===r})},e.prototype.has=function(e){var n=this;return this._items.map(function(e){return e[n.keyName]}).includes(e)},e.prototype.add=function(e){var n=this,t=this._items.map(function(e){return e[n.keyName]}).indexOf(e[this.keyName]);return t<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[t]=e,!0)},e.prototype.remove=function(e){for(var n in this._items)if(this._items[n][this.keyName]===e)return this._items.splice(parseInt(n),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),yt=function(){function e(e){var n=e.dbname,t=e.collectionName,r=e.metadata,a=e.hashFunction,i=void 0===a?Yn:a,s=e.transaction,o=e.store;this.dbname=n,this.collectionName=t,this.hashFunction=i,this.metadata=r,this._transaction=s,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,n){return void 0===n&&(n=this.metadata.blockLevel),t=this.dbname,r=this.collectionName,a=n,i="".concat(function(e,n,t){var r=t.base*Math.pow(t.multiplier,n)+t.constant;return(t.hashFunction||Yn)(e,r)}(e,n,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(ut(t,r)).concat(a,".").concat(i);var t,r,a,i},e.prototype._findBlock=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i;return P(this,function(s){switch(s.label){case 0:n=mt.get(this.dbname),t=this.metadata.blockLevel,s.label=1;case 1:return t>0?(r=this.createBlockId(e,t),[4,n.find(this._store,r)]):[3,4];case 2:if((a=s.sent())&&(i=_t.createFromCacheItem(a)).getItemByKey(e))return[2,i];s.label=3;case 3:return t--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(n=t.sent())?n.getItemByKey(e):null]}})})},e.prototype.putToBlock=function(e,n){return L(this,void 0,void 0,function(){var t,r,a,i,s;return P(this,function(o){switch(o.label){case 0:return t=jn.get(this.dbname),r=this.createBlockId(e),a=Math.floor(this._store.itemSizeLimit/t.itemSizeLimit),[4,mt.get(this.dbname).find(this._store,r)];case 1:return i=o.sent(),(s=i?_t.createFromCacheItem(i):new _t({blockId:r,keyName:this.keyName,items:[],limit:a})).add(n)?(this._transaction.requestWrite({key:s.blockId,value:s.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this._findBlock(e)];case 1:return(n=t.sent())&&n.remove(e)?(this._transaction.requestWrite({key:n.blockId,value:n.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a,i,s;return P(this,function(o){switch(o.label){case 0:return e=ut(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return n=o.sent(),t=n.filter(function(n){return n.startsWith(e)}),[4,this._store.removeMany(t)];case 2:for(o.sent(),r=mt.get(this.dbname),a=0,i=t;a<i.length;a++)s=i[a],r.remove(s);return[2]}})})},e}(),vt=function(){function e(e){var n=e.dbname,t=e.collectionName,r=e.keyName,a=e.fields,i=e.transaction,s=e.store,o=this;this._origin=[],this._table=[],this.dbname=n,this.collectionName=t,this.keyName=r,this.fields=a,this.indexerKey=function(e,n,t){return"".concat(ot(e,n),"/index.").concat(t)}(this.dbname,this.collectionName,this.fields.join(">")),this._transaction=i,this._store=s,this._transaction.on(et.COMMIT,this.indexerKey,function(){return o.commit()}),this._transaction.on(et.ERROR,this.indexerKey,function(){return o.abort()})}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var n=e[this.keyName],t=this.getColumnValues(e),r=this.indexOf(t),a=r[0];return r[1]?!this._table[a].keys.includes(n)&&(this._table[a].keys.push(n),!0):(this._table.splice(a,0,{columnValues:t,keys:[n]}),!0)},e.prototype._removeItem=function(e){var n=e[this.keyName],t=this.getColumnValues(e),r=this.indexOf(t),a=r[0];if(r[1]){var i=this._table[a].keys.indexOf(n);if(i>-1)return this._table[a].keys.splice(i,1),0===this._table[a].keys.length&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){for(var n,t,r=[],a=0,i=this.fields;a<i.length;a++){var s=i[a];if("-"===s[0]&&(s=s.slice(1)),n=e[s],t=void 0,t=typeof n,null!==n&&"undefined"!==t&&"boolean"!==t&&"number"!==t&&"string"!==t)throw zn.indexTypesNotMatch;r.push(e[s])}return r},e.prototype.diff=function(e,n){for(var t in this.fields){var r="-"===this.fields[t][0]?-1:1,a=Kn(e[t],n[t]);if(0!==a)return r*a}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var n=0,t=this._table.length-1;n<=t;){var r=Math.floor((n+t)/2),a=this.diff(e,this._table[r].columnValues);if(a>0)n=r+1;else{if(!(a<0))return[r,!0];t=r-1}}return[n,!1]}return[0,!1]},e.prototype.ensure=function(){return L(this,void 0,void 0,function(){var e,n,t,r,a,i,s,o,l,u,c,d;return P(this,function(h){switch(h.label){case 0:return[4,(e=mt.get(this.dbname)).find(this._store,this.indexerKey,tt.PERSISTENT)];case 1:return(n=h.sent())?[3,7]:(t=ut(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=h.sent(),a=0,i=r,h.label=3;case 3:return a<i.length?(s=i[a]).startsWith(t)?[4,e.find(this._store,s,tt.NO_CACHE)]:[3,5]:[3,6];case 4:for(o=h.sent(),l=_t.createFromCacheItem(o),u=0,c=l.items;u<c.length;u++)d=c[u],this._addItem(d);h.label=5;case 5:return a++,[3,3];case 6:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,8];case 7:this._origin=n.value,this._table=qn(this._origin),h.label=8;case 8:return[2]}})})},e.prototype.drop=function(){return L(this,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return mt.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}})})},e.prototype.addItem=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){return P(this,function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=qn(this._origin)},e.prototype.abort=function(){this._table=qn(this._origin)},e}(),Et="undefined"!=typeof document&&"undefined"!=typeof navigator;Et&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var bt=Et&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");Et&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),Et&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),Et&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var Ct,Nt,St=Et&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),Ot=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===n?t:3&t|8).toString(16)})};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(Ct||(Ct={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Nt||(Nt={}));var Tt,At={},wt=function(){function e(e,n){void 0===n&&(n={});var t=this;return this._state=Ct.PROCESSING,this._hostId=null,this._queue=[],this._currentItem=null,this._activationTimeout=null,this._activationQueue=[],At[e]&&!n.forceCreate||(this.nodeId=Ot(),this.key=e,Et&&(n.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&t.claimHost()}),window.addEventListener("message",function(e){var n=e.data,r=n.nodeId,a=n.requestId,i=n.key,s=n.op,o=n.data;if(r!==t.nodeId&&i===t.key)switch(s){case Nt.NEWNODE:t._sendSync();break;case Nt.CLAIM_HOST:t._sendSync(),t._hostId=r;break;case Nt.SYNC_HOST:if(!t.isInSync){t._activationTimeout&&clearTimeout(t._activationTimeout);for(var l=o,u=l.currentItemRequestId,c=function(e){var n=t._queue.findIndex(function(n){return n.requestId===e.requestId});n<0&&t._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:t.key,op:Nt.REQUEST_LOCK,ts:e.ts})},d=0,h=l.queue;d<h.length;d++)c(h[d]);t._currentItem=t._queue.find(function(e){return e.requestId===u}),t._completeSync()}break;case Nt.REMOVENODE:t._queue=t._queue.filter(function(e){return e.nodeId!==n.nodeId}),t._currentItem&&t._currentItem.nodeId===n.nodeId&&(t._currentItem=null,t._acquire(t._queue[0]));break;case Nt.REQUEST_LOCK:t._requestLock(n);break;case Nt.ACQUIRE_LOCK:var f=t._queue.find(function(e){return e.requestId===a});t._acquire(f);break;case Nt.RELEASE_LOCK:t._release(a)}}),window.addEventListener("beforeunload",function(){t._send(Nt.REMOVENODE)})),At[e]=this),At[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==Ct.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,n){var t,r;void 0===n&&(n={});var a={nodeId:this.nodeId,requestId:null!==(t=null==n?void 0:n.requestId)&&void 0!==t?t:Ot(),key:this.key,op:e,data:null!==(r=n.data)&&void 0!==r?r:null,ts:Date.now()};return Et&&window.postMessage(a,"*"),a},e.prototype._acquire=function(e){void 0===e&&(e=null),e?(this._currentItem=e,this._currentItem.onAcquired(e.requestId)):this._currentItem=null},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var n=this._currentItem;this._currentItem=null,n.nodeId===this.nodeId&&this._send(Nt.RELEASE_LOCK,{requestId:n.requestId});var t=this._queue.findIndex(function(n){return n.requestId===e});t>-1&&this._queue.splice(t,1),n.onReleased(e)}},e.prototype._requestLock=function(e){var n=this;return new Promise(function(t){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){n.isHost&&n._send(Nt.ACQUIRE_LOCK,{requestId:e}),t()},onReleased:function(){n._acquire(n._queue[0])}},a=!1;for(var i in n._queue)if(n._queue[i].ts>r.ts){n._queue.splice(parseInt(i),0,r),a=!0;break}a||n._queue.push(r),n._currentItem||n._acquire(n._queue[0])})},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Nt.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map(function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return L(this,void 0,void 0,function(){var e=this;return P(this,function(n){return this.isHost&&!this.isInSync?[2,new Promise(function(n){e._activationQueue.push(n)})]:[2]})})},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout(function(){e._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=Ct.DONE,this._activationQueue.forEach(function(e){return e()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Nt.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Nt.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return n.sent(),e=this._send(Nt.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return n.sent(),[2]}})})},e.prototype.unlock=function(){var e;this._release(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)},e}(),It=function(){function e(e){var n=e.dbname,t=e.collectionName,r=e.keyName,a=e.keyHash,i=e.indexes,s=e.store,o=this;this._state=Bn.INIT,this._metadata=null,this._indexers=[],this.dbname=n,this.name=t,this.keyName=r,this.indexes=D([[r]],i.filter(function(e){return vt.createKey(e)!==o.keyName}),!0),this._keyHash=a,this._store=s,this._mutex=new wt(function(e,n){return"".concat(ot(e,n),".lock")}(n,t)),this._blobContainer=new ht({dbname:n,collectionName:t,store:s}),this._transaction=new gt({dbname:n,collectionName:t,store:s})}return e.metadataOf=function(e,n,t){return L(this,void 0,void 0,function(){var r;return P(this,function(a){switch(a.label){case 0:return r=lt(e,n),[4,t.get(r)];case 1:return[2,a.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.init=function(){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l,u,c,d,h,f=this;return P(this,function(p){switch(p.label){case 0:return[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,10]),n=jn.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return t=p.sent(),this._metadata=t||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:for(p.sent(),this._blockManager=new yt({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=D([],this.indexes,!0),a=[],i=r.map(function(e){return vt.createKey(e)}),s=t?t.indexes.map(function(e){return vt.createKey(e)}):[],o=0,l=s;o<l.length;o++)u=l[o],i.includes(u)||a.push(vt.parseKey(u));return(c=[]).push.apply(c,r.map(function(e){var n=new vt({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store});return f._indexers.push(n),n.ensure()})),c.push.apply(c,a.map(function(e){return new vt({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store}).drop()})),[4,Promise.all(c)];case 5:return p.sent(),[4,this._transaction.commit()];case 6:return p.sent(),i.sort().join(",")===s.sort().join(",")?[3,8]:(d=lt(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata,generation:1})]);case 7:p.sent(),p.label=8;case 8:return this._state=Bn.READY,this._mutex.unlock(),[3,10];case 9:throw h=p.sent(),this._mutex.unlock(),h;case 10:return[2]}})})},e.prototype.close=function(){this._state=Bn.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var n=e[this.keyName];return"string"==typeof n&&!!n},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);for(var n=vt.createKey(e),t=0,r=this._indexers;t<r.length;t++){var a=r[t];if(n===vt.createKey(a.fields))return a}return null},e.prototype._upgradeBlockLevel=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return e=lt(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return n.sent(),[2]}})})},e.prototype._requestInsert=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return n=e[this.keyName],[4,this._blockManager.getFromBlock(n)];case 1:return a.sent()?[3,10]:[4,this._blockManager.putToBlock(n,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(n,e)];case 4:a.sent(),a.label=5;case 5:t=0,r=this._indexers,a.label=6;case 6:return t<r.length?[4,r[t].addItem(e)]:[3,9];case 7:a.sent(),a.label=8;case 8:return t++,[3,6];case 9:return[3,11];case 10:throw zn.collectionInsertDuplicate;case 11:return[2]}})})},e.prototype._requestUpsert=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o;return P(this,function(l){switch(l.label){case 0:return n=e[this.keyName],[4,this._blockManager.getFromBlock(n)];case 1:return(t=l.sent())?[3,10]:[4,this._blockManager.putToBlock(n,e)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(n,e)];case 4:l.sent(),l.label=5;case 5:r=0,a=this._indexers,l.label=6;case 6:return r<a.length?[4,(o=a[r]).addItem(e)]:[3,9];case 7:l.sent(),l.label=8;case 8:return r++,[3,6];case 9:return[3,16];case 10:return[4,this._blockManager.putToBlock(n,e)];case 11:l.sent(),i=0,s=this._indexers,l.label=12;case 12:return i<s.length?0===(o=s[i]).diff(o.getColumnValues(t),o.getColumnValues(e))?[3,15]:[4,o.removeItem(t)]:[3,16];case 13:return l.sent(),[4,o.addItem(e)];case 14:l.sent(),l.label=15;case 15:return i++,[3,12];case 16:return[2]}})})},e.prototype._requestUpdate=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i;return P(this,function(s){switch(s.label){case 0:return n=e[this.keyName],[4,this._blockManager.getFromBlock(n)];case 1:return(t=s.sent())?[4,this._blockManager.putToBlock(n,e)]:[3,7];case 2:s.sent(),r=0,a=this._indexers,s.label=3;case 3:return r<a.length?0===(i=a[r]).diff(i.getColumnValues(t),i.getColumnValues(e))?[3,6]:[4,i.removeItem(t)]:[3,7];case 4:return s.sent(),[4,i.addItem(e)];case 5:s.sent(),s.label=6;case 6:return r++,[3,3];case 7:return[2]}})})},e.prototype._requestRemove=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(n=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,6];case 2:a.sent(),t=0,r=this._indexers,a.label=3;case 3:return t<r.length?[4,r[t].removeItem(n)]:[3,6];case 4:a.sent(),a.label=5;case 5:return t++,[3,3];case 6:return[2]}})})},e.prototype._requestClear=function(){return L(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:t.sent(),e=0,n=this._indexers,t.label=2;case 2:return e<n.length?[4,n[e].clear()]:[3,5];case 3:t.sent(),t.label=4;case 4:return e++,[3,2];case 5:return[2]}})})},e.prototype.getByKey=function(e){return L(this,void 0,void 0,function(){var n,t;return P(this,function(r){switch(r.label){case 0:return this._state!==Bn.READY?[3,6]:[4,this._mutex.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return n=r.sent(),this._mutex.unlock(),[2,qn(n)];case 4:throw t=r.sent(),this._mutex.unlock(),t;case 5:return[3,7];case 6:throw zn.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(e){return void 0===e&&(e={}),this._state===Bn.READY?new it({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return this._state!==Bn.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:if(t.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw zn.collectionKeyNotGiven;return[4,this._requestInsert(qn(e))];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[2,e];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw zn.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i=this;return P(this,function(s){switch(s.label){case 0:return this._state!==Bn.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some(function(e){return!i._hasPropertyOfKeyName(e)}))throw zn.collectionKeyNotGiven;n=0,t=e,s.label=3;case 3:return n<t.length?(r=t[n],[4,this._requestInsert(qn(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return n++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw zn.collectionNotReady;case 12:return[2]}})})},e.prototype.upsertOne=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return this._state!==Bn.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:if(t.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw zn.collectionKeyNotGiven;return[4,this._requestUpsert(qn(e))];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[2,e];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw zn.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i=this;return P(this,function(s){switch(s.label){case 0:return this._state!==Bn.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some(function(e){return!i._hasPropertyOfKeyName(e)}))throw zn.collectionKeyNotGiven;n=0,t=e,s.label=3;case 3:return n<t.length?(r=t[n],[4,this._requestUpsert(qn(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return n++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw zn.collectionNotReady;case 12:return[2]}})})},e.prototype.update=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return this._state!==Bn.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:if(t.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw zn.collectionKeyNotGiven;return[4,this._requestUpdate(qn(e))];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[2,e];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw zn.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(e,n){return L(this,void 0,void 0,function(){var t,r,a,i,s,o,l,u,c,d,h,f=this;return P(this,function(p){switch(p.label){case 0:return this._state!==Bn.READY?[3,12]:[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,11]),t=e.where,r=void 0===t?{}:t,a=e.index,i=void 0===a?null:a,s=e.backward,o=void 0!==s&&s,l=[],[4,new at({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(i)}).each(function(e){return L(f,void 0,void 0,function(){var t,a;return P(this,function(i){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(t=e.nextValue,Wn(r,t)&&n.set){if("function"!=typeof n.set)for(a in n.set)t[a]=n.set[a];else n.set(t);l.push(t)}e.next()}else e.stop();return[2]})})})];case 3:p.sent(),u=0,c=l,p.label=4;case 4:return u<c.length?(d=c[u],[4,this._requestUpdate(qn(d))]):[3,7];case 5:p.sent(),p.label=6;case 6:return u++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return p.sent(),this._mutex.unlock(),[2,l];case 9:return h=p.sent(),[4,this._transaction.clear()];case 10:throw p.sent(),this._mutex.unlock(),h;case 11:return[3,13];case 12:throw this._transaction.clear(),zn.collectionNotReady;case 13:return[2]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return this._state!==Bn.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw zn.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o,l,u,c,d,h=this;return P(this,function(f){switch(f.label){case 0:return this._state!==Bn.READY?[3,11]:[4,this._mutex.lock()];case 1:f.sent(),f.label=2;case 2:return f.trys.push([2,9,,10]),n=e.where,t=void 0===n?{}:n,r=e.index,a=void 0===r?null:r,i=e.backward,s=void 0!==i&&i,o=[],[4,new at({condition:t,blockManager:this._blockManager,backward:s,indexer:this._getIndexerBy(a)}).each(function(e){return L(h,void 0,void 0,function(){var n,r;return P(this,function(a){if(e.error)throw e.stop(),e.error;return e.hasNext?(n=e.nextValue,Wn(t,n)&&(r=n[this.keyName],o.push(r)),e.next()):e.stop(),[2]})})})];case 3:f.sent(),l=0,u=o,f.label=4;case 4:return l<u.length?(c=u[l],[4,this._requestRemove(c)]):[3,7];case 5:f.sent(),f.label=6;case 6:return l++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return f.sent(),this._mutex.unlock(),[2,o];case 9:throw d=f.sent(),this._mutex.unlock(),d;case 10:return[3,12];case 11:throw this._transaction.clear(),zn.collectionNotReady;case 12:return[2]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return this._state!==Bn.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return e=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw zn.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,n.sent()]}})})},e.prototype.saveBlob=function(e,n){return void 0===n&&(n=null),L(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.save(e,n)];case 1:return[2,t.sent()]}})})},e.prototype.removeBlob=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return n.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return L(this,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}})})},e}(),Rt={key:"__ev",value:{k:"__ev",v:"scs"},generation:1},kt={encrypt:function(e){return e},decrypt:function(e){return e}},Mt={},Ut=function(){function e(e){void 0===e&&(e={});var n=e.itemSizeLimit,t=void 0===n?4194304:n,r=e.delay,a=void 0===r?1:r,i=e.encryption,s=void 0===i?kt:i;this._encryption=s,this.itemSizeLimit=t,this.delay=a,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return Mt[this.dbname]},set:function(e){Mt[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,n,t){var r=this;this.observer[e]={},n.forEach(function(n){return r.observer[e][n]=t})},e.prototype.init=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:this.dbname=e,Mt[this.dbname]={},t.label=1;case 1:return t.trys.push([1,,3,5]),[4,this.get(Rt.key)];case 2:if((n=t.sent())&&JSON.stringify(n)!==JSON.stringify(Rt.value))throw zn.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Rt)];case 4:return t.sent(),[7];case 5:return[2]}})})},e.prototype.getAllKeys=function(){return L(this,void 0,void 0,function(){return P(this,function(e){return[2,Object.keys(Mt[this.dbname]).filter(function(e){return e!==Rt.key})]})})},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n,t;return P(this,function(r){switch(r.label){case 0:return[4,Qn(this.delay)];case 1:if(r.sent(),n=this.observer[e],t=n&&n.get?n.get(e):null)throw t;return[2,Mt[this.dbname][e]?this._encryption.decrypt(Mt[this.dbname][e]):null]}})})},e.prototype.set=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s;return P(this,function(o){switch(o.label){case 0:return[4,Qn(this.delay)];case 1:if(o.sent(),n=e.key,t=e.value,r=this.observer[n],a=r&&r.set?r.set(n):null)throw a;if(i=this._encryption.encrypt(t),s=JSON.stringify(i),n===Rt.key||s.length<this.itemSizeLimit)return Mt[this.dbname][n]=i,[2,Mt[this.dbname][n]];throw zn.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return L(this,void 0,void 0,function(){var n,t=this;return P(this,function(r){switch(r.label){case 0:return[4,Qn(this.delay)];case 1:return r.sent(),n=[],e.forEach(function(e){var r=e.key,a=e.value,i=t.observer[r];if(i&&i.set&&i.set(r))n.push(zn.collectionWriteFailed);else{var s=t._encryption.encrypt(a),o=JSON.stringify(s);r===Rt.key||o.length<t.itemSizeLimit?(Mt[t.dbname][r]=s,n.push(a)):n.push(zn.storeItemSizeExceeded)}}),[2,n]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){var n,t;return P(this,function(r){switch(r.label){case 0:return[4,Qn(this.delay)];case 1:if(r.sent(),n=this.observer[e],t=n&&n.remove?n.remove(e):null)throw t;return Mt[this.dbname][e]&&delete Mt[this.dbname][e],[2,e]}})})},e.prototype.removeMany=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i;return P(this,function(s){switch(s.label){case 0:return[4,Qn(this.delay)];case 1:for(s.sent(),n=0,t=e;n<t.length;n++){if(r=t[n],a=this.observer[r],i=a&&a.remove?a.remove(r):null)throw i;Mt[this.dbname][r]&&delete Mt[this.dbname][r]}return[2,e]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,Qn(this.delay)];case 1:return e.sent(),Mt[this.dbname]={},[2]}})})},e}(),Lt="NestDBStore",Pt=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var n=e.encryption,t=void 0===n?kt:n;this._window="undefined"!=typeof window?window:null,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=t}return e.prototype.init=function(e){return L(this,void 0,void 0,function(){var n,t,r=this;return P(this,function(a){switch(a.label){case 0:return this.dbname=e,[4,new Promise(function(e,n){if(r._window&&Et)if(bt){var t=r._indexedDB.open("_testMozilla");t.onerror=function(){return n(zn.storeNotAvailableInPrivateBrowsing)},t.onsuccess=function(){return e()}}else St?r._window.indexedDB||!r._window.PointerEvent&&!r._window.MSPointerEvent||n(zn.storeNotAvailableInPrivateBrowsing):e();else n(zn.storeNotAvailable)})];case 1:return a.sent(),n=this,[4,new Promise(function(n,t){var a=r._indexedDB.open(e);a.addEventListener("upgradeneeded",function(e){e.target.result.createObjectStore(Lt,{keyPath:"key"})}),a.addEventListener("success",function(e){return n(e.target.result)}),a.addEventListener("error",function(e){return t(e.target.error)})})];case 2:n._database=a.sent(),a.label=3;case 3:return a.trys.push([3,,5,7]),[4,this.get(Rt.key)];case 4:if((t=a.sent())&&JSON.stringify(t)!==JSON.stringify(Rt.value))throw zn.storeEncryptionInvalid;return[3,7];case 5:return[4,this.set(Rt)];case 6:return a.sent(),[7];case 7:return[2]}})})},e.prototype.getAllKeys=function(){return L(this,void 0,void 0,function(){var e=this;return P(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,t){var r=e._database.transaction(Lt,"readonly").objectStore(Lt).getAllKeys();r.addEventListener("success",function(e){n(e.target.result.filter(function(e){return e!==Rt.key}))}),r.addEventListener("error",function(e){return t(e.target.error)})})];case 1:return[2,n.sent()]}})})},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n=this;return P(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,r){var a=n._database.transaction(Lt,"readonly").objectStore(Lt).get(e);a.addEventListener("success",function(e){return t(e.target.result?n._encryption.decrypt(e.target.result.value):null)}),a.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,t.sent()]}})})},e.prototype.set=function(e){return L(this,void 0,void 0,function(){var n,t,r=this;return P(this,function(a){switch(a.label){case 0:return n=e.key,t=e.value,[4,new Promise(function(e,a){var i=r._database.transaction(Lt,"readwrite").objectStore(Lt).put({key:n,value:r._encryption.encrypt(t)});i.addEventListener("success",function(n){e(n.target.result)}),i.addEventListener("error",function(e){return a(e.target.error)})})];case 1:return a.sent(),[2,t]}})})},e.prototype.setMany=function(e){return L(this,void 0,void 0,function(){var n,t,r=this;return P(this,function(a){switch(a.label){case 0:return n=[],t=this._database.transaction(Lt,"readwrite").objectStore(Lt),e.forEach(function(e){var a=e.key,i=e.value;n.push(new Promise(function(e){var n=t.put({key:a,value:r._encryption.encrypt(i)});n.addEventListener("success",function(n){e(n.target.result)}),n.addEventListener("error",function(){e(zn.collectionWriteFailed)})}))}),[4,Promise.all(n)];case 1:return a.sent(),[2,e.map(function(e){return e.value})]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){var n=this;return P(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,r){var a=n._database.transaction(Lt,"readwrite").objectStore(Lt).delete(e);a.addEventListener("success",function(){return t(e)}),a.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,t.sent()]}})})},e.prototype.removeMany=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return n=this._database.transaction(Lt,"readwrite").objectStore(Lt),[4,Promise.all(e.map(function(e){return new Promise(function(t,r){var a=n.delete(e);a.addEventListener("success",function(){return t(e)}),a.addEventListener("error",function(e){return r(e.target.error)})})}))];case 1:return[2,t.sent()]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){var e=this;return P(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,t){var r=e._database.transaction(Lt,"readwrite").objectStore(Lt).clear();r.addEventListener("success",function(){return n()}),r.addEventListener("error",function(e){return t(e.target.error)})})];case 1:return[2,n.sent()]}})})},e}(),Dt=function(){function e(e){var n=e.AsyncStorage,t=e.encryption,r=void 0===t?kt:t;this.itemSizeLimit=6291456,this._asyncStorage=n,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:this.dbname=e,t.label=1;case 1:return t.trys.push([1,,3,5]),[4,this.get(Rt.key)];case 2:if((n=t.sent())&&JSON.stringify(n)!==JSON.stringify(Rt.value))throw zn.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Rt)];case 4:return t.sent(),[7];case 5:return[2]}})})},e.prototype.getAllKeys=function(){return L(this,void 0,void 0,function(){var e,n=this;return P(this,function(t){switch(t.label){case 0:return e=this._getActualKey(Rt.key),[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter(function(t){return n._isBelonging(t)&&t!==e}).map(function(e){return e.substring("".concat(n.dbname,"/").length)})]}})})},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(n=t.sent())?this._encryption.decrypt(JSON.parse(n)):null]}})})},e.prototype.set=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:return n=e.key,t=e.value,r=JSON.stringify(this._encryption.encrypt(t)),n===Rt.key||r.length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(n),r)]:[3,2];case 1:return a.sent(),[2,JSON.parse(r)];case 2:throw zn.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o;return P(this,function(l){switch(l.label){case 0:n=[],t=0,r=e,l.label=1;case 1:if(!(t<r.length))return[3,8];a=r[t],l.label=2;case 2:return l.trys.push([2,6,,7]),i=a.key,s=a.value,o=JSON.stringify(this._encryption.encrypt(s)),i===Rt.key||o.length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(i),o)]:[3,4];case 3:return l.sent(),n.push(s),[3,5];case 4:n.push(zn.storeItemSizeExceeded),l.label=5;case 5:return[3,7];case 6:return l.sent(),n.push(zn.collectionWriteFailed),[3,7];case 7:return t++,[3,1];case 8:return[2,n]}})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return n.sent(),[2,e]}})})},e.prototype.removeMany=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){switch(a.label){case 0:n=0,t=e,a.label=1;case 1:return n<t.length?(r=t[n],[4,this._asyncStorage.removeItem(this._getActualKey(r))]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return[4,this.getAllKeys()];case 1:return e=n.sent(),[4,this.removeMany(e)];case 2:return n.sent(),[4,this.remove(Rt.key)];case 3:return n.sent(),[2]}})})},e}(),xt=function(){function e(e){var n=e.MMKV,t=e.encryption,r=void 0===t?kt:t;this.itemSizeLimit=6291456,this._mmkv=n,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:this.dbname=e,t.label=1;case 1:return t.trys.push([1,,3,5]),[4,this.get(Rt.key)];case 2:if((n=t.sent())&&JSON.stringify(n)!==JSON.stringify(Rt.value))throw zn.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Rt)];case 4:return t.sent(),[7];case 5:return[2]}})})},e.prototype.getAllKeys=function(){return L(this,void 0,void 0,function(){var e,n=this;return P(this,function(t){return e=this._getActualKey(Rt.key),[2,this._mmkv.getAllKeys().filter(function(t){return n._isBelonging(t)&&t!==e}).map(function(e){return e.substr("".concat(n.dbname,"/").length)})]})})},e.prototype.get=function(e){return L(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(n=t.sent())?this._encryption.decrypt(JSON.parse(n)):null]}})})},e.prototype.set=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){if(n=e.key,t=e.value,r=JSON.stringify(this._encryption.encrypt(t)),n===Rt.key||r.length<this.itemSizeLimit)return this._mmkv.set(this._getActualKey(n),r),[2,JSON.parse(r)];throw zn.storeItemSizeExceeded})})},e.prototype.setMany=function(e){return L(this,void 0,void 0,function(){var n,t,r,a,i,s,o;return P(this,function(l){for(n=[],t=0,r=e;t<r.length;t++){a=r[t];try{i=a.key,s=a.value,o=JSON.stringify(this._encryption.encrypt(s)),i===Rt.key||o.length<this.itemSizeLimit?(this._mmkv.set(this._getActualKey(i),o),n.push(s)):n.push(zn.storeItemSizeExceeded)}catch(e){n.push(zn.collectionWriteFailed)}}return[2,n]})})},e.prototype.remove=function(e){return L(this,void 0,void 0,function(){return P(this,function(n){return this._mmkv.delete(this._getActualKey(e)),[2,e]})})},e.prototype.removeMany=function(e){return L(this,void 0,void 0,function(){var n,t,r;return P(this,function(a){for(n=0,t=e;n<t.length;n++)r=t[n],this._mmkv.delete(this._getActualKey(r));return[2,e]})})},e.prototype.clear=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return[4,this.getAllKeys()];case 1:return e=n.sent(),[4,this.removeMany(e)];case 2:return n.sent(),[4,this.remove(Rt.key)];case 3:return n.sent(),[2]}})})},e}(),Ft="[NESTDB]",Ht=!0,Gt=function(){function e(){}return e.off=function(){Ht=!1},e.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ht&&console.log.apply(console,D(["".concat(Ft,"[LOG]")],e,!1))},e.warning=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ht&&console.warn.apply(console,D(["".concat(Ft,"[WARNING]")],e,!1))},e.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ht&&console.error.apply(console,D(["".concat(Ft,"[ERROR]")],e,!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(Tt||(Tt={}));var jt,Bt,zt,Vt,qt,Kt,Yt,Qt=function(){function e(e){var n=e.name,t=e.version,r=e.store,a=e.config;this.name=n,this._version=t,this._state=Tt.INIT,this._config=a||new jn({dbname:n}),this._store=r,this._event={success:Jn,error:Jn,upgrade:Zn},this._collections=new Map,this._globalMutex=new wt("".concat(this.name,".lock")),this._config.disableLogger&&Gt.off(),new mt({dbname:n,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.commitSchema=function(e){return L(this,void 0,void 0,function(){var n=this;return P(this,function(t){switch(t.label){case 0:return this._state!==Tt.OPENING?[3,2]:[4,Promise.all(e.map(function(e){return L(n,void 0,void 0,function(){var n,t,r,a;return P(this,function(i){switch(i.label){case 0:return n=e.collectionName,t=e.keyName,r=e.index,a=void 0===r?[]:r,this._collections.has(n)||this._collections.set(n,new It({dbname:this.name,collectionName:n,keyName:t,keyHash:e.keyHash||null,indexes:a,store:this._store})),[4,this._collections.get(n).init()];case 1:return i.sent(),[2]}})})}))];case 1:return t.sent(),[3,3];case 2:throw zn.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var e;return L(this,void 0,void 0,function(){var n,t,r,a,i=this;return P(this,function(s){switch(s.label){case 0:return[4,this._globalMutex.lock()];case 1:if(s.sent(),this._state===Tt.OPENED)return[3,15];this._state=Tt.OPENING,s.label=2;case 2:return s.trys.push([2,5,,15]),[4,this._store.init(this.name)];case 3:return s.sent(),o=this.name,n="".concat(st(o),".metadata"),t={version:0,collectionNames:[]},[4,this._store.get(n)];case 4:return r=null!==(e=s.sent())&&void 0!==e?e:t,[2,new Promise(function(e,t){var a=function(e){r.version<i._version?i._event.upgrade(r.version,function(t){return L(i,void 0,void 0,function(){var a;return P(this,function(i){switch(i.label){case 0:if(t)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:n,value:r,generation:this._version})];case 2:return i.sent(),e({continued:!0}),[3,4];case 3:return a=i.sent(),e({continued:!1,err:a}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:t}),i.label=6;case 6:return[2]}})})}):e({continued:!1})};a(function n(s){var o=s.continued,l=void 0!==o&&o,u=s.err,c=void 0===u?null:u;if(l)setTimeout(function(){return a(n)},10);else if(c)Gt.error(c.message),i._globalMutex.unlock(),i._event.error(c),t(c);else{var d=[];r.collectionNames.forEach(function(e){i._collections.has(e)||d.push(L(i,void 0,void 0,function(){var n,t;return P(this,function(r){switch(r.label){case 0:return[4,It.metadataOf(this.name,e,this._store)];case 1:return(n=r.sent())?(t=new It({dbname:this.name,collectionName:e,keyName:n.keyName,indexes:n.indexes,store:this._store}),this._collections.set(e,t),[4,t.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})}))}),Promise.all(d).then(function(){i._state=Tt.OPENED,i._globalMutex.unlock(),i._event.success(),e()}).catch(function(e){Gt.error(e.message),i._globalMutex.unlock(),i._event.error(e),t(e)})}})})];case 5:switch((a=s.sent()).code){case Hn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Hn.STORE_NOT_AVAILABLE:return[3,8];case Hn.STORE_ENCRYPTION_INVALID:return[3,10]}return[3,13];case 6:return Gt.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new Ut({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 7:return s.sent(),[3,14];case 8:return Gt.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new Ut({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 9:return s.sent(),[3,14];case 10:return Gt.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this._store.clear()];case 11:return s.sent(),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 12:return s.sent(),[3,14];case 13:throw Gt.error(a.message),this._globalMutex.unlock(),this._event.error(a),a;case 14:return[3,15];case 15:return[2]}var o})})},e.prototype.close=function(){this._state=Tt.CLOSED,this._collections.forEach(function(e){return e.close()})},e.prototype.reset=function(){return L(this,void 0,void 0,function(){var e,n=this;return P(this,function(t){switch(t.label){case 0:return(e=mt.get(this.name))&&e.clearByCondition(function(e){return e.key.startsWith(st(n.name))}),[4,this._store.clear()];case 1:return t.sent(),[2]}})})},e.prototype.on=function(e,n){this._event[e]=n},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?Zn:Jn)},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),Wt=function(){function e(){}return e.create=function(){return"".concat(Math.floor(1e5*Math.random()),"-").concat((new Date).getTime())},e}();!function(e){e.AND="AND",e.OR="OR"}(jt||(jt={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Bt||(Bt={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(zt||(zt={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper"}(Vt||(Vt={})),function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(qt||(qt={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Kt||(Kt={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Yt||(Yt={}));var Jt=function(){function e(){this._iid=null,this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:jt.AND},this.includeEmpty=!1,this.nicknameContainsFilter="",this.nicknameStartsWithFilter="",this.nicknameExactMatchFilter="",this.channelNameContainsFilter="",this.memberStateFilter=zt.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Vt.ALL,this.publicChannelFilter=qt.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Kt.ALL,this.hiddenChannelFilter=Yt.UNHIDDEN,this.includeFrozen=!0}return Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype._isFriend=function(e){return!!e.friendDiscoveryKey||!!e.friendName},Object.defineProperty(e.prototype,"iid",{set:function(e){this._iid=e},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,n){Array.isArray(e)&&0!==e.length&&"string"==typeof n&&n&&(this._searchFilter={searchQuery:n,searchFields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,n,t){void 0===t&&(t=jt.AND),this._userIdsFilter={userIds:e,includeMode:n,queryType:t}},e.prototype.clone=function(){var n=new e;n.setSearchFilter(this.searchFilter.searchFields,this.searchFilter.searchQuery),n.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var t=JSON.parse(JSON.stringify(this));return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},e.prototype.match=function(e){var n=this._searchFilter,t=n.searchQuery,r=n.searchFields;if(t&&r&&r.length>0&&!r.some(function(n){switch(n){case Bt.CHANNEL_NAME:return e.name.toLowerCase().includes(t.toLowerCase());case Bt.MEMBER_NICKNAME:return e.members.some(function(e){return e.nickname.toLowerCase().includes(t.toLowerCase())});default:return!0}}))return!1;var a=this._userIdsFilter,i=a.includeMode,s=a.queryType,o=a.userIds,l=R.get(this._iid).get("currentUserId"),u=e.members.map(function(e){return e.userId});if(i){if(o.length>0)switch(s){case jt.AND:if(o.some(function(e){return!u.includes(e)}))return!1;break;case jt.OR:if(o.every(function(e){return!u.includes(e)}))return!1}}else{if(o.includes(l)||o.push(l),e.members.length>o.length)return!1;if(!function(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(var t=D([],e,!0).sort(),r=D([],n,!0).sort(),a=0;a<t.length;++a)if(t[a]!==r[a])return!1;return!0}(o,u))return!1}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var c=this.nicknameContainsFilter.toLowerCase();if(!e.members.some(function(e){return e.userId!==l&&e.nickname.toLowerCase().includes(c)}))return!1}if(this.nicknameStartsWithFilter){var d=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some(function(e){return e.userId!==l&&e.nickname.toLowerCase().startsWith(d)}))return!1}if(this.nicknameExactMatchFilter){var h=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some(function(e){return e.userId!==l&&e.nickname.toLowerCase()!==h}))return!1}if(this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.memberStateFilter)switch(this.memberStateFilter){case zt.JOINED:if("joined"!==e.myMemberState)return!1;break;case zt.INVITED:if("invited"!==e.myMemberState)return!1;break;case zt.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case zt.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Yt.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case Yt.HIDDEN:if(!e.isHidden)return!1;break;case Yt.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case Yt.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Kt.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case qt.PUBLIC:if(!e.isPublic||"none"===e.myMemberState)return!1;break;case qt.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Vt.SUPER:if(!e.isSuper)return!1;break;case Vt.NON_SUPER:if(e.isSuper)return!1}return!0},e.QueryType=jt,e.SearchField=Bt,e.MemberStateFilter=zt,e.SuperChannelFilter=Vt,e.PublicChannelFilter=qt,e.UnreadChannelFilter=Kt,e.HiddenChannelFilter=Yt,e}(),Xt=function(){function e(e){var n=e.iid;this._iid=n,this._filter=new Jt,this._filter.iid=this._iid,this._order=Ue.LATEST_LAST_MESSAGE,this._limit=20}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this._filter.iid=this._iid,this},e.prototype.setOrder=function(e){return this._order=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new Xe({iid:this._iid,filter:this._filter,order:this._order,limit:this._limit})},e}(),$t=function(){function e(e){var n=e.iid,t=e.channel;this._iid=n,this._channel=t,this._startingPoint=Date.now(),this._filter=new en,this._limit=100}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this},e.prototype.setStartingPoint=function(e){return this._startingPoint=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new wn({iid:this._iid,channel:this._channel,startingPoint:this._startingPoint,filter:this._filter,limit:this._limit})},e}(),Zt={},er={},nr=new WeakMap,tr=new WeakMap,rr=new WeakMap,ar=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).channelType=Mn.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=t.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=t.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r.invitedAt=0,r.joinedAt=0,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},nr.set(E(r),{}),tr.set(E(r),{start:0,end:0}),rr.set(E(r),0),e&&r._update(e),r}return m(t,[{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}},{key:"createMessageCollection",value:function(){return new $t({iid:this._iid,channel:this})}},{key:"_setGroupChannelUnreadCount",value:function(e,n){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var t=R.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=t?t:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof n&&n>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=n:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var n=this,t=j.get(this._iid),r=t.BaseChannel,a=t.GroupChannel,i=t.User,s=t.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:a.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:a.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt")&&(this.cachedReadReceiptStatus={},Object.keys(e.read_receipt).forEach(function(t){var r=e.read_receipt[t];n.updateReadReceipt(t,parseInt(r))})),e.hasOwnProperty("delivery_receipt")&&"object"===h(e.delivery_receipt)&&null!==e.delivery_receipt&&(this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),Object.keys(e.delivery_receipt).forEach(function(t){var r=e.delivery_receipt[t];n.updateDeliveryReceipt(t,parseInt(r))})),e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var o=0;o<e.members.length;o++){var l=new s(e.members[o]);this.members.push(l),this.memberMap[l.userId]=l}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||a.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===h(e.last_message)&&e.last_message?e.last_message instanceof fn?this.lastMessage=e.last_message:this.lastMessage=r.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===h(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=a.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var t=j.get(this._iid),r=t.Member,a=this.removeMember(e);a&&a.state===r.JOINED&&(e.state=r.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,n),this.updateDeliveryReceipt(e.userId,n)}}},{key:"removeMember",value:function(e){var n=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var t=0;t<this.members.length;t++){var r=this.members[t];if(r.userId===e.userId){n=r,this.members.splice(t,1);break}}this.memberCount--}return n}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return se.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,j.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,j.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return j.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,n=ye.toArray(arguments),t=void 0;"function"==typeof n[n.length-1]&&(t=n.pop());var r=j.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(n[0]instanceof i&&1===n.length)return le(this._iid,function(t){var r=n[0];r.channelUrl=e.url,r._validate()?R.get(e._iid).container.apiClient.updateGroupChannel(d(d({},r),{},{operatorUserIds:r.operatorUserIds}),function(e,n){var r=null;e||(r=a.upsert(n)),t(e,r)}):t(ye.error,null)},t);if(3===n.length){var s=new i;return s.channelUrl=this.url,s.name=n[0],"string"==typeof n[1]?s.coverUrl=n[1]:s.coverImage=n[1],s.data=n[2],t?this.updateChannel(s,t):this.updateChannel(s)}if(4===n.length){var o=new i;return o.channelUrl=this.url,o.isDistinct=n[0],o.name=n[1],"string"==typeof n[1]?o.coverUrl=n[2]:o.coverImage=n[2],o.data=n[3],t?this.updateChannel(o,t):this.updateChannel(o)}if(5===n.length){var l=new i;return l.channelUrl=this.url,l.isDistinct=n[0],l.name=n[1],"string"==typeof n[2]?l.coverUrl=n[2]:l.coverImage=n[2],l.data=n[3],l.customType=n[4],t?this.updateChannel(l,t):this.updateChannel(l)}return le(this._iid,function(e){return e(ye.error,null)},t)}},{key:"invite",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.length>0&&e.every(function(e){return!!e.userId&&"string"==typeof e.userId})}}),new ye({type:"callback"})]),a=N(r,3);return t=a[0],e=a[1],n=a[2],t?le(this._iid,function(e){return e(ye.error,null)},n):this.inviteWithUserIds(e.map(function(e){return e.userId}),n)}},{key:"inviteWithUserIds",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.inviteToGroupChannel({channelUrl:t.url,userIds:e},function(e,r){var a=null;e||(a=j.get(t._iid).GroupChannel.upsert(r)),n(e,a)})},n)}},{key:"acceptInvitation",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.acceptInvitation({channelUrl:t.url,accessCode:e},function(e,r){var a=null;e||((a=j.get(t._iid).GroupChannel.upsert(r)).myMemberState="joined"),n(e,a)})},n)}},{key:"declineInvitation",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.declineInvitation({channelUrl:n.url},function(t,r){var a=null;if(!t){var i=j.get(n._iid).GroupChannel;(a=i.upsert(r)).myMemberState="none",n.isPublic||i.removeCachedChannel(n.url)}e(t,a)})},e)}},{key:"join",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.joinGroupChannel({channelUrl:t.url,accessCode:e},function(e,r){var a=null;e||((a=j.get(t._iid).GroupChannel.upsert(r)).myMemberState="joined"),n(e,a)})},n)}},{key:"leave",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.leaveGroupChannel({channelUrl:n.url},function(n,t){return e(n,null)})},e)}},{key:"muteUser",value:function(e,n,t,r){return this.muteUserWithUserId(e?e.userId:null,n,t,r)}},{key:"muteUserWithUserId",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string",optional:!0,defaultValue:""}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:t,seconds:n,isGroupChannel:!0},function(e,n){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,n){return this.unmuteUserWithUserId(e?e.userId:null,n)}},{key:"unmuteUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.unmuteUser({channelUrl:t.url,userId:e,isGroupChannel:!0},function(e,t){n(e,null)})},n)}},{key:"banUser",value:function(e,n,t,r){return this.banUserWithUserId(e?e.userId:null,n,t,r)}},{key:"banUserWithUserId",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string"}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:t,seconds:n,isGroupChannel:!0},function(e,n){r(e,null)})},r)}},{key:"unbanUser",value:function(e,n){return this.unbanUserWithUserId(e?e.userId:null,n)}},{key:"unbanUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.unbanUser({channelUrl:t.url,userId:e,isGroupChannel:!0},function(e,t){n(e,null)})},n)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=j.get(this._iid).Member;this.joinedMemberCount=this.members.filter(function(n){return n.state===e.JOINED}).length}}},{key:"setLatestMemberCount",value:function(e,n,t){var r=!1;return"number"==typeof e&&"number"==typeof n&&"number"==typeof t&&t>=rr.get(this)&&(rr.set(this,t),r=n!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=n),r}},{key:"hide",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!0}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){a?t(a,null):R.get(r._iid).container.apiClient.hideGroupChannel({channelUrl:r.url,hidePreviousMessages:e,allowAutoUnhide:n},function(a,i){if(!a){var s=j.get(r._iid).GroupChannel;r.isHidden=!0,r.hiddenState=n?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&r._setGroupChannelUnreadCount(0,0),i.hasOwnProperty("ts_message_offset")&&(r._messageOffsetTimestamp=i.ts_message_offset),s.cachedChannels[r.url]=r}t(a,i)})},t)}},{key:"unhide",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.unhideGroupChannel({channelUrl:n.url},function(t,r){if(!t){var a=j.get(n._iid).GroupChannel;n.isHidden=!1,n.hiddenState=a.HiddenState.UNHIDDEN,a.cachedChannels[n.url]=n}e(t,r)})},e)}},{key:"freeze",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.freeze({channelUrl:n.url,isGroupChannel:!0,freezing:!0},function(t,r){if(!t){var a=j.get(n._iid).GroupChannel;n.isFrozen=!0,a.cachedChannels[n.url]=n}e(t,null)})},e)}},{key:"unfreeze",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.freeze({channelUrl:n.url,isGroupChannel:!0,freezing:!1},function(t,r){if(!t){var a=j.get(n._iid).GroupChannel;n.isFrozen=!1,a.cachedChannels[n.url]=n}e(t,null)})},e)}},{key:"delete",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.deleteGroupChannel({channelUrl:n.url},function(t,r){t||j.get(n._iid).GroupChannel.removeCachedChannel(n.url),e(t,r)})},e)}},{key:"markAsRead",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid).Command,r=Ma.getInstance(n._iid),a=t.bRead({channelUrl:n.url});r.sendCommand(a,function(t,a){if(r.getErrorFirstCallback()){var i=[t,a];a=i[0],t=i[1]}if(a)e(a,null);else if(r.currentUser){var s=Ze.of(n._iid),o=ge.of(n._iid);n.updateReadReceipt(r.currentUser.userId,t.getJsonElement().ts);var l=!1;(n.unreadMessageCount>0||n.unreadMentionCount>0)&&(n._setGroupChannelUnreadCount(0,0),Object.keys(r.channelHandlers).forEach(function(e){r.channelHandlers[e].onChannelChanged(n)}),l=!0),e(null,null),s.upsert([n]).then(function(){l&&o.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:n}}),o.send({source:de.EVENT_READ_RECEIPT_UPDATED,payload:{channel:n}})}).catch(function(e){return X.error(e)})}else{var u=new SendBirdException("Connection should be made first.",SendBirdException.CONNECTION_REQUIRED);e(u,null)}})},e)}},{key:"getUnreadMemberCount",value:function(e){var n=R.get(this._iid),t=j.get(this._iid).Member,r=n.container.currentUserId;if(e instanceof fn&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){for(var a=0,i=e.createdAt,s=this.members,o=0;o<s.length;o++){var l=s[o];r===l.userId||l.state!==t.JOINED||e.sender&&e.sender.userId===l.userId||(this.cachedReadReceiptStatus[l.userId]||0)<i&&a++}return a}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,n=Ma.getInstance(this._iid),t=n.currentUser?n.currentUser.userId:null;R.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:t},function(n,r){if(n)X.debug(n);else{var a=r.hasOwnProperty("ts")?r.ts:0;e.updateDeliveryReceipt(t,a)}})}},{key:"getUndeliveredMemberCount",value:function(e){var n=R.get(this._iid),t=j.get(this._iid).Member,r=n.container.currentUserId;if(this.cachedDeliveryReceiptStatus&&e instanceof fn&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){var a,i=e.createdAt,s=0,o=A(this.members);try{for(o.s();!(a=o.n()).done;){var l=a.value;r===l.userId||l.state!==t.JOINED||e.sender&&e.sender.userId===l.userId||this.cachedDeliveryReceiptStatus[l.userId]<i&&s++}}catch(e){o.e(e)}finally{o.f()}return s}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Ma.getInstance(this._iid);if(t.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof fn&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];if(n||i.userId!==t.currentUser.userId&&i.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[i.userId]||0;s>=e.createdAt&&r.push(i)}}return r}return[]}},{key:"getUnreadMembers",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Ma.getInstance(this._iid);if(t.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof fn&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];if(n||i.userId!==t.currentUser.userId&&i.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[i.userId]||0;s<e.createdAt&&r.push(i)}}return r}return[]}},{key:"getReadStatus",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ma.getInstance(this._iid);if(t.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r={},a=Object.keys(this.cachedReadReceiptStatus),i=function(i){var s=a[i];if(!n&&s===t.currentUser.userId)return"continue";var o=e.cachedReadReceiptStatus[s],l=e.members.filter(function(e){return e.userId===s});r[s]={user:l.length>0?l[0]:null,last_seen_at:parseInt(o)}},s=0;s<a.length;s++)i(s);return r}return{}}},{key:"updateReadReceipt",value:function(e,n){var t=this.cachedReadReceiptStatus[e];if(!t||t<n){this.cachedReadReceiptStatus[e]=n;var r=Ma.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=n)}}},{key:"updateDeliveryReceipt",value:function(e,n){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var t=this.cachedDeliveryReceiptStatus[e];(!t||t<n)&&(this.cachedDeliveryReceiptStatus[e]=n)}else this.cachedDeliveryReceiptStatus[e]=n}},{key:"startTyping",value:function(){var e=Ma.getInstance(this._iid),n=(new Date).getTime(),t=e.Options.typingIndicatorThrottle;("number"!=typeof t||t<1e3||t>9e3)&&(t=1e3);var r=tr.get(this);if(n-r.start>=t){r.end=0,r.start=n;var a=j.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(a,null)}}},{key:"endTyping",value:function(){var e=Ma.getInstance(this._iid),n=(new Date).getTime(),t=e.Options.typingIndicatorThrottle;("number"!=typeof t||t<1e3||t>9e3)&&(t=1e3);var r=tr.get(this);if(n-r.end>=t){r.start=0,r.end=n;var a=j.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(a,null)}}},{key:"invalidateTypingStatus",value:function(){var e=nr.get(this),n=(new Date).getTime(),t=!1;return Object.keys(e).forEach(function(r){var a=e[r].ts;n-a>=1e4&&(delete e[r],t=!0)}),t}},{key:"getTypingMembers",value:function(){var e=this,n=nr.get(this),t=[];return Object.keys(n).forEach(function(n){var r=e.memberMap[n];r&&t.push(r)}),t}},{key:"getTypingUsers",value:function(){var e=nr.get(this),n=[];return Object.keys(e).forEach(function(t){var r=e[t].user;n.push(r)}),n}},{key:"updateTypingStatus",value:function(e,n){var t=nr.get(this);n?t[e.userId]={user:e,ts:(new Date).getTime()}:delete t[e.userId]}},{key:"isTyping",value:function(){var e=nr.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,n){var t=this,r=j.get(this._iid),a=r.ScheduledUserMessage,i=r.ScheduledUserMessageParams,s=null,o=ye.parse(arguments,[new ye({type:i,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],n=l[2],le(this._iid,function(n){s?n(s,null):R.get(t._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:t.url,isOpenChannel:!1},function(e,r){var i=null;if(!e){i=new a(r);var s=Ma.getInstance(t._iid).currentUser;s&&i._sender&&s.userId===i._sender.userId&&(s.nickname=i._sender.nickname,s.plainProfileUrl=i._sender.plainProfileUrl,s.metaData=i._sender.metaData)}n(e,i)})},n)}},{key:"getPushPreference",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getMyPushTriggerOption({channelUrl:n.url},function(t,r){var a=null;if(!t){try{a=r.enable}catch(e){a=!1}n.isPushEnabled=a}e&&e(t,a)})},e)}},{key:"setPushPreference",value:function(e,n){var t=this;return le(this._iid,function(n){var r=j.get(t._iid).GroupChannel;R.get(t._iid).container.apiClient.setMyPushTriggerOption({channelUrl:t.url,enable:e},function(e,a){e||(t.isPushEnabled=a.enable,t.isPushEnabled||(t.myPushTriggerOption=r.PushTriggerOption.OFF)),n(e,a)})},n)}},{key:"getMyPushTriggerOption",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getMyPushTriggerOption({channelUrl:n.url},function(r,a){var i=null;if(!r){try{i=a.push_trigger_option||t.PushTriggerOption.DEFAULT}catch(e){X.debug(e)}n.myPushTriggerOption=i}e(r,i)})},e)}},{key:"setMyPushTriggerOption",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannel,i=null,s=ye.parse(arguments,[new ye({type:a.PushTriggerOption}),new ye({type:"callback"})]),o=N(s,3);return i=o[0],e=o[1],n=o[2],le(this._iid,function(n){i?n(i,null):R.get(t._iid).container.apiClient.setMyPushTriggerOption({channelUrl:t.url,pushTriggerOption:e},function(e,r){var a=null;if(!e){try{a=r.push_trigger_option}catch(e){X.debug(e)}t.myPushTriggerOption=a}n(e,a)})},n)}},{key:"setMyCountPreference",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannel,i=null,s=ye.parse(arguments,[new ye({type:a.CountPreference}),new ye({type:"callback"})]),o=N(s,3);return i=o[0],e=o[1],n=o[2],le(this._iid,function(n){i?n(i,null):R.get(t._iid).container.apiClient.setMyCountPreference({channelUrl:t.url,countPreference:e},function(e,r){var i=null;e||(i=t.myCountPreference=r.count_preference,t._setGroupChannelUnreadCount(t.unreadMessageCount,t.unreadMentionCount),a.cachedChannels[t.url]=t),n(e,i)})},n)}},{key:"resetMyHistory",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.resetMyHistory({channelUrl:n.url},function(t,r){if(!t&&r.hasOwnProperty("ts_message_offset")){var a=j.get(n._iid).GroupChannel;n._messageOffsetTimestamp=r.ts_message_offset,a.cachedChannels[n.url]=n}e(t,r)})},e)}}],[{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend",LEFT:"left"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper",BROADCAST_ONLY:"broadcast_only"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{ALL:"all",UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return Zt[this._iid]||(Zt[this._iid]={}),Zt[this._iid]}},{key:"createGroupChannelCollection",value:function(){return new Xt({iid:this._iid})}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid),t=n.User,r=n.Member,a=n.GroupChannel,i=n.BaseMessage,s=n.UserMessage,o=n.FileMessage,l=n.AdminMessage,u=cn.deserialize(e),c=function(e){return null!=e&&"object"===h(e)?e.messageType===i.MESSAGE_TYPE_USER?new s(s.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===i.MESSAGE_TYPE_FILE?new o(o.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(u.lastMessage);return new a({channel_url:u.url,name:u.name,cover_url:u.coverUrl,data:u.data,custom_type:u.customType,invited_at:u.invitedAt,created_at:u.createdAt/1e3,joined_ts:u.joinedAt,is_access_code_required:u.isAccessCodeRequired,is_distinct:u.isDistinct,is_super:u.isSuper,is_broadcast:u.isBroadcast,is_public:u.isPublic,is_discoverable:u.isDiscoverable,is_hidden:u.isHidden,is_ephemeral:u.isEphemeral,is_muted:u.myMutedState,is_push_enabled:u.isPushEnabled,freeze:u.isFrozen,unread_message_count:u.unreadMessageCount,unread_mention_count:u.unreadMentionCount,push_trigger_option:u.myPushTriggerOption,count_preference:u.myCountPreference,hidden_state:u.hiddenState,member_count:u.memberCount,joined_member_count:u.joinedMemberCount,member_state:u.myMemberState,my_role:u.myRole,user_last_read:u.myLastRead,ts_message_offset:u.messageOffsetTimestamp,message_survival_seconds:u.messageSurvivalSeconds,read_receipt:u.cachedReadReceiptStatus,delivery_receipt:u.cachedDeliveryReceiptStatus,members:u.members.map(function(e){return r.objectify(d({},e))}),last_message:c,created_by:null!==u.creator&&void 0!==u.creator&&"object"===h(u.creator)?t.objectify(u.creator):null,inviter:null!==u.inviter&&void 0!==u.inviter&&"object"===h(u.inviter)?t.objectify(u.inviter):null,metadata:u.metadata,cached_primary_key:u.cachedPrimaryKey})}},{key:"upsert",value:function(e){var n=j.get(this._iid).GroupChannel,t=new n(e);if(n.cachedChannels.hasOwnProperty(t.url)){if(t.isEphemeral){var r=n.cachedChannels[t.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}n.cachedChannels[t.url].update(e)}else n.cachedChannels[t.url]=t;return n.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){var n=j.get(this._iid),t=n.GroupChannel,r=n.FileMessageQueue;t.cachedChannels[e]&&delete t.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){Zt[this._iid]={},j.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,n){var t=null,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,4);if(t=i[0],e=i[1],r=i[2],n=i[3],t)return le(this._iid,function(e){e(t,null)},n);var s=j.get(this._iid),o=s.GroupChannel;return o.cachedChannels[e]?le(this._iid,function(n){n(null,o.cachedChannels[e])},n):o.getChannelWithoutCache(e,r,n)}},{key:"getChannelWithoutCache",value:function(e,n){var t=this,r=null,a=null,i=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),s=N(i,4);return r=s[0],e=s[1],a=s[2],n=s[3],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:a,showMember:!0},function(e,r){var a=null;e||(a=t.upsert(r)),n(e,a)})},n)}},{key:"createDistinctChannelIfNotExist",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannelParams,i=null,s=ye.parse(arguments,[new ye({type:a,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),o=N(s,3);return i=o[0],e=o[1],n=o[2],le(this._iid,function(n){i?n(i,null):(e.isPublic||(e.accessCode=null),R.get(t._iid).container.apiClient.createGroupChannel(d(d({},e),{},{isDistinct:!0}),function(e,r){var a=null;if(!e){var i=j.get(t._iid).GroupChannel;a={channel:new i(r),isCreated:r.is_created},i.cachedChannels[a.channel.url]=a.channel}n(e,a)}))},n)}},{key:"createChannel",value:function(){var e=this,n=ye.toArray(arguments),t=void 0;"function"==typeof n[n.length-1]&&(t=n.pop());var r=j.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(n[0]instanceof i&&1===n.length)return le(this._iid,function(t){var r=n[0];r.isPublic||(r.accessCode=null),r._validate()?R.get(e._iid).container.apiClient.createGroupChannel(r,function(e,n){var r=null;e||(r=new a(n),a.cachedChannels[r.url]=r),t(e,r)}):t(ye.error,null)},t);if(Array.isArray(n[0])){var s=new i;switch(n.length){case 1:s.addUsers(n[0]);break;case 2:s.addUsers(n[0]),s.isDistinct=n[1];break;case 3:s.addUsers(n[0]),s.isDistinct=n[1],s.customType=n[2];break;case 5:s.addUsers(n[0]),s.isDistinct=n[1],s.name=n[2],"string"==typeof n[3]?s.coverUrl=n[3]:s.coverImage=n[3],s.data=n[4];break;case 6:s.addUsers(n[0]),s.isDistinct=n[1],s.name=n[2],"string"==typeof n[3]?s.coverUrl=n[3]:s.coverImage=n[3],s.data=n[4],s.customType=n[5];break;default:return le(this._iid,function(e){return e(ye.error,null)},t)}return t?a.createChannel(s,t):a.createChannel(s)}return le(this._iid,function(e){return e(ye.error,null)},t)}},{key:"createChannelWithUserIds",value:function(){var e=ye.toArray(arguments),n=void 0;"function"==typeof e[e.length-1]&&(n=e.pop());var t=j.get(this._iid),r=t.GroupChannel,a=t.GroupChannelParams,i=new a;switch(e.length){case 1:i.addUserIds(e[0]);break;case 2:i.addUserIds(e[0]),i.isDistinct=e[1];break;case 3:i.addUserIds(e[0]),i.isDistinct=e[1],i.customType=e[2];break;case 5:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4];break;case 6:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4],i.customType=e[5];break;default:return le(this._iid,function(e){return e(ye.error,null)},n)}return n?r.createChannel(i,n):r.createChannel(i)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,j.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,j.get(this._iid).PublicGroupChannelListQuery)}},{key:"markAsReadAllLastSentAt",get:function(){return er[this._iid]||0},set:function(e){er[this._iid]=e}},{key:"getChannelCount",value:function(e,n){return Ma.getInstance(this._iid).getGroupChannelCount(e,n)}},{key:"getUnreadItemCount",value:function(e,n){return Ma.getInstance(this._iid).getUnreadItemCount(e,n)}},{key:"getTotalUnreadMessageCount",value:function(){var e=ye.toArray(arguments),n="function"==typeof e[e.length-1]?e.pop():null,t=Ma.getInstance(this._iid);return t.getTotalUnreadMessageCount.apply(t,S(e).concat([n]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Ma.getInstance(this._iid).getTotalUnreadChannelCount(e)}}]),t}(Mn),ir=function(e){function n(n){var t=e.call(this,n)||this;return t.state="",t.role="",t.isMuted=!1,t.isBlockedByMe=!1,t.isBlockingMe=!1,t.restrictionInfo=null,n&&t._update(n),t}return M(n,e),n.objectify=function(e){var n=j.get(this._iid),t=n.User,r=n.RestrictedUser,a=n.RestrictionInfo,i=e.state,s=e.role,o=void 0===s?"":s,l=e.isMuted,u=void 0!==l&&l,c=e.isBlockedByMe,d=void 0!==c&&c,h=e.isBlockingMe,f=void 0!==h&&h,p=e.restrictionInfo,m=void 0===p?null:p,g=u?r.objectify(e):t.objectify(e);if(g.state=i,g.role=o,g.is_muted=u,g.is_blocked_by_me=d,g.is_blocking_me=f,m){var _=a.objectify(m);g.restriction_type=_.restriction_type,g.muted_description=_.description,g.muted_end_at=_.end_at}return g},n.buildFromSerializedData=function(e){var n=j.get(this._iid).Member,t=cn.deserialize(e);return new n(n.objectify(U({},t)))},n.prototype._update=function(e){var n=j.get(this._iid),t=n.RestrictedUser,r=n.RestrictionInfo;this.state=e.state,this.role=e.role||ar.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me),this.isMuted&&(this.restrictionInfo=new r(e),this.restrictionInfo.restrictionType=t.RestrictionType.MUTED)},n.prototype.parse=function(e){this._update(e)},Object.defineProperty(n,"JOINED",{get:function(){return"joined"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"INVITED",{get:function(){return"invited"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"LEFT",{get:function(){return"left"},enumerable:!1,configurable:!0}),n}(pn),sr=function(e){function n(n){var t=e.call(this,n)||this;return t.role="",t.isBlockedByMe=!1,n&&t._update(n),t}return M(n,e),n.objectify=function(e){var n=j.get(this._iid).User,t=e.role,r=void 0===t?"":t,a=e.isBlockedByMe,i=void 0!==a&&a,s=n.objectify(e);return s.role=r,s.is_blocked_by_me=i,s},n.buildFromSerializedData=function(e){var n=j.get(this._iid).Sender,t=cn.deserialize(e);return new n(n.objectify(U({},t)))},n.prototype.parse=function(e){this._update(e)},n.prototype._update=function(e){this.role=e.role||ar.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)},n}(pn),or=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).restrictionInfo=null,e&&r._update(e),r}return m(t,[{key:"_update",value:function(e){var n=j.get(this._iid).RestrictionInfo;this.restrictionInfo=new n(e)}}],[{key:"RestrictionType",get:function(){return{MUTED:"muted",BANNED:"banned"}}},{key:"objectify",value:function(e){var n=j.get(this._iid),t=n.User,r=n.RestrictionInfo,a=e.restrictionInfo,i=void 0===a?{}:a;return d(d({},t.objectify(e)),r.objectify(i))}}]),t}(pn),lr=function(){function e(e){this.emojiHash=null,this.emojiCategories=null,e&&this._update(e)}return e.prototype._update=function(e){var n=j.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(e){return new n(e)}):[]},e}(),ur=function(){function e(e){this.id=null,this.name=null,this.url=null,this.emojis=null,e&&this._update(e)}return e.prototype._update=function(e){var n=j.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map(function(e){return new n(e)}):[]},e}(),cr=function(){function e(e){this.key=null,this.url=null,e&&this._update(e)}return e.prototype._update=function(e){this.key=e.key,this.url=e.url},e}(),dr={},hr={},fr=new WeakMap,pr=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).channelType=Mn.CHANNEL_TYPE_OPEN,r.participantCount=0,fr.set(E(r),0),r.operators=[],e&&r._update(e),r}return m(t,[{key:"_update",value:function(e){var n=j.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map(function(e){return new n(e)}))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,j.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,j.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,j.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map(function(e){return e.userId}).indexOf(e)>-1}},{key:"refresh",value:function(e){return j.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid).Command.bEnter({channelUrl:n.url}),r=Ma.getInstance(n._iid);r.sendCommand(t,function(t,a){if(r.getErrorFirstCallback()){var i=[t,a];a=i[0],t=i[1]}a?(a=a?new F(a.message,a.code):null,e(a,null)):(j.get(n._iid).OpenChannel.enteredChannels[n.url]=n,ge.of(n._iid).send({source:de.EVENT_CHANNEL_ENTER,payload:{channel:n}}),n.refresh(function(){return e(null,null)}))})},e)}},{key:"exit",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid),r=t.Command,a=t.FileMessageQueue,i=r.bExit({channelUrl:n.url}),s=Ma.getInstance(n._iid);s.sendCommand(i,function(t,r){if(s.getErrorFirstCallback()){var i=[t,r];r=i[0],t=i[1]}r?(r=r?new F(r.message,r.code):null,e(r,null)):(delete j.get(n._iid).OpenChannel.enteredChannels[n.url],a.delete(n.url),ge.of(n._iid).send({source:de.EVENT_CHANNEL_EXIT,payload:{channel:n}}),e(null,null))})},e)}},{key:"updateChannel",value:function(){var e=this,n=ye.toArray(arguments),t=null;"function"==typeof n[n.length-1]&&(t=n.pop());var r=j.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(n[0]instanceof i&&1===n.length)return le(this._iid,function(t){var r=n[0];r.channelUrl=e.url,r._validate()?R.get(e._iid).container.apiClient.updateOpenChannel(r,function(e,n){var r=null;e||(r=a.upsert(n)),t(e,r)}):t(ye.error,null)},t);if(3===n.length){var s=new i;return s.channelUrl=this.url,s.name=n[0],s.coverUrlOrImage=n[1],s.data=n[2],s.operatorUserIds=this.operators.map(function(e){return e.userId}),t?this.updateChannel(s,t):this.updateChannel(s)}if(4===n.length){var o=new i;return o.channelUrl=this.url,o.name=n[0],o.coverUrlOrImage=n[1],o.data=n[2],Array.isArray(n[3])&&(o.operatorUserIds=n[3]),t?this.updateChannel(o,t):this.updateChannel(o)}if(5===n.length){var l=new i;return l.channelUrl=this.url,l.name=n[0],l.coverUrlOrImage=n[1],l.data=n[2],Array.isArray(n[3])&&(l.operatorUserIds=n[3]),l.customType=n[4],t?this.updateChannel(l,t):this.updateChannel(l)}return le(this._iid,function(e){return e(ye.error,null)},t)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=ye.toArray(arguments),n=void 0;switch("function"==typeof e[e.length-1]&&(n=e.pop()),e.length){case 4:case 5:return n?this.updateChannel(params,n):this.updateChannel(params);default:return le(this._iid,function(e){return e(ye.error,null)},n)}}},{key:"muteUser",value:function(e,n,t,r){return this.muteUserWithUserId(e?e.userId:null,n,t,r)}},{key:"muteUserWithUserId",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string",optional:!0,defaultValue:""}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:t,seconds:n,isGroupChannel:!1},function(e,n){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,n){return this.unmuteUserWithUserId(e?e.userId:null,n)}},{key:"unmuteUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.unmuteUser({channelUrl:t.url,userId:e,isGroupChannel:!1},function(e,t){n(e,null)})},n)}},{key:"banUser",value:function(e,n,t){return this.banUserWithUserId(e?e.userId:null,n,t)}},{key:"banUserWithUserId",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){a?t(a,null):R.get(r._iid).container.apiClient.banUser({channelUrl:r.url,userId:e,description:null,seconds:n,isGroupChannel:!1},function(e,n){t(e,null)})},t)}},{key:"unbanUser",value:function(e,n){return this.unbanUserWithUserId(e?e.userId:null,n)}},{key:"unbanUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.unbanUser({channelUrl:t.url,userId:e,isGroupChannel:!1},function(e,t){n(e,null)})},n)}},{key:"setLatestParticipantCount",value:function(e,n){var t=!1;return"number"==typeof e&&"number"==typeof n&&n>=fr.get(this)&&(fr.set(this,n),t=e!==this.participantCount,this.participantCount=e),t}},{key:"delete",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.deleteOpenChannel({channelUrl:n.url},function(t,r){t||(delete j.get(n._iid).OpenChannel.cachedChannels[n.url],j.get(n._iid).FileMessageQueue.delete(n.url)),e(t,r)})},e)}}],[{key:"cachedChannels",get:function(){return dr[this._iid]||(dr[this._iid]={}),dr[this._iid]}},{key:"enteredChannels",get:function(){return hr[this._iid]||(hr[this._iid]={}),hr[this._iid]}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid),t=n.User,r=n.OpenChannel,a=cn.deserialize(e);return new r({channel_url:a.url,name:a.name,cover_url:a.coverUrl,data:a.data,custom_type:a.customType,created_at:a.createdAt/1e3,freeze:a.isFrozen,is_ephemeral:a.isEphemeral,participant_count:a.participantCount,operators:a.operators.map(function(e){return t.objectify(e)})})}},{key:"getChannel",value:function(e,n){var t=null,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,4);if(t=i[0],e=i[1],r=i[2],n=i[3],t)return le(this._iid,function(e){e(t,null)},n);var s=j.get(this._iid),o=s.OpenChannel;return o.cachedChannels[e]?le(this._iid,function(n){n(null,o.cachedChannels[e])},n):o.getChannelWithoutCache(e,r,n)}},{key:"getChannelWithoutCache",value:function(e,n){var t=this,r=null,a=null,i=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),s=N(i,4);return r=s[0],e=s[1],a=s[2],n=s[3],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:a},function(e,r){var a=null;e||(a=j.get(t._iid).OpenChannel.upsert(r)),n(e,a)})},n)}},{key:"createChannel",value:function(){var e=this,n=ye.toArray(arguments),t=null;"function"==typeof n[n.length-1]&&(t=n.pop());var r=j.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(n[0]instanceof i&&1===n.length)return le(this._iid,function(t){var r=n[0];r._validate()?R.get(e._iid).container.apiClient.createOpenChannel(r,function(n,r){var a=null;n||(a=j.get(e._iid).OpenChannel.upsert(r)),t(n,a)}):t(ye.error,null)},t);var s=new i;switch(n.length){case 0:break;case 1:s.name=n[0];break;case 2:s.name=n[0],s.coverUrlOrImage=n[1];break;case 3:s.name=n[0],s.coverUrlOrImage=n[1],s.data=n[2];break;case 4:s.name=n[0],s.coverUrlOrImage=n[1],s.data=n[2],s.operatorUserIds=n[3];break;case 5:s.name=n[0],s.coverUrlOrImage=n[1],s.data=n[2],s.operatorUserIds=n[3],s.customType=n[4];break;default:return le(this._iid,function(e){return e(ye.error,null)},t)}return t?a.createChannel(s,t):a.createChannel(s)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=ye.toArray(arguments),n=void 0;switch("function"==typeof e[e.length-1]&&(n=e.pop()),e.length){case 4:case 5:return n?this.createChannel.apply(this,S(e).concat([n])):this.createChannel.apply(this,S(e));default:return le(this._iid,function(e){return e(ye.error,null)},n)}}},{key:"upsert",value:function(e){var n=new(0,j.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(n.url)?this.cachedChannels[n.url].update(e):this.cachedChannels[n.url]=n,this.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],j.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){dr[this._iid]={},j.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){hr[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,j.get(this._iid).OpenChannelListQuery)}}]),t}(Mn),mr="default",gr=function(){function e(e){this.name=mr,this.volume=1,e&&this._update(e)}return e.prototype._update=function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)},e.objectify=function(e){var n=e.name,t=void 0===n?mr:n,r=e.volume;return{name:t,volume:void 0===r?1:r}},e.prototype.serialize=function(){return cn.serialize(this)},e}(),_r=function(){function e(e,n){void 0===n&&(n=[]),this.key=e,this.value=Array.isArray(n)&&n.every(function(e){return"string"==typeof e})?n:[]}return e.prototype.encode=function(){return{key:this.key,value:this.value||[]}},e}(),yr=new WeakMap,vr=function(){function e(n){f(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],yr.set(this,null),this._parentMessageId=null,this._reqId=null,this.data=null,this.customType=null,this.pushNotificationDeliveryOption=null,this.appleCriticalAlertOptions=null,this.isReplyToChannel=!1,this.mentionedMessageTemplate=null,n&&this._update(n)}return m(e,[{key:"mentionType",get:function(){return this._mentionType},set:function(e){var n=j.get(this._iid).BaseMessageParams;Object.keys(n.MentionType).map(function(e){return n.MentionType[e]}).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e)){if(0===e.length)return this._cachedMentionedUserIds=[],void(this._mentionedUserIds=[]);for(var n=Ma.getInstance(this._iid),t=0;t<e.length;t++){var r=e[t];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&n.currentUser&&n.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e)){if(0===e.length)return this._cachedMentionedUserIds=[],void(this._mentionedUserIds=[]);for(var n=Ma.getInstance(this._iid),t=0;t<e.length;t++){var r=e[t];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&n.currentUser&&n.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map(function(e){return e.key})},set:function(e){var n=j.get(this._iid).MessageMetaArray,t={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||t[e[r]]||(t[e[r]]=!0,this._metaArrays.push(new n(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var n=j.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var t=0;t<e.length;t++){var r=e[t];if(r instanceof n){var a,i=this._metaArrays.map(function(e){return e.key}).indexOf(r.key);i<0?this._metaArrays.push(r):(a=this._metaArrays[i].value).push.apply(a,S(r.value))}}}}},{key:"rootMessageId",get:function(){return yr.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){yr.set(this,e),this._parentMessageId=e}},{key:"_serialize",value:function(e){return cn.serialize(this,function(n){n.hasOwnProperty("_mentionType")&&(n.mentionType=n._mentionType,delete n._mentionType),n.hasOwnProperty("_mentionedUserIds")&&(n.mentionedUserIds=n._mentionedUserIds,delete n._mentionedUserIds),n.hasOwnProperty("_cachedMentionedUsers")&&(n.cachedMentionedUsers=n._cachedMentionedUsers,delete n._cachedMentionedUsers),n.hasOwnProperty("_cachedMentionedUserIds")&&(n.cachedMentionedUserIds=n._cachedMentionedUserIds,delete n._cachedMentionedUserIds),n.hasOwnProperty("_metaArrays")&&(n.metaArrays=n._metaArrays,delete n._metaArrays),n.hasOwnProperty("_parentMessageId")&&(n.parentMessageId=n._parentMessageId,delete n._parentMessageId),e&&e(n)})}},{key:"_update",value:function(e){e.hasOwnProperty("mention_type")&&(this._mentionType=e.mention_type),e.hasOwnProperty("mentioned_user_ids")&&(this._mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&(this.mentionedMessageTemplate=e.mentioned_message_template),e.hasOwnProperty("cached_mentioned_users")&&(this._cachedMentionedUsers=e.cached_mentioned_users),e.hasOwnProperty("cached_mentioned_user_ids")&&(this._cachedMentionedUserIds=e.cached_mentioned_user_ids),e.hasOwnProperty("meta_arrays")&&(this._metaArrays=e.meta_arrays.map(function(e){return new _r(e.key,e.value)})),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=e.parent_message_id),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("custom_type")&&(this.customType=e.custom_type),e.hasOwnProperty("push_notification_delivery_option")&&(this.pushNotificationDeliveryOption=e.push_notification_delivery_option),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new gr(e.apple_critical_alert_options)),e.hasOwnProperty("is_reply_to_channel")&&(this.isReplyToChannel=e.is_reply_to_channel)}},{key:"_validate",value:function(){var e=j.get(this._iid),n=e.BaseMessageParams,t=e.MessageMetaArray,r=yr.get(this);return Object.keys(n.MentionType).map(function(e){return n.MentionType[e]}).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every(function(e){return"string"==typeof e})&&("string"==typeof this.mentionedMessageTemplate||null===this.mentionedMessageTemplate)&&Array.isArray(this._metaArrays)&&this._metaArrays.every(function(e){return e instanceof t})&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this.pushNotificationDeliveryOption||Object.keys(n.PushNotificationDeliveryOption).map(function(e){return n.PushNotificationDeliveryOption[e]}).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof gr)&&"boolean"==typeof this.isReplyToChannel}}],[{key:"_objectify",value:function(n){var t=n.mentionType,r=void 0===t?e.MentionType.USERS:t,a=n.mentionedUserIds,i=void 0===a?[]:a,s=n.mentionedMessageTemplate,o=void 0===s?null:s,l=n.cachedMentionedUsers,u=void 0===l?[]:l,c=n.cachedMentionedUserIds,d=void 0===c?[]:c,h=n.metaArrays,f=void 0===h?[]:h,p=n.parentMessageId,m=void 0===p?null:p,g=n.pushNotificationDeliveryOption,_=void 0===g?null:g,y=n.appleCriticalAlertOptions,v=void 0===y?null:y,E=n.isReplyToChannel;return{mention_type:r,mentioned_user_ids:i,mentioned_message_template:o,cached_mentioned_users:u,cached_mentioned_user_ids:d,meta_arrays:f,parent_message_id:m,push_notification_delivery_option:_,apple_critical_alert_options:v,is_reply_to_channel:void 0!==E&&E}}},{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),Er=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).message=null,r._translationTargetLanguages=[],e&&r._update(e),r}return m(t,[{key:"serialize",value:function(){return C(y(t.prototype),"_serialize",this).call(this,function(e){e.hasOwnProperty("_translationTargetLanguages")&&(e.translationTargetLanguages=e._translationTargetLanguages,delete e._translationTargetLanguages)})}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("string"!=typeof e[n])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}},{key:"_update",value:function(e){C(y(t.prototype),"_update",this).call(this,e),e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("translation_target_languages")&&(this._translationTargetLanguages=e.translation_target_languages)}},{key:"_validate",value:function(){return C(y(t.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every(function(e){return"string"==typeof e})}}],[{key:"objectify",value:function(e){var n=e.message,t=void 0===n?null:n,r=e.data,a=void 0===r?null:r,i=e.customType,s=void 0===i?null:i,o=e.translationTargetLanguages,l=void 0===o?[]:o;return d(d({},vr._objectify(e)),{},{message:t,data:a,custom_type:s,translation_target_languages:l})}}]),t}(vr),br=function(){function e(e,n,t){void 0===n&&(n=[]),void 0===t&&(t=0),this.key=e,this.userIds=n,this.updatedAt=t;for(var r={},a=0,i=this.userIds;a<i.length;a++)r[i[a]]=this.updatedAt;this._version=r}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.createFromJson=function(e){var n=e.key,t=e.user_ids,r=e.updated_at;return"string"==typeof n&&n&&Array.isArray(t)&&t.length>0&&"number"==typeof r?new this(n,t,r):null},e.objectify=function(e){return{key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}},e.prototype._applyEvent=function(e){if(e.key===this.key&&(!this._version[e.userId]||this._version[e.userId]<e.updatedAt)){var n=this.userIds.indexOf(e.userId);switch(e.operation){case"add":n<0&&this.userIds.push(e.userId);break;case"delete":n>=0&&this.userIds.splice(n,1)}this._version[e.userId]=e.updatedAt}},e}(),Cr=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).messageType=fn.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],r._messageParams=null,e&&r._update(e),r}return m(t,[{key:"_update",value:function(e){var n=Ma.getInstance(this._iid),t=j.get(this._iid),r=t.Sender,a=t.Plugin;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?n.MessageRequestState.SUCCEEDED:n.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===n.MessageSendingStatus.CANCELED&&(this.requestState=n.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map(function(e){return new a(e)})),e.hasOwnProperty("message_params")&&(this._messageParams=new Er(e.message_params))}},{key:"sender",get:function(){var e=Ma.getInstance(this._iid),n=j.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var t=n.cachedChannels[this.channelUrl];if(t){var r=t.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Ma.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&se.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(y(t.prototype),"serialize",this).call(this,function(n){e._messageParams&&(n.messageParams=e._messageParams.serialize())})}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){return j.get(this._iid).UserMessage.buildFromSerializedData(this.serialize())}},{key:"_isSentByMe",value:function(){var e=Ma.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var n=Ma.getInstance(this._iid),t=j.get(this._iid),r=t.BaseChannel,a=t.BaseMessageParams,i=t.Sender,s=t.User,o=t.UserMessage,l=t.FileMessage,u=t.AdminMessage,c=t.ThreadInfo,h=t.OGMetaData,f=t.Plugin,p=t.Reaction,m=t.AppleCriticalAlertOptions,g=t.UserMessageParams,_=e.messageId,y=e.messageType,v=void 0===y?fn.MESSAGE_TYPE_BASE:y,E=e.reqId,b=void 0===E?"":E,C=e.user,N=e.channel,S=void 0===N?null:N,O=e.channelUrl,T=void 0===O?"":O,A=e.channelType,w=void 0===A?r.CHANNEL_TYPE_OPEN:A,I=e.message,R=e.data,k=void 0===R?"":R,M=e.customType,U=void 0===M?"":M,L=e.mentionType,P=void 0===L?a.MentionType.USERS:L,D=e.mentionedUsers,x=void 0===D?[]:D,F=e.mentionedUserIds,H=void 0===F?[]:F,G=e.mentionedMessageTemplate,B=void 0===G?null:G,z=e.requestedMentionUserIds,V=void 0===z?[]:z,q=e.reactions,K=void 0===q?[]:q,Y=e.metaArrays,Q=void 0===Y?[]:Y,W=e.rootMessageId,J=void 0===W?0:W,X=e.parentMessageId,$=void 0===X?0:X,Z=e.parentMessageText,ee=void 0===Z?"":Z,ne=e.threadInfo,te=void 0===ne?null:ne,re=e.isReplyToChannel,ae=void 0!==re&&re,ie=e.parentMessage,se=void 0===ie?null:ie,oe=e.translations,le=void 0===oe?{}:oe,ue=e.sendingStatus,ce=e.errorCode,de=void 0===ce?0:ce,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,me=void 0!==pe&&pe,ge=e.messageSurvivalSeconds,_e=void 0===ge?-1:ge,ye=e.ogMetaData,ve=void 0===ye?null:ye,Ee=e.isOperatorMessage,be=void 0!==Ee&&Ee,Ce=e.plugins,Ne=void 0===Ce?[]:Ce,Se=e.appleCriticalAlertOptions,Oe=e.createdAt,Te=e.updatedAt,Ae=void 0===Te?0:Te,we=e.messageParams,Ie=void 0===we?null:we,Re=e.isAutoResendRegistered,ke=void 0!==Re&&Re,Me={};switch(Me.req_id=b,Me.msg_id=_,v){case fn.MESSAGE_TYPE_USER:Me.type="MESG";break;case fn.MESSAGE_TYPE_FILE:Me.type="FILE";break;case fn.MESSAGE_TYPE_ADMIN:Me.type="ADMM"}if(Me.user=i.objectify(d({},C)),Me.channel_url=S?S.url:T,Me.channel_type=S?S.channelType:w,Me.message=I,Me.data=k,Me.custom_type=U,Me.translations=le,Me.is_global_block=!!me,Me.ts=Oe,Me.updated_at=Ae,Me.mention_type=P,Me.mentioned_users=x.map(function(e){return s.objectify(e)}),Me.mentioned_user_ids=H,Me.mentioned_message_template=B,Me.requested_mention_user_ids=V,Me.reactions=K.map(function(e){return p.objectify(e)}),Me.metaarray={},Q.forEach(function(e){var n=e.key;Me.metaarray[n]=e.value}),Me.metaarray_key_order=Q.map(function(e){return e.key}),Me.root_message_id=J,Me.parent_message_id=$,Me.parent_message_text=ee,te&&(Me.thread_info=c.objectify(te)),Me.is_reply_to_channel=ae,se)switch(se.messageType){case fn.MESSAGE_TYPE_USER:Me.parent_message_info=o._objectifySerializedData(se);break;case fn.MESSAGE_TYPE_FILE:Me.parent_message_info=l._objectifySerializedData(se);break;case fn.MESSAGE_TYPE_ADMIN:Me.parent_message_info=u._objectifySerializedData(se)}return Me.sending_status=_>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,ue&&(Me.sending_status=ue),Me.silent=!!fe,Me.error_code=de,Me.message_survival_seconds=_e,ve&&(Me.og_tag=h.objectify(ve)),Me.is_op_msg=!!be,Me.plugins=Ne.map(function(e){return f.objectify(e)}),Se&&(Me.apple_critical_alert_options=m.objectify(Se)),Ie&&(Me.message_params=g.objectify(Ie)),Me.is_auto_resend_registered=ke,Me}},{key:"build",value:function(e,n,t,r,a,i,s,o,l,u,c,d,h,f,p,m,g,_,y,v,E,b,C,N,S,O,T,A,w,I){return this.objectify({messageId:n,reqId:e,user:t,channel:r,message:a,data:i,customType:s,mentionType:f,mentionedUsers:p,mentionedUserIds:v,mentionedMessageTemplate:E,requestedMentionUserIds:C,reactions:h,metaArrays:d,rootMessageId:m,parentMessageId:g,parentMessageText:_,threadInfo:y,translations:o,sendingStatus:b,errorCode:N,isGlobalBlocked:l,messageSurvivalSeconds:S,ogMetaData:O,isOperatorMessage:T,plugins:A,appleCriticalAlertOptions:w,createdAt:u,updatedAt:c,messageParams:I})}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid).UserMessage,t=cn.deserialize(e);return new n(this._objectifySerializedData(t))}},{key:"_objectifySerializedData",value:function(e){return j.get(this._iid).UserMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Er(Er.objectify(e.messageParams)):null}))}}]),t}(fn),Nr=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).fileName=null,r.mimeType=null,r.fileSize=null,r._isUpdate=!1,r._file=null,r._fileType=null,r._fileUrl=null,r._thumbnailSizes=[],e&&r._update(e),r}return m(t,[{key:"serialize",value:function(){return C(y(t.prototype),"_serialize",this).call(this,function(e){e.hasOwnProperty("_isUpdate")&&(e.isUpdate=e._isUpdate,delete e._isUpdate),e.hasOwnProperty("_file")&&(e.file=e._file,delete e._file),e.hasOwnProperty("_fileType")&&(e.fileType=e._fileType,delete e._fileType),e.hasOwnProperty("_fileUrl")&&(e.fileUrl=e._fileUrl,delete e._fileUrl),e.hasOwnProperty("_thumbnailSizes")&&(e.thumbnailSizes=e._thumbnailSizes,delete e._thumbnailSizes)})}},{key:"file",get:function(){return this._file},set:function(e){se.isFile(e)&&(this._fileUrl=null,this._file=e,te.isFile(e)?this._fileType=x.FILE:te.isBlob(e)?this._fileType=x.BLOB:te.isFileLikeObject(e)?this._fileType=x.BLOB_LIKE_OBJECT:"string"==typeof e&&(this._fileType=x.URL))}},{key:"fileType",get:function(){return this._fileType}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"!==h(e[n])||"number"!=typeof e[n].maxWidth||"number"!=typeof e[n].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}},{key:"_update",value:function(e){C(y(t.prototype),"_update",this).call(this,e),e.hasOwnProperty("file_name")&&(this.fileName=e.file_name),e.hasOwnProperty("mime_type")&&(this.mimeType=e.mime_type),e.hasOwnProperty("file_size")&&(this.fileSize=e.file_size),e.hasOwnProperty("is_update")&&(this._isUpdate=e.is_update),e.hasOwnProperty("file")&&(this._file=e.file),e.hasOwnProperty("file_type")&&(this._fileType=e.file_type),e.hasOwnProperty("file_url")&&(this._fileUrl=e.file_url),e.hasOwnProperty("thumbnail_sizes")&&(this._thumbnailSizes=e.thumbnail_sizes)}},{key:"_validate",value:function(){return C(y(t.prototype),"_validate",this).call(this)&&(this._isUpdate||se.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&(null===this._thumbnailSizes||this._thumbnailSizes.every(function(e){return"object"===h(e)&&e.maxWidth>0&&e.maxHeight>0}))}}],[{key:"objectify",value:function(e){var n=e.fileName,t=void 0===n?null:n,r=e.mimeType,a=void 0===r?null:r,i=e.fileSize,s=void 0===i?null:i,o=e.data,l=void 0===o?null:o,u=e.customType,c=void 0===u?null:u,h=e.isUpdate,f=void 0!==h&&h,p=e.file,m=void 0===p?null:p,g=e.fileType,_=void 0===g?null:g,y=e.fileUrl,v=void 0===y?null:y,E=e.thumbnailSizes,b=void 0===E?[]:E;return d(d({},vr._objectify(e)),{},{file_name:t,mime_type:a,file_size:s,data:l,custom_type:c,is_update:f,file:m,file_type:_,file_url:v,thumbnail_sizes:b})}}]),t}(vr),Sr=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).messageType=fn.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r._messageParams=null,e&&r._update(e),r}return m(t,[{key:"_update",value:function(e){var n=Ma.getInstance(this._iid),t=R.get(this._iid).container.auth,r=j.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,e.hasOwnProperty("url")&&(this.plainUrl=e.url.split("?auth=")[0]),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=e.type,e.hasOwnProperty("custom")&&(this.data=e.custom),e.hasOwnProperty("file")){var a=e.file;a.hasOwnProperty("url")&&(this.plainUrl=a.url),a.hasOwnProperty("name")&&(this.name=a.name),a.hasOwnProperty("size")&&(this.size=a.size),a.hasOwnProperty("type")&&(this.type=a.type),a.hasOwnProperty("custom")&&(this.data=a.custom)}if(Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(t.eKey):this.plainUrl,configurable:!0,writable:!1}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i=0;i<this.thumbnails.length;i++)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(t.eKey):this.thumbnails[i].plainUrl;this.requestState=this.messageId>0?n.MessageRequestState.SUCCEEDED:n.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===n.MessageSendingStatus.CANCELED&&(this.requestState=n.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),e.hasOwnProperty("message_params")&&(this._messageParams=new Nr(e.message_params))}},{key:"sender",get:function(){var e=Ma.getInstance(this._iid),n=j.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var t=n.cachedChannels[this.channelUrl];if(t){var r=t.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Ma.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&se.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(y(t.prototype),"serialize",this).call(this,function(n){e._messageParams&&(n.messageParams=e._messageParams.serialize())})}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){var e=j.get(this._iid).FileMessage.buildFromSerializedData(this.serialize());if(this._messageParams&&e._messageParams){var n=this._messageParams.file;n&&te.isBlob(n)&&(e._messageParams.file=n.slice())}return e}},{key:"_isSentByMe",value:function(){var e=Ma.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var n=Ma.getInstance(this._iid),t=j.get(this._iid),r=t.BaseChannel,a=t.BaseMessageParams,i=t.Sender,s=t.User,o=t.UserMessage,l=t.FileMessage,u=t.AdminMessage,c=t.ThreadInfo,h=t.OGMetaData,f=t.Reaction,p=t.FileMessageParams,m=t.AppleCriticalAlertOptions,g=e.messageId,_=e.messageType,y=void 0===_?fn.MESSAGE_TYPE_BASE:_,v=e.reqId,E=void 0===v?"":v,b=e.user,C=void 0===b?{}:b,N=e.channel,S=e.plainUrl,O=e.name,T=void 0===O?null:O,A=e.type,w=e.size,I=void 0===w?0:w,R=e.data,k=void 0===R?"":R,M=e.customType,U=void 0===M?"":M,L=e.mentionType,P=void 0===L?a.MentionType.USERS:L,D=e.mentionedUsers,x=void 0===D?[]:D,F=e.mentionedUserIds,H=void 0===F?[]:F,G=e.requestedMentionUserIds,B=void 0===G?[]:G,z=e.reactions,V=void 0===z?[]:z,q=e.metaArrays,K=void 0===q?[]:q,Y=e.rootMessageId,Q=void 0===Y?0:Y,W=e.parentMessageId,J=void 0===W?0:W,X=e.parentMessageText,$=void 0===X?"":X,Z=e.threadInfo,ee=void 0===Z?null:Z,ne=e.isReplyToChannel,te=void 0!==ne&&ne,re=e.parentMessage,ae=void 0===re?null:re,ie=e.thumbnails,se=void 0===ie?[]:ie,oe=e.requireAuth,le=void 0!==oe&&oe,ue=e.sendingStatus,ce=e.errorCode,de=void 0===ce?0:ce,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,me=void 0!==pe&&pe,ge=e.messageSurvivalSeconds,_e=void 0===ge?-1:ge,ye=e.ogMetaData,ve=void 0===ye?null:ye,Ee=e.isOperatorMessage,be=void 0!==Ee&&Ee,Ce=e.appleCriticalAlertOptions,Ne=e.createdAt,Se=e.updatedAt,Oe=void 0===Se?0:Se,Te=e.messageParams,Ae=void 0===Te?null:Te,we=e.isAutoResendRegistered,Ie=void 0!==we&&we,Re={};switch(Re.req_id=E,Re.msg_id=g,y){case fn.MESSAGE_TYPE_USER:Re.type="MESG";break;case fn.MESSAGE_TYPE_FILE:Re.type="FILE";break;case fn.MESSAGE_TYPE_ADMIN:Re.type="ADMM"}Re.user=i.objectify(d({},C)),Re.channel_url=N.url,Re.channel_type=N.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,Re.url=S,Re.name=T,Re.type=A,Re.size=I,Re.custom=k,Re.custom_type=U,Re.thumbnails=se,Re.require_auth=le,Re.is_global_block=!!me,Re.ts=Ne,Re.updated_at=Oe,Re.mention_type=P,Re.mentioned_users=x.map(function(e){return s.objectify(e)}),Re.mentioned_user_ids=H,Re.requested_mention_user_ids=B,Re.reactions=V.map(function(e){return f.objectify(e)}),Re.metaarray={};for(var ke=0;ke<K.length;ke++){var Me=K[ke].key;Re.metaarray[Me]=K[ke].value}if(Re.metaarray_key_order=K.map(function(e){return e.key}),Re.root_message_id=Q,Re.parent_message_id=J,Re.parent_message_text=$,ee&&(Re.thread_info=c.objectify(ee)),Re.is_reply_to_channel=te,ae)switch(ae.messageType){case r.MESSAGE_TYPE_USER:Re.parent_message_info=o._objectifySerializedData(ae);break;case r.MESSAGE_TYPE_FILE:Re.parent_message_info=l._objectifySerializedData(ae);break;case r.MESSAGE_TYPE_ADMIN:Re.parent_message_info=u._objectifySerializedData(ae)}return Re.sending_status=g>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,ue&&(Re.sending_status=ue),Re.silent=!!fe,Re.error_code=de,Re.message_survival_seconds=_e,ve&&(Re.og_tag=h.objectify(ve)),Re.is_op_msg=!!be,Ce&&(Re.apple_critical_alert_options=m.objectify(Ce)),Ae&&(Re.message_params=p.objectify(Ae)),Re.is_auto_resend_registered=Ie,Re}},{key:"build",value:function(e,n,t,r,a,i,s,o,l,u,c,d,h,f,p,m,g,_,y,v,E,b,C,N,S,O,T,A,w,I,R,k){return this.objectify({messageId:n,reqId:e,user:t,channel:r,plainUrl:a,name:i,type:s,size:o,data:l,customType:u,mentionType:_,mentionedUsers:y,mentionedUserIds:N,requestedMentionUserIds:O,reactions:g,metaArrays:m,rootMessageId:v,parentMessageId:E,parentMessageText:b,threadInfo:C,thumbnails:h,requireAuth:f,sendingStatus:S,errorCode:T,isGlobalBlocked:c,messageSurvivalSeconds:A,ogMetaData:w,isOperatorMessage:I,appleCriticalAlertOptions:R,createdAt:d,updatedAt:p,messageParams:k})}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid).FileMessage,t=cn.deserialize(e);return new n(this._objectifySerializedData(t))}},{key:"_objectifySerializedData",value:function(e){return j.get(this._iid).FileMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Nr(Nr.objectify(e.messageParams)):null}))}}]),t}(fn),Or=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this,e)).messageType=fn.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},e&&r._update(e),r}return m(t,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var n=j.get(this._iid),t=n.BaseChannel,r=n.BaseMessageParams,a=n.UserMessage,i=n.FileMessage,s=n.AdminMessage,o=n.User,l=n.ThreadInfo,u=n.OGMetaData,c=n.Reaction,d=e.messageId,h=e.messageType,f=void 0===h?fn.MESSAGE_TYPE_BASE:h,p=e.channel,m=e.message,g=e.data,_=void 0===g?"":g,y=e.customType,v=void 0===y?"":y,E=e.mentionType,b=void 0===E?r.MentionType.USERS:E,C=e.mentionedUsers,N=void 0===C?[]:C,S=e.mentionedMessageTemplate,O=void 0===S?null:S,T=e.reactions,A=void 0===T?[]:T,w=e.metaArrays,I=void 0===w?[]:w,R=e.rootMessageId,k=void 0===R?0:R,M=e.parentMessageId,U=void 0===M?0:M,L=e.parentMessageText,P=void 0===L?"":L,D=e.threadInfo,x=void 0===D?null:D,F=e.isReplyToChannel,H=void 0!==F&&F,G=e.parentMessage,B=void 0===G?null:G,z=e.translations,V=void 0===z?{}:z,q=e.silent,K=void 0!==q&&q,Y=e.ogMetaData,Q=void 0===Y?null:Y,W=e.createdAt,J=e.updatedAt,X=void 0===J?0:J,$={msg_id:d,channel_url:p.url,channel_type:p.channelType===t.CHANNEL_TYPE_OPEN?t.CHANNEL_TYPE_OPEN:t.CHANNEL_TYPE_GROUP,message:m,data:_,custom_type:v,silent:K,ts:W,updated_at:X};switch(f){case fn.MESSAGE_TYPE_USER:$.type="MESG";break;case fn.MESSAGE_TYPE_FILE:$.type="FILE";break;case fn.MESSAGE_TYPE_ADMIN:$.type="ADMM"}$.translations=V,$.mention_type=b,$.mentioned_users=N.map(function(e){return o.objectify(e)}),$.mentioned_message_template=O,$.reactions=A.map(function(e){return c.objectify(e)}),$.metaarray={};for(var Z=0;Z<I.length;Z++){var ee=I[Z].key;$.metaarray[ee]=I[Z].value}if($.metaarray_key_order=I.map(function(e){return e.key}),$.root_message_id=k,$.parent_message_id=U,$.parent_message_text=P,x&&($.thread_info=l.objectify(x)),$.is_reply_to_channel=H,B)switch(B.messageType){case t.MESSAGE_TYPE_USER:$.parent_message_info=a._objectifySerializedData(B);break;case t.MESSAGE_TYPE_FILE:$.parent_message_info=i._objectifySerializedData(B);break;case t.MESSAGE_TYPE_ADMIN:$.parent_message_info=s._objectifySerializedData(B)}return Q&&($.og_tag=u.objectify(Q)),$}},{key:"build",value:function(e,n,t,r,a,i,s,o,l,u,c,d,h,f,p,m,g,_){return this.objectify({messageId:e,channel:n,message:t,data:r,customType:a,mentionType:c,mentionedUsers:d,mentionedMessageTemplate:h,reactions:u,metaArrays:l,rootMessageId:f,parentMessageId:p,parentMessageText:m,threadInfo:g,translations:i,ogMetaData:_,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid).AdminMessage,t=cn.deserialize(e);return new n(this._objectifySerializedData(t))}},{key:"_objectifySerializedData",value:function(e){return j.get(this._iid).AdminMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType}}))}}]),t}(fn),Tr=function(){function e(n){f(this,e);var t=j.get(this._iid),r=t.BaseMessage,a=t.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=a.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=a.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,n&&this._update(n)}return m(e,[{key:"sender",get:function(){var e=Ma.getInstance(this._iid),n=j.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var t=n.cachedChannels[this.channelUrl];if(t){var r=t.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"_update",value:function(n){var t=this,r=j.get(this._iid),a=r.User,i=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray,l=r.AppleCriticalAlertOptions;this.scheduledId=n.hasOwnProperty("scheduled_id")?parseInt(n.scheduled_id):0,this.scheduledDateTimeString=n.hasOwnProperty("scheduled_dt")?String(n.scheduled_dt):"",this.scheduledTimezone=n.hasOwnProperty("scheduled_timezone")?String(n.scheduled_timezone):"",this.status=n.hasOwnProperty("status")?String(n.status):"",this.createdAt=n.hasOwnProperty("created_at")?parseInt(n.created_at):0,this.updatedAt=n.hasOwnProperty("updated_at")?parseInt(n.updated_at):0,this.channelUrl=n.hasOwnProperty("channel_url")?String(n.channel_url):"",this._channelType=n.hasOwnProperty("channel_type")?String(n.channel_type):"",this._messageType=n.hasOwnProperty("type")?String(n.type):"",this._sender=n.hasOwnProperty("user")?new i(n.user):null,this.message=n.hasOwnProperty("message")?String(n.message):"",this.customType=n.hasOwnProperty("custom_type")?String(n.custom_type):"",this.data=n.hasOwnProperty("data")?String(n.data):"";var u=n.hasOwnProperty("metaarray")?n.metaarray:{},c=n.hasOwnProperty("metaarray_key_order")?n.metaarray_key_order:Object.keys(u).sort(function(e,n){return e.localeCompare(n)});this.metaArrays=[];for(var d=0;d<c.length;d++){var h=c[d];this.metaArrays.push(new o(h,u[h]||[]))}this.mentionType=n.hasOwnProperty("mention_type")?n.mention_type:s.MentionType.USERS,this.mentionedUsers=[],n.hasOwnProperty("mentioned_users")&&n.mentioned_users.forEach(function(e){var n=new a(e);t.mentionedUsers.push(n)}),this.pushNotificationDeliveryOption=n.hasOwnProperty("push_option")?n.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=n.hasOwnProperty("translation_target_langs")?n.translation_target_langs:[],this.status===e.Status.FAILED&&(n.hasOwnProperty("error")&&n.error.hasOwnProperty("message")&&(this.errorMessage=String(n.error.message)),n.hasOwnProperty("error")&&n.error.hasOwnProperty("code")&&(this.errorCode=parseInt(n.error.code))),n.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(n.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=j.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(n){e[n.key]=n.value}),e},set:function(e){if("object"===h(e)&&e){var n=j.get(this._iid).MessageMetaArray,t=[];Object.keys(e).forEach(function(r){t.push(new n(r,e[r]))}),this.metaArrays=t}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),Ar=function(){function e(){this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return e.createFromJson=function(e){var n=j.get(this._iid),t=n.BaseChannel,r=n.ThreadInfo,a=e.thread_info,i=e.root_message_id,s=e.channel_url,o=e.channel_type;if(a&&"object"==typeof a&&("string"==typeof i||"number"==typeof i)&&"string"==typeof s&&"string"==typeof o&&[t.CHANNEL_TYPE_GROUP,t.CHANNEL_TYPE_OPEN].includes(o)){var l=new this;return l.threadInfo=new r(a),l.targetMessageId=parseInt(i+""),l.channelUrl=s,l.channelType=o,l}return null},e}(),wr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0&&Array.isArray(n.userIdsFilter)&&"string"==typeof n.metaDataKeyFilter&&Array.isArray(n.metaDataValuesFilter)&&!!n.metaDataKeyFilter==n.metaDataValuesFilter.length>0&&("string"==typeof n.nicknameStartsWithFilter||null===n.nicknameStartsWithFilter)?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadUserList(d(d({},n),{},{token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),Ir=function(){function e(n){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",n.channelUrl&&(this._channelUrl=n.channelUrl),n.isOpenChannel&&(this._isOpenChannel=n.isOpenChannel)}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadBannedUserList(d(d({},n),{},{channelUrl:n._channelUrl,isOpenChannel:n._isOpenChannel,token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).RestrictedUser,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.banned_list.map(function(e){var n=new i(e);return n.restrictionInfo.restrictionType=i.RestrictionType.BANNED,n})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),Rr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0&&Array.isArray(n.userIdsFilter)?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadBlockedUserList(d(d({},n),{},{token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),kr=function(){function e(){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasMore?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadFriendList(d(d({},n),{},{token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasMore=!!s,a=r.users.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),Mr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.nicknameStartsWithFilter="",this.nicknameExactMatchFilter="",this.channelNameContainsFilter="",this.memberStateFilter=ar.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=ar.SuperChannelFilter.ALL,this.publicChannelFilter=ar.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=ar.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.hiddenChannelFilter=ar.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return m(e,[{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(n){Object.keys(e.QueryType).map(function(n){return e.QueryType[n]}).indexOf(n)>-1&&(this._userIdsIncludeFilterQueryType=n.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}},{key:"setSearchFilter",value:function(e,n){Array.isArray(e)&&0!==e.length&&"string"==typeof n&&n&&(this._searchFilter={search_query:n,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return cn.serialize(this,function(e){e.isLoading=!1})}},{key:"next",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid),r=t.GroupChannel,a=t.GroupChannelListQuery;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[a.ORDER_CHRONOLOGICAL,a.ORDER_LATEST_LAST_MESSAGE,a.CHANNEL_NAME_ALPHABETICAL,a.METADATA_VALUE_ALPHABETICAL].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n._userIdsExactFilter)&&Array.isArray(n._userIdsIncludeFilter)&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(a.QueryType).map(function(e){return a.QueryType[e]}).indexOf(n._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(n.memberStateFilter)>-1&&Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(n.superChannelFilter)>-1&&Object.keys(r.PublicChannelFilter).map(function(e){return r.PublicChannelFilter[e]}).indexOf(n.publicChannelFilter)>-1&&Object.keys(r.UnreadChannelFilter).map(function(e){return r.UnreadChannelFilter[e]}).indexOf(n.unreadChannelFilter)>-1&&Object.keys(r.HiddenChannelFilter).map(function(e){return r.HiddenChannelFilter[e]}).indexOf(n.hiddenChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.nicknameContainsFilter||"string"!=typeof n.nicknameStartsWithFilter||"string"!=typeof n.nicknameExactMatchFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"string"!=typeof n.metadataKey&&null!==n.metadataKey||!Array.isArray(n.metadataValues)||!n.metadataValues.every(function(e){return"string"==typeof e})||"string"!=typeof n.metadataValueStartsWith&&null!==n.metadataValueStartsWith||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?e(ye.error,null):n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadGroupChannelList(d(d({},n),{},{token:n._token,userIdsFilter:n._userIdsFilter,searchFilter:n._searchFilter})).then(function(t){var r=j.get(n._iid).GroupChannel,a=String(t.next);n._token=a,n.hasNext=!!a;var i=t.channels;if(!i||!Array.isArray(i))throw new F("Failed at loading group channels.",F.MALFORMED_DATA);var s=i.map(function(e){return"number"==typeof t.ts&&(e.ts=t.ts),r.upsert(e)});n.isLoading=!1,e(null,s)}).catch(function(t){n.isLoading=!1,e(t,null)})):e(null,[])},e)}}],[{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}},{key:"buildFromSerializedData",value:function(e){var n=j.get(this._iid).GroupChannel,t=cn.deserialize(e),r=n.createMyGroupChannelListQuery();return Object.keys(t).forEach(function(e){r.hasOwnProperty(e)&&(r[e]=t[e])}),r}}]),e}(),Ur=function(){function e(n){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=ar.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=n}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid),r=t.GroupChannel,a=t.Member,i=t.MemberListQuery;if("number"==typeof n.limit&&n.limit>0&&Object.keys(i.MutedMemberFilter).map(function(e){return i.MutedMemberFilter[e]}).indexOf(n.mutedMemberFilter)>-1&&Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(n.memberStateFilter)>-1&&Object.keys(i.Order).map(function(e){return i.Order[e]}).indexOf(n.order)>-1&&("string"==typeof n.nicknameStartsWithFilter||null===n.nicknameStartsWithFilter))if(n.isLoading)e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(n.hasNext){n.isLoading=!0;var s=R.get(n._iid);n.memberStateFilter===r.MemberStateFilter.LEFT&&(n.memberStateFilter=r.MemberStateFilter.ALL),s.container.apiClient.loadMemberList(d(d({},n),{},{channelUrl:n._channelUrl,token:n._token}),function(t,r){var i=null;if(!t){var s=String(r.next);n._token=s,n.hasNext=!!s,i=r.members.map(function(e){return new a(e)})}n.isLoading=!1,e(t,i)})}else e(null,[]);else e(ye.error,null)},e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),Lr=function(){function e(n){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",n.channelUrl&&(this._channelUrl=n.channelUrl),n.isOpenChannel&&(this._isOpenChannel=n.isOpenChannel)}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadMutedUserList(d(d({},n),{},{channelUrl:n._channelUrl,isOpenChannel:n._isOpenChannel,token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).RestrictedUser,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.muted_list.map(function(e){var n=new i(e);return n.restrictionInfo.restrictionType=i.RestrictionType.MUTED,n})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),Pr=function(){function e(){f(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){!("number"==typeof n.limit&&n.limit>0&&Array.isArray(n.customTypes))||"string"!=typeof n.nameKeyword&&null!==n.nameKeyword||"string"!=typeof n.urlKeyword&&null!==n.urlKeyword||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?e(ye.error,null):n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadOpenChannelList(d(d({},n),{},{token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).OpenChannel,s=String(r.next);n._token=s,n.hasNext=!!s;var o=r.channels;o&&Array.isArray(o)?a=o.map(function(e){return"number"==typeof r.ts&&(e.ts=r.ts),i.upsert(e)}):t=new F("Failed at loading open channels.",F.MALFORMED_DATA)}n.isLoading=!1,e(t,a)})):e(null,[])},e)}}]),e}(),Dr=new WeakMap,xr=function(){function e(n){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Dr.set(this,n)}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){if("number"==typeof n.limit&&n.limit>0)if(n.isLoading)e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(n.hasNext){n.isLoading=!0;var t=Dr.get(n);R.get(n._iid).container.apiClient.loadOperatorList(d(d({},n),{},{token:n._token,channelUrl:t.url,isOpenChannel:t.isOpenChannel()}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.operators.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})}else e(null,[]);else e(ye.error,null)},e)}}]),e}(),Fr=new WeakMap,Hr=function(){function e(n){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",n&&Fr.set(this,n.channelUrl)}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadParticipantList(d(d({},n),{},{channelUrl:Fr.get(n),token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.participants.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),Gr=new WeakMap,jr=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.limit,a=void 0===r?20:r,i=t.reverse,s=void 0!==i&&i,o=t.exactMatch,l=void 0!==o&&o,u=t.channelUrl,c=void 0===u?"":u,d=t.channelCustomType,h=void 0===d?"":d,p=t.messageTimestampFrom,m=void 0===p?null:p,g=t.messageTimestampTo,_=void 0===g?null:g,y=t.order,v=void 0===y?"score":y,E=t.advancedQuery,b=void 0!==E&&E,C=t.targetFields,N=void 0===C?null:C;f(this,e),this.isLoading=!1,this.hasNext=!0,Gr.set(this,{keyword:n,limit:a,reverse:s,exactMatch:l,channelUrl:c,channelCustomType:h,messageTimestampFrom:m,messageTimestampTo:_,order:v,advancedQuery:b,targetFields:N,previousToken:"",nextToken:""})}return m(e,[{key:"key",get:function(){return Gr.get(this).keyword}},{key:"limit",get:function(){return Gr.get(this).limit}},{key:"reverse",get:function(){return Gr.get(this).reverse}},{key:"exactMatch",get:function(){return Gr.get(this).exactMatch}},{key:"channelUrl",get:function(){return Gr.get(this).channelUrl}},{key:"channelCustomType",get:function(){return Gr.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return Gr.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return Gr.get(this).messageTimestampTo}},{key:"order",get:function(){return Gr.get(this).order}},{key:"next",value:function(e){var n=this,t=j.get(this._iid),r=t.BaseChannel,a=t.GroupChannel,i=t.OpenChannel;return le(this._iid,function(e){var t=Gr.get(n),s=t.keyword,o=t.limit,l=t.reverse,u=t.exactMatch,c=t.channelUrl,d=t.channelCustomType,h=t.messageTimestampFrom,f=t.messageTimestampTo,p=t.order,m=t.advancedQuery,g=t.targetFields,_=t.nextToken;!("number"==typeof o&&o>0&&o<=1e3&&"boolean"==typeof l&&"boolean"==typeof u)||"string"!=typeof c&&null!==c||"string"!=typeof d&&null!==d||"number"!=typeof h&&null!==h||"number"!=typeof f&&null!==f||!(["score","ts"].indexOf(p)>=0)||"boolean"!=typeof m&&null!==m||!Array.isArray(g)&&null!==g?e(ye.error,null):n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:l,exactMatch:u,channelUrl:c,channelCustomType:d,messageTimestampFrom:h,messageTimestampTo:f,order:p,advancedQuery:m,targetFields:g,nextToken:_},function(t,s){var o=null;t||(o=[],s.results.forEach(function(e){if(e.channel.hasOwnProperty("members")){var n=new a(e.channel);a.cachedChannels[n.url]=n,o.push(r.buildMessage(e,n))}else{var t=new i(e.channel);i.cachedChannels[t.url]=t,o.push(r.buildMessage(e,t))}}),n.hasNext=s.has_next,Gr.get(n).nextToken=s.end_cursor),n.isLoading=!1,e(t,o)})):e(null,[])},e)}}]),e}(),Br=new WeakMap,zr=new WeakMap,Vr=function(){function e(n){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,zr.set(this,Number.MAX_SAFE_INTEGER),Br.set(this,n),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1}return m(e,[{key:"load",value:function(e,n,t,r){var a=this,i=j.get(this._iid),s=i.BaseChannel,o=i.BaseMessage,l=null,u=ye.parse(arguments,[new ye({type:"number",optional:!0,defaultValue:this.limit}),new ye({type:"boolean",optional:!0,defaultValue:this.reverse}),new ye({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(s.MessageTypeFilter).map(function(e){return s.MessageTypeFilter[e]}).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new ye({type:"callback"})]),c=N(u,5);return l=c[0],e=c[1],n=c[2],t=c[3],r=c[4],le(this._iid,function(r){if(("string"!=typeof a.customTypeFilter&&null!==a.customTypeFilter||!Array.isArray(a.customTypesFilter)||!a.customTypesFilter.every(function(e){return"string"==typeof e||null===e})||!Array.isArray(a.senderUserIdsFilter)||!a.senderUserIdsFilter.every(function(e){return"string"==typeof e})||"boolean"!=typeof a.includeMetaArray||null!==a.includeReaction&&"boolean"!=typeof a.includeReaction||null!==a.includeReactions&&"boolean"!=typeof a.includeReactions||"boolean"!=typeof a.includeThreadInfo||null!==a.includeReplies&&"boolean"!=typeof a.includeReplies||!(null===a.replyType||"string"==typeof a.replyType&&Object.values(o.ReplyType).includes(a.replyType))||null!==a.includeParentMessageText&&"boolean"!=typeof a.includeParentMessageText||null!==a.includeParentMessageInfo&&"boolean"!=typeof a.includeParentMessageInfo||"boolean"!=typeof a.showSubchannelMessagesOnly)&&(l=ye.error),l)r(l,null);else{if(a.limit=e,a.reverse=n,a.messageTypeFilter=t,"number"==typeof a.messageTypeFilter)switch(a.messageTypeFilter){case 0:a.messageTypeFilter=s.MessageTypeFilter.ALL;break;case 1:a.messageTypeFilter=s.MessageTypeFilter.USER;break;case 2:a.messageTypeFilter=s.MessageTypeFilter.FILE;break;case 3:a.messageTypeFilter=s.MessageTypeFilter.ADMIN}if(a.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(a.hasMore){a.isLoading=!0;var i=Br.get(a);R.get(a._iid).container.apiClient.getMessageList({channel:i,token:zr.get(a)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:n,messageType:a.messageTypeFilter,customType:a.customTypeFilter,customTypes:a.customTypesFilter,senderUserIds:a.senderUserIdsFilter,includeMetaArray:a.includeMetaArray,includeReaction:a.includeReaction,includeReactions:a.includeReactions,includeReplies:a.includeReplies,includeParentMessageText:a.includeParentMessageText,includeThreadInfo:a.includeThreadInfo,replyType:a.replyType,includeParentMessageInfo:a.includeParentMessageInfo,showSubchannelMessagesOnly:a.showSubchannelMessagesOnly}).then(function(n){var t=n.messages.map(function(e){return s.buildMessage(e,i)});(0===t.length||t.length<e)&&(a.hasMore=!1);var o=zr.get(a);zr.set(a,Math.min.apply(Math,S(t.map(function(e){return e.createdAt})).concat([o]))),a.isLoading=!1,r(null,t)}).catch(function(e){a.isLoading=!1,r(e,null)})}else r(null,[])}},r)}}]),e}(),qr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Mr.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=ar.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.includeFrozen=!0,this.includeMetaData=!0}return m(e,[{key:"next",value:function(n){var t=this;return le(this._iid,function(n){var r=j.get(t._iid).GroupChannel;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(e.MembershipType).map(function(n){return e.MembershipType[n]}).indexOf(t.membershipFilter)>-1&&Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(t.superChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"string"!=typeof t.metadataKey&&null!==t.metadataKey||!Array.isArray(t.metadataValues)||!t.metadataValues.every(function(e){return"string"==typeof e})||"string"!=typeof t.metadataValueStartsWith&&null!==t.metadataValueStartsWith||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?n(ye.error,null):t.isLoading?n(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadPublicGroupChannelList(d(d({},t),{},{token:t._token}),function(e,a){var i=null;if(!e){var s=String(a.next);t._token=s,t.hasNext=!!s;var o=a.channels;o&&Array.isArray(o)?i=o.map(function(e){return"number"==typeof a.ts&&(e.ts=a.ts),r.upsert(e)}):e=new F("Failed at loading group channels.",F.MALFORMED_DATA)}t.isLoading=!1,n(e,i)})):n(null,[])},n)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),Kr=function(){function e(){f(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var n=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter(function(e){return e.hasOwnProperty("userId")}).length===e.length&&(n=e.map(function(e){return e.userId}))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return n},set:function(e){Array.isArray(e)&&e.filter(function(e){return"string"==typeof e}).length===e.length&&(n=e)}})}return m(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every(function(e){return"string"==typeof e})&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(se.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every(function(e){return"string"==typeof e})||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var n,t=e.filter(function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId}).map(function(e){return e.userId});(n=this._invitedUserIds).push.apply(n,S(t))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var n,t=e.filter(function(e){return"string"==typeof e});(n=this._invitedUserIds).push.apply(n,S(t))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),Yr=function(){function e(){f(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return m(e,[{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every(function(e){return e.hasOwnProperty("userId")})&&(this._operatorUserIds=e.map(function(e){return e.userId}))}},{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every(function(e){return"string"==typeof e})||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||se.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl&&/^\w+$/.test(this.channelUrl)||null===this.channelUrl)}}]),e}(),Qr=function(e){_(t,e);var n=b(t);function t(e){var r;return f(this,t),(r=n.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,e&&r._update(e),r}return m(t,[{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}},{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,n,t,r,a,i){"number"==typeof e&&4===e.toString().length&&"number"==typeof n&&n>=1&&n<=12&&"number"==typeof t&&t>=1&&t<=31&&"number"==typeof r&&r>=0&&r<=24&&"number"==typeof a&&a>=0&&a<=60&&"string"==typeof i&&i.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+n.toString()).substr(-2)+"-"+("0"+t.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+a.toString()).substr(-2),this.timezone=i)}}]),t}(Er),Wr=m(function e(){f(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=ar.SuperChannelFilter.ALL}),Jr=function(e){_(t,e);var n=b(t);function t(){return f(this,t),n.call(this)}return m(t)}(Wr),Xr=function(e){_(t,e);var n=b(t);function t(){return f(this,t),n.call(this)}return m(t)}(Wr),$r=function(){function e(){f(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.includeParentMessageInfo=null}return m(e,[{key:"_validate",value:function(){var e=j.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),Zr=function(){function e(){f(this,e);var n=j.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=n.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1}return m(e,[{key:"_validate",value:function(){var e=j.get(this._iid),n=e.BaseChannel,t=e.BaseMessage;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(n.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e||null===e})&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(t.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.showSubchannelMessagesOnly}},{key:"belongsTo",value:function(e){var n=j.get(this._iid),t=n.BaseChannel,r=n.UserMessageParams,a=n.FileMessageParams,i=n.BaseMessage;if(this.messageType!==t.MessageTypeFilter.ALL){if(e instanceof r&&this.messageType!==t.MessageTypeFilter.USER)return!1;if(e instanceof a&&this.messageType!==t.MessageTypeFilter.FILE)return!1}if(Array.isArray(this.customTypes)&&this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if("string"==typeof this.customType&&this.customType!==e.customType)return!1;if(Array.isArray(this.senderUserIds)&&this.senderUserIds.length>0){var s=Ma.getInstance(e._iid);if(!s||!s.currentUser||!this.senderUserIds.includes(s.currentUser.userId))return!1}if("string"==typeof this.replyType&&e.parentMessageId){if(this.replyType===i.ReplyType.NONE)return!1;if(this.replyType===i.ReplyType.ONLY_REPLY_TO_CHANNEL&&!e.isReplyToChannel)return!1}else if(!1===this.includeReplies&&e.parentMessageId)return!1;return!0}}]),e}(),ea=function(){function e(){f(this,e);var n=j.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=n.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeParentMessageText=null,this.includeParentMessageInfo=null}return m(e,[{key:"_validate",value:function(){var e=j.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e||null===e})&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),na=function(){function e(){f(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null}return m(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(BaseMessage.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),ta=function(){function e(){f(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return m(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e})||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),ra=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},aa=function(){this.onFriendsDiscovered=function(){},this.onTotalUnreadMessageCountUpdated=function(){}},ia=m(function e(){f(this,e),this.onMessageReceived=function(e,n){},this.onMessageUpdated=function(e,n){},this.onMessageDeleted=function(e,n){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,n){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,n){},this.onUserLeft=function(e,n){},this.onOperatorUpdated=function(e,n){},this.onUserEntered=function(e,n){},this.onUserExited=function(e,n){},this.onUserMuted=function(e,n){},this.onUserUnmuted=function(e,n){},this.onUserBanned=function(e,n){},this.onUserUnbanned=function(e,n){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,n){},this.onUserReceivedInvitation=function(e,n,t){},this.onUserDeclinedInvitation=function(e,n,t){},this.onMetaDataCreated=function(e,n){},this.onMetaDataUpdated=function(e,n){},this.onMetaDataDeleted=function(e,n){},this.onMetaCountersCreated=function(e,n){},this.onMetaCountersUpdated=function(e,n){},this.onMetaCountersDeleted=function(e,n){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,n){},this.onThreadInfoUpdated=function(e,n){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){}}),sa=m(function e(n){if(f(this,e),n){var t=j.get(this._iid),r=t.User,a=t.BaseChannel;this.reader=new r(n.user),this.timestamp=parseInt(n.ts),this.channelUrl=n.hasOwnProperty("channel_url")?String(n.channel_url):"",this.channelType=n.hasOwnProperty("channel_type")?String(n.channel_type):a.CHANNEL_TYPE_GROUP}}),oa=function(){function e(e){this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,e&&this._update(e)}return e.objectify=function(e){var n=j.get(this._iid).User,t=e.replyCount,r=void 0===t?0:t,a=e.mostRepliedUsers,i=void 0===a?[]:a,s=e.lastRepliedAt,o=void 0===s?0:s,l=e.updatedAt,u=void 0===l?0:l,c={};return c.reply_count=r,Array.isArray(i)&&i.every(function(e){return e instanceof n})&&(c.most_replies=i.map(function(e){return n.objectify(e)})),c.last_replied_at=o,c.updated_at=u,c},e.build=function(e,n,t,r){return this.objectify({replyCount:e,mostRepliedUsers:n,lastRepliedAt:t,updatedAt:r})},e.prototype._update=function(e){var n=j.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every(function(e){return"object"==typeof e})&&(this.mostRepliedUsers=e.most_replies.map(function(e){return new n(e)})),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))},e}(),la=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e&&this._update(e)}return e.objectify=function(e){var n=j.get(this._iid).OGImage,t=e.title,r=void 0===t?null:t,a=e.url,i=void 0===a?null:a,s=e.description,o=void 0===s?null:s,l=e.defaultImage,u=void 0===l?null:l,c={};return c["og:title"]=r,c["og:url"]=i,c["og:description"]=o,u&&(c["og:image"]=n.objectify(u)),c},e.prototype._update=function(e){var n=j.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new n(e["og:image"]))},e}(),ua=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,e&&this._update(e)}return e.objectify=function(e){var n=e.url,t=void 0===n?null:n,r=e.secureUrl,a=void 0===r?null:r,i=e.type,s=void 0===i?null:i,o=e.width,l=void 0===o?0:o,u=e.height,c=void 0===u?0:u,d=e.alt,h=void 0===d?null:d,f={};return f.url=t,f.secure_url=a,f.type=s,f.width=l,f.height=c,f.alt=h,f},e.prototype._update=function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)},e}(),ca=function(){function e(e){this.type=null,this.vendor=null,this.detail={},e&&this._update(e)}return e.objectify=function(e){var n=e.type,t=void 0===n?"":n,r=e.vendor,a=void 0===r?"":r,i=e.detail,s=void 0===i?{}:i,o={};return o.type=t,o.vendor=a,o.detail=s,o},e.prototype._update=function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"==typeof e.detail&&!Array.isArray(e.detail)&&(this.detail=e.detail)},e}(),da=function(){function e(n){f(this,e),this.restrictionType=null,this.description=null,this.endAt=-1,n&&this._update(n)}return m(e,[{key:"_update",value:function(e){e.hasOwnProperty("restriction_type")&&(this.restrictionType=e.restriction_type),e.hasOwnProperty("description")?this.description=e.description:e.hasOwnProperty("muted_description")&&(this.description=e.muted_description),e.hasOwnProperty("end_at")?this.endAt=parseInt(e.end_at):e.hasOwnProperty("muted_end_at")&&(this.endAt=parseInt(e.muted_end_at))}}],[{key:"objectify",value:function(e){var n=e.restrictionType,t=void 0===n?null:n,r=e.description,a=void 0===r?null:r,i=e.endAt,s=void 0===i?-1:i,o={};return o.restriction_type=t,o.description=a,o.end_at=s,o}}]),e}(),ha=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=n,this.metaDataKey="",this.metaDataValues=[],this._token=""}return m(e,[{key:"next",value:function(e){var n=this;return le(this._iid,function(e){"number"==typeof n.limit&&n.limit>0&&Array.isArray(n.userIds)&&"string"==typeof n.metaDataKey&&Array.isArray(n.metaDataValues)&&!!n.metaDataKey==n.metaDataValues.length>0?n.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadUserList(d(d({},n),{},{userIdsFilter:n.userIds,metaDataKeyFilter:n.metaDataKey,metaDataValuesFilter:n.metaDataValues,token:n._token}),function(t,r){var a=null;if(!t){var i=j.get(n._iid).User,s=String(r.next);n._token=s,n.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}n.isLoading=!1,e(t,a)})):e(null,[]):e(ye.error,null)},e)}}]),e}(),fa=new WeakMap,pa=function(){function e(n){f(this,e),this.isLoading=!1,fa.set(this,n)}return m(e,[{key:"prev",value:function(e,n,t,r){var a=arguments,i=this;return le(this._iid,function(r){var s,o=j.get(i._iid).BaseChannel,l=N(ye.parse(a,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"function"})]),5);if(s=l[0],e=l[1],n=l[2],t=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var u=fa.get(i);R.get(i._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:n,nextResultSize:0,shouldReverse:t,messageType:"",customType:""}).then(function(e){var n=e.messages.map(function(e){return o.buildMessage(e,u)});i.isLoading=!1,r(null,n)}).catch(function(e){i.isLoading=!1,r(e,null)})}},r)}},{key:"next",value:function(e,n,t,r){var a=arguments,i=this;return le(this._iid,function(r){var s,o=j.get(i._iid).BaseChannel,l=N(ye.parse(a,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"function"})]),5);if(s=l[0],e=l[1],n=l[2],t=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var u=fa.get(i);R.get(i._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:n,shouldReverse:t,messageType:"",customType:""}).then(function(e){var n=e.messages.map(function(e){return o.buildMessage(e,u)});i.isLoading=!1,r(null,n)}).catch(function(e){i.isLoading=!1,r(e,null)})}},r)}},{key:"load",value:function(e,n,t,r,a){var i=arguments,s=this;return le(this._iid,function(a){var o,l=j.get(s._iid).BaseChannel,u=N(ye.parse(i,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"callback"})]),6);if(o=u[0],e=u[1],n=u[2],t=u[3],r=u[4],a=u[5],o)a(o,null);else if(s.isLoading)a(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=fa.get(s);R.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:n,nextResultSize:t,shouldReverse:r,messageType:"",customType:""}).then(function(e){var n=e.messages.map(function(e){return l.buildMessage(e,c)});s.isLoading=!1,a(null,n)}).catch(function(e){s.isLoading=!1,a(e,null)})}},a)}}]),e}(),ma=0,ga=1,_a=2,ya=function(){function e(n){var t=this;f(this,e),this.state=ma,this._value=null,this._reason=null;var r=function(e){t.state===ma&&(t.state=_a,t._reason=e)};if("function"!=typeof n)throw"Promise resolver ".concat(n," is not a function");try{n(function(e){t.state===ma&&(t.state=ga,t._value=e)},r)}catch(e){r(e)}}return m(e,[{key:"length",get:function(){return 1}},{key:"then",value:function(n,t){var r=this,a=this;switch(this.state){case ma:setTimeout(function(){return r.then(n,t)},2);break;case ga:n&&"function"==typeof n&&(a=n(this._value));break;case _a:t&&"function"==typeof t&&(a=t(this._reason))}return a instanceof e?a:this}},{key:"catch",value:function(n){var t=this,r=this;switch(this.state){case ma:setTimeout(function(){return t.catch(n)},2);break;case ga:break;case _a:r=n(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(n){var t=this,r=this;switch(this.state){case ma:setTimeout(function(){return t.finally(n)},2);break;case ga:case _a:r=n()}return r instanceof e?r:this}}],[{key:"all",value:function(n){return new e(function(t,r){if(Array.isArray(n)||"string"==typeof n)if(n.length>0){for(var a=[],i=0;i<n.length;i++)n[i]instanceof e?a.push(n[i]):a.push(e.resolve(n[i]));var s=new Array(a.length).fill(null),o=a.length,l=function(e,n,a){n?r(n):(o--,s[e]=a,o<=0&&t(s))};a.forEach(function(e,n){e.then(function(e){l(n,null,e)}).catch(function(e){l(n,e,null)})})}else t([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(h(n)," ").concat(n," is not iterable")))})}},{key:"resolve",value:function(n){return new e(function(t,r){n instanceof e?n.then(function(n){return e.resolve(n)}).catch(function(e){return r(e)}):t(n)})}},{key:"reject",value:function(n){return new e(function(e,t){t(n)})}}]),e}(),va=function(){"undefined"!=typeof Promise&&Promise.prototype.finally||("undefined"!=typeof window?window.Promise=ya:"undefined"!=typeof a?a.Promise=ya:"undefined"!=typeof self?self.Promise=ya:"undefined"!=typeof globalThis&&(globalThis.Promise=ya)),Object.values||(Object.values=function(e){return Object.keys(e).map(function(n){return e[n]})}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},Ea="collection@semaphore_holders_for:",ba="collection@semaphore_resolvers_for:",Ca="collection@semaphore_chain_process_state_for:",Na=new Map,Sa=new Map,Oa=new Map,Ta=function(){function e(n){var t=n.key,r=n.concurrentCallLimit,a=void 0===r?2:r,i=n.backOffDelay,s=void 0===i?0:i,o=this;this._holdersKey=e.createSemaphoreHoldersKey(t),this._resolversKey=e.createSemaphoreResolversKey(t),this._chainProcessStateKey=e.createChainProcessStateKey(t),this._numLocks=a,this._backOffDelay=s,this._localAcquiredKeys=[],this._localResolversData=[],ee()?(Na[this._holdersKey]||(Na[this._holdersKey]=[]),Sa[this._resolversKey]||(Sa[this._resolversKey]=[])):(window.addEventListener("storage",function(e){return L(o,void 0,void 0,function(){var n,t;return P(this,function(r){if(this._localResolversData.length>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()&&this._hasHighestPriorityResolver())switch(e.key){case this._holdersKey:if(n=JSON.parse(e.oldValue),t=JSON.parse(e.newValue),!n||!t||t.length>=n.length)return[2];this._processChainResolve();break;case this._chainProcessStateKey:if(JSON.parse(e.newValue))return[2];this._processChainResolve();break;default:return[2]}return[2]})})}),window.addEventListener("beforeunload",function(){var e=o._getLocalResolversData(),n=o._localResolversData.map(function(e){return e.key}),t=e.filter(function(e){return n.indexOf(e.key)<0});t.length>0?window.localStorage.setItem(o._resolversKey,JSON.stringify(t)):window.localStorage.removeItem(o._resolversKey),o._localAcquiredKeys.forEach(function(e){return o.release(e)})}))}return e.createSemaphoreHoldersKey=function(e){return Ea+e},e.createSemaphoreResolversKey=function(e){return ba+e},e.createChainProcessStateKey=function(e){return Ca+e},e.removeAllSemaphoreKeys=function(){if("undefined"!=typeof document&&"undefined"!=typeof navigator&&"undefined"!=typeof localStorage){for(var e=[],n=0;n<localStorage.length;n++){var t=localStorage.key(n);(t.startsWith(Ea)||t.startsWith(ba)||t.startsWith(Ca))&&e.push(t)}for(n=0;n<e.length;n++)localStorage.removeItem(e[n])}},Object.defineProperty(e.prototype,"numLocks",{get:function(){return this._numLocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backOffDelay",{get:function(){return this._backOffDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){if(ee())return this.numLocks-Na[this._holdersKey].length;var e=this._getLocalHoldersData();return this.numLocks-e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitCount",{get:function(){return ee()?Sa[this._resolversKey].length:this._getLocalResolversData().length},enumerable:!1,configurable:!0}),e.prototype._hasHighestPriorityResolver=function(){var e=this._getLocalResolversData();return e.length>0&&this._localResolversData.map(function(e){return e.key}).indexOf(e[0].key)>=0},e.prototype._isProcessChainAcquireRunning=function(){if(ee())return Oa[this._chainProcessStateKey];var e=window.localStorage[this._chainProcessStateKey];return void 0!==e&&JSON.parse(e)},e.prototype._setProcessChainAcquireRunning=function(e){ee()?Oa[this._chainProcessStateKey]=e:e?window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(e)):window.localStorage.removeItem(this._chainProcessStateKey)},e.prototype._processChainResolve=function(){return L(this,void 0,void 0,function(){var e;return P(this,function(n){switch(n.label){case 0:return this.waitCount>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()?(this._setProcessChainAcquireRunning(!0),this._tryResolve()?[4,we(this._backOffDelay)]:[3,2]):[3,3];case 1:n.sent(),n.label=2;case 2:this._setProcessChainAcquireRunning(!1),ee()?this._processChainResolve():(e=new StorageEvent("storage",{key:this._chainProcessStateKey,oldValue:JSON.stringify(!0),newValue:JSON.stringify(!1)}),dispatchEvent(e)),n.label=3;case 3:return[2]}})})},e.prototype.acquire=function(e){return void 0===e&&(e=Cn.BACKGROUND_SYNC_CLOSE),L(this,void 0,void 0,function(){var n,t=this;return P(this,function(r){return ee()?[2,new Promise(function(n){var r={key:Ie(),resolver:function(e){return n(e)},priority:e};switch(e){case Cn.USER_CALL:case Cn.FILL:case Cn.BACKGROUND_SYNC_OPEN:for(var a=Sa[t._resolversKey],i=-1,s=0;s<a.length&&i<0;s++)e>a[s].priority&&(i=s);if(i>=0){Sa[t._resolversKey].splice(i,0,r);break}case Cn.BACKGROUND_SYNC_CLOSE:Sa[t._resolversKey].push(r)}t._processChainResolve()})]:(n=this._getLocalResolversData(),[2,new Promise(function(r){var a=Ie(),i={key:a,priority:e},s={key:a,resolver:function(e){return r(e)},priority:e};switch(e){case Cn.USER_CALL:case Cn.FILL:case Cn.BACKGROUND_SYNC_OPEN:for(var o=-1,l=0;l<n.length&&o<0;l++)e>n[l].priority&&(o=l);if(o>=0){n.splice(o,0,i),window.localStorage.setItem(t._resolversKey,JSON.stringify(n)),t._localResolversData.splice(o,0,s);break}case Cn.BACKGROUND_SYNC_CLOSE:n.push(i),window.localStorage.setItem(t._resolversKey,JSON.stringify(n)),t._localResolversData.push(s)}t._processChainResolve()})])})})},e.prototype.release=function(e){if(ee()){if((n=Na[this._holdersKey].indexOf(e))>=0)return Na[this._holdersKey].splice(n,1),this._processChainResolve(),!0}else{var n,t=JSON.parse(window.localStorage[this._holdersKey]),r=D([],t,!0);if((n=t.indexOf(e))>=0){t.splice(n,1),t.length>0?window.localStorage.setItem(this._holdersKey,JSON.stringify(t)):window.localStorage.removeItem(this._holdersKey),this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e),1);var a=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(r),newValue:JSON.stringify(t)});return dispatchEvent(a),!0}}return!1},e.prototype._tryResolve=function(){if(ee()){if(Na[this._holdersKey].length<this.numLocks){var e=Ie();return Na[this._holdersKey]=D(D([],Na[this._holdersKey],!0),[e],!1),(t=Sa[this._resolversKey].shift()).resolver(e),!0}}else{var n=this._getLocalHoldersData();if(n.length<this.numLocks){e=Ie();var t=this._localResolversData.shift(),r=this._getLocalResolversData(),a=r.map(function(e){return e.key}).indexOf(t.key);r.splice(a,1),r.length>0?window.localStorage.setItem(this._resolversKey,JSON.stringify(r)):window.localStorage.removeItem(this._resolversKey),window.localStorage.setItem(this._holdersKey,JSON.stringify(D(D([],n,!0),[e],!1))),this._localAcquiredKeys.push(e);var i=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(D([],n,!0)),newValue:JSON.stringify(D(D([],n,!0),[e],!1))});return dispatchEvent(i),(0,t.resolver)(e),!0}}return!1},e.prototype._getLocalHoldersData=function(){var e=window.localStorage[this._holdersKey];return void 0!==e?JSON.parse(e):[]},e.prototype._getLocalResolversData=function(){var e=window.localStorage[this._resolversKey];return void 0!==e?JSON.parse(e):[]},e}(),Aa=3e5,wa=null,Ia={},Ra=!1,ka=null,Ma=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),va();var r=!1;if((t.newInstance||!wa||wa&&t.appId!==wa.getApplicationId()&&wa.getConnectionState()===wa.ConnectionState.CLOSED)&&(r=!0,wa=this),r){try{if(!t.hasOwnProperty("appId"))return X.warn("Must be set appId."),wa=null,null}catch(e){return X.warn("Must be set appId."),wa=null,null}var a=Wt.create();Object.defineProperty(this,"_iid",{get:function(){return a}}),Ia[a]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new ve(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:Mn.MessageTypeFilter},this.GroupChannelFilter=Jt,this.MessageFilter=en,this.GroupChannelCollection={GroupChannelOrder:Ue},this.MessageCollection={MessageCollectionInitPolicy:on},this.CollectionEventSource=de,this._currentUserId=null;var i={User:pn,Member:ir,RestrictedUser:or,GroupChannel:ar,OpenChannel:pr,UserMessage:Cr,FileMessage:Sr,AdminMessage:Or,GroupChannelListQuery:Mr,MemberListQuery:Ur,GroupChannelParams:Kr,OpenChannelParams:Yr,BaseMessageParams:vr,UserMessageParams:Er,FileMessageParams:Nr,ScheduledUserMessageParams:Qr,GroupChannelTotalUnreadMessageCountParams:Jr,GroupChannelTotalUnreadChannelCountParams:Xr,MessageRetrievalParams:$r,MessageListParams:Zr,ThreadedMessageListParams:ea,MessageChangeLogsParams:na,GroupChannelChangeLogsParams:ta,MessageMetaArray:_r,UserEventHandler:aa,SessionHandler:Ee,ChannelHandler:ia,ConnectionHandler:ra,AppleCriticalAlertOptions:gr},s={SessionManager:be,BaseChannel:Mn,BaseMessage:fn,UserListQuery:ha,ApplicationUserListQuery:wr,BannedUserListQuery:Ir,BlockedUserListQuery:Rr,FriendListQuery:kr,MutedUserListQuery:Lr,OpenChannelListQuery:Pr,OperatorListQuery:xr,ParticipantListQuery:Hr,MessageListQuery:pa,PreviousMessageListQuery:Vr,MessageSearchQuery:jr,PublicGroupChannelListQuery:qr,ScheduledUserMessage:Tr,ThreadInfo:oa,ThreadInfoUpdateEvent:Ar,OGMetaData:la,OGImage:ua,Plugin:ca,Command:Se,Sender:sr,ReadStatus:sa,Reaction:br,ReactionEvent:un,Emoji:cr,EmojiCategory:ur,EmojiContainer:lr,RestrictionInfo:da,FileMessageQueue:Fn},o=new j(this._iid,d(d({},i),s));this.BaseMessage={ReplyType:fn.ReplyType,getMessage:o.BaseMessage.getMessage.bind(o.BaseMessage)},Object.keys(o).forEach(function(e){i[e]&&(n[e]=o[e])});var l={encrypt:function(e){return e},decrypt:function(e){return e}};R.create(a,{appId:t.appId,pinger:new Z(this),apiClient:new ue(this),wsAdapter:new _e(this),commandHandler:new Pn(this),onlineDetector:new Ce(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:w.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,nestdb:null,currentUserId:null,localCacheEnabled:"boolean"==typeof t.localCacheEnabled&&t.localCacheEnabled,localCacheLock:new $,debugCache:!1,encryption:l,store:new Pt({encryption:l}),preference:null,auth:new H,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager","device-os-platform"],getUserAgentWithExtensions:function(e){var n=ee()?"reactnative":"JS",t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",a=e["device-os-platform"]?"o".concat(e["device-os-platform"]):"";return"".concat(n,"/c").concat(w.SDK_VERSION,"/").concat(t,"/").concat(r,"/").concat(a)},sessionManager:new o.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1,autoResendQueue:[],isProcessingAutoResend:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=Aa&&(this._websocketResponseTimeout=e)}};var u=fe.of(a);u.addObserver({onConnect:function(){n.isCacheEnabled&&!n.getIsProcessingAutoResend()&&(0===n.getAutoResendQueue().length?wn._processAutoResendRegisteredPendingMessages(n).then(function(){wn._processNextAutoResend(n)}):wn._processNextAutoResend(n))},onDisconnect:function(){}})}return wa}return m(e,[{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return R.get(this._iid).container.appInfo}},{key:"isCacheEnabled",get:function(){return R.get(this._iid).container.localCacheEnabled}},{key:"ekey",get:function(){var e=R.get(this._iid).container.auth;return e?e.eKey:""}},{key:"getApplicationId",value:function(){return R.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Ra}},{key:"setDebugMode",value:function(e){Ra=e,X.mode=e?X.Mode.DEBUG:X.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return R.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&R.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getAutoResendQueue",value:function(){return R.get(this._iid).container.autoResendQueue}},{key:"getIsProcessingAutoResend",value:function(){return R.get(this._iid).container.isProcessingAutoResend}},{key:"setIsProcessingAutoResend",value:function(e){R.get(this._iid).set("isProcessingAutoResend",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=R.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=R.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=R.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"setOnlineListener",value:function(e){R.get(this._iid).container.onlineDetector.setOnlineListener(e)}},{key:"setOfflineListener",value:function(e){R.get(this._iid).container.onlineDetector.setOfflineListener(e)}},{key:"getMemoryStoreForDebugging",value:function(){var e=R.get(this._iid);return e.container.debugCache&&e.container.store instanceof Ut?e.container.store:null}},{key:"useMemoryAsDatabaseForDebugging",value:function(){var e=R.get(this._iid);e.container.debugCache=!0,e.container.store=new Ut}},{key:"useAsyncStorageAsDatabase",value:function(e){var n=R.get(this._iid);n.container.store=new Dt({AsyncStorage:e,encryption:n.container.encryption})}},{key:"useMMKVAsDatabase",value:function(e){var n=R.get(this._iid);n.container.store=new xt({MMKV:e,encryption:n.container.encryption})}},{key:"initializeDatabase",value:function(e,n){var t=this,r=R.get(this._iid),a=r.container,i=a.appId,s=a.nestdb,o=a.store,l=a.localCacheEnabled;return le(this._iid,function(n){if(l)if(s)n(null);else{var a=r.container.nestdb=new Qt({name:"sendbird=".concat(i,"-").concat(e,".db"),version:1,store:o});a.on("upgrade",function(e,n){0===e?a.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[Ke.NAME_ALPHABETICAL,Ke.CHRONOLOGICAL,Ke.LATEST_LAST_MESSAGE]},{collectionName:"SucceededMessage",keyName:"messageId",index:[Ye.LATEST,Ye.CHILD_MESSAGE_FIRST]},{collectionName:"UnsentMessage",keyName:"reqId",index:[Ye.LATEST_UNSENT,Ye.CHILD_MESSAGE_FIRST]}]).then(function(){return n()}).catch(function(e){throw e}):n()}),a.on("error",function(e){e?e.code===Hn.STORE_NOT_AVAILABLE||e.code===Hn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING?n(null):(X.error("Database initialize failed with an error: ",e),n(e)):n(null)}),a.on("success",function(){r.container.currentUserId=e,new Ze({iid:t._iid,collection:a.collection("GroupChannel")}),new ln({iid:t._iid,collections:{succeeded:a.collection("SucceededMessage"),unsent:a.collection("UnsentMessage")}}),X.debug("Database initialize succeeded."),n(null)}),a.open()}else r.container.currentUserId=e,new Ze({iid:t._iid,collection:null}),new ln({iid:t._iid,collections:{succeeded:null,unsent:null}}),n(null)},n)}},{key:"clearCachedData",value:function(){var e=R.get(this._iid),n=e.container,t=n.localCacheEnabled,r=n.nestdb;return new Promise(function(n,a){t&&r?(r.close(),r.reset().then(function(){X.debug("Database clear succeeded."),e.container.nestdb=null,n()}).catch(function(e){X.error("Database clear failed with an error: ",e),a(e)})):n()})}},{key:"connect",value:function(e,n,t,r,a){var i=this,s=R.get(this._iid),o=s.container,l=o.wsAdapter,u=o.onlineDetector,c=o.localCacheEnabled;Ta.removeAllSemaphoreKeys(),u&&u.start();var d=null,h=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new ye({type:"callback"})]),f=N(h,6);return d=f[0],e=f[1],n=f[2],t=f[3],r=f[4],a=f[5],(t||r)&&X.debug("Please note that apiHost and wsHost are for internal use only."),le(this._iid,function(a){if(d)a(d,null);else if(i.customApiHost=t,i.customWsHost=r,i.connecting=!0,i.reconnecting=!1,i.isReconnectingOnError=!1,i.reconnectTimer&&(clearTimeout(i.reconnectTimer),i.reconnectTimer=null,i.onReconnectTimerCancel=null),i.getConnectionState()===i.ConnectionState.OPEN&&i.currentUser&&i.currentUser.userId===e)i.connecting=!1,a(null,i.currentUser);else if(c&&(i._currentUserId=e),i.connectionCallbacks.push(a),1===i.connectionCallbacks.length){l.disconnect({clearSession:!0,err:null},null);var o=s.container,u=o.nestdb,h=o.localCacheLock;u?l.connect(e,n).then(function(){if(c)return wn._processNonAutoResendRegisteredPendingMessages(i)}):h.lock(function(t){i.initializeDatabase(e).then(function(){t(),l.connect(e,n)}).then(function(){if(c)return wn._processNonAutoResendRegisteredPendingMessages(i)}).catch(function(e){s.container.localCacheEnabled=!1,t(),a(e,null)})})}},a)}},{key:"reconnect",value:function(){var e=this,n=R.get(this._iid).container,t=n.wsAdapter,r=n.auth,a=n.localCacheLock;if(r.sessionKey&&this.currentUser){var i=!0;return t.reconnectCount>0&&(i=!1),a.lock(function(n){t.disconnect({clearSession:!1,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},null),t.reconnectCount=0,t.reconnect(e.currentUser.userId,i),n()}),!0}return!1}},{key:"disconnect",value:function(e){var n=this;return le(this._iid,function(e){var t=R.get(n._iid).container,r=t.localCacheLock,a=t.wsAdapter,i=t.onlineDetector;i&&i.stop(),r.lock(function(t){a.disconnect({clearSession:!0,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},function(){n.clearCachedData().finally(function(){t(),e(null)})})})},e)}},{key:"setBackgroundState",value:function(){var e=R.get(this._iid),n=e.container,t=n.wsAdapter,r=n.stateChangeEnabled;!n.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),t.disconnect({clearSession:!1,err:new F("Websocket connection failed as the app goes background.",F.WEBSOCKET_CONNECTION_FAILED)},null),fe.of(this._iid).invokeDisconnect()):e.set("closedByGoingBackground",!1))}},{key:"isInBackground",get:function(){return R.get(this._iid).container.isInBackground}},{key:"setForegroundState",value:function(){var e=R.get(this._iid),n=e.container,t=n.wsAdapter,r=n.stateChangeEnabled,a=n.isInBackground,i=n.closedByGoingBackground;a&&r&&(e.set("isInBackground",!1),i&&this.currentUser&&t.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,n){var t=R.get(this._iid).container,r=t.extensions;t.supportedExtensionKeys.indexOf(e)>-1&&(r[e]=n)}},{key:"createUserListQuery",value:function(e){return new(0,j.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,j.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,j.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,j.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,n){return new(0,j.get(this._iid).MessageSearchQuery)(e,n)}},{key:"sendCommand",value:function(e,n){var t=this;return le(this._iid,function(n){t.ConnectionManager.ready(function(r,a){if(r)n(r,null);else{var i=R.get(t._iid).container,s=i.wsAdapter,o=i.ackStateMap;if(null==s||null==s.client||s.client.getConnectionState()!==t.ConnectionState.OPEN||t.getConnectionState()!==t.ConnectionState.OPEN)return void n(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,u={handler:n,timer:setTimeout(function(){n(new F("Command received no ack.",F.ACK_TIMEOUT),null),delete o[l]},t.Options.websocketResponseTimeout)};o[l]=u,s.client.send(e,function(e){e&&(clearTimeout(u.timer),n(e,null))})}else s.client.send(e,n)}},!1)},n).catch(function(e){X.debug(e)})}},{key:"setSessionHandler",value:function(e){R.get(this._iid).container.sessionManager.setHandler(e)}},{key:"addUserEventHandler",value:function(e,n){n instanceof j.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=n)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,n){n instanceof j.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=n)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,n){n instanceof j.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=n)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){if(a)t(a,null);else{var i=R.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:n},function(a,s){var o=null;a||(r.currentUser&&(e&&(r.currentUser.nickname=e),n&&(r.currentUser.plainProfileUrl=n,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),o=r.currentUser),t(a,o)})}},t)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"file",nullable:!0}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){if(a)t(a,null);else{var i=R.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:n},function(n,a){var s=null;n||(r.currentUser&&(e&&(r.currentUser.nickname=e),a.profile_url&&(r.currentUser.plainProfileUrl=a.profile_url,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),s=r.currentUser),t(n,s)})}},t)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},function(r,a){var i=null;r||(t.currentUser&&e&&(t.currentUser._preferredLanguages=e),i=t.currentUser),n(r,i)})},n)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,t.pushTokenRegistrationState.ERROR):t.currentUser?R.get(t._iid).container.apiClient.registerGCMPushToken({token:e},function(e,r){var a=t.pushTokenRegistrationState.ERROR;e||(t.GCMPushToken="",a=t.pushTokenRegistrationState.SUCCESS),n(e,a)}):(t.GCMPushToken=e,n(null,t.pushTokenRegistrationState.PENDING))},n)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):t.currentUser?R.get(t._iid).container.apiClient.unregisterGCMPushToken({token:e},function(e,t){n(e,null)}):(t.GCMPushToken=e,n(null,t.pushTokenRegistrationState.PENDING))},n)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.unregisterAllGCMPushTokens({},function(n,t){e(n,null)})},e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,t.pushTokenRegistrationState.ERROR):t.currentUser?R.get(t._iid).container.apiClient.registerAPNSPushToken({token:e},function(e,r){var a=t.pushTokenRegistrationState.ERROR;e||(t.APNSPushToken="",a=t.pushTokenRegistrationState.SUCCESS),n(e,a)}):(t.APNSPushToken=e,n(null,t.pushTokenRegistrationState.PENDING))},n)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):t.currentUser?R.get(t._iid).container.apiClient.unregisterAPNSPushToken({token:e},function(e,t){n(e,null)}):(t.APNSPushToken=e,n(null,t.pushTokenRegistrationState.PENDING))},n)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.unregisterAllAPNSPushTokens({},function(n,t){e(n,null)})},e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.unregisterAllPushTokens({},function(n,t){e(n,null)})},e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"array",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new ye({type:"callback"})]),o=N(s,5);i=o[0],e=o[1],n=o[2],t=o[3],r=o[4];var l=j.get(this._iid),u=l.GroupChannelChangeLogsParams,c=null;if(i){var h=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:u,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),f=N(h,4);i=f[0],e=f[1],c=f[2],r=f[3]}else(c=new u).customTypes=n,c.includeEmpty=t,c.includeFrozen=!0;return le(this._iid,function(n){i?n(i,null):R.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:null,token:e},c)).then(function(e){var t=j.get(a._iid).GroupChannel,r=e.updated.map(function(e){return new t(e)}),i=e.deleted,s=e.has_more,o=e.next;n(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})}).catch(function(e){n(e,null)})},r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"array",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new ye({type:"callback"})]),o=N(s,5);i=o[0],e=o[1],n=o[2],t=o[3],r=o[4];var l=j.get(this._iid),u=l.GroupChannelChangeLogsParams,c=null;if(i){var h=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:u,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),f=N(h,4);i=f[0],e=f[1],c=f[2],r=f[3]}else(c=new u).customTypes=n,c.includeEmpty=t,c.includeFrozen=!0;return le(this._iid,function(n){i?n(i,null):R.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:e,token:null},c)).then(function(e){var t=j.get(a._iid).GroupChannel,r=e.updated.map(function(e){return new t(e)}),i=e.deleted,s=e.has_more,o=e.next;n(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})}).catch(function(e){n(e,null)})},r)}},{key:"getChannelInvitationPreference",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getChannelInvitationPreference({},function(n,t){var r=null;n||(r={autoAccept:t.auto_accept}),e(n,r)})},e)}},{key:"setChannelInvitationPreference",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},function(e,t){var r=null;e||(r={autoAccept:t.auto_accept}),n(e,r)})},n)}},{key:"getDoNotDisturb",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getDoNotDisturb({},function(n,t){var r=null;n||(r={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),e(n,r)})},e)}},{key:"setDoNotDisturb",value:function(e,n,t,r,a,i,s){var o=this,l=null,u=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new ye({type:"string"}),new ye({type:"callback"})]),c=N(u,8);return l=c[0],e=c[1],n=c[2],t=c[3],r=c[4],a=c[5],i=c[6],s=c[7],le(this._iid,function(s){l?s(l,null):R.get(o._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:n,startMin:t,endHour:r,endMin:a,timezone:i},function(e,n){var t=null;e||(t={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),s(e,t)})},s)}},{key:"getSnoozePeriod",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getSnoozePeriod({},function(n,t){var r=null;n||(r={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),e(n,r)})},e)}},{key:"setSnoozePeriod",value:function(e,n,t,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"number",constraint:function(e){return e>0}}),new ye({type:"number",constraint:function(e){return e>0}}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],n=o[2],t=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):R.get(a._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:n,endTs:t},function(e,n){var t=null;e||(t={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),r(e,t)})},r)}},{key:"blockUser",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new ye({type:"callback"})]),a=N(r,3);return t=a[0],e=a[1],n=a[2],t?le(this._iid,function(e){e(t,null)},n):this.blockUserWithUserId(e.userId,n)}},{key:"blockUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e&&(!t.currentUser||e!==t.currentUser.userId)}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.blockUser({blockedUserId:e},function(e,t){var r=null;e||(r=new pn(t)),n(e,r)})},n)}},{key:"unblockUser",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new ye({type:"callback"})]),a=N(r,3);return t=a[0],e=a[1],n=a[2],t?le(this._iid,function(e){e(t,null)},n):this.unblockUserWithUserId(e.userId,n)}},{key:"unblockUserWithUserId",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e&&(!t.currentUser||e!==t.currentUser.userId)}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.unblockUser({unblockedUserId:e},function(e,t){n(e,null)})},n)}},{key:"getPushTriggerOption",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getPushTriggerOption({},function(n,t){e(n,t?t.push_trigger_option:null)})},e)}},{key:"setPushTriggerOption",value:function(e,n){var t=this;return le(this._iid,function(n){Object.keys(t.PushTriggerOption).map(function(e){return t.PushTriggerOption[e]}).indexOf(e)>-1?R.get(t._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},function(e,t){n(e,t?t.push_trigger_option:null)}):n(ye.error,null)},n)}},{key:"getGroupChannelCount",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannel,i=null,s=ye.parse(arguments,[new ye({type:a.MemberStateFilter,optional:!0,defaultValue:a.MemberStateFilter.ALL}),new ye({type:"callback"})]),o=N(s,3);return i=o[0],e=o[1],n=o[2],le(this._iid,function(n){i?n(i,null):R.get(t._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},function(e,t){var r=null;e||(r=parseInt(t.group_channel_count)),n(e,r)})},n)}},{key:"getTotalUnreadChannelCount",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadChannelCountParams,s=null,o=ye.parse(arguments,[new ye({type:"object",optional:!0,defaultValue:null,constraint:function(e){return e instanceof i}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],n=l[2],le(this._iid,function(n){if(s)n(s,null);else{var r=null,i=a.SuperChannelFilter.ALL;e&&(r=e.channelCustomTypesFilter,i=e.superChannelFilter),R.get(t._iid).container.apiClient.getTotalUnreadChannelCount({customTypesFilter:r,superChannelFilter:i},function(e,t){var r=null;e||(r=parseInt(t.unread_count)),n(e,r)})}},n)}},{key:"getTotalUnreadMessageCount",value:function(e,n){var t=this,r=j.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadMessageCountParams,s=null,o=ye.parse(arguments,[new ye({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})||e instanceof i}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],n=l[2],le(this._iid,function(n){if(s)n(s,null);else{var r=a.SuperChannelFilter.ALL;if(e instanceof i){var o=e;e=o.channelCustomTypesFilter,r=o.superChannelFilter}R.get(t._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:r},function(e,t){var r=null;e||(r=parseInt(t.unread_count)),n(e,r)})}},n)}},{key:"getUnreadItemCount",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.length>0&&e.every(function(e){return Object.keys(ar.UnreadItemKey).map(function(e){return ar.UnreadItemKey[e]}).indexOf(e)>-1})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){if(r)n(r,null);else{var a=e.filter(function(n,t){return e.indexOf(n)===t});R.get(t._iid).container.apiClient.getUnreadItemCount({keys:a},function(e,t){n(e,t)})}},n)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var n=0;return Object.keys(e.custom_types).forEach(function(t){n+=e.custom_types[t]}),n}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var n=R.get(this._iid).container.subscribedUnreadMessageCount;return n.custom_types.hasOwnProperty(e)?n.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,n,t){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],n=s[2],t=s[3],le(this._iid,function(t){a?t(a,null):R.get(r._iid).container.apiClient.getPushTokens({ts:null,token:e,type:n},function(e,n){if(e)t(e,null);else{var r=n.type;t(null,{deviceTokens:n.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:n.has_more,token:n.token})}})},t)}},{key:"getPushTemplate",value:function(e){var n=this;return le(this._iid,function(e){R.get(n._iid).container.apiClient.getPushTemplate({},function(n,t){var r=null;n||(r=t.name.toString()),e(n,r)})},e)}},{key:"setPushTemplate",value:function(e,n){var t=this;return le(this._iid,function(n){[t.PUSH_TEMPLATE_DEFAULT,t.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?R.get(t._iid).container.apiClient.setPushTemplate({templateName:e},function(e,t){var r=null;e||(r=t.name.toString()),n(e,r)}):n(ye.error,null)},n)}},{key:"markAsReadAll",value:function(e){var n=this;return le(this._iid,function(e){var t=j.get(n._iid).GroupChannel,r=(new Date).getTime();r-t.markAsReadAllLastSentAt<1e3?e(new F("MarkAsRead rate limit exceeded.",F.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(t.markAsReadAllLastSentAt=r,R.get(n._iid).container.apiClient.markAsReadAll({channelUrls:null},function(a,i){a||Object.keys(t.cachedChannels).forEach(function(e){n.currentUser&&t.cachedChannels[e].updateReadReceipt(n.currentUser.userId,r),t.cachedChannels[e]._setGroupChannelUnreadCount(0,0)}),e(a,null)}))},e)}},{key:"markAsReadWithChannelUrls",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){if(r)n(r,null);else{var a=(new Date).getTime();R.get(t._iid).container.apiClient.markAsReadAll({channelUrls:e},function(r,i){r||e.forEach(function(e){ar.cachedChannels[e]&&(t.currentUser&&ar.cachedChannels[e].updateReadReceipt(t.currentUser.userId,a),ar.cachedChannels[e]._setGroupChannelUnreadCount(0,0))}),n(r,null)})}},n)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&j.get(this._iid).GroupChannel.getChannel(e,w.INTERNAL_CALL).then(function(e){return e.markAsDelivered()}).catch(function(e){return X.debug(e)})}},{key:"getFriendChangeLogsByToken",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getFriendChangeLogsByToken({token:e},function(e,r){var a=null;if(!e){var i=j.get(t._iid).User;a={updatedUsers:r.updated.map(function(e){return new i(e)}),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next}}n(e,a)})},n)}},{key:"uploadFriendDiscoveries",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return e.hasOwnProperty("friendDiscoveryKey")})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},function(e,t){n(e,t)})},n)}},{key:"deleteFriendDiscovery",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),a=N(r,3);return t=a[0],e=a[1],n=a[2],t?le(this._iid,function(e){e(t,null)},n):this.deleteFriendDiscoveries([e],n)}},{key:"deleteFriendDiscoveries",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},function(e,t){n(e,t)})},n)}},{key:"addFriends",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.addFriends({userIds:e},function(e,r){var a=null;if(!e){var i=j.get(t._iid).User;a=r.users.map(function(e){return new i(e)})}n(e,a)})},n)}},{key:"deleteFriend",value:function(e,n){var t=null,r=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),a=N(r,3);return t=a[0],e=a[1],n=a[2],t?le(this._iid,function(e){e(t,null)},n):this.deleteFriends([e],n)}},{key:"deleteFriends",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.deleteFriends({userIds:e},function(e,t){n(e,t)})},n)}},{key:"getAllEmoji",value:function(e){var n=this,t=null,r=ye.parse(arguments,[new ye({type:"callback"})]),a=N(r,2);return t=a[0],e=a[1],le(this._iid,function(e){t?e(t,null):R.get(n._iid).container.apiClient.getAllEmoji(function(t,r){if(t)e(t,null);else{var a=new(0,j.get(n._iid).EmojiContainer)(r);e(null,a)}})},e)}},{key:"getEmojiCategory",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getEmojiCategory({categoryId:e},function(e,r){if(e)n(e,null);else{var a=new(0,j.get(t._iid).EmojiCategory)(r);n(null,a)}})},n)}},{key:"getEmoji",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.getEmoji({emojiKey:e},function(e,r){if(e)n(e,null);else{var a=new(0,j.get(t._iid).Emoji)(r);n(null,a)}})},n)}},{key:"getAllowFriendDiscovery",value:function(e){var n=this,t=null,r=ye.parse(arguments,[new ye({type:"callback"})]),a=N(r,2);return t=a[0],e=a[1],le(this._iid,function(e){t?e(t,null):R.get(n._iid).container.apiClient.getAllowFriendDiscovery(function(n,t){var r=t.allow_friend_discovery;n?e(n,null):e(null,r)})},e)}},{key:"setAllowFriendDiscovery",value:function(e,n){var t=this,r=null,a=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],n=i[2],le(this._iid,function(n){r?n(r,null):R.get(t._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},function(t,r){t?n(t,null):n(null,e)})},n)}},{key:"clearCachedMessages",value:function(e){var n=this,t=ln.of(this._iid);if(t){var r=R.get(this._iid).container.store;return Promise.all(e.map(function(e){return new Promise(function(a,i){t.clearByChannelUrl(e).then(function(){var t=_n(n._currentUserId,e);return r.remove(t)}).then(function(){var t=En(n._currentUserId,e);return r.remove(t)}).then(function(){a()}).catch(function(e){i(e)})})}))}return Promise.resolve([])}},{key:"_getCurrentUserDataKey",value:function(){return"sendbird:".concat(this._currentUserId,"@currentUserData")}},{key:"_populateVaultFromCurrentUserData",value:function(e){var n=R.get(this._iid),t=n.container.auth,r=j.get(this._iid).User,a=e.currentUser,i=e.maxUnreadCountOfSuperGroupChannel,s=e.profileImageEncryption,o=e.sessionKey,l=e.eKey,u=e.appInfo,c=e.connectedAt,d=e.firstConnectedAt,h=e.concurrentCallLimit,f=e.backOffDelay;a&&(this.currentUser=r.buildFromSerializedData(a)),i&&n.set("maxUnreadCountOfSuperGroupChannel",i),s&&n.set("profileImageEncryption",s),t?(o&&(t.sessionKey=o),l&&(t.ekey=l)):X.debug("Auth should have been created when populating current user data."),u&&n.set("appInfo",new Te(u)),c&&n.set("connectedAt",c),d&&n.set("firstConnectedAt",d),h&&n.set("concurrentCallLimit",h),f&&n.set("backOffDelay",f)}}],[{key:"version",get:function(){return w.SDK_VERSION}},{key:"LogLevel",get:function(){return X.supportedLogLevels}},{key:"getInstance",value:function(e){return e?Ia[e]:wa}},{key:"getLogLevel",value:function(){return X.logLevel}},{key:"setLogLevel",value:function(e){var n=Object.values(X.supportedLogLevels);if(n.includes(e))X.logLevel=e;else{X.logLevel=X.defaultLogLevel;var t=n.map(function(e){return"'".concat(e,"'")}).join(", ");X.warn("`logLevel` parameter should be one of","".concat(t,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(X.defaultLogLevel,"`."))}}},{key:"getAppVersion",value:function(){return ka}},{key:"setAppVersion",value:function(e){"string"==typeof e&&ee()&&(ka=e)}}]),e}();return Ma}(t(33),t(52),t(53))}).call(this,t(11),t(12).Buffer,t(13))},function(e,n,t){"use strict";(function(n){var r=t(2),a=t(39),i=t(4),s=t(16),o=t(17),l={"Content-Type":"application/x-www-form-urlencoded"};function u(e,n){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var c={transitional:s,adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=t(18):"undefined"!==typeof n&&"[object process]"===Object.prototype.toString.call(n)&&(e=t(18)),e}(),transformRequest:[function(e,n){if(a(n,"Accept"),a(n,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return u(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var t,i=r.isObject(e),s=n&&n["Content-Type"];if((t=r.isFileList(e))||i&&"multipart/form-data"===s){var l=this.env&&this.env.FormData;return o(t?{"files[]":e}:e,l&&new l)}return i||"application/json"===s?(u(n,"application/json"),function(e,n,t){if(r.isString(e))try{return(n||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var n=this.transitional||c.transitional,t=n&&n.silentJSONParsing,a=n&&n.forcedJSONParsing,s=!t&&"json"===this.responseType;if(s||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s){if("SyntaxError"===o.name)throw i.from(o,i.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:t(47)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){c.headers[e]={}}),r.forEach(["post","put","patch"],function(e){c.headers[e]=r.merge(l)}),e.exports=c}).call(this,t(11))},function(e,n,t){"use strict";e.exports=t(28)},function(e,n){var t,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=o(h);c=!0;for(var n=u.length;n;){for(l=u,u=[];++d<n;)l&&l[d].run();d=-1,n=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(n){try{return r.call(null,e)}catch(n){return r.call(this,e)}}}(e)}}function p(e,n){this.fun=e,this.array=n}function m(){}a.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];u.push(new p(e,n)),1!==u.length||c||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,n,t){"use strict";(function(e){var r=t(30),a=t(31),i=t(32);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,n){if(s()<n)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n)).__proto__=l.prototype:(null===e&&(e=new l(n)),e.length=n),e}function l(e,n,t){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,n,t);if("number"===typeof e){if("string"===typeof n)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,n,t)}function u(e,n,t,r){if("number"===typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&n instanceof ArrayBuffer?function(e,n,t,r){if(n.byteLength,t<0||n.byteLength<t)throw new RangeError("'offset' is out of bounds");if(n.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");n=void 0===t&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,t):new Uint8Array(n,t,r);l.TYPED_ARRAY_SUPPORT?(e=n).__proto__=l.prototype:e=h(e,n);return e}(e,n,t,r):"string"===typeof n?function(e,n,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(n,t),a=(e=o(e,r)).write(n,t);a!==r&&(e=e.slice(0,a));return e}(e,n,t):function(e,n){if(l.isBuffer(n)){var t=0|f(n.length);return 0===(e=o(e,t)).length?e:(n.copy(e,0,0,t),e)}if(n){if("undefined"!==typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!==typeof n.length||(r=n.length)!==r?o(e,0):h(e,n);if("Buffer"===n.type&&i(n.data))return h(e,n.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,n)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,n){if(c(n),e=o(e,n<0?0:0|f(n)),!l.TYPED_ARRAY_SUPPORT)for(var t=0;t<n;++t)e[t]=0;return e}function h(e,n){var t=n.length<0?0:0|f(n.length);e=o(e,t);for(var r=0;r<t;r+=1)e[r]=255&n[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,n){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return j(e).length;default:if(r)return G(e).length;n=(""+n).toLowerCase(),r=!0}}function m(e,n,t){var r=e[n];e[n]=e[t],e[t]=r}function g(e,n,t,r,a){if(0===e.length)return-1;if("string"===typeof t?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=a?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(a)return-1;t=e.length-1}else if(t<0){if(!a)return-1;t=0}if("string"===typeof n&&(n=l.from(n,r)),l.isBuffer(n))return 0===n.length?-1:_(e,n,t,r,a);if("number"===typeof n)return n&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,n,t):Uint8Array.prototype.lastIndexOf.call(e,n,t):_(e,[n],t,r,a);throw new TypeError("val must be string, number or Buffer")}function _(e,n,t,r,a){var i,s=1,o=e.length,l=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||n.length<2)return-1;s=2,o/=2,l/=2,t/=2}function u(e,n){return 1===s?e[n]:e.readUInt16BE(n*s)}if(a){var c=-1;for(i=t;i<o;i++)if(u(e,i)===u(n,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(t+l>o&&(t=o-l),i=t;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(u(e,i+h)!==u(n,h)){d=!1;break}if(d)return i}return-1}function y(e,n,t,r){t=Number(t)||0;var a=e.length-t;r?(r=Number(r))>a&&(r=a):r=a;var i=n.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(n.substr(2*s,2),16);if(isNaN(o))return s;e[t+s]=o}return s}function v(e,n,t,r){return B(G(n,e.length-t),e,t,r)}function E(e,n,t,r){return B(function(e){for(var n=[],t=0;t<e.length;++t)n.push(255&e.charCodeAt(t));return n}(n),e,t,r)}function b(e,n,t,r){return E(e,n,t,r)}function C(e,n,t,r){return B(j(n),e,t,r)}function N(e,n,t,r){return B(function(e,n){for(var t,r,a,i=[],s=0;s<e.length&&!((n-=2)<0);++s)t=e.charCodeAt(s),r=t>>8,a=t%256,i.push(a),i.push(r);return i}(n,e.length-t),e,t,r)}function S(e,n,t){return 0===n&&t===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(n,t))}function O(e,n,t){t=Math.min(e.length,t);for(var r=[],a=n;a<t;){var i,s,o,l,u=e[a],c=null,d=u>239?4:u>223?3:u>191?2:1;if(a+d<=t)switch(d){case 1:u<128&&(c=u);break;case 2:128===(192&(i=e[a+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[a+1],s=e[a+2],128===(192&i)&&128===(192&s)&&(l=(15&u)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[a+1],s=e[a+2],o=e[a+3],128===(192&i)&&128===(192&s)&&128===(192&o)&&(l=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=d}return function(e){var n=e.length;if(n<=T)return String.fromCharCode.apply(String,e);var t="",r=0;for(;r<n;)t+=String.fromCharCode.apply(String,e.slice(r,r+=T));return t}(r)}n.Buffer=l,n.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},n.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}(),n.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,n,t){return u(null,e,n,t)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,n,t){return function(e,n,t,r){return c(n),n<=0?o(e,n):void 0!==t?"string"===typeof r?o(e,n).fill(t,r):o(e,n).fill(t):o(e,n)}(null,e,n,t)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,n){if(!l.isBuffer(e)||!l.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var t=e.length,r=n.length,a=0,i=Math.min(t,r);a<i;++a)if(e[a]!==n[a]){t=e[a],r=n[a];break}return t<r?-1:r<t?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,n){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var t;if(void 0===n)for(n=0,t=0;t<e.length;++t)n+=e[t].length;var r=l.allocUnsafe(n),a=0;for(t=0;t<e.length;++t){var s=e[t];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)m(this,n,n+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)m(this,n,n+3),m(this,n+1,n+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)m(this,n,n+7),m(this,n+1,n+6),m(this,n+2,n+5),m(this,n+3,n+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):function(e,n,t){var r=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,n,t);case"utf8":case"utf-8":return O(this,n,t);case"ascii":return A(this,n,t);case"latin1":case"binary":return w(this,n,t);case"base64":return S(this,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,n,t);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,n,t,r,a){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===t&&(t=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),n<0||t>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&n>=t)return 0;if(r>=a)return-1;if(n>=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),s=(t>>>=0)-(n>>>=0),o=Math.min(i,s),u=this.slice(r,a),c=e.slice(n,t),d=0;d<o;++d)if(u[d]!==c[d]){i=u[d],s=c[d];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,n,t){return-1!==this.indexOf(e,n,t)},l.prototype.indexOf=function(e,n,t){return g(this,e,n,t,!0)},l.prototype.lastIndexOf=function(e,n,t){return g(this,e,n,t,!1)},l.prototype.write=function(e,n,t,r){if(void 0===n)r="utf8",t=this.length,n=0;else if(void 0===t&&"string"===typeof n)r=n,t=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(t)?(t|=0,void 0===r&&(r="utf8")):(r=t,t=void 0)}var a=this.length-n;if((void 0===t||t>a)&&(t=a),e.length>0&&(t<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,n,t);case"utf8":case"utf-8":return v(this,e,n,t);case"ascii":return E(this,e,n,t);case"latin1":case"binary":return b(this,e,n,t);case"base64":return C(this,e,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function A(e,n,t){var r="";t=Math.min(e.length,t);for(var a=n;a<t;++a)r+=String.fromCharCode(127&e[a]);return r}function w(e,n,t){var r="";t=Math.min(e.length,t);for(var a=n;a<t;++a)r+=String.fromCharCode(e[a]);return r}function I(e,n,t){var r=e.length;(!n||n<0)&&(n=0),(!t||t<0||t>r)&&(t=r);for(var a="",i=n;i<t;++i)a+=H(e[i]);return a}function R(e,n,t){for(var r=e.slice(n,t),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function k(e,n,t){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+n>t)throw new RangeError("Trying to access beyond buffer length")}function M(e,n,t,r,a,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<i)throw new RangeError('"value" argument is out of bounds');if(t+r>e.length)throw new RangeError("Index out of range")}function U(e,n,t,r){n<0&&(n=65535+n+1);for(var a=0,i=Math.min(e.length-t,2);a<i;++a)e[t+a]=(n&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function L(e,n,t,r){n<0&&(n=4294967295+n+1);for(var a=0,i=Math.min(e.length-t,4);a<i;++a)e[t+a]=n>>>8*(r?a:3-a)&255}function P(e,n,t,r,a,i){if(t+r>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function D(e,n,t,r,i){return i||P(e,0,t,4),a.write(e,n,t,r,23,4),t+4}function x(e,n,t,r,i){return i||P(e,0,t,8),a.write(e,n,t,r,52,8),t+8}l.prototype.slice=function(e,n){var t,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e),l.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,n)).__proto__=l.prototype;else{var a=n-e;t=new l(a,void 0);for(var i=0;i<a;++i)t[i]=this[i+e]}return t},l.prototype.readUIntLE=function(e,n,t){e|=0,n|=0,t||k(e,n,this.length);for(var r=this[e],a=1,i=0;++i<n&&(a*=256);)r+=this[e+i]*a;return r},l.prototype.readUIntBE=function(e,n,t){e|=0,n|=0,t||k(e,n,this.length);for(var r=this[e+--n],a=1;n>0&&(a*=256);)r+=this[e+--n]*a;return r},l.prototype.readUInt8=function(e,n){return n||k(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,n){return n||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,n){return n||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,n){return n||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,n){return n||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,n,t){e|=0,n|=0,t||k(e,n,this.length);for(var r=this[e],a=1,i=0;++i<n&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*n)),r},l.prototype.readIntBE=function(e,n,t){e|=0,n|=0,t||k(e,n,this.length);for(var r=n,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*n)),i},l.prototype.readInt8=function(e,n){return n||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,n){n||k(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},l.prototype.readInt16BE=function(e,n){n||k(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},l.prototype.readInt32LE=function(e,n){return n||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,n){return n||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,n){return n||k(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,n){return n||k(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,n){return n||k(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,n){return n||k(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,n,t,r){(e=+e,n|=0,t|=0,r)||M(this,e,n,t,Math.pow(2,8*t)-1,0);var a=1,i=0;for(this[n]=255&e;++i<t&&(a*=256);)this[n+i]=e/a&255;return n+t},l.prototype.writeUIntBE=function(e,n,t,r){(e=+e,n|=0,t|=0,r)||M(this,e,n,t,Math.pow(2,8*t)-1,0);var a=t-1,i=1;for(this[n+a]=255&e;--a>=0&&(i*=256);)this[n+a]=e/i&255;return n+t},l.prototype.writeUInt8=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},l.prototype.writeUInt16LE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):U(this,e,n,!0),n+2},l.prototype.writeUInt16BE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):U(this,e,n,!1),n+2},l.prototype.writeUInt32LE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):L(this,e,n,!0),n+4},l.prototype.writeUInt32BE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):L(this,e,n,!1),n+4},l.prototype.writeIntLE=function(e,n,t,r){if(e=+e,n|=0,!r){var a=Math.pow(2,8*t-1);M(this,e,n,t,a-1,-a)}var i=0,s=1,o=0;for(this[n]=255&e;++i<t&&(s*=256);)e<0&&0===o&&0!==this[n+i-1]&&(o=1),this[n+i]=(e/s>>0)-o&255;return n+t},l.prototype.writeIntBE=function(e,n,t,r){if(e=+e,n|=0,!r){var a=Math.pow(2,8*t-1);M(this,e,n,t,a-1,-a)}var i=t-1,s=1,o=0;for(this[n+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[n+i+1]&&(o=1),this[n+i]=(e/s>>0)-o&255;return n+t},l.prototype.writeInt8=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},l.prototype.writeInt16LE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):U(this,e,n,!0),n+2},l.prototype.writeInt16BE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):U(this,e,n,!1),n+2},l.prototype.writeInt32LE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):L(this,e,n,!0),n+4},l.prototype.writeInt32BE=function(e,n,t){return e=+e,n|=0,t||M(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):L(this,e,n,!1),n+4},l.prototype.writeFloatLE=function(e,n,t){return D(this,e,n,!0,t)},l.prototype.writeFloatBE=function(e,n,t){return D(this,e,n,!1,t)},l.prototype.writeDoubleLE=function(e,n,t){return x(this,e,n,!0,t)},l.prototype.writeDoubleBE=function(e,n,t){return x(this,e,n,!1,t)},l.prototype.copy=function(e,n,t,r){if(t||(t=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<t&&(r=t),r===t)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-t&&(r=e.length-n+t);var a,i=r-t;if(this===e&&t<n&&n<r)for(a=i-1;a>=0;--a)e[a+n]=this[a+t];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+n]=this[a+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+i),n);return i},l.prototype.fill=function(e,n,t,r){if("string"===typeof e){if("string"===typeof n?(r=n,n=0,t=this.length):"string"===typeof t&&(r=t,t=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(n<0||this.length<n||this.length<t)throw new RangeError("Out of range index");if(t<=n)return this;var i;if(n>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"===typeof e)for(i=n;i<t;++i)this[i]=e;else{var s=l.isBuffer(e)?e:G(new l(e,r).toString()),o=s.length;for(i=0;i<t-n;++i)this[i+n]=s[i%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,n){var t;n=n||1/0;for(var r=e.length,a=null,i=[],s=0;s<r;++s){if((t=e.charCodeAt(s))>55295&&t<57344){if(!a){if(t>56319){(n-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(n-=3)>-1&&i.push(239,191,189);continue}a=t;continue}if(t<56320){(n-=3)>-1&&i.push(239,191,189),a=t;continue}t=65536+(a-55296<<10|t-56320)}else a&&(n-=3)>-1&&i.push(239,191,189);if(a=null,t<128){if((n-=1)<0)break;i.push(t)}else if(t<2048){if((n-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((n-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function j(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function B(e,n,t,r){for(var a=0;a<r&&!(a+t>=n.length||a>=e.length);++a)n[a+t]=e[a];return a}}).call(this,t(13))},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(r){"object"===typeof window&&(t=window)}e.exports=t},function(e,n,t){"use strict";e.exports=function(e,n){return function(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return e.apply(n,t)}}},function(e,n,t){"use strict";var r=t(2);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,n,t){if(!n)return e;var i;if(t)i=t(n);else if(r.isURLSearchParams(n))i=n.toString();else{var s=[];r.forEach(n,function(e,n){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?n+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(n)+"="+a(e))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,n,t){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(e,n,t){"use strict";(function(n){var r=t(2);e.exports=function(e,t){t=t||new FormData;var a=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):n.from(e):e}return function e(n,s){if(r.isPlainObject(n)||r.isArray(n)){if(-1!==a.indexOf(n))throw Error("Circular reference detected in "+s);a.push(n),r.forEach(n,function(n,a){if(!r.isUndefined(n)){var o,l=s?s+"."+a:a;if(n&&!s&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(o=r.toArray(n)))return void o.forEach(function(e){!r.isUndefined(e)&&t.append(l,i(e))});e(n,l)}}),a.pop()}else t.append(s,i(n))}(e),t}}).call(this,t(12).Buffer)},function(e,n,t){"use strict";var r=t(2),a=t(40),i=t(41),s=t(15),o=t(19),l=t(44),u=t(45),c=t(16),d=t(4),h=t(7),f=t(46);e.exports=function(e){return new Promise(function(n,t){var p,m=e.data,g=e.headers,_=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(E+":"+b)}var C=o(e.baseURL,e.url);function N(){if(v){var r="getAllResponseHeaders"in v?l(v.getAllResponseHeaders()):null,i={data:_&&"text"!==_&&"json"!==_?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};a(function(e){n(e),y()},function(e){t(e),y()},i),v=null}}if(v.open(e.method.toUpperCase(),s(C,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=N:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(N)},v.onabort=function(){v&&(t(new d("Request aborted",d.ECONNABORTED,e,v)),v=null)},v.onerror=function(){t(new d("Network Error",d.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var n=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||c;e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(new d(n,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,v)),v=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||u(C))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;S&&(g[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&r.forEach(g,function(e,n){"undefined"===typeof m&&"content-type"===n.toLowerCase()?delete g[n]:v.setRequestHeader(n,e)}),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),_&&"json"!==_&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(t(!e||e&&e.type?new h:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null);var O=f(C);O&&-1===["http","https","file"].indexOf(O)?t(new d("Unsupported protocol "+O+":",d.ERR_BAD_REQUEST,e)):v.send(m)})}},function(e,n,t){"use strict";var r=t(42),a=t(43);e.exports=function(e,n){return e&&!r(n)?a(e,n):n}},function(e,n,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,n,t){"use strict";var r=t(2);e.exports=function(e,n){n=n||{};var t={};function a(e,n){return r.isPlainObject(e)&&r.isPlainObject(n)?r.merge(e,n):r.isPlainObject(n)?r.merge({},n):r.isArray(n)?n.slice():n}function i(t){return r.isUndefined(n[t])?r.isUndefined(e[t])?void 0:a(void 0,e[t]):a(e[t],n[t])}function s(e){if(!r.isUndefined(n[e]))return a(void 0,n[e])}function o(t){return r.isUndefined(n[t])?r.isUndefined(e[t])?void 0:a(void 0,e[t]):a(void 0,n[t])}function l(t){return t in n?a(e[t],n[t]):t in e?a(void 0,e[t]):void 0}var u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(n)),function(e){var n=u[e]||i,a=n(e);r.isUndefined(a)&&n!==l||(t[e]=a)}),t}},function(e,n){e.exports={version:"0.27.2"}},function(e,n,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(27)},function(e,n,t){"use strict";var r=t(0),a=t.n(r);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){c(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,n,t){return n&&l(e.prototype,n),t&&l(e,t),e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&f(e,n)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,n){return(f=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,r=h(e);if(n){var a=h(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return function(e,n){if(n&&("object"===typeof n||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,t)}}function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}(e,n)||y(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,n){if(e){if("string"===typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var E=a.a.createContext(),b=function(e,n){var t=function(t){return a.a.createElement(E.Consumer,null,function(r){n&&"function"!==typeof n&&console.warn("Second parameter to withSendbirdContext must be a pure function");var i=s(s({},n&&"function"===typeof n?n(r):r),t);return a.a.createElement(e,i)})},r=e.displayName||e.name||"Component";return t.displayName="SendbirdAware".concat(r),t},C=function(){return(C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function N(e,n,t){if(t||2===arguments.length)for(var r,a=0,i=n.length;a<i;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}var S=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},O=function(){return{en:{OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete this channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",TRYING_TO_CONNECT:"Trying to connect\u2026",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you are being muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned members",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BADGE__OVER:"+",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTEC:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__SELECTED:"selected",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",MESSAGE_EDITED:"(edited)",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete"}}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en"]},T=a.a.createContext({stringSet:O("en")}),A=function(e){var n=e.children;return a.a.createElement(T.Provider,{value:e},n)},w=t(1),I=t.n(w),R=t(8),k=t.n(R),M="INIT_USER",U="RESET_USER",L="UPDATE_USER_INFO";function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],a=Array.apply(null,Array(r.length)).map(function(e){return null});function i(e){var n="string"===typeof e,t=n&&"<"===e.trim().charAt(0);return n&&!t}function s(e,n){t.onError(e,r[n],n)}function o(e,n){var i=t.onSuccess(e,r[n],n);e=!1===i?"":i||e,a[n]=e,-1===a.indexOf(null)&&t.onComplete(a)}var l=document.createElement("a");r.forEach(function(e,n){if(l.setAttribute("href",e),l.href=String(l.href),Boolean(document.all&&!window.atob)&&l.host.split(":")[0]!==location.host.split(":")[0]){if(l.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",e),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var e=r.responseText;i(e)?o(e,n):s(r,n)},r.onerror=function(e){s(r,n)},setTimeout(function(){r.send()},0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(e,")")),s(null,n)}else{var a=new XMLHttpRequest;a.open("GET",e),t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.onBeforeSend(a,e,n),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText;a.status<400&&i(e)?o(e,n):0===a.status&&i(e)?o(e,n):s(a,n)}},a.send()}})}function x(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},t={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:!1!==e.skipDisabled,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,t.rootElement.querySelectorAll(t.include)).filter(function(e){return n=e,r=t.exclude,!(n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector).call(n,r);var n,r}),a=Array.apply(null,Array(r.length)).map(function(e){return null});function i(){if(-1===a.indexOf(null)){a.reduce(function(e,n,t){return""===n&&e.push(t),e},[]).reverse().forEach(function(e){return[r,a].forEach(function(n){return n.splice(e,1)})});var e=a.join("");t.onComplete(e,a,r)}}function s(e,n,r,s){var l=t.onSuccess(e,r,s);(function e(n,r,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var u=o(n,a,l);u.rules.length?D(u.absoluteUrls,{onBeforeSend:function(e,n,a){t.onBeforeSend(e,r,n)},onSuccess:function(e,n,a){var i=t.onSuccess(e,r,n),s=o(e=!1===i?"":i||e,n,l);return s.rules.forEach(function(n,t){e=e.replace(n,s.absoluteRules[t])}),e},onError:function(t,o,c){s.push({xhr:t,url:o}),l.push(u.rules[c]),e(n,r,a,i,s,l)},onComplete:function(t){t.forEach(function(e,t){n=n.replace(u.rules[t],e)}),e(n,r,a,i,s,l)}}):i(n,s)})(e=void 0!==l&&!1===Boolean(l)?"":l||e,r,s,function(e,s){null===a[n]&&(s.forEach(function(e){return t.onError(e.xhr,r,e.url)}),!t.filter||t.filter.test(e)?a[n]=e:a[n]="",i())})}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};return a.rules=(e.replace(n.cssComments,"").match(n.cssImports)||[]).filter(function(e){return-1===r.indexOf(e)}),a.urls=a.rules.map(function(e){return e.replace(n.cssImports,"$1")}),a.absoluteUrls=a.urls.map(function(e){return F(e,t)}),a.absoluteRules=a.rules.map(function(e,n){var r=a.urls[n],i=F(a.absoluteUrls[n],t);return e.replace(r,i)}),a}r.length?r.forEach(function(e,n){var r=e.getAttribute("href"),o=e.getAttribute("rel"),l="link"===e.nodeName.toLowerCase()&&r&&o&&-1!==o.toLowerCase().indexOf("stylesheet"),u=!1!==t.skipDisabled&&e.disabled,c="style"===e.nodeName.toLowerCase();if(l&&!u)if(-1!==r.indexOf("data:text/css")){var d=decodeURIComponent(r.substring(r.indexOf(",")+1));t.useCSSOM&&(d=Array.apply(null,e.sheet.cssRules).map(function(e){return e.cssText}).join("")),s(d,n,e,location.href)}else D(r,{mimeType:"text/css",onBeforeSend:function(n,r,a){t.onBeforeSend(n,e,r)},onSuccess:function(t,a,i){var o=F(r);s(t,n,e,o)},onError:function(r,s,o){a[n]="",t.onError(r,e,s),i()}});else if(c&&!u){var h=e.textContent;t.useCSSOM&&(h=Array.apply(null,e.sheet.cssRules).map(function(e){return e.cssText}).join("")),s(h,n,e,location.href)}else a[n]="",i()}):t.onComplete("",[])}function F(e,n){var t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),a=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(a),r.href=n||document.baseURI||(document.querySelector("base")||{}).href||location.href,a.href=e,a.href}var H=G;function G(e,n,t){e instanceof RegExp&&(e=j(e,t)),n instanceof RegExp&&(n=j(n,t));var r=B(e,n,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+e.length,r[1]),post:t.slice(r[1]+n.length)}}function j(e,n){var t=n.match(e);return t?t[0]:null}function B(e,n,t){var r,a,i,s,o,l=t.indexOf(e),u=t.indexOf(n,l+1),c=l;if(l>=0&&u>0){if(e===n)return[l,u];for(r=[],i=t.length;c>=0&&!o;)c==l?(r.push(c),l=t.indexOf(e,c+1)):1==r.length?o=[r.pop(),u]:((a=r.pop())<i&&(i=a,s=u),u=t.indexOf(n,c+1)),c=l<u&&l>=0?l:u;r.length&&(o=[i,s])}return o}function z(e){var n=P({},{preserveStatic:!0,removeComments:!1},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});function t(e){throw new Error("CSS parse error: ".concat(e))}function r(n){var t=n.exec(e);if(t)return e=e.slice(t[0].length),t}function a(){return r(/^{\s*/)}function i(){return r(/^}/)}function s(){r(/^\s*/)}function o(){if(s(),"/"===e[0]&&"*"===e[1]){for(var n=2;e[n]&&("*"!==e[n]||"/"!==e[n+1]);)n++;if(!e[n])return t("end of comment is missing");var r=e.slice(2,n);return e=e.slice(n+2),{type:"comment",comment:r}}}function l(){for(var e,t=[];e=o();)t.push(e);return n.removeComments?[]:t}function u(){for(s();"}"===e[0];)t("extra closing bracket");var n=r(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(n){var a,i=n[0].trim();/\/\*/.test(i)&&(i=i.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var o=/["']\w*,\w*["']/.test(i);return o&&(i=i.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"\u200c")})),a=/,/.test(i)?i.split(/\s*(?![^(]*\)),\s*/):[i],o&&(a=a.map(function(e){return e.replace(/\u200C/g,",")})),a}}function c(){if("@"===e[0])return f();r(/^([;\s]*)+/);var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,a=r(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(a){if(a=a[0].trim(),!r(/^:\s*/))return t("property missing ':'");var i=r(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),s={type:"declaration",property:a.replace(n,""),value:i?i[0].replace(n,"").trim():""};return r(/^[;\s]*/),s}}function d(){if(!a())return t("missing '{'");for(var e,n=l();e=c();)n.push(e),n=n.concat(l());return i()?n:t("missing '}'")}function h(){s();for(var e,n=[];e=r(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)n.push(e[1]),r(/^,\s*/);if(n.length)return{type:"keyframe",values:n,declarations:d()}}function f(){if(s(),"@"===e[0]){var o=function(){var e=r(/^@(import|charset|namespace)\s*([^;]+);/);if(e)return{type:e[1],name:e[2].trim()}}()||function(){if(r(/^@font-face\s*/))return{type:"font-face",declarations:d()}}()||function(){var e=r(/^@media([^{]+)*/);if(e)return{type:"media",media:(e[1]||"").trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?keyframes\s*/);if(e){var n=e[1];if(!(e=r(/^([-\w]+)\s*/)))return t("@keyframes missing name");var s,o=e[1];if(!a())return t("@keyframes missing '{'");for(var u=l();s=h();)u.push(s),u=u.concat(l());return i()?{type:"keyframes",name:o,vendor:n,keyframes:u}:t("@keyframes missing '}'")}}()||function(){var e=r(/^@supports *([^{]+)/);if(e)return{type:"supports",supports:e[1].trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?document *([^{]+)/);if(e)return{type:"document",document:e[2].trim(),vendor:e[1]?e[1].trim():null,rules:m()}}()||function(){var e=r(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return{type:"custom-media",name:e[1].trim(),media:e[2].trim()}}()||function(){if(r(/^@host\s*/))return{type:"host",rules:m()}}()||function(){if(r(/^@page */))return{type:"page",selectors:u()||[],declarations:d()}}()||function(){var e=r(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(e)return{type:"page-margin-box",name:"".concat(e[1],"-").concat(e[2])+(e[3]?"-".concat(e[3]):""),declarations:d()}}();if(o&&!n.preserveStatic){var c=!1;if(o.declarations)c=o.declarations.some(function(e){return/var\(/.test(e.value)});else c=(o.keyframes||o.rules||[]).some(function(e){return(e.declarations||[]).some(function(e){return/var\(/.test(e.value)})});return c?o:{}}return o}}function p(){if(!n.preserveStatic){var r=H("{","}",e);if(r){var a=/:(?:root|host)(?![.:#(])/.test(r.pre)&&/--\S*\s*:/.test(r.body),i=/var\(/.test(r.body);if(!a&&!i)return e=e.slice(r.end+1),{}}}var s=u()||[],o=n.preserveStatic?d():d().filter(function(e){var n=s.some(function(e){return/:(?:root|host)(?![.:#(])/.test(e)})&&/^--\S/.test(e.property),t=/var\(/.test(e.value);return n||t});return s.length||t("selector missing"),{type:"rule",selectors:s,declarations:o}}function m(n){if(!n&&!a())return t("missing '{'");for(var r,s=l();e.length&&(n||"}"!==e[0])&&(r=f()||p());)r.type&&s.push(r),s=s.concat(l());return n||i()?s:t("missing '}'")}return{type:"stylesheet",stylesheet:{rules:m(!0),errors:[]}}}function V(e){var n=P({},{parseHost:!1,store:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t=new RegExp(":".concat(n.parseHost?"host":"root","$"));return"string"===typeof e&&(e=z(e,n)),e.stylesheet.rules.forEach(function(e){"rule"===e.type&&e.selectors.some(function(e){return t.test(e)})&&e.declarations.forEach(function(e,t){var r=e.property,a=e.value;r&&0===r.indexOf("--")&&(n.store[r]=a)})}),n.store}function q(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,r={charset:function(e){return"@charset "+e.name+";"},comment:function(e){return 0===e.comment.indexOf("__CSSVARSPONYFILL")?"/*"+e.comment+"*/":""},"custom-media":function(e){return"@custom-media "+e.name+" "+e.media+";"},declaration:function(e){return e.property+":"+e.value+";"},document:function(e){return"@"+(e.vendor||"")+"document "+e.document+"{"+a(e.rules)+"}"},"font-face":function(e){return"@font-face{"+a(e.declarations)+"}"},host:function(e){return"@host{"+a(e.rules)+"}"},import:function(e){return"@import "+e.name+";"},keyframe:function(e){return e.values.join(",")+"{"+a(e.declarations)+"}"},keyframes:function(e){return"@"+(e.vendor||"")+"keyframes "+e.name+"{"+a(e.keyframes)+"}"},media:function(e){return"@media "+e.media+"{"+a(e.rules)+"}"},namespace:function(e){return"@namespace "+e.name+";"},page:function(e){return"@page "+(e.selectors.length?e.selectors.join(", "):"")+"{"+a(e.declarations)+"}"},"page-margin-box":function(e){return"@"+e.name+"{"+a(e.declarations)+"}"},rule:function(e){var n=e.declarations;if(n.length)return e.selectors.join(",")+"{"+a(n)+"}"},supports:function(e){return"@supports "+e.supports+"{"+a(e.rules)+"}"}};function a(e){for(var a="",i=0;i<e.length;i++){var s=e[i];t&&t(s);var o=r[s.type](s);o&&(a+=o,o.length&&s.selectors&&(a+=n))}return a}return a(e.stylesheet.rules)}G.range=B;var K="--",Y="var";function Q(e){var n=P({},{preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return"string"===typeof e&&(e=z(e,n)),function e(n,t){n.rules.forEach(function(r){r.rules?e(r,t):r.keyframes?r.keyframes.forEach(function(e){"keyframe"===e.type&&t(e.declarations,r)}):r.declarations&&t(r.declarations,n)})}(e.stylesheet,function(e,t){for(var r=0;r<e.length;r++){var a=e[r],i=a.type,s=a.property,o=a.value;if("declaration"===i)if(n.preserveVars||!s||0!==s.indexOf(K)){if(-1!==o.indexOf(Y+"(")){var l=J(o,n);l!==a.value&&(l=W(l),n.preserveVars?(e.splice(r,0,{type:i,property:s,value:l}),r++):a.value=l)}}else e.splice(r,1),r--}}),q(e)}function W(e){return(e.match(/calc\(([^)]+)\)/g)||[]).forEach(function(n){var t="calc".concat(n.split("calc").join(""));e=e.replace(n,t)}),e}function J(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(-1===e.indexOf("var("))return e;var r=H("(",")",e);return r?"var"===r.pre.slice(-3)?0===r.body.trim().length?(n.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+function(e){var r=e.split(",")[0].replace(/[\s\n\t]/g,""),a=(e.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(n.variables,r)?String(n.variables[r]):void 0,s=i||(a?String(a):void 0),o=t||e;return i||n.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?J(s,n,o):"var(".concat(o,")")}(r.body)+J(r.post,n):r.pre+"(".concat(J(r.body,n),")")+J(r.post,n):(-1!==e.indexOf("var(")&&n.onWarning('missing closing ")" in the value "'.concat(e,'"')),e)}var X="undefined"!==typeof window,$=X&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),Z={group:0,job:0},ee={rootElement:X?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},ne={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},te={dom:{},job:{},user:{}},re=!1,ae=null,ie=0,se=null,oe=!1;function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="cssVars(): ",t=P({},ee,e);function r(e,r,a,i){!t.silent&&window.console&&console.error("".concat(n).concat(e,"\n"),r),t.onError(e,r,a,i)}function a(e){!t.silent&&window.console&&console.warn("".concat(n).concat(e)),t.onWarning(e)}function i(e){t.onFinally(Boolean(e),$,ce()-t.__benchmark)}if(X){if(t.watch)return t.watch=ee.watch,function(e){function n(e){var n=t(e)&&e.hasAttribute("disabled"),r=(e.sheet||{}).disabled;return n||r}function t(e){var n="link"===e.nodeName.toLowerCase()&&-1!==(e.getAttribute("rel")||"").indexOf("stylesheet");return n}function r(e){return"style"===e.nodeName.toLowerCase()}if(!window.MutationObserver)return;ae&&(ae.disconnect(),ae=null);(ae=new MutationObserver(function(a){var i=a.some(function(a){return function(r){var a=!1;if("attributes"===r.type&&t(r.target)&&!n(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,o="skip"===r.target.getAttribute("data-cssvars"),l="src"===r.target.getAttribute("data-cssvars");i?a=!o&&!l:s&&(o?r.target.setAttribute("data-cssvars",""):l&&de(e.rootElement,!0),a=!0)}return a}(a)||function(e){var n=!1;if("childList"===e.type){var t=r(e.target),a="out"===e.target.getAttribute("data-cssvars");n=t&&!a}return n}(a)||function(e){var a=!1;"childList"===e.type&&(a=[].slice.call(e.addedNodes).some(function(e){var a=1===e.nodeType,i=a&&e.hasAttribute("data-cssvars"),s=r(e)&&ne.cssVars.test(e.textContent),o=!i&&(t(e)||s);return o&&!n(e)}));return a}(a)||function(n){var t=!1;"childList"===n.type&&(t=[].slice.call(n.removedNodes).some(function(n){var t=1===n.nodeType,r=t&&"out"===n.getAttribute("data-cssvars"),a=t&&"src"===n.getAttribute("data-cssvars"),i=a;if(a||r){var s=n.getAttribute("data-cssvars-group"),o=e.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));a&&de(e.rootElement,!0),o&&o.parentNode.removeChild(o)}return i}));return t}(a)});i&&le(e)})).observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0})}(t),void le(t);if(!1===t.watch&&ae&&(ae.disconnect(),ae=null),!t.__benchmark){if(re===t.rootElement)return void function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(se),se=setTimeout(function(){e.__benchmark=null,le(e)},n)}(e);var s=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(t.__benchmark=ce(),t.exclude=[ae?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",t.exclude].filter(function(e){return e}).join(","),t.variables=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=/^-{2}/;return Object.keys(e).reduce(function(t,r){var a=n.test(r)?r:"--".concat(r.replace(/^-+/,""));return t[a]=e[r],t},{})}(t.variables),s.forEach(function(e){var n="style"===e.nodeName.toLowerCase()&&e.__cssVars.text,t=n&&e.textContent!==e.__cssVars.text;n&&t&&(e.sheet&&(e.sheet.disabled=!1),e.setAttribute("data-cssvars",""))}),!ae)[].slice.call(t.rootElement.querySelectorAll('[data-cssvars="out"]')).forEach(function(e){var n=e.getAttribute("data-cssvars-group");(n?t.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(n,'"]')):null)||e.parentNode.removeChild(e)}),ie&&s.length<ie&&(ie=s.length,te.dom={})}if("loading"!==document.readyState)if($&&t.onlyLegacy){var o=!1;if(t.updateDOM){var l=t.rootElement.host||(t.rootElement===document?document.documentElement:t.rootElement);Object.keys(t.variables).forEach(function(e){var n=t.variables[e];o=o||n!==getComputedStyle(l).getPropertyValue(e),l.style.setProperty(e,n)})}i(o)}else!oe&&(t.shadowDOM||t.rootElement.shadowRoot||t.rootElement.host)?x({rootElement:ee.rootElement,include:ee.include,exclude:t.exclude,skipDisabled:!1,onSuccess:function(e,n,t){return!((n.sheet||{}).disabled&&!n.__cssVars)&&((e=((e=e.replace(ne.cssComments,"").replace(ne.cssMediaQueries,"")).match(ne.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(e,n,r){V(e,{store:te.dom,onWarning:a}),oe=!0,le(t)}}):(re=t.rootElement,x({rootElement:t.rootElement,include:t.include,exclude:t.exclude,skipDisabled:!1,onBeforeSend:t.onBeforeSend,onError:function(e,n,t){var a=e.responseURL||ue(t,location.href),i=e.statusText?"(".concat(e.statusText,")"):"Unspecified Error"+(0===e.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(a," ").concat(e.status," ").concat(i),n,e,a)},onSuccess:function(e,n,r){if((n.sheet||{}).disabled&&!n.__cssVars)return!1;var a="link"===n.nodeName.toLowerCase(),i="style"===n.nodeName.toLowerCase()&&e!==n.textContent,s=t.onSuccess(e,n,r);return e=void 0!==s&&!1===Boolean(s)?"":s||e,t.updateURLs&&(a||i)&&(e=function(e,n){return(e.replace(ne.cssComments,"").match(ne.cssUrls)||[]).forEach(function(t){var r=t.replace(ne.cssUrls,"$1"),a=ue(r,n);e=e.replace(t,t.replace(r,a))}),e}(e,r)),e},onComplete:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=P({},te.dom,te.user);if(te.job={},s.forEach(function(e,i){var s=n[i];if(e.__cssVars=e.__cssVars||{},e.__cssVars.text=s,ne.cssVars.test(s))try{var o=z(s,{preserveStatic:t.preserveStatic,removeComments:!0});V(o,{parseHost:Boolean(t.rootElement.host),store:te.dom,onWarning:a}),e.__cssVars.tree=o}catch(l){r(l.message,e)}}),P(te.job,te.dom),t.updateDOM?(P(te.user,t.variables),P(te.job,te.user)):(P(te.job,te.user,t.variables),P(o,t.variables)),Z.job>0&&Boolean(Object.keys(te.job).length>Object.keys(o).length||Boolean(Object.keys(o).length&&Object.keys(te.job).some(function(e){return te.job[e]!==o[e]}))))de(t.rootElement),le(t);else{var l=[],u=[],c=!1;if(t.updateDOM&&Z.job++,s.forEach(function(e,i){var s=!e.__cssVars.tree;if(e.__cssVars.tree)try{Q(e.__cssVars.tree,P({},t,{variables:te.job,onWarning:a}));var o=q(e.__cssVars.tree);if(t.updateDOM){var d=n[i],h=ne.cssVarFunc.test(d);if(e.getAttribute("data-cssvars")||e.setAttribute("data-cssvars","src"),o.length&&h){var f=e.getAttribute("data-cssvars-group")||++Z.group,p=o.replace(/\s/g,""),m=t.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(f,'"]'))||document.createElement("style");c=c||ne.cssKeyframes.test(o),t.preserveStatic&&e.sheet&&(e.sheet.disabled=!0),m.hasAttribute("data-cssvars")||m.setAttribute("data-cssvars","out"),p===e.textContent.replace(/\s/g,"")?(s=!0,m&&m.parentNode&&(e.removeAttribute("data-cssvars-group"),m.parentNode.removeChild(m))):p!==m.textContent.replace(/\s/g,"")&&([e,m].forEach(function(e){e.setAttribute("data-cssvars-job",Z.job),e.setAttribute("data-cssvars-group",f)}),m.textContent=o,l.push(o),u.push(m),m.parentNode||e.parentNode.insertBefore(m,e.nextSibling))}}else e.textContent.replace(/\s/g,"")!==o&&l.push(o)}catch(g){r(g.message,e)}s&&e.setAttribute("data-cssvars","skip"),e.hasAttribute("data-cssvars-job")||e.setAttribute("data-cssvars-job",Z.job)}),ie=t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,t.shadowDOM)for(var d,h=[].concat(t.rootElement).concat([].slice.call(t.rootElement.querySelectorAll("*"))),f=0;d=h[f];++f){if(d.shadowRoot&&d.shadowRoot.querySelector("style"))le(P({},t,{rootElement:d.shadowRoot}))}t.updateDOM&&c&&function(e){var n=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(e){return getComputedStyle(document.body)[e]})[0];if(n){for(var t=[].slice.call(e.querySelectorAll("*")),r=[],a=0,i=t.length;a<i;a++){var s=t[a],o=getComputedStyle(s)[n];"none"!==o&&(s.style[n]+="__CSSVARSPONYFILL-KEYFRAMES__",r.push(s))}document.body.offsetHeight;for(var l=0,u=r.length;l<u;l++){var c=r[l].style;c[n]=c[n].replace("__CSSVARSPONYFILL-KEYFRAMES__","")}}}(t.rootElement),re=!1,t.onComplete(l.join(""),u,JSON.parse(JSON.stringify(te.job)),ce()-t.__benchmark),i(u.length)}}}));else document.addEventListener("DOMContentLoaded",function n(t){le(e),document.removeEventListener("DOMContentLoaded",n)})}}function ue(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),a=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(a),r.href=n,a.href=e,a.href}function ce(){return X&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function de(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]')).forEach(function(e){return e.setAttribute("data-cssvars","")}),n&&(te.dom={})}le.reset=function(){for(var e in Z.job=0,Z.group=0,re=!1,ae&&(ae.disconnect(),ae=null),ie=0,se=null,oe=!1,te)te[e]={}};var he="INIT_SDK",fe="SET_SDK_LOADING",pe="RESET_SDK",me="SDK_ERROR",ge=function(e,n){var t=e.userId,r=e.appId,a=e.nickname,i=e.profileUrl,s=e.accessToken,o=e.sdk,l=e.logger,u=n.sdkDispatcher,c=n.userDispatcher;!function(e){var n=e.sdkDispatcher,t=e.userDispatcher,r=e.sdk,a=e.onDisconnect;n({type:fe,payload:!0}),r&&r.disconnect?r.disconnect().then(function(){n({type:pe}),t({type:U})}).finally(function(){a()}):a()}({sdkDispatcher:u,userDispatcher:c,sdk:o,logger:l,onDisconnect:function(){if(l.info("Setup connection"),u({type:fe,payload:!0}),t&&r){var e=new k.a({appId:r});e.addExtension("sb_uikit","2.5.0");var n=function(n){u({type:he,payload:e}),c({type:M,payload:n}),a===n.nickname&&i===n.profileUrl||e.updateCurrentUserInfo(a||n.nickname,i||n.profileUrl).then(function(e){c({type:L,payload:e})})},o=function(e){l.error("Connection failed","".concat(e)),u({type:pe}),u({type:U}),u({type:me})};s?e.connect(t,s).then(function(e){return n(e)}).catch(function(e){return o(e)}):e.connect(t).then(function(e){return n(e)}).catch(function(e){return o(e)})}else u({type:me}),l.warning("Connection failed","UserId or appId missing")}})},_e=function(e){Object(r.useLayoutEffect)(function(){(function(e){if(null===e||void 0===e)return!0;for(var n in e)if(e.hasOwnProperty(n))return!1;return JSON.stringify(e)===JSON.stringify({})})(e)||le({variables:C({"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},e)})},[e])},ye={initialized:!1,loading:!1,sdk:{},error:!1};function ve(e,n){switch(n.type){case fe:return s(s({},e),{},{initialized:!1,loading:n.payload});case me:return s(s({},e),{},{initialized:!1,loading:!1,error:!0});case he:return{sdk:n.payload,initialized:!0,loading:!1,error:!1};case pe:return ye;default:return e}}var Ee={initialized:!1,loading:!1,user:{}};function be(e,n){switch(n.type){case M:return{initialized:!0,loading:!1,user:n.payload};case U:return Ee;case L:return s(s({},e),{},{user:n.payload});default:return e}}var Ce="debug",Ne="warning",Se="error",Oe="info",Te="all",Ae=function(e){var n=e.level,t=e.title,r=e.description,a=void 0===r?"":r;console.log("%c SendbirdUIKit | ".concat(n," | ").concat((new Date).toISOString()," | ").concat(t," ").concat(a&&"|"),function(e){switch(e){case Ne:return"color: Orange";case Se:return"color: Red";default:return"color: Gray"}}(n),a)},we=function(e,n){var t=n||Ae,r=Array.isArray(e)?e:[e],a=function(e){return function(n,r){return t({level:e,title:n,description:r})}};return r.reduce(function(e,n){return n===Ce||n===Te?s(s({},e),{},{info:a(Oe),error:a(Se),warning:a(Ne)}):n===Oe?s(s({},e),{},{info:a(Oe)}):n===Se?s(s({},e),{},{error:a(Se)}):n===Ne?s(s({},e),{},{warning:a(Ne)}):s({},e)},{info:function(){},error:function(){},warning:function(){}})},Ie=function(){var e={},n=e.hasOwnProperty;return{__getTopics:function(){return e},subscribe:function(t,r){n.call(e,t)||(e[t]=[]);var a=e[t].push(r)-1;return{remove:function(){delete e[t][a]}}},publish:function(t,r){n.call(e,t)&&e[t].forEach(function(e){e(void 0!==r?r:{})})}}};function Re(e){var n=e.userId,t=e.appId,i=e.accessToken,o=e.children,l=e.disableUserProfile,u=e.renderUserProfile,c=e.allowProfileEdit,d=e.theme,h=e.nickname,f=e.profileUrl,p=e.userListQuery,m=e.config,_=void 0===m?{}:m,y=e.colorSet,v=e.stringSet,b=e.imageCompression,C=e.useReaction,N=_.logLevel,T=void 0===N?"":N,w=g(Object(r.useState)(we(T)),2),I=w[0],R=w[1],k=g(Object(r.useState)(),2),M=k[0],U=k[1],L=g(Object(r.useReducer)(ve,ye),2),P=L[0],D=L[1],x=g(Object(r.useReducer)(be,Ee),2),F=x[0],H=x[1];_e(y),Object(r.useEffect)(function(){U(Ie())},[]),Object(r.useEffect)(function(){I.info("App Init"),ge({userId:n,appId:t,accessToken:i,sdkStore:P,nickname:h,profileUrl:f,sdk:P.sdk,logger:I},{sdkDispatcher:D,userDispatcher:H})},[n,t,i]),Object(r.useEffect)(function(){R(we(T))},[T]),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;Object(r.useEffect)(function(){var t=document.querySelector(n);return e.forEach(function(e){var n=document.createElement("div");n.setAttribute("id",e),t.appendChild(n)}),function(){e.forEach(function(e){var n=document.getElementById(e);n&&t.removeChild(n)})}},[])}(["sendbird-modal-root","sendbird-dropdown-portal","sendbird-emoji-list-portal"],"body");var G=g(Object(r.useState)(d),2),j=G[0],B=G[1];Object(r.useEffect)(function(){B(d)},[d]),Object(r.useEffect)(function(){I.info("Setup theme","Theme: ".concat(j));try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark"),e.classList.add("sendbird-theme--".concat(j||"light")),I.info("Finish setup theme")}catch(n){I.warning("Setup theme failed","".concat(n))}return function(){try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark")}catch(n){}}},[j]);var z=function(e,n){var t=g(Object(r.useState)(!0),2),a=t[0],i=t[1];return Object(r.useEffect)(function(){var t,r=S();return n.warning("sdk changed",r),e&&e.ConnectionHandler&&((t=new e.ConnectionHandler).onReconnectStarted=function(){i(!1),n.warning("onReconnectStarted",{isOnline:a})},t.onReconnectSucceeded=function(){i(!0),n.warning("onReconnectSucceeded",{isOnline:a})},t.onReconnectFailed=function(){e.reconnect(),n.warning("onReconnectFailed")},n.info("Added ConnectionHandler",r),e.addConnectionHandler(r,t)),function(){try{e.removeConnectionHandler(r),n.info("Removed ConnectionHandler",r)}catch(t){}}},[e]),Object(r.useEffect)(function(){var t=function(){try{n.warning("Try reconnecting SDK"),"OPEN"!==e.getConnectionState()&&e.reconnect()}catch(t){}};return window.addEventListener("online",t),function(){window.removeEventListener("online",t)}},[e]),Object(r.useEffect)(function(){var e=document.querySelector("body");if(a)try{e.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch(t){}else try{e.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch(t){}},[a]),a}(P.sdk,I),V=a.a.useMemo(function(){return v?s(s({},O("en")),v):O("en")},[v]);return a.a.createElement(E.Provider,{value:{stores:{sdkStore:P,userStore:F},dispatchers:{sdkDispatcher:D,userDispatcher:H,reconnect:function(){ge({userId:n,appId:t,accessToken:i,sdkStore:P,nickname:h,profileUrl:f,logger:I,sdk:P.sdk},{sdkDispatcher:D,userDispatcher:H})}},config:{disableUserProfile:l,renderUserProfile:u,allowProfileEdit:c,isOnline:z,userId:n,appId:t,accessToken:i,theme:j,setCurrenttheme:B,userListQuery:p,logger:I,pubSub:M,imageCompression:b,useReaction:C}}},a.a.createElement(A,{stringSet:V},o))}Re.propTypes={userId:I.a.string.isRequired,appId:I.a.string.isRequired,accessToken:I.a.string,children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element),I.a.any]).isRequired,theme:I.a.string,nickname:I.a.string,profileUrl:I.a.string,disableUserProfile:I.a.bool,renderUserProfile:I.a.func,allowProfileEdit:I.a.bool,userListQuery:I.a.func,config:I.a.shape({logLevel:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),pubSub:I.a.shape({subscribe:I.a.func,publish:I.a.func})}),stringSet:I.a.objectOf(I.a.string),colorSet:I.a.objectOf(I.a.string),useReaction:I.a.bool,imageCompression:I.a.shape({compressionRate:I.a.number,resizingWidth:I.a.oneOfType([I.a.number,I.a.string]),resizingHeight:I.a.oneOfType([I.a.number,I.a.string])})},Re.defaultProps={accessToken:"",theme:"light",nickname:"",profileUrl:"",disableUserProfile:!1,renderUserProfile:null,allowProfileEdit:!1,userListQuery:null,config:{},stringSet:null,colorSet:null,imageCompression:{},useReaction:!0};var ke=t(3);function Me(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function Ue(e){Me(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"===typeof e||"[object Number]"===n?new Date(e):("string"!==typeof e&&"[object String]"!==n||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Le(e){if(Me(1,arguments),!function(e){return Me(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var n=Ue(e);return!isNaN(Number(n))}var Pe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function De(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}var xe={date:De({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:De({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:De({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Fe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function He(e){return function(n,t){var r,a=t||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=a.width?String(a.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,l=a.width?String(a.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(n):n]}}function Ge(e){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=n.match(a);if(!i)return null;var s,o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t;return}(l,function(e){return e.test(o)}):function(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t;return}(l,function(e){return e.test(o)});return s=e.valueCallback?e.valueCallback(u):u,{value:s=t.valueCallback?t.valueCallback(s):s,rest:n.slice(o.length)}}}var je,Be={code:"en-US",formatDistance:function(e,n,t){var r,a=Pe[e];return r="string"===typeof a?a:1===n?a.one:a.other.replace("{{count}}",n.toString()),null!==t&&void 0!==t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r},formatLong:xe,formatRelative:function(e,n,t,r){return Fe[e]},localize:{ordinalNumber:function(e,n){var t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:He({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:He({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:He({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:He({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:He({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(je={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.match(je.matchPattern);if(!t)return null;var r=t[0],a=e.match(je.parsePattern);if(!a)return null;var i=je.valueCallback?je.valueCallback(a[0]):a[0];return{value:i=n.valueCallback?n.valueCallback(i):i,rest:e.slice(r.length)}}),era:Ge({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ge({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ge({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ge({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ge({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ze(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Ve(e,n){return Me(2,arguments),function(e,n){Me(2,arguments);var t=Ue(e).getTime(),r=ze(n);return new Date(t+r)}(e,-ze(n))}function qe(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var Ke=function(e,n){var t=e.getUTCFullYear(),r=t>0?t:1-t;return qe("yy"===n?r%100:r,n.length)},Ye=function(e,n){var t=e.getUTCMonth();return"M"===n?String(t+1):qe(t+1,2)},Qe=function(e,n){return qe(e.getUTCDate(),n.length)},We=function(e,n){return qe(e.getUTCHours()%12||12,n.length)},Je=function(e,n){return qe(e.getUTCHours(),n.length)},Xe=function(e,n){return qe(e.getUTCMinutes(),n.length)},$e=function(e,n){return qe(e.getUTCSeconds(),n.length)},Ze=function(e,n){var t=n.length,r=e.getUTCMilliseconds();return qe(Math.floor(r*Math.pow(10,t-3)),n.length)},en=864e5;function nn(e){Me(1,arguments);var n=Ue(e),t=n.getUTCDay(),r=(t<1?7:0)+t-1;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function tn(e){Me(1,arguments);var n=Ue(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var a=nn(r),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var s=nn(i);return n.getTime()>=a.getTime()?t+1:n.getTime()>=s.getTime()?t:t-1}var rn=6048e5;function an(e){Me(1,arguments);var n=Ue(e),t=nn(n).getTime()-function(e){Me(1,arguments);var n=tn(e),t=new Date(0);return t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0),nn(t)}(n).getTime();return Math.round(t/rn)+1}function sn(e,n){Me(1,arguments);var t=n||{},r=t.locale,a=r&&r.options&&r.options.weekStartsOn,i=null==a?0:ze(a),s=null==t.weekStartsOn?i:ze(t.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=Ue(e),l=o.getUTCDay(),u=(l<s?7:0)+l-s;return o.setUTCDate(o.getUTCDate()-u),o.setUTCHours(0,0,0,0),o}function on(e,n){Me(1,arguments);var t=Ue(e,n),r=t.getUTCFullYear(),a=n||{},i=a.locale,s=i&&i.options&&i.options.firstWeekContainsDate,o=null==s?1:ze(s),l=null==a.firstWeekContainsDate?o:ze(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,l),u.setUTCHours(0,0,0,0);var c=sn(u,n),d=new Date(0);d.setUTCFullYear(r,0,l),d.setUTCHours(0,0,0,0);var h=sn(d,n);return t.getTime()>=c.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}var ln=6048e5;function un(e,n){Me(1,arguments);var t=Ue(e),r=sn(t,n).getTime()-function(e,n){Me(1,arguments);var t=n||{},r=t.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:ze(a),s=null==t.firstWeekContainsDate?i:ze(t.firstWeekContainsDate),o=on(e,n),l=new Date(0);return l.setUTCFullYear(o,0,s),l.setUTCHours(0,0,0,0),sn(l,n)}(t,n).getTime();return Math.round(r/ln)+1}var cn="midnight",dn="noon",hn="morning",fn="afternoon",pn="evening",mn="night";function gn(e,n){var t=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return t+String(a);var s=n||"";return t+String(a)+s+qe(i,2)}function _n(e,n){return e%60===0?(e>0?"-":"+")+qe(Math.abs(e)/60,2):yn(e,n)}function yn(e,n){var t=n||"",r=e>0?"-":"+",a=Math.abs(e);return r+qe(Math.floor(a/60),2)+t+qe(a%60,2)}var vn={G:function(e,n,t){var r=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if("yo"===n){var r=e.getUTCFullYear(),a=r>0?r:1-r;return t.ordinalNumber(a,{unit:"year"})}return Ke(e,n)},Y:function(e,n,t,r){var a=on(e,r),i=a>0?a:1-a;return"YY"===n?qe(i%100,2):"Yo"===n?t.ordinalNumber(i,{unit:"year"}):qe(i,n.length)},R:function(e,n){return qe(tn(e),n.length)},u:function(e,n){return qe(e.getUTCFullYear(),n.length)},Q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return qe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){var r=e.getUTCMonth();switch(n){case"M":case"MM":return Ye(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){var r=e.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){var a=un(e,r);return"wo"===n?t.ordinalNumber(a,{unit:"week"}):qe(a,n.length)},I:function(e,n,t){var r=an(e);return"Io"===n?t.ordinalNumber(r,{unit:"week"}):qe(r,n.length)},d:function(e,n,t){return"do"===n?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):Qe(e,n)},D:function(e,n,t){var r=function(e){Me(1,arguments);var n=Ue(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=t-n.getTime();return Math.floor(r/en)+1}(e);return"Do"===n?t.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,n.length)},E:function(e,n,t){var r=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return qe(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return qe(i,n.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,t){var r=e.getUTCDay(),a=0===r?7:r;switch(n){case"i":return String(a);case"ii":return qe(a,n.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,n,t){var r,a=e.getUTCHours();switch(r=12===a?dn:0===a?cn:a/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,n,t){var r,a=e.getUTCHours();switch(r=a>=17?pn:a>=12?fn:a>=4?hn:mn,n){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,n,t){if("ho"===n){var r=e.getUTCHours()%12;return 0===r&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return We(e,n)},H:function(e,n,t){return"Ho"===n?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Je(e,n)},K:function(e,n,t){var r=e.getUTCHours()%12;return"Ko"===n?t.ordinalNumber(r,{unit:"hour"}):qe(r,n.length)},k:function(e,n,t){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===n?t.ordinalNumber(r,{unit:"hour"}):qe(r,n.length)},m:function(e,n,t){return"mo"===n?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Xe(e,n)},s:function(e,n,t){return"so"===n?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):$e(e,n)},S:function(e,n){return Ze(e,n)},X:function(e,n,t,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(n){case"X":return _n(a);case"XXXX":case"XX":return yn(a);case"XXXXX":case"XXX":default:return yn(a,":")}},x:function(e,n,t,r){var a=(r._originalDate||e).getTimezoneOffset();switch(n){case"x":return _n(a);case"xxxx":case"xx":return yn(a);case"xxxxx":case"xxx":default:return yn(a,":")}},O:function(e,n,t,r){var a=(r._originalDate||e).getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+gn(a,":");case"OOOO":default:return"GMT"+yn(a,":")}},z:function(e,n,t,r){var a=(r._originalDate||e).getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+gn(a,":");case"zzzz":default:return"GMT"+yn(a,":")}},t:function(e,n,t,r){var a=r._originalDate||e;return qe(Math.floor(a.getTime()/1e3),n.length)},T:function(e,n,t,r){return qe((r._originalDate||e).getTime(),n.length)}};function En(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function bn(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}var Cn={p:bn,P:function(e,n){var t,r=e.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return En(e,n);switch(a){case"P":t=n.dateTime({width:"short"});break;case"PP":t=n.dateTime({width:"medium"});break;case"PPP":t=n.dateTime({width:"long"});break;case"PPPP":default:t=n.dateTime({width:"full"})}return t.replace("{{date}}",En(a,n)).replace("{{time}}",bn(i,n))}};var Nn=["D","DD"],Sn=["YY","YYYY"];function On(e,n,t){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}var Tn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,An=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wn=/^'([^]*?)'?$/,In=/''/g,Rn=/[a-zA-Z]/;function kn(e,n,t){Me(2,arguments);var r=String(n),a=t||{},i=a.locale||Be,s=i.options&&i.options.firstWeekContainsDate,o=null==s?1:ze(s),l=null==a.firstWeekContainsDate?o:ze(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=i.options&&i.options.weekStartsOn,c=null==u?0:ze(u),d=null==a.weekStartsOn?c:ze(a.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var h=Ue(e);if(!Le(h))throw new RangeError("Invalid time value");var f=Ve(h,function(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}(h)),p={firstWeekContainsDate:l,weekStartsOn:d,locale:i,_originalDate:h};return r.match(An).map(function(e){var n=e[0];return"p"===n||"P"===n?(0,Cn[n])(e,i.formatLong,p):e}).join("").match(Tn).map(function(t){if("''"===t)return"'";var r=t[0];if("'"===r)return t.match(wn)[1].replace(In,"'");var s,o=vn[r];if(o)return a.useAdditionalWeekYearTokens||(s=t,-1===Sn.indexOf(s))||On(t,n,e),!a.useAdditionalDayOfYearTokens&&function(e){return-1!==Nn.indexOf(e)}(t)&&On(t,n,e),o(f,t,i.localize,p);if(r.match(Rn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return t}).join("")}function Mn(e){var n=e.className,t=e.url,i=e.alt,s=e.width,o=e.height,l=e.fixedSize,u=e.defaultComponent,c=e.circle,d=e.placeHolder,h=e.onLoad,f=e.onError,p=g(Object(r.useState)(!1),2),m=p[0],y=p[1],v=g(Object(r.useState)(!0),2),E=v[0],b=v[1],C=Object(r.useMemo)(function(){return"function"===typeof u?u():u},[u]),N=Object(r.useMemo)(function(){return d&&"function"===typeof d?d({style:{width:"100%",minWidth:s,maxWidth:l?s:"400px",height:o,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):null},[d]),S=Object(r.useMemo)(function(){return y(!1),a.a.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:t,alt:i,onLoad:function(){b(!1),h()},onError:function(){y(!0),f()}})},[t]);return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-image-renderer"]).join(" "),style:{width:"100%",minWidth:s,maxWidth:l?s:"400px",height:o}},E&&N,m?C:a.a.createElement("div",{className:"sendbird-image-renderer__image",style:{width:"100%",minWidth:s,maxWidth:l?s:"400px",height:o,position:"absolute",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(t,")"),borderRadius:c?"50%":null}}),S)}Mn.propTypes={className:I.a.oneOfType([I.a.arrayOf(I.a.string),I.a.string]),url:I.a.string.isRequired,alt:I.a.string,width:I.a.oneOfType([I.a.string,I.a.number]),height:I.a.oneOfType([I.a.string,I.a.number]),fixedSize:I.a.bool,defaultComponent:I.a.oneOfType([I.a.element,I.a.func]),placeHolder:I.a.func,circle:I.a.bool,onLoad:I.a.func,onError:I.a.func},Mn.defaultProps={className:"",defaultComponent:null,placeHolder:null,alt:"",width:null,height:null,fixedSize:!1,circle:!1,onLoad:function(){},onError:function(){}};var Un,Ln,Pn,Dn,xn,Fn,Hn,Gn,jn,Bn,zn,Vn,qn,Kn,Yn,Qn,Wn,Jn,Xn,$n,Zn,et,nt,tt,rt,at,it,st,ot,lt,ut,ct,dt,ht,ft,pt,mt,gt,_t,yt,vt,Et,bt,Ct,Nt,St,Ot,Tt,At,wt,It,Rt,kt,Mt,Ut,Lt={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER"};function Pt(){return(Pt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Dt(e){return r.createElement("svg",Pt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Un||(Un=r.createElement("path",{className:"icon-add_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",fill:"#000",fillRule:"evenodd"})))}function xt(){return(xt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ft(e){return r.createElement("svg",xt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ln||(Ln=r.createElement("path",{className:"icon-arrow-left_svg__fill",d:"M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",fill:"#000",fillRule:"evenodd"})))}function Ht(){return(Ht=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Gt(e){return r.createElement("svg",Ht({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Pn||(Pn=r.createElement("path",{className:"icon-attach_svg__fill",d:"M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",fill:"#000",fillRule:"evenodd"})))}function jt(){return(jt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Bt(e){return r.createElement("svg",jt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Dn||(Dn=r.createElement("path",{className:"icon-ban_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",fill:"#000",fillRule:"evenodd"})))}function zt(){return(zt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Vt(e){return r.createElement("svg",zt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),xn||(xn=r.createElement("path",{className:"icon-broadcast_svg__fill",d:"M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",fill:"#000",fillRule:"evenodd"})))}function qt(){return(qt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Kt(e){return r.createElement("svg",qt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Fn||(Fn=r.createElement("path",{className:"icon-camera_svg__fill",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Yt(){return(Yt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Qt(e){return r.createElement("svg",Yt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Hn||(Hn=r.createElement("path",{className:"icon-channels_svg__fill",d:"M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",fill:"#000",fillRule:"evenodd"})))}function Wt(){return(Wt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Jt(e){return r.createElement("svg",Wt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Gn||(Gn=r.createElement("path",{className:"icon-chat_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",fill:"#000",fillRule:"evenodd"})))}function Xt(){return(Xt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function $t(e){return r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),jn||(jn=r.createElement("path",{className:"icon-chat-filled_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",fill:"#000",fillRule:"evenodd"})))}function Zt(){return(Zt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function er(e){return r.createElement("svg",Zt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Bn||(Bn=r.createElement("path",{className:"icon-chevron-down_svg__fill",d:"M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",fill:"#000",fillRule:"evenodd"})))}function nr(){return(nr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function tr(e){return r.createElement("svg",nr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),zn||(zn=r.createElement("path",{className:"icon-chevron-right_svg__fill",d:"M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",fill:"#000",fillRule:"evenodd"})))}function rr(){return(rr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ar(e){return r.createElement("svg",rr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Vn||(Vn=r.createElement("path",{className:"icon-close_svg__fill",d:"M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function ir(){return(ir=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function sr(e){return r.createElement("svg",ir({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qn||(qn=r.createElement("path",{className:"icon-collapse_svg__fill",d:"M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",fill:"#000",fillRule:"evenodd"})))}function or(){return(or=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function lr(e){return r.createElement("svg",or({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Kn||(Kn=r.createElement("path",{className:"icon-copy_svg__fill",d:"M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",fill:"#000",fillRule:"evenodd"})))}function ur(){return(ur=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function cr(e){return r.createElement("svg",ur({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Yn||(Yn=r.createElement("path",{className:"icon-create_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",fill:"#000",fillRule:"evenodd"})))}function dr(){return(dr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function hr(e){return r.createElement("svg",dr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Qn||(Qn=r.createElement("path",{className:"icon-delete_svg__fill",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",fill:"#000",fillRule:"evenodd"})))}function fr(){return(fr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function pr(e){return r.createElement("svg",fr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Wn||(Wn=r.createElement("path",{className:"icon-disconnected_svg__fill",d:"M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",fill:"#000",fillRule:"evenodd"})))}function mr(){return(mr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function gr(e){return r.createElement("svg",mr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Jn||(Jn=r.createElement("path",{className:"icon-document_svg__fill",d:"M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",fill:"#000",fillRule:"evenodd"})))}function _r(){return(_r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function yr(e){return r.createElement("svg",_r({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Xn||(Xn=r.createElement("path",{className:"icon-done_svg__fill",d:"M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",fill:"#000",fillRule:"evenodd"})))}function vr(){return(vr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Er(e){return r.createElement("svg",vr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),$n||($n=r.createElement("path",{className:"icon-done-all_svg__fill",d:"M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function br(){return(br=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Cr(e){return r.createElement("svg",br({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Zn||(Zn=r.createElement("path",{className:"icon-download_svg__fill",d:"M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",fill:"#000",fillRule:"evenodd"})))}function Nr(){return(Nr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Sr(e){return r.createElement("svg",Nr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),et||(et=r.createElement("path",{className:"icon-edit_svg__fill",d:"M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",fill:"#000",fillRule:"evenodd"})))}function Or(){return(Or=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Tr(e){return r.createElement("svg",Or({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),nt||(nt=r.createElement("path",{className:"icon-emoji-more_svg__fill",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",fill:"#000",fillRule:"evenodd"})))}function Ar(){return(Ar=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function wr(e){return r.createElement("svg",Ar({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),tt||(tt=r.createElement("path",{className:"icon-error_svg__fill",d:"M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",fill:"#000",fillRule:"evenodd"})))}function Ir(){return(Ir=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Rr(e){return r.createElement("svg",Ir({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),rt||(rt=r.createElement("path",{className:"icon-expand_svg__fill",d:"M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",fill:"#000",fillRule:"evenodd"})))}function kr(){return(kr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Mr(e){return r.createElement("svg",kr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),at||(at=r.createElement("path",{className:"icon-file-audio_svg__fill",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",fill:"#000",fillRule:"evenodd"})))}function Ur(){return(Ur=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Lr(e){return r.createElement("svg",Ur({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),it||(it=r.createElement("path",{className:"icon-file-document_svg__fill",d:"M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",fill:"#000",fillRule:"evenodd"})))}function Pr(){return(Pr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Dr(e){return r.createElement("svg",Pr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),st||(st=r.createElement("path",{className:"icon-freeze_svg__fill",d:"M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function xr(){return(xr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Fr(e){return r.createElement("svg",xr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ot||(ot=r.createElement("path",{className:"icon-gif_svg__fill",d:"M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",fill:"#000",fillRule:"evenodd"})))}function Hr(){return(Hr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Gr(e){return r.createElement("svg",Hr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),lt||(lt=r.createElement("path",{className:"icon-info_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function jr(){return(jr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Br(e){return r.createElement("svg",jr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ut||(ut=r.createElement("path",{className:"icon-leave_svg__fill",d:"M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function zr(){return(zr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Vr(e){return r.createElement("svg",zr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ct||(ct=r.createElement("path",{className:"icon-members_svg__fill",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function qr(){return(qr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Kr(e){return r.createElement("svg",qr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),dt||(dt=r.createElement("path",{className:"icon-message_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function Yr(){return(Yr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Qr(e){return r.createElement("svg",Yr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ht||(ht=r.createElement("path",{className:"icon-moderations_svg__fill",d:"M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",fill:"#000",fillRule:"evenodd"})))}function Wr(){return(Wr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Jr(e){return r.createElement("svg",Wr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ft||(ft=r.createElement("path",{className:"icon-more_svg__fill",d:"M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",fill:"#000",fillRule:"evenodd"})))}function Xr(){return(Xr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function $r(e){return r.createElement("svg",Xr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),pt||(pt=r.createElement("path",{className:"icon-mute_svg__fill",d:"M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",fill:"#000",fillRule:"evenodd"})))}function Zr(){return(Zr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ea(e){return r.createElement("svg",Zr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),mt||(mt=r.createElement("path",{className:"icon-notifications_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",fill:"#000",fillRule:"evenodd"})))}function na(){return(na=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ta(e){return r.createElement("svg",na({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),gt||(gt=r.createElement("path",{className:"icon-notifications-off-filled_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",fill:"#000",fillRule:"evenodd"})))}function ra(){return(ra=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function aa(e){return r.createElement("svg",ra({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),_t||(_t=r.createElement("path",{className:"icon-operator_svg__fill",d:"M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",fill:"#000",fillRule:"evenodd"})))}function ia(){return(ia=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function sa(e){return r.createElement("svg",ia({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),yt||(yt=r.createElement("path",{className:"icon-photo_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",fill:"#000",fillRule:"evenodd"})))}function oa(){return(oa=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function la(e){return r.createElement("svg",oa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),vt||(vt=r.createElement("path",{className:"icon-play_svg__fill",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",fill:"#000",fillRule:"evenodd"})))}function ua(){return(ua=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ca(e){return r.createElement("svg",ua({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Et||(Et=r.createElement("path",{className:"icon-plus_svg__fill",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",fill:"#000",fillRule:"evenodd"})))}function da(){return(da=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ha(e){return r.createElement("svg",da({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bt||(bt=r.createElement("path",{className:"icon-question_svg__fill",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",fill:"#000",fillRule:"evenodd"})))}function fa(){return(fa=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function pa(e){return r.createElement("svg",fa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ct||(Ct=r.createElement("path",{className:"icon-refresh_svg__fill",d:"M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",fill:"#000",fillRule:"evenodd"})))}function ma(){return(ma=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ga(e){return r.createElement("svg",ma({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Nt||(Nt=r.createElement("path",{className:"icon-remove_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",fill:"#000",fillRule:"evenodd"})))}function _a(){return(_a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ya(e){return r.createElement("svg",_a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),St||(St=r.createElement("path",{className:"icon-reply-filled_svg__fill",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",fill:"#000",fillRule:"evenodd"})))}function va(){return(va=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ea(e){return r.createElement("svg",va({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ot||(Ot=r.createElement("path",{className:"icon-search_svg__fill",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",fill:"#000",fillRule:"evenodd"})))}function ba(){return(ba=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ca(e){return r.createElement("svg",ba({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Tt||(Tt=r.createElement("path",{className:"icon-send_svg__fill",d:"M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",fill:"#000",fillRule:"evenodd"})))}function Na(){return(Na=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Sa(e){return r.createElement("svg",Na({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),At||(At=r.createElement("path",{className:"icon-settings-filled_svg__fill",d:"M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Oa(){return(Oa=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ta(e){return r.createElement("svg",Oa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wt||(wt=r.createElement("path",{className:"icon-spinner_svg__fill",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",fill:"#000",fillRule:"evenodd"})))}function Aa(){return(Aa=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function wa(e){return r.createElement("svg",Aa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),It||(It=r.createElement("path",{className:"icon-supergroup_svg__fill",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",fill:"#000",fillRule:"evenodd"})))}function Ia(){return(Ia=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ra(e){return r.createElement("svg",Ia({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Rt||(Rt=r.createElement("path",{className:"icon-thumbnail-none_svg__fill",d:"M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",fill:"#000",fillRule:"evenodd"})))}function ka(){return(ka=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ma(e){return r.createElement("svg",ka({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),kt||(kt=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("rect",{className:"icon-toggleoff_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),r.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),r.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),r.createElement("path",{className:"icon-toggleoff_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function Ua(){return(Ua=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function La(e){return r.createElement("svg",Ua({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),Mt||(Mt=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("rect",{className:"icon-toggleon_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),r.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),r.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),r.createElement("path",{className:"icon-toggleon_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function Pa(){return(Pa=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Da(e){return r.createElement("svg",Pa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ut||(Ut=r.createElement("path",{className:"icon-user_svg__fill",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}var xa={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",WHITE:"WHITE",GRAY:"GRAY",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function Fa(e){switch(e){case xa.PRIMARY:return"sendbird-icon-color--primary";case xa.SECONDARY:return"sendbird-icon-color--secondary";case xa.CONTENT:return"sendbird-icon-color--content";case xa.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case xa.WHITE:return"sendbird-icon-color--white";case xa.GRAY:return"sendbird-icon-color--gray";case xa.SENT:return"sendbird-icon-color--sent";case xa.READ:return"sendbird-icon-color--read";case xa.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case xa.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case xa.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case xa.BACKGROUND_3:return"sendbird-icon-color--background-3";case xa.ERROR:return"sendbird-icon-color--error";default:return""}}function Ha(e){switch(e){case Lt.ADD:return"sendbird-icon-add";case Lt.ARROW_LEFT:return"sendbird-icon-arrow-left";case Lt.ATTACH:return"sendbird-icon-attach";case Lt.BAN:return"sendbird-icon-ban";case Lt.BROADCAST:return"sendbird-icon-broadcast";case Lt.CAMERA:return"sendbird-icon-camera";case Lt.CHANNELS:return"sendbird-icon-channels";case Lt.CHAT:return"sendbird-icon-chat";case Lt.CHAT_FILLED:return"sendbird-icon-chat-filled";case Lt.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Lt.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Lt.CLOSE:return"sendbird-icon-close";case Lt.COLLAPSE:return"sendbird-icon-collapse";case Lt.COPY:return"sendbird-icon-copy";case Lt.CREATE:return"sendbird-icon-create";case Lt.DELETE:return"sendbird-icon-delete";case Lt.DISCONNECTED:return"sendbird-icon-disconnected";case Lt.DOCUMENT:return"sendbird-icon-document";case Lt.DONE:return"sendbird-icon-done";case Lt.DONE_ALL:return"sendbird-icon-done-all";case Lt.DOWNLOAD:return"sendbird-icon-down-load";case Lt.EDIT:return"sendbird-icon-edit";case Lt.EMOJI_MORE:return"sendbird-icon-emoji-more";case Lt.ERROR:return"sendbird-icon-error";case Lt.EXPAND:return"sendbird-icon-expand";case Lt.FILE_AUDIO:return"sendbird-icon-file-audio";case Lt.FILE_DOCUMENT:return"sendbird-icon-file-document";case Lt.FREEZE:return"sendbird-icon-freeze";case Lt.GIF:return"sendbird-icon-gif";case Lt.INFO:return"sendbird-icon-info";case Lt.LEAVE:return"sendbird-icon-leave";case Lt.MEMBERS:return"sendbird-icon-members";case Lt.MESSAGE:return"sendbird-icon-message";case Lt.MODERATIONS:return"sendbird-icon-moderations";case Lt.MORE:return"sendbird-icon-more";case Lt.MUTE:return"sendbird-icon-mute";case Lt.NOTIFICATIONS:return"sendbird-icon-notifications";case Lt.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Lt.OPERATOR:return"sendbird-icon-operator";case Lt.PHOTO:return"sendbird-icon-photo";case Lt.PLAY:return"sendbird-icon-play";case Lt.PLUS:return"sendbird-iconn-plus";case Lt.QUESTION:return"sendbird-icon-question";case Lt.REFRESH:return"sendbird-icon-refresh";case Lt.REMOVE:return"sendbird-icon-remove";case Lt.REPLY:return"sendbird-icon-reply";case Lt.SEARCH:return"sendbird-icon-search";case Lt.SEND:return"sendbird-icon-send";case Lt.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Lt.SPINNER:return"sendbird-icon-spinner";case Lt.SUPERGROUP:return"sendbird-icon-supergroup";case Lt.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Lt.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Lt.TOGGLE_ON:return"sendbird-icon-toggle-on";case Lt.USER:return"sendbird-icon-user";default:return"sendbird-icon-unknown"}}function Ga(e){var n=e.className,t=e.type,r=e.fillColor,i=e.width,s=e.height,o=e.onClick,l=e.children,u={width:"string"===typeof i?i:"".concat(i,"px"),minWidth:"string"===typeof i?i:"".concat(i,"px"),height:"string"===typeof s?s:"".concat(s,"px"),minHeight:"string"===typeof s?s:"".concat(s,"px")};return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-icon",Ha(t),Fa(r)]).join(" "),role:"button",onClick:o,onKeyDown:o,tabIndex:"0",style:u},l||function(e){switch(e){case Lt.ADD:return a.a.createElement(Dt,null);case Lt.ARROW_LEFT:return a.a.createElement(Ft,null);case Lt.ATTACH:return a.a.createElement(Gt,null);case Lt.BAN:return a.a.createElement(Bt,null);case Lt.BROADCAST:return a.a.createElement(Vt,null);case Lt.CAMERA:return a.a.createElement(Kt,null);case Lt.CHANNELS:return a.a.createElement(Qt,null);case Lt.CHAT:return a.a.createElement(Jt,null);case Lt.CHAT_FILLED:return a.a.createElement($t,null);case Lt.CHEVRON_DOWN:return a.a.createElement(er,null);case Lt.CHEVRON_RIGHT:return a.a.createElement(tr,null);case Lt.CLOSE:return a.a.createElement(ar,null);case Lt.COLLAPSE:return a.a.createElement(sr,null);case Lt.COPY:return a.a.createElement(lr,null);case Lt.CREATE:return a.a.createElement(cr,null);case Lt.DELETE:return a.a.createElement(hr,null);case Lt.DISCONNECTED:return a.a.createElement(pr,null);case Lt.DOCUMENT:return a.a.createElement(gr,null);case Lt.DONE:return a.a.createElement(yr,null);case Lt.DONE_ALL:return a.a.createElement(Er,null);case Lt.DOWNLOAD:return a.a.createElement(Cr,null);case Lt.EDIT:return a.a.createElement(Sr,null);case Lt.EMOJI_MORE:return a.a.createElement(Tr,null);case Lt.ERROR:return a.a.createElement(wr,null);case Lt.EXPAND:return a.a.createElement(Rr,null);case Lt.FILE_AUDIO:return a.a.createElement(Mr,null);case Lt.FILE_DOCUMENT:return a.a.createElement(Lr,null);case Lt.FREEZE:return a.a.createElement(Dr,null);case Lt.GIF:return a.a.createElement(Fr,null);case Lt.INFO:return a.a.createElement(Gr,null);case Lt.LEAVE:return a.a.createElement(Br,null);case Lt.MEMBERS:return a.a.createElement(Vr,null);case Lt.MESSAGE:return a.a.createElement(Kr,null);case Lt.MODERATIONS:return a.a.createElement(Qr,null);case Lt.MORE:return a.a.createElement(Jr,null);case Lt.MUTE:return a.a.createElement($r,null);case Lt.NOTIFICATIONS:return a.a.createElement(ea,null);case Lt.NOTIFICATIONS_OFF_FILLED:return a.a.createElement(ta,null);case Lt.OPERATOR:return a.a.createElement(aa,null);case Lt.PHOTO:return a.a.createElement(sa,null);case Lt.PLAY:return a.a.createElement(la,null);case Lt.PLUS:return a.a.createElement(ca,null);case Lt.QUESTION:return a.a.createElement(ha,null);case Lt.REFRESH:return a.a.createElement(pa,null);case Lt.REMOVE:return a.a.createElement(ga,null);case Lt.REPLY:return a.a.createElement(ya,null);case Lt.SEARCH:return a.a.createElement(Ea,null);case Lt.SEND:return a.a.createElement(Ca,null);case Lt.SETTINGS_FILLED:return a.a.createElement(Sa,null);case Lt.SPINNER:return a.a.createElement(Ta,null);case Lt.SUPERGROUP:return a.a.createElement(wa,null);case Lt.THUMBNAIL_NONE:return a.a.createElement(Ra,null);case Lt.TOGGLE_OFF:return a.a.createElement(Ma,null);case Lt.TOGGLE_ON:return a.a.createElement(La,null);case Lt.USER:return a.a.createElement(Da,null);default:return"icon"}}(t))}Ga.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),type:I.a.oneOfType([I.a.oneOf(Object.keys(Lt)),I.a.string]).isRequired,fillColor:I.a.oneOf(Object.keys(xa)),width:I.a.oneOfType([I.a.string,I.a.number]),height:I.a.oneOfType([I.a.string,I.a.number]),onClick:I.a.func,children:I.a.element},Ga.defaultProps={className:"",fillColor:xa.DEFAULT,width:26,height:26,onClick:function(){},children:null};var ja=Lt,Ba=xa,za=function(e){if("number"===typeof e)return e;if("string"===typeof e){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return null},Va=function(e){var n=e.width,t=e.height,r=za(n),i=za(t);return"number"===typeof r&&(r*=.575),"number"===typeof i&&(i*=.575),a.a.createElement("div",{className:"sendbird-avatar-img--default",style:{width:n,height:t}},a.a.createElement(Ga,{type:ja.USER,fillColor:Ba.CONTENT,width:r,height:i}))},qa=function(e){var n=e.src,t=void 0===n?"":n,r=e.alt,i=void 0===r?"":r,s=e.height,o=e.width,l=e.customDefaultComponent,u=function(){return l?l({width:o,height:s}):function(e){var n=e.width,t=e.height;return a.a.createElement(Va,{width:n,height:t})}({width:o,height:s})};return"string"===typeof t?a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t,height:s,width:o,alt:i,defaultComponent:u}):t&&t.length?1===t.length?a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[0],height:s,width:o,alt:i,defaultComponent:u}):2===t.length?a.a.createElement("div",{className:"sendbird-avatar--inner__two-child"},a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[0],height:s,width:o,alt:i,defaultComponent:u}),a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[1],height:s,width:o,alt:i,defaultComponent:u})):3===t.length?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[0],height:s,width:o,alt:i,defaultComponent:u})),a.a.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[1],height:s,width:o,alt:i,defaultComponent:u}),a.a.createElement(Mn,{className:"sendbird-avatar-img",url:t[2],height:s,width:o,alt:i,defaultComponent:u}))):a.a.createElement("div",{className:"sendbird-avatar--inner__four-child"},t.slice(0,4).map(function(e){return a.a.createElement(Mn,{className:"sendbird-avatar-img",url:e,height:s,width:o,alt:i,key:S(),defaultComponent:u})})):a.a.createElement(Mn,{className:"sendbird-avatar-img",url:"",height:s,width:o,alt:i,defaultComponent:u})};function Ka(e,n){var t=e.className,r=void 0===t?"":t,i=e.src,s=void 0===i?"":i,o=e.alt,l=void 0===o?"":o,u=e.width,c=void 0===u?"56px":u,d=e.height,h=void 0===d?"56px":d,f=e.onClick,p=e.customDefaultComponent;return a.a.createElement("div",{className:N(N([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:h,width:c},onClick:f,onKeyDown:f,tabIndex:0},a.a.createElement(qa,{src:s,width:c,height:h,alt:l,customDefaultComponent:p}))}var Ya=a.a.forwardRef(Ka),Qa={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},Wa={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function Ja(e){switch(e){case Qa.H_1:return"sendbird-label--h-1";case Qa.H_2:return"sendbird-label--h-2";case Qa.SUBTITLE_1:return"sendbird-label--subtitle-1";case Qa.SUBTITLE_2:return"sendbird-label--subtitle-2";case Qa.BODY_1:return"sendbird-label--body-1";case Qa.BODY_2:return"sendbird-label--body-2";case Qa.BUTTON_1:return"sendbird-label--button-1";case Qa.BUTTON_2:return"sendbird-label--button-2";case Qa.CAPTION_1:return"sendbird-label--caption-1";case Qa.CAPTION_2:return"sendbird-label--caption-2";case Qa.CAPTION_3:return"sendbird-label--caption-3";default:return null}}function Xa(e){switch(e){case Wa.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case Wa.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case Wa.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case Wa.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case Wa.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case Wa.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case Wa.PRIMARY:return"sendbird-label--color-primary";case Wa.ERROR:return"sendbird-label--color-error";case Wa.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return null}}function $a(e){var n=e.className,t=e.type,r=e.color,i=e.children;return a.a.createElement("span",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-label",t?Ja(t):"",r?Xa(r):""]).join(" ")},i)}$a.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),type:I.a.oneOf([].concat(_(Object.keys(Qa)),[""])),color:I.a.oneOf([].concat(_(Object.keys(Wa)),[""])),children:I.a.oneOfType([I.a.string,I.a.number,I.a.element,I.a.any])},$a.defaultProps={className:[],type:"",color:"",children:null};var Za=Qa,ei=Wa,ni=O("en");var ti={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function ri(e){var n=e.className,t=e.width,r=e.height,i=e.children;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-loader"]).join(" "),style:{width:"string"===typeof t?t:"".concat(t,"px"),height:"string"===typeof r?r:"".concat(r,"px")}},i)}ri.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),width:I.a.oneOfType([I.a.string,I.a.number]),height:I.a.oneOfType([I.a.string,I.a.number]),children:I.a.element},ri.defaultProps={className:"",width:"26px",height:"26px",children:a.a.createElement(Ga,{type:ja.SPINNER,width:"26px",height:"26px"})};var ai=ti;function ii(e){var n=e.className,t=e.type,i=e.retryToConnect,s=e.searchInString,o=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-place-holder"]).join(" ")},t===ai.LOADING&&a.a.createElement(ri,{width:"48px",height:"48px"},a.a.createElement(Ga,{type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"48px",height:"48px"})),(t===ai.NO_CHANNELS||t===ai.NO_MESSAGES||t===ai.WRONG)&&a.a.createElement("div",{className:"sendbird-place-holder__body"},t===ai.NO_CHANNELS&&a.a.createElement(Ga,{className:"sendbird-place-holder__body__icon",type:ja.CHAT,fillColor:Ba.ON_BACKGROUND_3,width:"64px",height:"64px"}),t===ai.WRONG&&a.a.createElement(Ga,{className:"sendbird-place-holder__body__icon",type:ja.ERROR,fillColor:Ba.ON_BACKGROUND_3,width:"64px",height:"64px"}),t===ai.NO_MESSAGES&&a.a.createElement(Ga,{className:"sendbird-place-holder__body__icon",type:ja.MESSAGE,fillColor:Ba.ON_BACKGROUND_3,width:"64px",height:"64px"}),a.a.createElement($a,{className:"sendbird-place-holder__body__text",type:Za.BODY_1,color:ei.ONBACKGROUND_2},t===ai.NO_CHANNELS&&o.PLACE_HOLDER__NO_CHANNEL,t===ai.WRONG&&o.PLACE_HOLDER__WRONG,t===ai.NO_MESSAGES&&o.PLACE_HOLDER__NO_MESSAGES),i&&a.a.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:i,onKeyPress:i,tabIndex:0},a.a.createElement(Ga,{className:"sendbird-place-holder__body__reconnect__icon",type:ja.REFRESH,fillColor:Ba.PRIMARY,width:"20px",height:"20px"}),a.a.createElement($a,{className:"sendbird-place-holder__body__reconnect__text",type:Za.BUTTON_1,color:ei.PRIMARY},o.PLACE_HOLDER__RETRY_TO_CONNECT))),(t===ai.NO_RESULTS||t===ai.SEARCH_IN||t===ai.SEARCHING)&&a.a.createElement("div",{className:"sendbird-place-holder__body--align-top"},t===ai.SEARCH_IN&&a.a.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},a.a.createElement($a,{className:"sendbird-place-holder__body--align-top__text__search-in",type:Za.BUTTON_2,color:ei.ONBACKGROUND_2},o.SEARCH_IN),a.a.createElement($a,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:Za.BUTTON_2,color:ei.PRIMARY},"'".concat(s)),a.a.createElement($a,{className:"sendbird-place-holder__body--align-top__text__quote",type:Za.BUTTON_2,color:ei.PRIMARY},"'")),t===ai.SEARCHING&&a.a.createElement($a,{className:"sendbird-place-hlder__body--align-top__searching",type:Za.BODY_1,color:ei.ONBACKGROUND_2},o.SEARCHING),t===ai.NO_RESULTS&&a.a.createElement($a,{className:"sendbird-place-hlder__body--align-top__no-result",type:Za.BODY_1,color:ei.ONBACKGROUND_2},o.NO_SEARCHED_MESSAGE)))}ii.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),type:I.a.oneOfType([I.a.oneOf(Object.keys(ai)),I.a.string]).isRequired,retryToConnect:I.a.func,searchInString:I.a.string},ii.defaultProps={className:"",retryToConnect:null,searchInString:""};var si=a.a.createContext({disableUserProfile:!0,isOpenChannel:!1,renderUserProfile:null}),oi=function(e){var n=e.children,t=e.className;return a.a.createElement(si.Provider,{value:e},a.a.createElement("div",{className:t},n))};oi.propTypes={children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element),I.a.any]).isRequired,isOpenChannel:I.a.bool,disableUserProfile:I.a.bool,renderUserProfile:I.a.func,className:I.a.string},oi.defaultProps={className:null,isOpenChannel:!1,disableUserProfile:!1,renderUserProfile:null};var li={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"]},ui={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},ci={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",OTHERS:"OTHERS"},di={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},hi={NONE:"NONE",PENDING:"PENDING",SENT:"SENT",FAILED:"FAILED",DELIVERED:"DELIVERED",READ:"READ"},fi=function(e){return li.IMAGE.indexOf(e)>=0},pi=function(e){return li.VIDEO.indexOf(e)>=0},mi=function(e){return"image/gif"===e},gi=function(e){return fi(e)||pi(e)},_i=function(e){return li.AUDIO.indexOf(e)>=0},yi=function(){return C({},ci)},vi=function(e){return mi(e)?ci.GIF:fi(e)?ci.IMAGE:pi(e)?ci.VIDEO:_i(e)?ci.AUDIO:ci.OTHERS},Ei=function(){return C({},hi)},bi=function(e,n){var t;if("pending"===n.sendingStatus)return hi.PENDING;if("failed"===n.sendingStatus)return hi.FAILED;if(null===(t=null===e||void 0===e?void 0:e.isGroupChannel)||void 0===t?void 0:t.call(e)){if(0===e.getUnreadMemberCount(n))return hi.READ;if(0===e.getUndeliveredMemberCount(n))return hi.DELIVERED}return"succeeded"===n.sendingStatus?hi.SENT:hi.NONE},Ci=function(e,n){return bi(e,n)===hi.SENT||bi(e,n)===hi.DELIVERED||bi(e,n)===hi.READ},Ni=function(e,n){return bi(e,n)===hi.FAILED},Si=function(e,n){return bi(e,n)===hi.PENDING},Oi=function(e){return e===hi.SENT||e===hi.DELIVERED||e===hi.READ},Ti=function(e){var n;return e&&((null===(n=e.isUserMessage)||void 0===n?void 0:n.call(e))||e.messageType&&"user"===e.messageType)},Ai=function(e){var n;return e&&((null===(n=e.isFileMessage)||void 0===n?void 0:n.call(e))||e.messageType&&"file"===e.messageType)},wi=function(e){var n;return!!(e&&Ti(e)&&(null===e||void 0===e?void 0:e.ogMetaData)&&(null===(n=null===e||void 0===e?void 0:e.ogMetaData)||void 0===n?void 0:n.url))},Ii=function(e){return Ti(e)&&!wi(e)},Ri=function(e){return e&&Ai(e)&&gi(e.type)},ki=function(e){return e&&Ri(e)&&fi(e.type)},Mi=function(e){return e&&Ri(e)&&pi(e.type)},Ui=function(e){return e&&Ri(e)&&mi(e.type)},Li=function(e){return e&&Ai(e)&&_i(e.type)},Pi=function(e){return Ti(e)&&(null===e||void 0===e?void 0:e.updatedAt)>0},Di=function(){return C({},ui)},xi=function(e){return function(e){var n;return e&&((null===(n=e.isAdminMessage)||void 0===n?void 0:n.call(e))||e.messageType&&"admin"===e.messageType)}(e)?ui.ADMIN:Ti(e)?wi(e)?ui.OG:ui.TEXT:Ai(e)?Ri(e)?ui.THUMBNAIL:ui.FILE:ui.UNKNOWN},Fi=function(){return C({},di)},Hi=function(e,n){return Array.isArray(n)?N(N([],e,!0),n,!0):(e.push(n),e)},Gi=function(e){return Array.isArray(e)?e.reduce(Hi,[]).join(" "):e},ji=function(e,n){return n.userIds.some(function(n){return n===e})},Bi=function(e,n,t,r){var a="";return ji(n,e)&&(a=1===e.userIds.length?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),""+e.userIds.filter(function(e){return e!==n}).map(function(e){return t.get(e)||r.TOOLTIP__UNKNOWN_USER}).join(", ")+a},zi=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,Vi=function(e){return zi.test(e)},qi=function(e,n){if(n||(n=40),null===e||void 0===e)return"";if(e.length<=n)return e;var t=n-"...".length,r=Math.ceil(t/2),a=Math.floor(t/2);return e.substr(0,r)+"..."+e.substr(e.length-a)},Ki=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(t){return!1}finally{document.body.removeChild(n)}}return!1},Yi=function(e){var n;return null===(n=null===e||void 0===e?void 0:e.emojiCategories)||void 0===n?void 0:n.map(function(e){return e.emojis}).reduce(function(e,n){return e.concat(n)},[])},Qi=function(e){var n,t=new Map;return null===(n=null===e||void 0===e?void 0:e.emojiCategories)||void 0===n||n.forEach(function(e){var n;null===(n=null===e||void 0===e?void 0:e.emojis)||void 0===n||n.forEach(function(e){e&&e.key&&t.set(e.key,e)})}),t},Wi=function(e){return e.sender&&((null===(n=e.sender)||void 0===n?void 0:n.friendName)||(null===n||void 0===n?void 0:n.nickname)||(null===n||void 0===n?void 0:n.userId));var n},Ji=function(e){return kn(e.createdAt||0,"p")},Xi=function(e){return!(!e.friendDiscoveryKey&&!e.friendName)},$i=function(e,n){var t,r,a;if((null===e||void 0===e?void 0:e.messageType)&&e.messageType!==n.messageType)return!1;if((null===(t=null===e||void 0===e?void 0:e.customTypes)||void 0===t?void 0:t.length)>0){var i=e.customTypes.filter(function(e){return"*"!==e});if(i.length>0&&!i.includes(n.customType))return!1}if((null===e||void 0===e?void 0:e.senderUserIds)&&(null===(r=null===e||void 0===e?void 0:e.senderUserIds)||void 0===r?void 0:r.length)>0){if(!((null===n||void 0===n?void 0:n.isUserMessage())||n.isFileMessage()))return!1;var s=n.sender||n._sender;if(!(null===(a=null===e||void 0===e?void 0:e.senderUserIds)||void 0===a?void 0:a.includes(null===s||void 0===s?void 0:s.userId)))return!1}return!((null===e||void 0===e||!e.includeParentMessageInfo)&&((null===n||void 0===n?void 0:n.parentMessageId)||(null===n||void 0===n?void 0:n.parentMessage)))},Zi=function(e,n,t){var r,a,i,s,o,l,u,c;if(!(null===e||void 0===e?void 0:e.includeEmpty)&&(null===n||void 0===n?void 0:n.lastMessage)&&null===n.lastMessage)return!1;if((null===(r=null===e||void 0===e?void 0:e._searchFilter)||void 0===r?void 0:r.search_query)&&(null===(a=e._searchFilter.search_fields)||void 0===a?void 0:a.length)>0){var d=e._searchFilter,h=d.search_query,f=d.search_fields;if(h&&f&&f.length>0&&!f.some(function(e){switch(e){case"channel_name":return n.name.toLowerCase().includes(h.toLowerCase());case"member_nickname":return n.members.some(function(e){return e.nickname.toLowerCase().includes(h.toLowerCase())});default:return!0}}))return!1}if((null===(s=null===(i=null===e||void 0===e?void 0:e._userIdsFilter)||void 0===i?void 0:i.userIds)||void 0===s?void 0:s.length)>0){var p=e._userIdsFilter,m=p.includeMode,g=p.queryType,_=p.userIds,y=n.members.map(function(e){return e.userId});if(m){if(_.length>0)switch(g){case"AND":if(_.some(function(e){return!y.includes(e)}))return!1;break;case"OR":if(_.every(function(e){return!y.includes(e)}))return!1}}else{if(_.includes(t)||_.push(t),n.members.length>_.length)return!1;if(!function(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(var t=N([],e,!0).sort(),r=N([],n,!0).sort(),a=0;a<t.length;++a)if(t[a]!==r[a])return!1;return!0}(_,y))return!1}}if(!1===(null===e||void 0===e?void 0:e.includeEmpty)&&null===(null===n||void 0===n?void 0:n.lastMessage))return!1;if(!1===(null===e||void 0===e?void 0:e.includeFrozen)&&!0===(null===n||void 0===n?void 0:n.isFrozen))return!1;if((null===(o=null===e||void 0===e?void 0:e.customTypesFilter)||void 0===o?void 0:o.length)>0&&!e.customTypesFilter.includes(null===n||void 0===n?void 0:n.customType))return!1;if((null===e||void 0===e?void 0:e.customTypeStartsWithFilter)&&!new RegExp("^"+e.customTypeStartsWithFilter).test(null===n||void 0===n?void 0:n.customType))return!1;if((null===e||void 0===e?void 0:e.channelNameContainsFilter)&&!(null===(l=null===n||void 0===n?void 0:n.name)||void 0===l?void 0:l.toLowerCase().includes(e.channelNameContainsFilter.toLowerCase())))return!1;if(null===e||void 0===e?void 0:e.nicknameContainsFilter){var v=e.nicknameContainsFilter.toLowerCase();if(null===(u=null===n||void 0===n?void 0:n.members)||void 0===u?void 0:u.every(function(e){return!e.nickname.toLowerCase().includes(v)}))return!1}if((null===(c=null===e||void 0===e?void 0:e.channelUrlsFilter)||void 0===c?void 0:c.length)>0&&!e.channelUrlsFilter.includes(null===n||void 0===n?void 0:n.url))return!1;if(null===e||void 0===e?void 0:e.memberStateFilter)switch(e.memberStateFilter){case"joined_only":if("joined"!==(null===n||void 0===n?void 0:n.myMemberState))return!1;break;case"invited_only":if("invited"!==(null===n||void 0===n?void 0:n.myMemberState))return!1;break;case"invited_by_friend":if("invited"!==(null===n||void 0===n?void 0:n.myMemberState)||!Xi(n.inviter))return!1;break;case"invited_by_non_friend":if("invited"!==(null===n||void 0===n?void 0:n.myMemberState)||Xi(n.inviter))return!1}if(null===e||void 0===e?void 0:e.hiddenChannelFilter)switch(e.hiddenChannelFilter){case"unhidden_only":if((null===n||void 0===n?void 0:n.isHidden)||"unhidden"!==(null===n||void 0===n?void 0:n.hiddenState))return!1;break;case"hidden_only":if(!(null===n||void 0===n?void 0:n.isHidden))return!1;break;case"hidden_allow_auto_unhide":if(!(null===n||void 0===n?void 0:n.isHidden)||"hidden_allow_auto_unhide"!==(null===n||void 0===n?void 0:n.hiddenState))return!1;break;case"hidden_prevent_auto_unhide":if(!(null===n||void 0===n?void 0:n.isHidden)||"hidden_prevent_auto_unhide"!==(null===n||void 0===n?void 0:n.hiddenState))return!1}if(null===e||void 0===e?void 0:e.unreadChannelFilter)switch(e.unreadChannelFilter){case"unread_message":if(0===(null===n||void 0===n?void 0:n.unreadMessageCount))return!1}if(null===e||void 0===e?void 0:e.publicChannelFilter)switch(e.publicChannelFilter){case"public":if(!(null===n||void 0===n?void 0:n.isPublic))return!1;break;case"private":if(null===n||void 0===n?void 0:n.isPublic)return!1}if(null===e||void 0===e?void 0:e.superChannelFilter)switch(e.superChannelFilter){case"super":if(!(null===n||void 0===n?void 0:n.isSuper))return!1;break;case"nonsuper":if(null===n||void 0===n?void 0:n.isSuper)return!1}return!0},es=function(e,n){var t;if(e.some(function(e){return e.url===n.url}))return e.map(function(e){return e.url===n.url?n:e});var r=function e(n,t){var r=Math.floor(n.length/2);if(n[r]===t)return r;var a=n.slice(0,r),i=n.slice(r+1,n.length);return n[r]>t?r+1+(0===i.length?0:e(i,t)):0===a.length?r:e(a,t)}(e.map(function(e){var n;return(null===(n=null===e||void 0===e?void 0:e.lastMessage)||void 0===n?void 0:n.createdAt)||(null===e||void 0===e?void 0:e.createdAt)}),(null===(t=null===n||void 0===n?void 0:n.lastMessage)||void 0===t?void 0:t.createdAt)||(null===n||void 0===n?void 0:n.createdAt));return N(N(N([],e.slice(0,r),!0),[n],!1),e.slice(r,e.length),!0)},ns=a.a.forwardRef(function(e,n){var t=e.className,i=e.children,o=e.disabled,l=e.width,u=e.height,c=e.type,d=e.onClick,h=e.onBlur,f=e.style,p=g(Object(r.useState)(""),2),m=p[0],y=p[1];return a.a.createElement("button",{className:[].concat(_(Array.isArray(t)?t:[t]),["sendbird-iconbutton",m]).join(" "),disabled:o,ref:n,type:c,style:s(s({},f),{},{height:u,width:l}),onClick:function(e){o||(y("sendbird-iconbutton--pressed"),d(e))},onBlur:function(e){y(""),h(e)}},a.a.createElement("span",{className:"sendbird-iconbutton__inner"},i))});ns.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element),I.a.any]).isRequired,disabled:I.a.bool,width:I.a.string,height:I.a.string,type:I.a.string,onClick:I.a.func,onBlur:I.a.func,style:I.a.shape({})},ns.defaultProps={className:"",disabled:!1,width:"56px",height:"56px",type:"button",onClick:function(){},onBlur:function(){},style:{}};var ts="sendbird-modal-root",rs={PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",DANGER:"DANGER",DISABLED:"DISABLED"},as={BIG:"BIG",SMALL:"SMALL"};function is(e){switch(e){case rs.PRIMARY:return"sendbird-button--primary";case rs.SECONDARY:return"sendbird-button--secondary";case rs.DANGER:return"sendbird-button--danger";case rs.DISABLED:return"sendbird-button--disabled";default:return null}}function ss(e){switch(e){case as.BIG:return"sendbird-button--big";case as.SMALL:return"sendbird-button--small";default:return null}}function os(e){var n=e.className,t=e.type,r=e.size,i=e.children,s=e.disabled,o=e.onClick,l=[].concat(_(Array.isArray(n)?n:[n]),["sendbird-button",s?"sendbird-button__disabled":"",is(t),ss(r)]).join(" ");return a.a.createElement("button",{className:l,type:"button",onClick:o,disabled:s},a.a.createElement($a,{className:"sendbird-button__text",type:Za.BUTTON_1,color:ei.ONCONTENT_1},i))}var ls=rs,us=as;os.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),type:I.a.oneOf(Object.keys(rs)),size:I.a.oneOf(Object.keys(as)),children:I.a.oneOfType([I.a.string,I.a.element,I.a.arrayOf(I.a.element)]),disabled:I.a.bool,onClick:I.a.func},os.defaultProps={className:"",type:rs.PRIMARY,size:as.BIG,children:"Button",disabled:!1,onClick:function(){}};var cs=function(e){var n=e.titleText;return a.a.createElement("div",{className:"sendbird-modal__header"},a.a.createElement($a,{type:Za.H_1,color:ei.ONBACKGROUND_1},n))};cs.propTypes={titleText:I.a.string.isRequired};var ds=function(e){var n=e.children;return a.a.createElement("div",{className:"sendbird-modal__body"},n)};ds.propTypes={children:I.a.oneOfType([I.a.element.isRequired,I.a.arrayOf(I.a.element.isRequired)])},ds.defaultProps={children:null};var hs=function(e){var n=e.onSubmit,t=e.onCancel,i=e.disabled,s=void 0!==i&&i,o=e.submitText,l=e.type,u=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-modal__footer"},a.a.createElement(os,{type:ls.SECONDARY,onClick:t},a.a.createElement($a,{type:Za.BUTTON_1,color:ei.ONBACKGROUND_1},u.BUTTON__CANCEL)),a.a.createElement(os,{type:l,disabled:s,onClick:n},o))};function fs(e){var n=e.children,t=e.onCancel,r=e.onSubmit,i=e.disabled,s=e.submitText,o=e.titleText,l=e.hideFooter,u=e.type;return Object(ke.createPortal)(a.a.createElement("div",{className:"sendbird-modal"},a.a.createElement("div",{className:"sendbird-modal__content"},a.a.createElement(cs,{titleText:o}),a.a.createElement(ds,null,n),!l&&a.a.createElement(hs,{disabled:i,onCancel:t,onSubmit:r,submitText:s,type:u}),a.a.createElement("div",{className:"sendbird-modal__close"},a.a.createElement(ns,{width:"32px",height:"32px",onClick:t},a.a.createElement(Ga,{type:ja.CLOSE,fillColor:Ba.DEFAULT,width:"24px",height:"24px"})))),a.a.createElement("div",{className:"sendbird-modal__backdrop"})),document.getElementById(ts))}hs.propTypes={onCancel:I.a.func.isRequired,onSubmit:I.a.func.isRequired,submitText:I.a.string.isRequired,disabled:I.a.bool,type:I.a.string},hs.defaultProps={disabled:!1,type:ls.DANGER},fs.propTypes={children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element)]),onCancel:I.a.func.isRequired,onSubmit:I.a.func.isRequired,hideFooter:I.a.bool,disabled:I.a.bool,type:I.a.string},fs.defaultProps={children:null,hideFooter:!1,disabled:!1,type:ls.DANGER};var ps={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",PRIMARY:"PRIMARY",ERROR:"ERROR"};function ms(e){switch(e){case ps.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case ps.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case ps.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case ps.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case ps.ONCONTENT_1:return"sendbird-color--oncontent-1";case ps.PRIMARY:return"sendbird-color--primary";case ps.ERROR:return"sendbird-color--error";default:return null}}function gs(e){var n=e.className,t=e.color,r=e.disabled,i=e.notUnderline,s=e.onClick,o=e.children;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),[ms(t),i?"sendbird-textbutton--not-underline":"sendbird-textbutton",r?"sendbird-textbutton--disabled":""]).join(" "),role:"button",tabIndex:0,onClick:s,onKeyPress:s},o)}gs.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),color:I.a.string,disabled:I.a.bool,notUnderline:I.a.bool,onClick:I.a.func,children:I.a.oneOfType([I.a.string,I.a.element]).isRequired},gs.defaultProps={className:"",color:ps.ONBACKGROUND_1,disabled:!1,notUnderline:!1,onClick:function(){}};var _s="SEND_MESSAGE_START",ys="UPDATE_USER_MESSAGE",vs=function(e){var n=e.stores,t=(void 0===n?{}:n).sdkStore;return(void 0===t?{}:t).sdk},Es=function(e){var n=e.config;return(void 0===n?{}:n).pubSub},bs=function(e){return function(n){var t=vs(e),r=Es(e);return new Promise(function(e,a){t||a(new Error("Sdk not found")),t.GroupChannel.createChannel(n).then(function(n){e(n),r.publish("CREATE_CHANNEL",{channel:n})}).catch(a)})}},Cs=vs;var Ns=b(function(e){var n=e.user,t=e.currentUserId,i=e.sdk,s=e.logger,o=e.disableMessaging,l=void 0!==o&&o,u=e.createChannel,c=e.onSuccess,d=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird__user-profile"},a.a.createElement("section",{className:"sendbird__user-profile-avatar"},a.a.createElement(Ya,{height:"80px",width:"80px",src:n.profileUrl})),a.a.createElement("section",{className:"sendbird__user-profile-name"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},n.nickname||d.NO_NAME)),n.userId!==t&&!l&&a.a.createElement("section",{className:"sendbird__user-profile-message"},a.a.createElement(os,{type:ls.SECONDARY,onClick:function(){var e=new i.GroupChannelParams;e.isDistinct=!0,e.addUserIds([n.userId]),c(),u(e).then(function(e){s.info("UserProfile, channel create",e)})}},d.USER_PROFILE__MESSAGE)),a.a.createElement("div",{className:"sendbird__user-profile-separator"}),a.a.createElement("section",{className:"sendbird__user-profile-userId"},a.a.createElement($a,{className:"sendbird__user-profile-userId--label",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},d.USER_PROFILE__USER_ID),a.a.createElement($a,{className:"sendbird__user-profile-userId--value",type:Za.BODY_1,color:ei.ONBACKGROUND_1},n.userId)))},function(e){return{sdk:vs(e),createChannel:bs(e),logger:e.config.logger,pubsub:e.config.pubSub}}),Ss=function(e){d(t,r["Component"]);var n=m(t);function t(e){var r;return o(this,t),c(p(r=n.call(this,e)),"showParent",function(){var e=r.props.parentContainRef,n=void 0===e?{}:e,t=n.current;n&&t&&t.classList.add("sendbird-icon--pressed")}),c(p(r),"hideParent",function(){var e=r.props.parentContainRef,n=void 0===e?{}:e,t=n.current;n&&t&&t.classList.remove("sendbird-icon--pressed")}),c(p(r),"setupEvents",function(){var e=r.props.closeDropdown,n=p(r).menuRef,t=function(t){n.current&&!n.current.contains(t.target)&&e()};r.setState({handleClickOutside:t}),document.addEventListener("mousedown",t)}),c(p(r),"cleanUpEvents",function(){var e=r.state.handleClickOutside;document.removeEventListener("mousedown",e)}),c(p(r),"getMenuPosition",function(){var e=r.props,n=e.parentRef,t=e.openLeft,a=n.current.getBoundingClientRect(),i=a.x||a.left,s=a.y||a.top,o={top:s,left:i};if(!r.menuRef.current)return o;var l=window,u=l.innerWidth,c=l.innerHeight,d=r.menuRef.current.getBoundingClientRect();if(s+d.height>c&&(o.top-=d.height),i+d.width>u&&!t&&(o.left-=d.width),o.top<0&&(o.top=d.height<c?(c-d.height)/2:0),o.left<0&&(o.left=d.width<u?(u-d.width)/2:0),o.top+=32,t){var h=Number.isNaN(d.width-30)?108:d.width-30;o.left-=h}return r.setState({menuStyle:o})}),r.menuRef=a.a.createRef(),r.state={menuStyle:{},handleClickOutside:function(){}},r}return u(t,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getMenuPosition(),this.showParent()}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent()}},{key:"render",value:function(){var e=this.state.menuStyle,n=this.props,t=n.children,r=n.style;return Object(ke.createPortal)(a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),a.a.createElement("ul",{className:"sendbird-dropdown__menu",ref:this.menuRef,style:s({display:"inline-block",position:"fixed",left:"".concat(Math.round(e.left),"px"),top:"".concat(Math.round(e.top),"px")},r)},t)),document.getElementById("sendbird-dropdown-portal"))}}]),t}();Ss.propTypes={closeDropdown:I.a.func.isRequired,children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element)]).isRequired,style:I.a.shape({}),parentRef:I.a.oneOfType([I.a.func,I.a.shape({current:I.a.instanceOf(Element)})]).isRequired,parentContainRef:I.a.oneOfType([I.a.func,I.a.shape({current:I.a.instanceOf(Element)})]).isRequired,openLeft:I.a.bool},Ss.defaultProps={style:{},openLeft:!1};var Os="sendbird-sort-by-row";function Ts(e){var n=e.className,t=e.maxItemCount,r=e.itemWidth,i=e.itemHeight,s=e.children;if(s.length>t){for(var o=[],l=0;l<s.length;l+=t)o.push(a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),[Os]).join(" "),key:n+l,style:{width:r*t,height:i}},s.slice(l,l+t)));return o}return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),[Os]).join(" "),style:{width:r*s.length,height:i}},s)}Ts.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),maxItemCount:I.a.number.isRequired,itemWidth:I.a.number.isRequired,itemHeight:I.a.number.isRequired,children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element),I.a.string,I.a.arrayOf(I.a.string)]).isRequired},Ts.defaultProps={className:""};var As=function(e){d(t,r["Component"]);var n=m(t);function t(e){var r;return o(this,t),c(p(r=n.call(this,e)),"showParent",function(){var e=r.props.parentContainRef,n=void 0===e?{}:e,t=n.current;n&&t&&t.classList.add("sendbird-reactions--pressed")}),c(p(r),"hideParent",function(){var e=r.props.parentContainRef,n=void 0===e?{}:e,t=n.current;n&&t&&t.classList.remove("sendbird-reactions--pressed")}),c(p(r),"setupEvents",function(){var e=r.props.closeDropdown,n=p(r).reactionRef,t=function(t){n.current&&!n.current.contains(t.target)&&e()};r.setState({handleClickOutside:t}),document.addEventListener("mousedown",t)}),c(p(r),"cleanUpEvents",function(){var e=r.state.handleClickOutside;document.removeEventListener("mousedown",e)}),c(p(r),"getBarPosition",function(){var e=r.props,n=e.parentRef,t=e.spaceFromTrigger,a=t.x||0,i=t.y||0,s=n.current.getBoundingClientRect(),o=s.x||s.left,l={top:s.y||s.top,left:o};if(!r.reactionRef.current)return l;var u=r.reactionRef.current.getBoundingClientRect();l.top<u.height?(l.top+=s.height,l.top+=i):(l.top-=u.height,l.top-=i),l.left-=u.width/2,l.left+=s.height/2-2,l.left+=a;var c=window.innerWidth-u.width;return c<l.left&&(l.left=c),l.left<0&&(l.left=0),r.setState({reactionStyle:l})}),r.reactionRef=a.a.createRef(),r.state={reactionStyle:{},handleClickOutside:function(){}},r}return u(t,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getBarPosition(),this.showParent()}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent()}},{key:"render",value:function(){var e=this.state.reactionStyle,n=this.props.children;return Object(ke.createPortal)(a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),a.a.createElement("ul",{className:"sendbird-dropdown__reaction-bar",ref:this.reactionRef,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(e.left),"px"),top:"".concat(Math.round(e.top),"px")}},a.a.createElement(Ts,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},n))),document.getElementById("sendbird-emoji-list-portal"))}}]),t}();As.propTypes={closeDropdown:I.a.func.isRequired,children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.element)]).isRequired,parentRef:I.a.oneOfType([I.a.func,I.a.shape({current:I.a.instanceOf(Element)})]).isRequired,parentContainRef:I.a.oneOfType([I.a.func,I.a.shape({current:I.a.instanceOf(Element)})]).isRequired,spaceFromTrigger:I.a.shape({x:I.a.number,y:I.a.number})},As.defaultProps={spaceFromTrigger:{}};var ws=Ss,Is=As,Rs=function(e){var n=e.className,t=e.children,r=e.onClick,i=e.disable,s=function(e){i||r(e)};return a.a.createElement("li",{className:Gi([n,"sendbird-dropdown__menu-item",i?"disable":""]),role:"menuitem",onClick:s,onKeyPress:function(e){13===e.keyCode&&s(e)},tabIndex:0},a.a.createElement($a,{className:"sendbird-dropdown__menu-item__text",type:Za.SUBTITLE_2,color:i?ei.ONBACKGROUND_4:ei.ONBACKGROUND_1},t))};function ks(e){var n=e.menuTrigger,t=e.menuItems,i=g(Object(r.useState)(!1),2),s=i[0],o=i[1];return a.a.createElement("div",{className:"sendbird-context-menu",style:{display:"inline"}},n(function(){return o(!s)}),s&&t(function(){return o(!1)}))}Rs.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),children:I.a.oneOfType([I.a.string,I.a.element]).isRequired,onClick:I.a.func.isRequired,disable:I.a.bool},Rs.defaultProps={className:"",disable:!1},ks.propTypes={menuTrigger:I.a.func.isRequired,menuItems:I.a.func.isRequired};var Ms=function(e){if(e&&e.coverUrl)return e.coverUrl},Us=function(e,n){return e&&e.coverUrl&&!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl)?e.coverUrl:e&&e.members?e.members.filter(function(e){return e.userId!==n}).map(function(e){return e.profileUrl}):[]},Ls=function(e){return!e||!e.coverUrl||!!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl)};function Ps(e){var n=e.channel,t=e.userId,i=e.theme,s=e.width,o=void 0===s?56:s,l=e.height,u=void 0===l?56:l,c=n.isBroadcast,d=Object(r.useMemo)(function(){return c?Ls(n)?a.a.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:o,height:u,display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(Ga,{type:ja.BROADCAST,fillColor:Ba.CONTENT,width:.575*o,height:.575*u})):a.a.createElement(Ya,{className:"sendbird-chat-header--avatar--broadcast-channel",src:Us(n,t),width:o,height:u,alt:n.name}):a.a.createElement(Ya,{className:"sendbird-chat-header--avatar--group-channel",src:Us(n,t),width:o+"px",height:u+"px",alt:n.name})},[n.members,n.coverUrl,i]);return a.a.createElement(a.a.Fragment,null,d)}var Ds=function(e){var n=e.children;return a.a.createElement($a,{className:"sendbird-input-label",type:Za.CAPTION_3,color:ei.ONBACKGROUND_1},n)};Ds.propTypes={children:I.a.string.isRequired};var xs=a.a.forwardRef(function(e,n){var t=e.name,i=e.required,s=e.disabled,o=e.placeHolder,l=e.value,u=g(Object(r.useState)(l),2),c=u[0],d=u[1];return a.a.createElement("div",{className:"sendbird-input"},a.a.createElement("input",{className:"sendbird-input__input",ref:n,name:t,required:i,disabled:s,value:c,onChange:function(e){d(e.target.value)}}),o&&!c&&a.a.createElement($a,{className:"sendbird-input__placeholder",type:Za.BODY_1,color:ei.ONBACKGROUND_3},o))});xs.propTypes={name:I.a.string.isRequired,required:I.a.bool,disabled:I.a.bool,placeHolder:I.a.string,value:I.a.string},xs.defaultProps={required:!1,disabled:!1,placeHolder:"",value:""};var Fs=function(){};function Hs(e){var n=e.height,t=void 0===n?24:n,r=e.width,i=void 0===r?24:r;return a.a.createElement("div",{className:"sendbird-muted-avatar",style:{height:t+"px",width:i+"px"}},a.a.createElement("div",{className:"sendbird-muted-avatar__icon"},a.a.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:t+"px",width:i+"px"}}),a.a.createElement(Ga,{type:ja.MUTE,fillColor:Ba.WHITE,width:t-8+"px",height:i-8+"px"})))}function Gs(e){var n=e.id,t=e.checked,i=e.onChange,s=g(Object(r.useState)(t),2),o=s[0],l=s[1];return a.a.createElement("label",{className:"sendbird-checkbox",htmlFor:n},a.a.createElement("input",{id:n,type:"checkbox",checked:o,onClick:function(){return l(!o)},onChange:i}),a.a.createElement("span",{className:"sendbird-checkbox--checkmark"}))}function js(e){var n=e.className,t=e.user,i=e.checkBox,s=e.disableMessaging,o=e.currentUser,l=e.checked,u=e.onChange,c=e.action,d=t.userId,h=a.a.useRef(null),f=a.a.useRef(null),p=a.a.useRef(null),m=Object(r.useContext)(si),g=m.disableUserProfile,y=m.renderUserProfile,v=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-user-list-item"]).join(" "),ref:f},t.isMuted&&a.a.createElement(Hs,{height:40,width:40}),a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{className:"sendbird-user-list-item__avatar",ref:p,src:t.profileUrl,width:"40px",height:"40px",onClick:function(){g||e()}})},menuItems:function(e){return a.a.createElement(ws,{openLeft:!0,parentRef:p,parentContainRef:p,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},y?y({user:t,currentUserId:o,close:e}):a.a.createElement(Ns,{disableMessaging:s,user:t,currentUserId:o,onSuccess:e}))}}),a.a.createElement($a,{className:"sendbird-user-list-item__title",type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},t.nickname||v.NO_NAME,o===t.userId&&" (You)"),!t.nickname&&a.a.createElement($a,{className:"sendbird-user-list-item__subtitle",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},t.userId),i&&a.a.createElement("label",{className:"sendbird-user-list-item__checkbox",htmlFor:d},a.a.createElement(Gs,{id:d,checked:l,onChange:function(e){return u(e)}})),"operator"===t.role&&a.a.createElement($a,{className:"sendbird-user-list-item__operator",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_2},"Operator"),c&&a.a.createElement("div",{className:"sendbird-user-list-item__action",ref:h},c({actionRef:h,parentRef:f})))}function Bs(e){var n=e.count,t=e.maxLevel,i=e.className,s=Object(r.useContext)(T).stringSet,o=parseInt("9".repeat(t>6?6:t),10);return a.a.createElement("div",{className:[].concat(_(Array.isArray(i)?i:[i]),["sendbird-badge"]).join(" ")},a.a.createElement("div",{className:"sendbird-badge__text"},a.a.createElement($a,{type:Za.CAPTION_2,color:ei.ONCONTENT_1},n>o?"".concat(o).concat(s.BADGE__OVER):n)))}Gs.propTypes={id:I.a.string,checked:I.a.bool,onChange:I.a.func},Gs.defaultProps={id:"sendbird-checkbox-input",checked:!1,onChange:function(){}},js.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),user:I.a.shape({userId:I.a.string,role:I.a.string,isMuted:I.a.bool,nickname:I.a.string,profileUrl:I.a.string}).isRequired,disableMessaging:I.a.bool,currentUser:I.a.string,action:I.a.element,checkBox:I.a.bool,checked:I.a.bool,onChange:I.a.func},js.defaultProps={className:"",currentUser:"",checkBox:!1,disableMessaging:!1,checked:!1,action:null,onChange:function(){}},Bs.propTypes={count:I.a.number.isRequired,maxLevel:I.a.number,className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)])},Bs.defaultProps={maxLevel:2,className:[]};var zs=function(e){var n=e.userQueryCreator,t=e.closeModal,i=e.onSubmit,o=e.submitText,l=e.titleText,u=e.idsToFilter,d=e.swapParams,h=g(Object(r.useState)([]),2),f=h[0],p=h[1],m=g(Object(r.useState)({}),2),y=m[0],v=m[1],E=Object(r.useContext)(T).stringSet,b=g(Object(r.useState)({}),2),C=b[0],N=b[1],S=Object.keys(y).length;return Object(r.useEffect)(function(){var e=n();N(e),e.next(function(e,n){var t=e,r=n;d&&(r=t=n),r||p(t)})},[]),a.a.createElement(fs,{titleText:l,submitText:o,type:rs.PRIMARY,onCancel:t,onSubmit:function(){var e=Object.keys(y);e.length>0&&(i(e),t())}},a.a.createElement("div",null,a.a.createElement($a,{color:S>0?ei.PRIMARY:ei.ONBACKGROUND_3,type:Za.CAPTION_1},"".concat(S," ").concat(E.MODAL__INVITE_MEMBER__SELECTEC)),a.a.createElement("div",{className:"sendbird-create-channel--scroll",onScroll:function(e){var n=C.hasNext,t=e.target.clientHeight+e.target.scrollTop===e.target.scrollHeight;n&&t&&C.next(function(e,n){n||p([].concat(_(f),_(e)))})}},f.map(function(e){return!function(e){return function(n){return e.includes(n)}}(u)(e.userId)&&a.a.createElement(js,{key:e.userId,user:e,checkBox:!0,checked:y[e.userId],onChange:function(e){var n=s(s({},y),{},c({},e.target.id,e.target.checked));e.target.checked||delete n[e.target.id],v(n)}})}))))};zs.propTypes={idsToFilter:I.a.arrayOf(I.a.string),swapParams:I.a.bool,userQueryCreator:I.a.func.isRequired,closeModal:I.a.func.isRequired,onSubmit:I.a.func.isRequired,submitText:I.a.string,titleText:I.a.string},zs.defaultProps={swapParams:!1,submitText:"create",titleText:"Create new channel",idsToFilter:[]};var Vs=function(e){var n=e.sdk,t=e.userFilledApplicationUserListQuery,r=void 0===t?{}:t,a=n.createApplicationUserListQuery();return r&&Object.keys(r).forEach(function(e){a[e]=r[e]}),a},qs=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).appInfo,n=(void 0===e?{}:e).applicationAttributes;return void 0===n?[]:n},Ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=qs(e);return!!Array.isArray(n)&&n.includes("allow_broadcast_channel")},Ys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=qs(e);return!!Array.isArray(n)&&n.includes("allow_super_group_channel")},Qs=function(e,n){return"broadcast"===n&&(e.isBroadcast=!0),"supergroup"===n&&(e.isSuper=!0),e},Ws=function(e,n,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"group";return new Promise(function(i,s){if(t){var o=t(n);return Qs(o,a),void e.GroupChannel.createChannel(o,function(n,t){var r=n,a=t;e.getErrorFirstCallback()&&(r=t,a=n),a&&s(a),i(r)})}var l=new e.GroupChannelParams;l.addUserIds(n),l.isDistinct=!1,r&&(l.operatorUserIds=[r]),Qs(l,a),e.GroupChannel.createChannel(l,function(n,t){var r=n,a=t;e.getErrorFirstCallback()&&(r=t,a=n),a&&s(a),i(r)})})},Js=function(e){var n=e.onCloseModal,t=e.onLeaveChannel;return a.a.createElement(fs,{onCancel:n,onSubmit:t,submitText:"Leave",titleText:"Leave this channel?"})};function Xs(e){Me(1,arguments);var n=Ue(e);return n.setHours(0,0,0,0),n}function $s(e,n){Me(2,arguments);var t=Xs(e),r=Xs(n);return t.getTime()===r.getTime()}function Zs(e){return Me(1,arguments),$s(e,Date.now())}function eo(e,n){return Me(2,arguments),function(e,n){Me(2,arguments);var t=Ue(e),r=ze(n);return isNaN(r)?new Date(NaN):r?(t.setDate(t.getDate()+r),t):t}(e,-ze(n))}function no(e){return Me(1,arguments),$s(e,eo(Date.now(),1))}Js.propTypes={onCloseModal:I.a.func.isRequired,onLeaveChannel:I.a.func.isRequired};var to="RESET_CHANNEL_LIST",ro="CREATE_CHANNEL",ao="LEAVE_CHANNEL_SUCCESS",io="SET_CURRENT_CHANNEL",so="SHOW_CHANNEL_SETTINGS",oo="HIDE_CHANNEL_SETTINGS",lo="FETCH_CHANNELS_START",uo="FETCH_CHANNELS_SUCCESS",co="FETCH_CHANNELS_FAILURE",ho="INIT_CHANNELS_START",fo="INIT_CHANNELS_SUCCESS",po="INIT_CHANNELS_FAILURE",mo="ON_USER_JOINED",go="ON_CHANNEL_DELETED",_o="ON_LAST_MESSAGE_UPDATED",yo="ON_USER_LEFT",vo="ON_CHANNEL_CHANGED",Eo="ON_CHANNEL_ARCHIVED",bo="ON_CHANNEL_FROZEN",Co="ON_CHANNEL_UNFROZEN",No="ON_READ_RECEIPT_UPDATED",So="ON_DELIVERY_RECEIPT_UPDATED",Oo="CHANNEL_REPLACED_TO_TOP",To="CHANNEL_LIST_PARAMS_UPDATED",Ao={initialized:!1,loading:!1,allChannels:[],currentChannel:null,showSettings:!1,channelListQuery:null,currentUserId:""};function wo(e,n){switch(n.type){case ho:return s(s({},e),{},{loading:!0});case to:return Ao;case fo:return s(s({},e),{},{initialized:!0,loading:!1,allChannels:n.payload,currentChannel:n.payload&&n.payload.length&&n.payload.length>0?n.payload[0].url:null});case uo:var t=e.allChannels.map(function(e){return e.url}),r=n.payload.filter(function(e){var n=e.url;return!t.find(function(e){return e===n})});return s(s({},e),{},{allChannels:[].concat(_(e.allChannels),_(r))});case ro:var a=n.payload;return e.channelListQuery?Zi(e.channelListQuery,a,e.currentUserId)?s(s({},e),{},{allChannels:es(e.allChannels,a)}):s(s({},e),{},{currentChannel:a.url}):s(s({},e),{},{currentChannel:a.url,allChannels:[a].concat(_(e.allChannels.filter(function(e){return e.url!==a.url})))});case Eo:var i=n.payload;return e.channelListQuery&&Zi(e.channelListQuery,i,e.currentUserId)?s(s({},e),{},{allChannels:es(e.allChannels,i)}):s(s({},e),{},{currentChannel:i.url===e.currentChannel?e.allChannels[e.allChannels[0].url===i.url?1:0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==i.url})});case ao:case go:var o=n.payload;return s(s({},e),{},{currentChannel:o===e.currentChannel?e.allChannels[0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==o})});case yo:var l=n.payload,u=l.channel,c=l.isMe;if(e.channelListQuery){if(Zi(e.channelListQuery,u,e.currentUserId)){var d=es(e.allChannels,u);return s(s({},e),{},{currentChannel:c&&u.url===e.currentChannel?d[0].url:e.currentChannel,allChannels:d})}return s(s({},e),{},{currentChannel:u.url===e.currentChannel?e.allChannels[0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==u.url})})}var h=e.allChannels.filter(function(e){return!(e.url===u.url&&c)});return s(s({},e),{},{currentChannel:c&&u.url===e.currentChannel?h[0].url:e.currentChannel,allChannels:h});case mo:case vo:case No:case So:var f=e.allChannels,p=void 0===f?[]:f,m=n.payload,g=m.unreadMessageCount;if(!m.lastMessage)return e;if(e.channelListQuery)return Zi(e.channelListQuery,m,e.currentUserId)?s(s({},e),{},{allChannels:es(p,m)}):s(s({},e),{},{currentChannel:m.url===e.currentChannel?e.allChannels[e.allChannels[0].url===m.url?1:0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==m.url})});if(0===g){var y=p.find(function(e){return e.url===m.url});if(0===(y&&y.unreadMessageCount))return s(s({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===m.url?m:e})})}return s(s({},e),{},{allChannels:[m].concat(_(e.allChannels.filter(function(e){return e.url!==n.payload.url})))});case io:return s(s({},e),{},{currentChannel:n.payload});case so:return s(s({},e),{},{showSettings:!0});case oo:return s(s({},e),{},{showSettings:!1});case _o:return s(s({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===n.payload.url?n.payload:e})});case bo:var v=n.payload;return e.channelListQuery?Zi(e.channelListQuery,v,e.currentUserId)?s(s({},e),{},{allChannels:es(e.allChannels,v)}):s(s({},e),{},{currentChannel:v.url===e.currentChannel?e.allChannels[e.allChannels[0].url===v.url?1:0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==v.url})}):s(s({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===v.url?(e.isFrozen=!0,e):e})});case Co:var E=n.payload;return e.channelListQuery?Zi(e.channelListQuery,E,e.currentUserId)?s(s({},e),{},{allChannels:es(e.allChannels,E)}):s(s({},e),{},{currentChannel:E.url===e.currentChannel?e.allChannels[e.allChannels[0].url===E.url?1:0].url:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==E.url})}):s(s({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===E.url?(e.isFrozen=!1,e):e})});case Oo:return s(s({},e),{},{allChannels:[n.payload].concat(_(e.allChannels.filter(function(e){return e.url!==n.payload.url})))});case To:return s(s({},e),{},{currentUserId:n.payload.currentUserId,channelListQuery:n.payload.channelListQuery});default:return e}}var Io=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ni;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?t.NO_MEMBERS:e.members.filter(function(e){return e.userId!==n}).map(function(e){return e.nickname||t.NO_NAME}).join(", "):t.NO_TITLE},Ro=function(e){if(!e||!e.lastMessage)return"";var n=e.lastMessage.createdAt;return Zs(n)?kn(n,"p"):no(n)?"Yesterday":kn(n,"MMM dd")},ko=function(e){return e&&e.memberCount?e.memberCount:0},Mo=function(e){return e&&e.lastMessage?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.messageType,t=e.name;return"file"===n?qi(t,30):e.message}(e.lastMessage):""},Uo=function(e){return e&&e.unreadMessageCount?e.unreadMessageCount:0};function Lo(e){var n=e.channel,t=e.currentUser,i=e.isActive,s=e.ChannelAction,o=e.theme,l=e.onClick,u=e.tabIndex,c=t.userId,d=n.isBroadcast,h=n.isFrozen,f=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:["sendbird-channel-preview",i?"sendbird-channel-preview--active":""].join(" "),role:"link",onClick:l,onKeyPress:l,tabIndex:u},a.a.createElement("div",{className:"sendbird-channel-preview__avatar"},a.a.createElement(Ps,{channel:n,userId:c,theme:o})),a.a.createElement("div",{className:"sendbird-channel-preview__content"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},d&&a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},a.a.createElement(Ga,{type:ja.BROADCAST,fillColor:Ba.SECONDARY,height:"16px",width:"16px"})),a.a.createElement($a,{className:"sendbird-channel-preview__content__upper__header__channel-name",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},Io(n,c,f)),a.a.createElement($a,{className:"sendbird-channel-preview__content__upper__header__total-members",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},ko(n)),h&&a.a.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},a.a.createElement(Ga,{type:ja.FREEZE,fillColor:Ba.PRIMARY,height:12,width:12}))),a.a.createElement($a,{className:"sendbird-channel-preview__content__upper__last-message-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},Ro(n))),a.a.createElement("div",{className:"sendbird-channel-preview__content__lower"},a.a.createElement($a,{className:"sendbird-channel-preview__content__lower__last-message",type:Za.BODY_2,color:ei.ONBACKGROUND_3},Mo(n)),a.a.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},Uo(n)?a.a.createElement(Bs,{count:Uo(n)}):null))),a.a.createElement("div",{className:"sendbird-channel-preview__action"},s))}function Po(e){var n=e.user,t=e.renderHeader,i=e.iconButton,s=e.onEdit,o=e.allowProfileEdit,l=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:["sendbird-channel-header",o?"sendbird-channel-header--allow-edit":""].join(" ")},t?t():a.a.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:s,onKeyDown:s,tabIndex:"0"},a.a.createElement("div",{className:"sendbird-channel-header__title__left"},a.a.createElement(Ya,{width:"32px",height:"32px",src:n.profileUrl,alt:n.nickname})),a.a.createElement("div",{className:"sendbird-channel-header__title__right"},a.a.createElement($a,{className:"sendbird-channel-header__title__right__name",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},n.nickname||l.NO_NAME),a.a.createElement($a,{className:"sendbird-channel-header__title__right__user-id",type:Za.BODY_2,color:ei.ONBACKGROUND_2},n.userId))),a.a.createElement("div",{className:"sendbird-channel-header__right-icon"},i))}Lo.propTypes={channel:I.a.shape({members:I.a.arrayOf(I.a.shape({})),coverUrl:I.a.string,isBroadcast:I.a.bool,isFrozen:I.a.bool}),currentUser:I.a.shape({userId:I.a.string}),isActive:I.a.bool,ChannelAction:I.a.element.isRequired,theme:I.a.string,onClick:I.a.func,tabIndex:I.a.number},Lo.defaultProps={channel:{},currentUser:{},isActive:!1,theme:"light",onClick:function(){},tabIndex:0},Po.propTypes={user:I.a.shape({profileUrl:I.a.string,nickname:I.a.string,userId:I.a.string}),renderHeader:I.a.func,iconButton:I.a.oneOfType([I.a.element,I.a.instanceOf(ns)]),onEdit:I.a.func.isRequired,allowProfileEdit:I.a.bool},Po.defaultProps={user:{},renderHeader:null,iconButton:null,allowProfileEdit:!1};var Do=b(function(e){var n=e.user,t=e.theme,i=void 0===t?"light":t,s=e.onCancel,o=e.onSubmit,l=e.changeTheme,u=void 0===l?Fs:l,c=e.onThemeChange,d=void 0===c?null:c,h=Object(r.useRef)(null),f=Object(r.useRef)(null),p=Object(r.useRef)(null),m=Object(r.useContext)(T).stringSet,g=Object(r.useState)(null),_=g[0],y=g[1],v=Object(r.useState)(null),E=v[0],b=v[1];return a.a.createElement(fs,{titleText:m.EDIT_PROFILE__TITLE,submitText:m.BUTTON__SAVE,type:rs.PRIMARY,onCancel:s,onSubmit:function(){""===n.nickname||f.current.value?(o(f.current.value,E),s()):p.current.reportValidity&&p.current.reportValidity()}},a.a.createElement("form",{className:"sendbird-edit-user-profile",ref:p,onSubmit:function(e){e.preventDefault()}},a.a.createElement("section",{className:"sendbird-edit-user-profile__img"},a.a.createElement(Ds,null,m.EDIT_PROFILE__IMAGE_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},a.a.createElement(Ya,{width:"80px",height:"80px",src:_||n.profileUrl})),a.a.createElement("input",{ref:h,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){y(URL.createObjectURL(e.target.files[0])),b(e.target.files[0]),h.current.value=""}}),a.a.createElement(gs,{className:"sendbird-edit-user-profile__img__avatar-button",notUnderline:!0,onClick:function(){return h.current.click()}},a.a.createElement($a,{type:Za.BUTTON_1,color:ei.PRIMARY},m.EDIT_PROFILE__IMAGE_UPLOAD))),a.a.createElement("section",{className:"sendbird-edit-user-profile__name"},a.a.createElement(Ds,null,m.EDIT_PROFILE__NICKNAME_LABEL),a.a.createElement(xs,{required:""!==n.nickname,name:"sendbird-edit-user-profile__name__input",ref:f,value:n.nickname,placeHolder:m.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),a.a.createElement("section",{className:"sendbird-edit-user-profile__userid"},a.a.createElement(Ds,null,m.EDIT_PROFILE__USERID_LABEL),a.a.createElement(xs,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:n.userId})),a.a.createElement("section",{className:"sendbird-edit-user-profile__theme"},a.a.createElement(Ds,null,m.EDIT_PROFILE__THEME_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},"dark"===i?a.a.createElement(Ga,{onClick:function(){u("light"),d&&"function"===typeof d&&d("light")},type:ja.TOGGLE_ON,width:44,height:24}):a.a.createElement(Ga,{onClick:function(){u("dark"),d&&"function"===typeof d&&d("dark")},type:ja.TOGGLE_OFF,width:44,height:24})))))},function(e){return{theme:e.config.theme,changeTheme:e.config.setCurrenttheme}});function xo(e){var n=e.sdk,t=e.disabled,i=e.channelListDispatcher,s=e.onBeforeCreateChannel,o=e.userId,l=e.userFilledApplicationUserListQuery,u=e.userListQuery,c=g(Object(r.useState)(!1),2),d=c[0],h=c[1],f=g(Object(r.useState)(0),2),p=f[0],m=f[1],_=g(Object(r.useState)("group"),2),y=_[0],v=_[1],E=Object(r.useContext)(T).stringSet;if(!n||!n.createApplicationUserListQuery)return null;var b=Ks(n),C=Ys(n);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ns,{height:"32px",width:"32px",onClick:function(){h(!0)},disabled:t},a.a.createElement(Ga,{type:ja.CREATE,fillColor:Ba.PRIMARY,width:"24px",height:"24px"})),d&&0===p&&a.a.createElement(fs,{titleText:E.MODAL__CHOOSE_CHANNEL_TYPE__TITLE,hideFooter:!0,onCancel:function(){h(!1)},onSubmit:function(){}},a.a.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("group"),m(1)},role:"button",tabIndex:0,onKeyDown:function(){v("group"),m(1)}},a.a.createElement(Ga,{className:"sendbird-add-channel__rectangle__chat-icon",type:ja.CHAT,fillColor:Ba.PRIMARY,width:"28px",height:"28px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},E.MODAL__CHOOSE_CHANNEL_TYPE__GROUP)),C&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("supergroup"),m(1)},role:"button",tabIndex:0,onKeyDown:function(){v("supergroup"),m(1)}},a.a.createElement(Ga,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:ja.SUPERGROUP,fillColor:Ba.PRIMARY,width:"28px",height:"28px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},E.MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP)),b&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("broadcast"),m(1)},role:"button",tabIndex:0,onKeyDown:function(){v("broadcast"),m(1)}},a.a.createElement(Ga,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:ja.BROADCAST,fillColor:Ba.PRIMARY,width:"28px",height:"28px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},E.MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST)))),d&&1===p&&a.a.createElement(zs,{swapParams:n&&n.getErrorFirstCallback&&n.getErrorFirstCallback(),titleText:E.MODAL__CREATE_CHANNEL__TITLE,submitText:E.BUTTON__CREATE,closeModal:function(){m(0),h(!1)},idsToFilter:[o],userQueryCreator:function(){return u&&"function"===typeof u?u():Vs({sdk:n,userFilledApplicationUserListQuery:l})},onSubmit:function(e){return Ws(n,e,s,o,y).then(function(e){i({type:ro,payload:e})})}}))}function Fo(e){var n=e.disabled,t=e.onLeaveChannel,i=Object(r.useRef)(null),s=g(Object(r.useState)(!1),2),o=s[0],l=s[1],u=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{role:"button",style:{display:"inline-block"},onKeyDown:function(e){e.stopPropagation()},tabIndex:0,onClick:function(e){e.stopPropagation()}},a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{ref:i,onClick:e,height:"32px",width:"32px"},a.a.createElement(Ga,{type:ja.MORE,fillColor:Ba.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(ws,{parentRef:i,parentContainRef:i,closeDropdown:e},a.a.createElement(Rs,{onClick:function(){n||(l(!0),e())}},u.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),o&&a.a.createElement(Js,{onCloseModal:function(){return l(!1)},onLeaveChannel:t}))}function Ho(e){var n=e.type;return a.a.createElement("div",{className:"sendbird-channel-list"},a.a.createElement(ii,{type:n}))}xo.propTypes={sdk:I.a.shape({getErrorFirstCallback:I.a.func,createApplicationUserListQuery:I.a.func}).isRequired,disabled:I.a.bool,channelListDispatcher:I.a.func.isRequired,userFilledApplicationUserListQuery:I.a.shape({}),onBeforeCreateChannel:I.a.func,userId:I.a.string.isRequired,userListQuery:I.a.func},xo.defaultProps={disabled:!1,userFilledApplicationUserListQuery:{},onBeforeCreateChannel:null,userListQuery:null},Fo.propTypes={disabled:I.a.bool,onLeaveChannel:I.a.func.isRequired},Fo.defaultProps={disabled:!1},Ho.propTypes={type:I.a.string.isRequired};var Go=function(e){var n=e.sdk,t=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.logger,i=new n.ChannelHandler;i.onChannelChanged=function(e){a.info("ChannelList: onChannelChanged",e),r({type:vo,payload:e})},i.onChannelDeleted=function(e){a.info("ChannelList: onChannelDeleted",e),r({type:go,payload:e})},i.onUserJoined=function(e){a.info("ChannelList: onUserJoined",e),e.lastMessage&&r({type:mo,payload:e})},i.onUserBanned=function(e,t){var i=n.currentUser;a.info("Channel | useHandleChannelEvents: onUserBanned",e),t.userId===i.userId?r({type:yo,payload:{channel:e,isMe:!0}}):r({type:yo,payload:{channel:e,isMe:!1}})},i.onUserLeft=function(e,t){var i=n.currentUser.userId===t.userId;a.info("ChannelList: onUserLeft",e),r({type:yo,payload:{channel:e,isMe:i}})},i.onReadStatus=function(e){a.info("ChannelList: onReadStatus",e),r({type:No,payload:e})},i.onDeliveryReceiptUpdated=function(e){a.info("ChannelList: onDeliveryReceiptUpdated",e),e.lastMessage&&r({type:So,payload:e})},i.onMessageUpdated=function(e,n){e.lastMessage.isEqual(n)&&(a.info("ChannelList: onMessageUpdated",e),r({type:_o,payload:e}))},i.onChannelHidden=function(e){a.info("ChannelList: onChannelHidden",e),r({type:Eo,payload:e})},i.onChannelFrozen=function(e){a.info("ChannelList: onChannelFrozen",e),r({type:bo,payload:e})},i.onChannelUnfrozen=function(e){a.info("ChannelList: onChannelUnfrozen",e),r({type:Co,payload:e})},a.info("ChannelList: Added channelHandler"),n.addChannelHandler(t,i)},jo=function(e){var n=e.sdk,t=e.userFilledChannelListQuery,r=void 0===t?{}:t,a=n.GroupChannel.createMyGroupChannelListQuery();return a.includeEmpty=!1,a.order="latest_last_message",a.limit=20,r&&Object.keys(r).forEach(function(e){a[e]=r[e]}),a};var Bo=function(e){e.forEach(function(e){try{e.remove()}catch(n){}})},zo=function(e,n){var t=new Map;return e?(t.set("CREATE_CHANNEL",e.subscribe("CREATE_CHANNEL",function(e){var t=e.channel;n({type:"CREATE_CHANNEL",payload:t})})),t.set(ys,e.subscribe(ys,function(e){var t,r=e.channel,a=e.message,i=r;(null===i||void 0===i?void 0:null===(t=i.lastMessage)||void 0===t?void 0:t.messageId)===a.messageId&&(i.lastMessage=a),r&&n({type:_o,payload:i})})),t.set("LEAVE_CHANNEL",e.subscribe("LEAVE_CHANNEL",function(e){var t=e.channel;n({type:ao,payload:t.url})})),t.set(_s,e.subscribe(_s,function(e){var t=e.channel;n({type:Oo,payload:t})})),t):t};function Vo(e){var n=e.stores,t=n.sdkStore,i=void 0===t?{}:t,s=n.userStore,o=void 0===s?{}:s,l=e.config,u=l.userId,c=l.isOnline,d=l.userListQuery,h=l.logger,f=l.pubSub,p=l.theme,m=e.dispatchers.userDispatcher,_=e.queries,y=void 0===_?{}:_,v=e.renderChannelPreview,E=e.renderHeader,b=e.renderUserProfile,C=e.disableUserProfile,N=e.allowProfileEdit,O=e.sortChannelList,T=e.onProfileEditSuccess,A=e.onThemeChange,w=e.onBeforeCreateChannel,I=e.onChannelSelect,R=e.config,k=void 0===R?{}:R,M=N||k.allowProfileEdit,U=C||k.disableUserProfile,P=b||k.renderUserProfile,D=i.sdk,x=void 0===D?{}:D,F=y.channelListQuery,H=y.applicationUserListQuery,G=i.error,j=i.initialized,B=g(Object(r.useReducer)(wo,Ao),2),z=B[0],V=B[1],q=g(Object(r.useState)({}),2),K=q[0],Y=q[1],Q=g(Object(r.useState)({}),2),W=Q[0],J=Q[1],X=g(Object(r.useState)(!1),2),$=X[0],Z=X[1],ee=g(Object(r.useState)(null),2),ne=ee[0],te=ee[1],re=z.loading,ae=z.currentChannel;Object(r.useEffect)(function(){Y(o.user)},[o.user]),Object(r.useEffect)(function(){var e=zo(f,V);return function(){Bo(e)}},[j]),Object(r.useEffect)(function(){return te(S),j?(h.info("ChannelList: Setup channelHandlers"),function(e){var n=e.sdk,t=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.setChannelSource,i=e.onChannelSelect,s=e.userFilledChannelListQuery,o=e.logger,l=e.sortChannelList;n&&n.ChannelHandler?Go({sdk:n,channelListDispatcher:r,sdkChannelHandlerId:t,logger:o}):o.console.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",n),o.info("ChannelList - creating query",{userFilledChannelListQuery:s});var u=jo({sdk:n,userFilledChannelListQuery:s});o.info("ChannelList - created query",u),a(u),r({type:ho}),s&&(o.info("ChannelList - setting up channelListQuery",u),r({type:To,payload:{channelListQuery:u,currentUserId:n&&n.currentUser&&n.currentUser.userId}})),o.info("ChannelList - fetching channels"),u.hasNext?u.next(function(e,t){var a=e,s=t;if(n.getErrorFirstCallback()&&(a=t,s=e),o.info("ChannelList - fetched channels",a),s)return o.error("ChannelList - couldnt fetch channels",s),void r({type:po});o.info("ChannelList - highlight channel",a[0]);var u=a;l&&"function"===typeof l&&(u=l(a),o.info("ChannelList - channel list sorted",u)),i(u[0]),r({type:fo,payload:u}),a&&"function"===typeof a.forEach&&(o.info("ChannelList - mark all channels as delivered"),a.forEach(function(e){return e.markAsDelivered()}))}):o.warning("ChannelList - there are no more channels")}({sdk:x,sdkChannelHandlerId:ne,channelListDispatcher:V,setChannelSource:J,onChannelSelect:I,userFilledChannelListQuery:F,logger:h,sortChannelList:O})):(h.info("ChannelList: Removing channelHandlers"),x&&x.removeChannelHandler&&x.removeChannelHandler(ne),J({}),V({type:to})),function(){h.info("ChannelList: Removing channelHandlers"),x&&x.removeChannelHandler&&x.removeChannelHandler(ne)}},[j,F,O]);var ie=z.allChannels,se=O&&"function"===typeof O?O(ie):ie;if(se.length!==ie.length){var oe="ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems";console.warn(oe,{before:ie,after:se}),h.warning(oe,{before:ie,after:se})}return Object(r.useEffect)(function(){x&&x.GroupChannel&&ae&&x.GroupChannel.getChannel(ae,function(e){I(e||null)})},[ae]),a.a.createElement(oi,{className:"sendbird-channel-list",disableUserProfile:U,renderUserProfile:P},a.a.createElement("div",{className:"sendbird-channel-list__header"},a.a.createElement(Po,{renderHeader:E,user:K,onEdit:function(){M&&Z(!0)},allowProfileEdit:M,iconButton:a.a.createElement(xo,{disabled:!c,userListQuery:d,sdk:x,channelListDispatcher:V,userId:u,userFilledApplicationUserListQuery:H,onBeforeCreateChannel:w})})),$&&a.a.createElement(Do,{onThemeChange:A,user:K,onCancel:function(){Z(!1)},onSubmit:function(e,n){x.updateCurrentUserInfoWithProfileImage(e,n,function(e){m({type:L,payload:e}),T&&"function"===typeof T&&T(e)})}}),a.a.createElement("div",{className:"sendbird-channel-list__body",onScroll:function(e){e.target.clientHeight+e.target.scrollTop===e.target.scrollHeight&&W.hasNext&&(h.info("ChannelList: Fetching more channels"),V({type:lo}),W.next(function(e,n){var t=e,r=n;if(x.getErrorFirstCallback()&&(t=n,r=e),r)return h.info("ChannelList: Fetching channels failed",r),void V({type:co,payload:t});h.info("ChannelList: Fetching channels successful",t),V({type:uo,payload:t}),t&&"function"===typeof t.forEach&&(h.info("ChannelList: Marking all channels as read"),t.forEach(function(e){return e.markAsDelivered()}))}))}},G&&a.a.createElement(Ho,{type:ti.WRONG}),a.a.createElement("div",null,se&&se.map(function(e,n){var t=function(n,t){h.info("ChannelList: Leaving channel",n),n.leave().then(function(n){h.info("ChannelList: Leaving channel success",n),t&&"function"===typeof t&&t(n,null),V({type:ao,payload:e.url})}).catch(function(e){h.error("ChannelList: Leaving channel failed",e),t&&"function"===typeof t&&t(null,e)})},r=function(){c&&(h.info("ChannelList: Clicked on channel:",e),V({type:io,payload:e.url}))};return v?a.a.createElement("div",{key:e.url,onClick:r},v({channel:e,onLeaveChannel:t})):a.a.createElement(Lo,{key:e.url,tabIndex:n,onClick:r,channel:e,currentUser:K,theme:p,isActive:e.url===ae,ChannelAction:a.a.createElement(Fo,{disabled:!c,onLeaveChannel:function(){return t(e)}})})})),(!j||re)&&a.a.createElement(Ho,{type:ti.LOADING}),(!ie||0===ie.length)&&a.a.createElement(Ho,{type:ti.NO_CHANNELS})))}Vo.propTypes={stores:I.a.shape({sdkStore:I.a.shape({initialized:I.a.bool}),userStore:I.a.shape({user:I.a.shape({})})}).isRequired,dispatchers:I.a.shape({userDispatcher:I.a.func}).isRequired,config:I.a.shape({userId:I.a.string.isRequired,userListQuery:I.a.func,theme:I.a.string,isOnline:I.a.bool,logger:I.a.shape({info:I.a.func,error:I.a.func,warning:I.a.func}),pubSub:I.a.shape({subscribe:I.a.func,publish:I.a.func})}).isRequired,queries:I.a.shape({channelListQuery:I.a.shape({channelNameContainsFilter:I.a.string,channelUrlsFilter:I.a.arrayOf(I.a.string),customTypesFilter:I.a.arrayOf(I.a.string),customTypeStartsWithFilter:I.a.string,hiddenChannelFilter:I.a.string,includeEmpty:I.a.bool,limit:I.a.number,memberStateFilter:I.a.string,metadataOrderKeyFilter:I.a.string,nicknameContainsFilter:I.a.string,order:I.a.string,publicChannelFilter:I.a.string,superChannelFilter:I.a.string,unreadChannelFilter:I.a.string,userIdsExactFilter:I.a.arrayOf(I.a.string),userIdsIncludeFilter:I.a.arrayOf(I.a.string),userIdsIncludeFilterQueryType:I.a.string}),applicationUserListQuery:I.a.shape({limit:I.a.number,userIdsFilter:I.a.arrayOf(I.a.string),metaDataKeyFilter:I.a.string,metaDataValuesFilter:I.a.arrayOf(I.a.string)})}),onBeforeCreateChannel:I.a.func,renderChannelPreview:I.a.oneOfType([I.a.element,I.a.func]),disableUserProfile:I.a.bool,renderUserProfile:I.a.func,allowProfileEdit:I.a.bool,sortChannelList:I.a.func,onThemeChange:I.a.func,onProfileEditSuccess:I.a.func,renderHeader:I.a.oneOfType([I.a.element,I.a.func]),onChannelSelect:I.a.func},Vo.defaultProps={onBeforeCreateChannel:null,renderChannelPreview:null,renderHeader:null,disableUserProfile:!1,renderUserProfile:null,allowProfileEdit:!1,onThemeChange:null,sortChannelList:null,onProfileEditSuccess:null,queries:{},onChannelSelect:function(){}};var qo=b(Vo),Ko=function(e){return null===e||void 0===e};function Yo(e,n){return!Ko(e)&&!Ko(n)&&e.toString()===n.toString()}var Qo=/https?:\/\//;function Wo(e){var n=e.className,t=e.src,r=e.type,i=e.color,s=e.children,o=Qo.test(t)?t:"http://".concat(t);return a.a.createElement("a",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-link-label",i?Xa(i):""]).join(" "),href:o,target:"_blank",rel:"noopener noreferrer"},a.a.createElement($a,{className:"sendbird-link-label__label",type:r,color:i},s))}function Jo(e){var n=e.className,t=e.children,r=e.separatorColor;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-separator"]).join(" ")},a.a.createElement("div",{className:["sendbird-separator__left","".concat(ms(r),"--background-color")].join(" ")}),a.a.createElement("div",{className:"sendbird-separator__text"},t),a.a.createElement("div",{className:["sendbird-separator__right","".concat(ms(r),"--background-color")].join(" ")}))}Wo.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),src:I.a.string.isRequired,type:I.a.oneOf(Object.keys(Za)).isRequired,color:I.a.oneOf(Object.keys(ei)).isRequired,children:I.a.oneOfType([I.a.string,I.a.element,I.a.arrayOf(I.a.string),I.a.arrayOf(I.a.element)]).isRequired},Wo.defaultProps={className:""},Jo.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),children:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string),I.a.element]),separatorColor:I.a.string},Jo.defaultProps={className:"",children:a.a.createElement($a,{type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},"Date Separator"),separatorColor:ps.ONBACKGROUND_4};var Xo=function(){},$o=16,Zo=13,el=a.a.forwardRef(function(e,n){var t=e.className,i=e.isEdit,s=e.disabled,o=e.value,l=e.name,u=e.placeholder,c=e.maxLength,d=e.onFileUpload,h=e.onSendMessage,f=e.onCancelEdit,p=e.onStartTyping,m=e.channelUrl,_=Object(r.useContext)(T).stringSet,y=Object(r.useRef)(null),v=g(Object(r.useState)(o),2),E=v[0],b=v[1],C=g(Object(r.useState)(!1),2),N=C[0],S=C[1],O=function(){try{var e=n.current,t=.6*window.document.body.offsetHeight;e&&e.scrollHeight>=76?t<e.scrollHeight?(e.style.height="auto",e.style.height="".concat(t,"px")):(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")):e.style.height=""}catch(r){}};Object(r.useEffect)(function(){return O(),O},[E]),Object(r.useEffect)(function(){b("")},[m]);var A,w=function(){if(E&&E.trim().length>0){var e=E.trim();i?h(l,e,function(){f()}):(h(),b(""))}};return a.a.createElement("form",{className:Gi([t,i?"sendbird-message-input__edit":"",s?"sendbird-message-input-form__disabled":""])},a.a.createElement("div",{className:Gi(["sendbird-message-input",s?"sendbird-message-input__disabled":""])},a.a.createElement("textarea",{className:"sendbird-message-input--textarea",disabled:s,ref:n,name:l,value:E,maxLength:c,onChange:function(e){b(e.target.value),p()},onKeyDown:function(e){e.keyCode===$o&&S(!0),N||e.keyCode!==Zo||(e.preventDefault(),w())},onKeyUp:function(e){e.keyCode===$o&&S(!1)}}),!E&&a.a.createElement($a,{className:"sendbird-message-input--placeholder",type:Za.BODY_1,color:ei.ONBACKGROUND_3},u||_.MESSAGE_INPUT__PLACE_HOLDER),!i&&E&&E.trim().length>0&&a.a.createElement(ns,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:w},a.a.createElement(Ga,{type:ja.SEND,fillColor:Ba.PRIMARY,width:"20px",height:"20px"})),!i&&(!E||!(E.trim().length>0))&&a.a.createElement(ns,{className:"sendbird-message-input--attach",height:"32px",width:"32px",onClick:function(){y.current.click()}},a.a.createElement(Ga,{type:ja.ATTACH,fillColor:Ba.CONTENT_INVERSE,width:"20px",height:"20px"}),a.a.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:y,onChange:(A=d,function(e){e.target.files&&e.target.files[0]&&A(e.target.files[0]),e.target.value=""})}))),i&&a.a.createElement("div",{className:"sendbird-message-input--edit-action"},a.a.createElement(os,{className:"sendbird-message-input--edit-action__cancel",type:ls.SECONDARY,size:us.SMALL,onClick:f},_.BUTTON__CANCEL),a.a.createElement(os,{className:"sendbird-message-input--edit-action__save",type:ls.PRIMARY,size:us.SMALL,onClick:function(){if(E){var e=E.trim();h(l,e,function(){f()})}}},_.BUTTON__SAVE)))});el.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),placeholder:I.a.oneOfType([I.a.string,I.a.bool]),isEdit:I.a.bool,name:I.a.oneOfType([I.a.string,I.a.number]),value:I.a.string,disabled:I.a.bool,maxLength:I.a.number,onFileUpload:I.a.func,onSendMessage:I.a.func,onStartTyping:I.a.func,onCancelEdit:I.a.func,channelUrl:I.a.string},el.defaultProps={className:"",value:"",channelUrl:"",onSendMessage:Xo,name:"sendbird-message-input",isEdit:!1,disabled:!1,placeholder:"",maxLength:5e3,onFileUpload:Xo,onCancelEdit:Xo,onStartTyping:Xo};var nl=function(e){var n=e.profileUrl,t=e.nickname,r=e.name,i=e.type,s=e.url,o=e.isByMe,l=e.onClose,u=e.onDelete,c=e.disableDelete;return a.a.createElement("div",{className:"sendbird-fileviewer"},a.a.createElement("div",{className:"sendbird-fileviewer__header"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},a.a.createElement(Ya,{height:"32px",width:"32px",src:n})),a.a.createElement($a,{className:"sendbird-fileviewer__header__left__filename",type:Za.H_2,color:ei.ONBACKGROUND_1},r),a.a.createElement($a,{className:"sendbird-fileviewer__header__left__sender-name",type:Za.BODY_1,color:ei.ONBACKGROUND_2},t)),a.a.createElement("div",{className:"sendbird-fileviewer__header__right"},gi(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},a.a.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:s,target:"_blank"},a.a.createElement(Ga,{type:ja.DOWNLOAD,fillColor:Ba.ON_BACKGROUND_1,height:"24px",width:"24px"})),u&&o&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},a.a.createElement(Ga,{className:c?"disabled":"",type:ja.DELETE,fillColor:c?Ba.GRAY:Ba.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){c||u()}}))),a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},a.a.createElement(Ga,{type:ja.CLOSE,fillColor:Ba.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:l})))),a.a.createElement("div",{className:"sendbird-fileviewer__content"},pi(i)&&a.a.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},a.a.createElement("source",{src:s,type:i})),fi(i)&&a.a.createElement("img",{src:s,alt:r,className:"sendbird-fileviewer__content__img"}),!gi(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},a.a.createElement($a,{type:Za.H_1,color:ei.ONBACKGROUND_1},"Unsupoprted message"))))};function tl(e){var n=e.message,t=e.isByMe,r=e.onClose,i=e.onDelete,s=n.sender,o=n.type,l=n.url,u=n.name,c=void 0===u?"":u,d=n.threadInfo,h=void 0===d?{}:d,f=(null===h||void 0===h?void 0:h.replyCount)>0,p=s.profileUrl,m=s.nickname,g=void 0===m?"":m;return Object(ke.createPortal)(a.a.createElement(nl,{profileUrl:p,nickname:g,type:o,url:l,name:c,onClose:r,onDelete:i,isByMe:t,disableDelete:f}),document.getElementById(ts))}nl.propTypes={profileUrl:I.a.string.isRequired,nickname:I.a.string.isRequired,type:I.a.string.isRequired,url:I.a.string.isRequired,name:I.a.string.isRequired,onClose:I.a.func.isRequired,onDelete:I.a.func.isRequired,isByMe:I.a.bool,disableDelete:I.a.bool},nl.defaultProps={isByMe:!0,disableDelete:!1},tl.propTypes={message:I.a.shape({sender:I.a.shape({profileUrl:I.a.string,nickname:I.a.string}),type:I.a.string,url:I.a.string,name:I.a.string}).isRequired,isByMe:I.a.bool,onClose:I.a.func.isRequired,onDelete:I.a.func.isRequired},tl.defaultProps={isByMe:!0};var rl="RESET_MESSAGES",al="RESET_STATE",il="CLEAR_SENT_MESSAGES",sl="GET_PREV_MESSAGES_START",ol="GET_PREV_MESSAGES_SUCESS",ll="GET_NEXT_MESSAGES_SUCESS",ul="GET_NEXT_MESSAGES_FAILURE",cl="SEND_MESSAGEGE_START",dl="SEND_MESSAGEGE_SUCESS",hl="SEND_MESSAGEGE_FAILURE",fl="RESEND_MESSAGEGE_START",pl="ON_MESSAGE_RECEIVED",ml="UPDATE_UNREAD_COUNT",gl="ON_MESSAGE_UPDATED",_l="ON_MESSAGE_THREAD_INFO_UPDATED",yl="ON_MESSAGE_DELETED",vl="ON_MESSAGE_DELETED_BY_REQ_ID",El="SET_CURRENT_CHANNEL",bl="SET_CHANNEL_INVALID",Cl="MARK_AS_READ",Nl="ON_REACTION_UPDATED",Sl="SET_EMOJI_CONTAINER",Ol="MESSAGE_LIST_PARAMS_CHANGED";Ei();var Tl=Fi(),Al=Tl.SUCCEEDED;Tl.FAILED;var wl=Tl.PENDING,Il=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(n>10))try{var t=document.querySelector(".sendbird-conversation__scroll-container");t.scrollTop=t.scrollHeight}catch(r){setTimeout(function(){e(n+1)},500*n)}},Rl=function(){return"operator"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myRole},kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.isFrozen&&!Rl(e)},Ml=function(){return"muted"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myMutedState},Ul=function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,n=void 0===e?[]:e,t=[],r=0;r<n.length;r+=1)for(var a=n[r].emojis,i=0;i<a.length;i+=1)t.push(a[i]);return t},Ll=function(e){return kn(e.createdAt,"p")},Pl=function(e,n){return!!(e&&n&&e.sender&&n.sender&&e.createdAt&&n.createdAt&&e.sender.userId&&n.sender.userId)&&(e.sendingStatus===n.sendingStatus&&e.sender.userId===n.sender.userId&&Ll(e)===Ll(n))},Dl=function(e){return function(n){return!!(n&&n.hasOwnProperty&&n.hasOwnProperty(e))}},xl=function(e,n){var t=n.sendingStatus,r=void 0===t?"undefined":t;if(r===Al||r===wl){var a=e.map(function(e){return e.sendingStatus||(e.isAdminMessage&&e.isAdminMessage()?Al:"undefined")}).lastIndexOf(Al);if(a+1<e.length){var i=_(e);return i.splice(a+1,0,n),i}}return[].concat(_(e),[n])},Fl=function(e){if("number"===typeof e)return e;if("string"===typeof e){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return null},Hl={initialized:!1,loading:!1,allMessages:[],currentGroupChannel:{members:[]},hasMore:!1,lastMessageTimeStamp:0,hasMoreToBottom:!1,latestFetchedMessageTimeStamp:0,emojiContainer:{},unreadCount:0,unreadSince:null,isInvalid:!1,messageListParams:null},Gl=Fi(),jl=Gl.SUCCEEDED,Bl=Gl.FAILED,zl=Gl.PENDING;function Vl(e,n){switch(n.type){case al:return Hl;case rl:return s(s({},e),{},{hasMore:!1,allMessages:[]});case sl:return s(s({},e),{},{loading:!0});case il:return s(s({},e),{},{allMessages:_(e.allMessages.filter(function(e){return e.sendingStatus!==jl}))});case ol:var t=n.payload.messages||[],r=n.payload.currentGroupChannel,a=void 0===r?{}:r,i=(e.currentGroupChannel||{}).url;if(a.url!==i)return e;var o=[],l=e.allMessages.map(function(e){var n=t.find(function(n){return Yo(n.messageId,e.messageId)});return n?(o.push(n.messageId),n.updatedAt>e.updatedAt?n:e):e}),u=o.length>0?t.filter(function(e){return!o.find(function(n){return Yo(n,e.messageId)})}):t,c=Dl("hasMoreToBottom")(n.payload),d=Dl("latestFetchedMessageTimeStamp")(n.payload);return s(s(s(s({},e),{},{loading:!1,initialized:!0,hasMore:n.payload.hasMore,lastMessageTimeStamp:n.payload.lastMessageTimeStamp},c&&{hasMoreToBottom:n.payload.hasMoreToBottom}),d&&{latestFetchedMessageTimeStamp:n.payload.latestFetchedMessageTimeStamp}),{},{allMessages:[].concat(_(u),_(l))});case ll:var h=n.payload.messages||[],f=n.payload.currentGroupChannel,p=void 0===f?{}:f,m=(e.currentGroupChannel||{}).url;if(p.url!==m)return e;var g=[],y=e.allMessages.map(function(e){var n=h.find(function(n){return Yo(n.messageId,e.messageId)});return n?(g.push(n.messageId),n.updatedAt>e.updatedAt?n:e):e}),v=g.length>0?h.filter(function(e){return!g.find(function(n){return Yo(n,e.messageId)})}):h;return s(s({},e),{},{loading:!1,initialized:!0,hasMore:n.payload.hasMore,lastMessageTimeStamp:n.payload.lastMessageTimeStamp,hasMoreToBottom:n.payload.hasMoreToBottom,latestFetchedMessageTimeStamp:n.payload.latestFetchedMessageTimeStamp,allMessages:[].concat(_(y),_(v))});case ul:return s({},e);case cl:return s(s({},e),{},{allMessages:[].concat(_(e.allMessages),[s({},n.payload)])});case dl:var E=e.allMessages.map(function(e){return Yo(e.reqId,n.payload.reqId)?n.payload:e});return _(E).sort(function(e,n){return e.sendingStatus&&n.sendingStatus&&e.sendingStatus===jl&&(n.sendingStatus===zl||n.sendingStatus===Bl)?-1:1}),s(s({},e),{},{allMessages:E});case hl:return n.payload.failed=!0,s(s({},e),{},{allMessages:e.allMessages.map(function(e){return Yo(e.reqId,n.payload.reqId)?n.payload:e})});case El:return s(s({},e),{},{currentGroupChannel:n.payload,isInvalid:!1});case bl:return s(s({},e),{},{isInvalid:!0});case ml:var b=n.payload.channel,C=e.currentGroupChannel,N=void 0===C?{}:C,S=e.unreadCount,O=N.url;return Yo(b.url,O)?s(s({},e),{},{unreadSince:S+1}):e;case pl:var T=n.payload,A=T.channel,w=T.message,I=T.scrollToEnd,R=0,k=e.currentGroupChannel,M=void 0===k?{}:k,U=e.unreadSince,L=M.url;return Yo(A.url,L)?e.allMessages.some(function(e){return e.messageId===w.messageId})?e:e.messageListParams&&!$i(e.messageListParams,w)?e:(R=e.unreadCount+1,I&&(R=0),w.isAdminMessage&&w.isAdminMessage()?s(s({},e),{},{allMessages:xl(e.allMessages,w)}):s(s({},e),{},{unreadCount:R,unreadSince:1===R?kn(new Date,"p MMM dd"):U,allMessages:xl(e.allMessages,w)})):e;case gl:var P=n.payload,D=P.channel,x=P.message,F=e.currentGroupChannel&&e.currentGroupChannel.url||"";return Yo(D.url,F)?e.messageListParams&&!$i(e.messageListParams,x)?s(s({},e),{},{allMessages:e.allMessages.filter(function(e){return!Yo(e.messageId,null===x||void 0===x?void 0:x.messageId)})}):s(s({},e),{},{allMessages:e.allMessages.map(function(e){return Yo(e.messageId,n.payload.message.messageId)?n.payload.message:e})}):e;case _l:var H=n.payload,G=H.channel,j=H.event,B=j.channelUrl,z=j.threadInfo,V=j.targetMessageId,q=e.currentGroupChannel&&e.currentGroupChannel.url||"";return Yo(G.url,q)&&Yo(G.url,B)?s(s({},e),{},{allMessages:e.allMessages.map(function(e){return Yo(e.messageId,V)&&(e.threadInfo=z),e})}):e;case fl:return s(s({},e),{},{allMessages:e.allMessages.map(function(e){return Yo(e.reqId,n.payload.reqId)?n.payload:e})});case Cl:return s(s({},e),{},{unreadCount:0,unreadSince:null});case yl:return s(s({},e),{},{allMessages:e.allMessages.filter(function(e){return!Yo(e.messageId,n.payload)})});case vl:return s(s({},e),{},{allMessages:e.allMessages.filter(function(e){return!Yo(e.reqId,n.payload)})});case Sl:return s(s({},e),{},{emojiContainer:n.payload});case Nl:return s(s({},e),{},{allMessages:e.allMessages.map(function(e){return Yo(e.messageId,n.payload.messageId)?(e.applyReactionEvent&&"function"===typeof e.applyReactionEvent&&e.applyReactionEvent(n.payload),e):e})});case Ol:return s(s({},e),{},{messageListParams:n.payload});default:return e}}var ql=30,Kl=10,Yl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e[e.length-1];return n&&n.createdAt||null};var Ql=30;var Wl=a.a.forwardRef(function(e,n){var t=e.className,r=e.width,i=e.height,s=e.selected,o=e.onClick,l=e.children;return a.a.createElement("div",{className:[].concat(_(Array.isArray(t)?t:[t]),["sendbird-reaction-button".concat(s?"--selected":"")]).join(" "),ref:n,role:"button",style:{width:"".concat("string"===typeof r?r.slice(0,-2)-2:r-2,"px"),height:"".concat("string"===typeof i?i.slice(0,-2)-2:i-2,"px")},onClick:function(e){return o(e)},onKeyDown:function(e){return o(e)},tabIndex:0},a.a.createElement("div",{className:"sendbird-reaction-button__inner"},l))});Wl.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),width:I.a.oneOfType([I.a.number,I.a.string]),height:I.a.oneOfType([I.a.number,I.a.string]),selected:I.a.bool,onClick:I.a.func,children:I.a.element.isRequired},Wl.defaultProps={className:"",width:"36px",height:"36px",selected:!1,onClick:function(){}};var Jl=Ei();function Xl(e){var n,t,r=e.className,i=e.message,s=e.channel,o=e.status,l=(null===s||void 0===s?void 0:s.isGroupChannel())&&!(null!==s&&void 0!==s&&s.isSuper)&&!(null!==s&&void 0!==s&&s.isPublic)&&!(null!==s&&void 0!==s&&s.isBroadcast),u=(c(n={},Jl.SENT,ja.DONE),c(n,Jl.DELIVERED,ja.DONE_ALL),c(n,Jl.READ,ja.DONE_ALL),c(n,Jl.FAILED,ja.ERROR),n),d=(c(t={},Jl.SENT,Ba.SENT),c(t,Jl.DELIVERED,Ba.SENT),c(t,Jl.READ,Ba.READ),c(t,Jl.FAILED,Ba.ERROR),t);return a.a.createElement("div",{className:[].concat(_(Array.isArray(r)?r:[r]),["sendbird-message-status"]).join(" ")},l&&a.a.createElement("div",null,o===Jl.PENDING?a.a.createElement(ri,{className:"sendbird-message-status__icon",width:"16px",height:"16px"},a.a.createElement(Ga,{type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"16px",height:"16px"})):a.a.createElement(Ga,{className:"sendbird-message-status__icon",type:u[o]||ja.ERROR,fillColor:d[o],width:"16px",height:"16px"})),Oi(o)&&a.a.createElement($a,{className:"sendbird-message-status__text",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},Ji(i)))}function $l(e){var n,t=e.className,i=e.message,s=e.channel,o=e.isByMe,l=void 0!==o&&o,u=e.disabled,c=void 0!==u&&u,d=e.replyType,h=e.showEdit,f=e.showRemove,p=e.resendMessage,m=e.setQuoteMessage,g=e.setSupposedHover,_=Object(r.useContext)(T).stringSet,y=Object(r.useRef)(null),v=Object(r.useRef)(null),E=Ti(i),b="QUOTE_REPLY"===d&&!Ni(s,i)&&!Si(s,i),C=Ti(i)&&Ci(s,i)&&l,N=Ni(s,i)&&(null===(n=null===i||void 0===i?void 0:i.isResendable)||void 0===n?void 0:n.call(i))&&l,S=!Si(s,i)&&l;return E||b||C||N||S?a.a.createElement("div",{className:Gi([t,"sendbird-message-item-menu"]),ref:v},a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-message-item-menu__trigger",ref:y,width:"32px",height:"32px",onClick:function(){e(),g(!0)},onBlur:function(){g(!1)}},a.a.createElement(Ga,{className:"sendbird-message-item-menu__trigger__icon",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){var n,t=function(){e(),g(!1)};return a.a.createElement(ws,{className:"sendbird-message-item-menu__list",parentRef:y,parentContainRef:v,closeDropdown:t,openLeft:l},E&&a.a.createElement(Rs,{className:"sendbird-message-item-menu__list__menu-item menu-item-copy",onClick:function(){var e;Ki(null===(e=i)||void 0===e?void 0:e.message),t()}},_.MESSAGE_MENU__COPY),b&&a.a.createElement(Rs,{className:"sendbird-message-item-menu__list__menu-item menu-item-reply",onClick:function(){m(i),t()},disable:(null===i||void 0===i?void 0:i.parentMessageId)>0},_.MESSAGE_MENU__REPLY),C&&a.a.createElement(Rs,{className:"sendbird-message-item-menu__list__menu-item menu-item-edit",onClick:function(){c||(h(!0),t())}},_.MESSAGE_MENU__EDIT),N&&a.a.createElement(Rs,{className:"sendbird-message-item-menu__list__menu-item menu-item-resend",onClick:function(){c||(p(i),t())}},_.MESSAGE_MENU__RESEND),S&&a.a.createElement(Rs,{className:"sendbird-message-item-menu__list__menu-item menu-item-delete",onClick:function(){c||(f(!0),t())},disable:(null===(n=null===i||void 0===i?void 0:i.threadInfo)||void 0===n?void 0:n.replyCount)>0},_.MESSAGE_MENU__DELETE))}})):null}function Zl(e){var n=e.className,t=e.message,i=e.channel,s=e.userId,o=e.spaceFromTrigger,l=void 0===o?{}:o,u=e.emojiContainer,c=e.toggleReaction,d=e.setSupposedHover,h=Object(r.useRef)(null),f=Object(r.useRef)(null);return Si(i,t)||Ni(i,t)?null:a.a.createElement("div",{className:Gi([n,"sendbird-message-item-reaction-menu"]),ref:f},a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-message-item-reaction-menu__trigger",ref:h,width:"32px",height:"32px",onClick:function(){e(),d(!0)},onBlur:function(){d(!1)}},a.a.createElement(Ga,{className:"sendbird-message-item-reaction-menu__trigger__icon",type:ja.EMOJI_MORE,fillColor:Ba.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){var n=function(){e(),d(!1)};return a.a.createElement(Is,{parentRef:h,parentContainRef:f,closeDropdown:n,spaceFromTrigger:l},Yi(u).map(function(e){var r,i,o,l=null===(o=null===(i=null===(r=null===t||void 0===t?void 0:t.reactions)||void 0===r?void 0:r.filter(function(n){return n.key===e.key})[0])||void 0===i?void 0:i.userIds)||void 0===o?void 0:o.some(function(e){return e===s});return a.a.createElement(Wl,{key:e.key,width:"36px",height:"36px",selected:l,onClick:function(){n(),c(t,e.key,l)}},a.a.createElement(Mn,{url:e.url,width:"28px",height:"28px",placeHolder:function(e){return a.a.createElement("div",{style:e},a.a.createElement(Ga,{type:ja.QUESTION,fillColor:Ba.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}function eu(e){var n=e.className,t=e.children;return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-tooltip"]).join(" ")},a.a.createElement($a,{className:"sendbird-tooltip__text",type:Za.CAPTION_2,color:ei.ONCONTENT_1},t))}Xl.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),message:I.a.shape({createdAt:I.a.number,sender:I.a.shape({friendName:I.a.string,nickname:I.a.string,userId:I.a.string,profileUrl:I.a.string}),sendingStatus:I.a.string}),channel:I.a.shape({isGroupChannel:I.a.func,isSuper:I.a.bool,isBroadcast:I.a.bool,isPublic:I.a.bool}),status:I.a.string},Xl.defaultProps={className:"",message:null,channel:null,status:""},eu.propTypes={className:I.a.string,children:I.a.oneOfType([I.a.element,I.a.arrayOf(I.a.string),I.a.string])},eu.defaultProps={className:"",children:""};var nu=8;function tu(e){var n=e.className,t=e.children,i=e.hoverTooltip,s=g(Object(r.useState)(!1),2),o=s[0],l=s[1],u=Object(r.useRef)(null);return a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-tooltip-wrapper"]).join(" "),onMouseOver:function(){l(!0)},onFocus:function(){l(!0)},onMouseOut:function(){l(!1)},onBlur:function(){l(!1)}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:u},t),o&&a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(nu,"px)")}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:u.current&&"calc(".concat(u.current.offsetWidth/2,"px - 50%)")}},i))))}tu.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),children:I.a.element.isRequired,hoverTooltip:I.a.oneOfType([I.a.element,I.a.func]).isRequired},tu.defaultProps={className:""};var ru=a.a.forwardRef(function(e,n){var t=e.className,r=e.children,i=e.count,s=e.selected,o=e.isAdd,l=e.onClick;return a.a.createElement("div",{className:[].concat(_(Array.isArray(t)?t:[t]),["sendbird-reaction-badge".concat(s&&!o?"--selected":o?"--is-add":"")]).join(" "),role:"button",ref:n,onClick:l,onKeyDown:l,tabIndex:0},a.a.createElement("div",{className:"sendbird-reaction-badge__inner"},a.a.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},r),a.a.createElement($a,{className:r&&i&&"sendbird-reaction-badge__inner__count",type:Za.CAPTION_3,color:ei.ONBACKGROUND_1},i)))});function au(e){var n,t,i=e.className,s=e.userId,o=e.message,l=e.emojiContainer,u=e.memberNicknamesMap,c=e.spaceFromTrigger,d=void 0===c?{}:c,h=e.isByMe,f=void 0!==h&&h,p=e.toggleReaction,m=Object(r.useContext)(T).stringSet,g=Qi(l),_=Object(r.useRef)(null);return a.a.createElement("div",{className:Gi([i,"sendbird-emoji-reactions",f?"outgoing":"incoming"])},(null===(n=null===o||void 0===o?void 0:o.reactions)||void 0===n?void 0:n.length)>0&&o.reactions.map(function(e){var n,t,r=ji(s,e);return a.a.createElement(tu,{className:"sendbird-emoji-reactions__reaction-badge",key:null===e||void 0===e?void 0:e.key,hoverTooltip:(null===(n=null===e||void 0===e?void 0:e.userIds)||void 0===n?void 0:n.length)>0&&a.a.createElement(eu,null,Bi(e,s,u,m))},a.a.createElement(ru,{count:e.userIds.length,selected:r,onClick:function(){return p(o,e.key,r)}},a.a.createElement(Mn,{circle:!0,url:(null===(t=g.get(null===e||void 0===e?void 0:e.key))||void 0===t?void 0:t.url)||"",width:"20px",height:"20px",defaultComponent:a.a.createElement(Ga,{width:"20px",height:"20px",type:ja.QUESTION})})))}),(null===(t=null===o||void 0===o?void 0:o.reactions)||void 0===t?void 0:t.length)<g.size&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ru,{className:"sendbird-emoji-reactions__add-reaction-badge",ref:_,isAdd:!0,onClick:e},a.a.createElement(Ga,{type:ja.EMOJI_MORE,fillColor:Ba.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(e){return a.a.createElement(Is,{parentRef:_,parentContainRef:_,closeDropdown:e,spacefromTrigger:d},Yi(l).map(function(n){var t,r,i,l=null===(i=null===(r=null===(t=null===o||void 0===o?void 0:o.reactions)||void 0===t?void 0:t.filter(function(e){return e.key===n.key})[0])||void 0===r?void 0:r.userIds)||void 0===i?void 0:i.some(function(e){return e===s});return a.a.createElement(Wl,{key:n.key,width:"36px",height:"36px",selected:l,onClick:function(){e(),p(o,n.key,l)}},a.a.createElement(Mn,{url:(null===n||void 0===n?void 0:n.url)||"",width:"28px",height:"28px",placeHolder:function(e){return a.a.createElement("div",{style:e},a.a.createElement(Ga,{type:ja.QUESTION,fillColor:Ba.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}function iu(e){var n=e.className,t=e.message;return(t.isAdminMessage||t.messageType)&&t.isAdminMessage()&&"admin"===t.messageType?a.a.createElement("div",{className:[].concat(_(Array.isArray(n)?n:[n]),["sendbird-admin-message"]).join(" ")},a.a.createElement($a,{className:"sendbird-admin-message__text",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},t.message)):null}function su(e){var n,t=e.className,i=e.message,s=e.isByMe,o=void 0!==s&&s,l=e.mouseHover,u=void 0!==l&&l,c=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:Gi([t,"sendbird-text-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",(null===(n=null===i||void 0===i?void 0:i.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},null===i||void 0===i?void 0:i.message.split(/\r/).map(function(e){return""===e?a.a.createElement("br",{key:e}):a.a.createElement($a,{key:e,className:"sendbird-text-message-item-body__message",type:Za.BODY_1,color:o?ei.ONCONTENT_1:ei.ONBACKGROUND_1},e)}),Pi(i)&&a.a.createElement($a,{className:"sendbird-text-message-item-body__message edited",type:Za.BODY_1,color:o?ei.ONCONTENT_2:ei.ONBACKGROUND_2}," "+c.MESSAGE_EDITED+" "))}function ou(e){var n,t=e.className,r=e.message,i=e.isByMe,s=void 0!==i&&i,o=e.mouseHover,l=void 0!==o&&o;return a.a.createElement("div",{className:Gi([t,"sendbird-file-message-item-body",s?"outgoing":"incoming",l?"mouse-hover":"",(null===(n=null===r||void 0===r?void 0:r.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},a.a.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},a.a.createElement(Ga,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:ja.PHOTO,VIDEO:ja.PLAY,AUDIO:ja.FILE_AUDIO,GIF:ja.GIF,OTHERS:ja.FILE_DOCUMENT}[vi(null===r||void 0===r?void 0:r.type)],fillColor:Ba.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(gs,{className:"sendbird-file-message-item-body__file-name",onClick:function(){window.open(null===r||void 0===r?void 0:r.url)},color:s?ei.ONCONTENT_1:ei.ONBACKGROUND_1},a.a.createElement($a,{className:"sendbird-file-message-item-body__file-name__text",type:Za.BODY_1,color:s?ei.ONCONTENT_1:ei.ONBACKGROUND_1},qi((null===r||void 0===r?void 0:r.name)||(null===r||void 0===r?void 0:r.url)))))}function lu(e){var n,t,i=e.className,s=e.message,o=e.isByMe,l=void 0!==o&&o,u=e.mouseHover,c=void 0!==u&&u,d=e.showFileViewer,h=s.thumbnails,f=void 0===h?[]:h,p=f.length>0?null===(n=f[0])||void 0===n?void 0:n.url:"",m=Object(r.useState)(!1),g=m[0],_=m[1];return a.a.createElement("div",{className:Gi([i,"sendbird-thumbnail-message-item-body",l?"outgoing":"incoming",c?"mouse-hover":"",(null===(t=null===s||void 0===s?void 0:s.reactions)||void 0===t?void 0:t.length)>0?"reactions":""]),onClick:function(){return d(!0)}},a.a.createElement(Mn,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:p||(null===s||void 0===s?void 0:s.url),alt:null===s||void 0===s?void 0:s.type,width:"360px",height:"270px",onLoad:function(){_(!0)},placeHolder:function(e){return a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:e},a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder__icon"},a.a.createElement(Ga,{type:Mi(s)?ja.PLAY:ja.PHOTO,fillColor:Ba.ON_BACKGROUND_2,width:"34px",height:"34px"})))}}),Mi(s)&&!p&&!g&&a.a.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},a.a.createElement("source",{src:null===s||void 0===s?void 0:s.url,type:null===s||void 0===s?void 0:s.type})),a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(Mi(s)||Ui(s))&&a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},a.a.createElement(Ga,{type:Mi(s)?ja.PLAY:ja.GIF,fillColor:Ba.GRAY,width:"34px",height:"34px"}))))}function uu(e){var n,t,i,s,o,l,u,c,d=e.className,h=e.message,f=e.isByMe,p=void 0!==f&&f,m=e.mouseHover,g=void 0!==m&&m,_=Object(r.useContext)(T).stringSet,y=function(){var e,n;(null===(e=null===h||void 0===h?void 0:h.ogMetaData)||void 0===e?void 0:e.url)&&window.open(null===(n=null===h||void 0===h?void 0:h.ogMetaData)||void 0===n?void 0:n.url)};return a.a.createElement("div",{className:Gi([d,"sendbird-og-message-item-body",p?"outgoing":"incoming",g?"mouse-hover":"",(null===(n=null===h||void 0===h?void 0:h.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},a.a.createElement("div",{className:"sendbird-og-message-item-body__text-bubble"},null===h||void 0===h?void 0:h.message.split(" ").map(function(e){return Vi(e)?a.a.createElement(Wo,{className:"sendbird-og-message-item-body__text-bubble__message",key:S(),src:e,type:Za.BODY_1,color:p?ei.ONCONTENT_1:ei.ONBACKGROUND_1},e):a.a.createElement($a,{className:"sendbird-og-message-item-body__text-bubble__message",key:S(),type:Za.BODY_1,color:p?ei.ONCONTENT_1:ei.ONBACKGROUND_1},e)}),Pi(h)&&a.a.createElement($a,{className:"sendbird-og-message-item-body__text-bubble__message",type:Za.BODY_1,color:p?ei.ONCONTENT_2:ei.ONBACKGROUND_2}," "+_.MESSAGE_EDITED+" ")),a.a.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail",onClick:y},a.a.createElement(Mn,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:(null===(i=null===(t=null===h||void 0===h?void 0:h.ogMetaData)||void 0===t?void 0:t.defaultImage)||void 0===i?void 0:i.url)||"",alt:null===(o=null===(s=null===h||void 0===h?void 0:h.ogMetaData)||void 0===s?void 0:s.defaultImage)||void 0===o?void 0:o.alt,width:"320px",height:"180px",defaultComponent:a.a.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},a.a.createElement(Ga,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:ja.THUMBNAIL_NONE,width:"56px",height:"56px"}))})),a.a.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:y},(null===(l=null===h||void 0===h?void 0:h.ogMetaData)||void 0===l?void 0:l.title)&&a.a.createElement($a,{className:"sendbird-og-message-item-body__description__title",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},h.ogMetaData.title),(null===(u=null===h||void 0===h?void 0:h.ogMetaData)||void 0===u?void 0:u.description)&&a.a.createElement($a,{className:"sendbird-og-message-item-body__description__description",type:Za.BODY_2,color:ei.ONBACKGROUND_1},h.ogMetaData.description),(null===(c=null===h||void 0===h?void 0:h.ogMetaData)||void 0===c?void 0:c.url)&&a.a.createElement($a,{className:"sendbird-og-message-item-body__description__url",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},h.ogMetaData.url)),a.a.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}function cu(e){var n,t=e.className,i=e.message,s=e.isByMe,o=void 0!==s&&s,l=e.mouseHover,u=void 0!==l&&l,c=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:Gi([t,"sendbird-unknown-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",(null===(n=null===i||void 0===i?void 0:i.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},a.a.createElement($a,{className:"sendbird-unknown-message-item-body__header",type:Za.BODY_1,color:o?ei.ONCONTENT_1:ei.ONBACKGROUND_1},c.UNKNOWN__UNKNOWN_MESSAGE_TYPE),a.a.createElement($a,{className:"sendbird-unknown-message-item-body__description",type:Za.BODY_1,color:o?ei.ONCONTENT_2:ei.ONBACKGROUND_2},c.UNKNOWN__CANNOT_READ_MESSAGE))}function du(e){var n,t,i,s,o,l,u,c,d,h,f,p,m=e.message,g=e.userId,_=void 0===g?"":g,y=e.isByMe,v=void 0!==y&&y,E=e.className,b=e.onClick,C=Object(r.useContext)(T).stringSet,N=m.parentMessage,S=null===(t=N)||void 0===t?void 0:t.sender,O=_===(null===S||void 0===S?void 0:S.userId)?C.QUOTED_MESSAGE__CURRENT_USER:null===S||void 0===S?void 0:S.nickname,A=(null===(i=N)||void 0===i?void 0:i.url)||"",w=null===(s=N)||void 0===s?void 0:s.type,I=_===(null===(o=null===m||void 0===m?void 0:m.sender)||void 0===o?void 0:o.userId)?C.QUOTED_MESSAGE__CURRENT_USER:null===(l=null===m||void 0===m?void 0:m.sender)||void 0===l?void 0:l.nickname,R=Object(r.useState)(!1),k=R[0],M=R[1],U=yi(),L=(null===(u=N)||void 0===u?void 0:u.name)?N.name.split("/"):A.split("/");return a.a.createElement("div",{className:Gi([E,"sendbird-quote-message",v?"outgoing":"incoming"]),key:null===N||void 0===N?void 0:N.messageId,onClick:function(){b&&b()}},a.a.createElement("div",{className:"sendbird-quote-message__replied-to"},a.a.createElement(Ga,{className:"sendbird-quote-message__replied-to__icon",type:ja.REPLY,fillColor:Ba.ON_BACKGROUND_3,width:"12px",height:"12px"}),a.a.createElement($a,{className:"sendbird-quote-message__replied-to__text",type:Za.CAPTION_2,color:ei.ONBACKGROUND_3},I+" "+C.QUOTED_MESSAGE__REPLIED_TO+" "+O)),a.a.createElement("div",{className:"sendbird-quote-message__replied-message"},Ti(N)&&(null===(d=null===(c=N)||void 0===c?void 0:c.message)||void 0===d?void 0:d.length)>0&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},a.a.createElement($a,{className:"sendbird-quote-message__replied-message__text-message__word",type:Za.BODY_2,color:ei.ONBACKGROUND_1},null===(h=N)||void 0===h?void 0:h.message)),Ri(N)&&A&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},a.a.createElement(Mn,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:A,alt:w,width:"144px",height:"108px",onLoad:function(){return M(!0)},defaultComponent:a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},a.a.createElement(Ga,{type:pi(w)?ja.PLAY:ja.PHOTO,fillColor:Ba.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),pi(w)&&!((null===(p=null===(f=N)||void 0===f?void 0:f.thumbnails)||void 0===p?void 0:p.length)>0)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},a.a.createElement("source",{src:A,type:w})),a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(Ga,{type:ja.PLAY,fillColor:Ba.GRAY,width:"14px",height:"14px"})))),k&&mi(w)&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(Ga,{type:ja.GIF,fillColor:Ba.GRAY,width:"14px",height:"14px"})))),Ai(N)&&!gi(N.type)&&A&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},a.a.createElement(Ga,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[U.IMAGE]=ja.PHOTO,n[U.VIDEO]=ja.PLAY,n[U.AUDIO]=ja.FILE_AUDIO,n[U.GIF]=ja.GIF,n[U.OTHERS]=ja.FILE_DOCUMENT,n)[vi(w)],fillColor:Ba.ON_BACKGROUND_3,width:"16px",height:"16px"}),a.a.createElement($a,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:Za.BODY_2,color:ei.ONBACKGROUND_3},qi(L[L.length-1])))))}function hu(e){var n,t,i,s,o=e.className,l=e.userId,u=e.channel,c=e.message,d=e.disabled,h=void 0!==d&&d,f=e.chainTop,p=void 0!==f&&f,m=e.chainBottom,g=void 0!==m&&m,_=e.useReaction,y=void 0!==_&&_,v=e.replyType,E=e.nicknamesMap,b=e.emojiContainer,C=e.scrollToMessage,N=e.showEdit,S=e.showRemove,O=e.showFileViewer,T=e.resendMessage,A=e.toggleReaction,w=e.setQuoteMessage,I=Di(),R=Object(r.useContext)(si),k=R.disableUserProfile,M=R.renderUserProfile,U=Object(r.useRef)(null),L=Object(r.useState)(!1),P=L[0],D=L[1],x=Object(r.useState)(!1),F=x[0],H=x[1],G=l===(null===(t=null===(n=c)||void 0===n?void 0:n.sender)||void 0===t?void 0:t.userId)||"pending"===c.sendingStatus||"failed"===c.sendingStatus,j=G?"outgoing":"incoming",B=p?"chain-top":"",z=y?"use-reactions":"",V=F?"supposed-hover":"",q=!!("QUOTE_REPLY"===v&&(null===c||void 0===c?void 0:c.parentMessageId)&&(null===c||void 0===c?void 0:c.parentMessage)),K=q?"use-quote":"";return(null===(i=null===c||void 0===c?void 0:c.isAdminMessage)||void 0===i?void 0:i.call(c))||"admin"===(null===c||void 0===c?void 0:c.messageType)?a.a.createElement(iu,{message:c}):a.a.createElement("div",{className:Gi([o,"sendbird-message-content",j]),onMouseOver:function(){return D(!0)},onMouseLeave:function(){return D(!1)}},a.a.createElement("div",{className:Gi(["sendbird-message-content__left",z,j,K])},!G&&!g&&a.a.createElement(ks,{menuTrigger:function(e){var n;return a.a.createElement(Ya,{className:"sendbird-message-content__left__avatar",src:(null===(n=null===c||void 0===c?void 0:c.sender)||void 0===n?void 0:n.profileUrl)||"",ref:U,width:"28px",height:"28px",onClick:function(){k||e()}})},menuItems:function(e){return a.a.createElement(ws,{parentRef:U,parentContainRef:U,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},M?M({user:null===c||void 0===c?void 0:c.sender,close:e}):a.a.createElement(Ns,{user:c.sender,onSuccess:e}))}}),G&&!g&&a.a.createElement("div",{className:Gi(["sendbird-message-content__left__created-at",V])},a.a.createElement(Xl,{message:c,channel:u,status:bi(u,c)})),G&&a.a.createElement("div",{className:Gi(["sendbird-message-content-menu",z,V,j])},a.a.createElement($l,{className:"sendbird-message-content-menu__normal-menu",channel:u,message:c,isByMe:G,replyType:v,disabled:h,showEdit:N,showRemove:S,resendMessage:T,setQuoteMessage:w,setSupposedHover:H}),y&&a.a.createElement(Zl,{className:"sendbird-message-content-menu__reaction-menu",message:c,channel:u,userId:l,spaceFromTrigger:{},emojiContainer:b,toggleReaction:A,setSupposedHover:H}))),a.a.createElement("div",{className:"sendbird-message-content__middle"},!G&&!p&&!q&&a.a.createElement($a,{className:"sendbird-message-content__middle__sender-name",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},Wi(c)),q?a.a.createElement("div",{className:Gi(["sendbird-message-content__middle__quote-message",G?"outgoing":"incoming",K])},a.a.createElement(du,{message:c,userId:l,isByMe:G,onClick:function(){var e;(null===(e=null===c||void 0===c?void 0:c.parentMessage)||void 0===e?void 0:e.createdAt)&&(null===c||void 0===c?void 0:c.parentMessageId)&&C(c.parentMessage.createdAt,c.parentMessageId)}})):null,a.a.createElement("div",{className:Gi(["sendbird-message-content__middle__body-container"])},Ii(c)&&a.a.createElement(su,{className:"sendbird-message-content__middle__message-item-body",message:c,isByMe:G,mouseHover:P}),wi(c)&&a.a.createElement(uu,{className:"sendbird-message-content__middle__message-item-body",message:c,isByMe:G,mouseHover:P}),xi(c)===I.FILE&&a.a.createElement(ou,{className:"sendbird-message-content__middle__message-item-body",message:c,isByMe:G,mouseHover:P}),Ri(c)&&a.a.createElement(lu,{className:"sendbird-message-content__middle__message-item-body",message:c,isByMe:G,mouseHover:P,showFileViewer:O}),xi(c)===I.UNKNOWN&&a.a.createElement(cu,{className:"sendbird-message-content__middle__message-item-body",message:c,isByMe:G,mouseHover:P}),y&&(null===(s=null===c||void 0===c?void 0:c.reactions)||void 0===s?void 0:s.length)>0&&a.a.createElement("div",{className:Gi(["sendbird-message-content-reactions",!G||Ri(c)||wi(c)?"":"primary",P?"mouse-hover":""])},a.a.createElement(au,{userId:l,message:c,isByMe:G,emojiContainer:b,memberNicknamesMap:E,toggleReaction:A})))),a.a.createElement("div",{className:Gi(["sendbird-message-content__right",B,z,K])},!G&&!g&&a.a.createElement($a,{className:Gi(["sendbird-message-content__right__created-at",V]),type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},Ji(c)),!G&&a.a.createElement("div",{className:Gi(["sendbird-message-content-menu",B,V,j])},y&&a.a.createElement(Zl,{className:"sendbird-message-content-menu__reaction-menu",message:c,channel:u,userId:l,spaceFromTrigger:{},emojiContainer:b,toggleReaction:A,setSupposedHover:H}),a.a.createElement($l,{className:"sendbird-message-content-menu__normal-menu",channel:u,message:c,isByMe:G,replyType:v,disabled:h,showEdit:N,showRemove:S,resendMessage:T,setQuoteMessage:w,setSupposedHover:H}))))}ru.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),children:I.a.element.isRequired,count:I.a.oneOfType([I.a.number,I.a.string]),selected:I.a.bool,isAdd:I.a.bool,onClick:I.a.func},ru.defaultProps={className:"",count:"",selected:!1,isAdd:!1,onClick:function(){}},iu.propTypes={message:I.a.shape({message:I.a.string,messageType:I.a.string,isAdminMessage:I.a.func}),className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)])},iu.defaultProps={message:{},className:""};var fu=function(e){var n,t=e.onCloseModal,i=e.onDeleteMessage,s=e.message,o=Object(r.useContext)(T).stringSet;return a.a.createElement(fs,{type:ls.DANGER,disabled:(null===s||void 0===s?void 0:null===(n=s.threadInfo)||void 0===n?void 0:n.replyCount)>0,onCancel:t,onSubmit:i,submitText:"Delete",titleText:o.MODAL__DELETE_MESSAGE__TITLE})};function pu(e){var n=e.message,t=e.userId,i=e.disabled,s=e.editDisabled,o=e.hasSeparator,l=e.deleteMessage,u=e.updateMessage,c=e.scrollToMessage,d=e.resendMessage,h=e.useReaction,f=e.replyType,p=e.chainTop,m=e.chainBottom,_=e.membersMap,y=e.emojiContainer,v=e.animatedMessageId,E=e.highLightedMessageId,b=e.toggleReaction,C=e.quoteMessage,N=e.setQuoteMessage,S=e.renderCustomMessage,O=e.currentGroupChannel,T=n.sender,A=void 0===T?{}:T,w=g(Object(r.useState)(!1),2),I=w[0],R=w[1],k=g(Object(r.useState)(!1),2),M=k[0],U=k[1],L=g(Object(r.useState)(!1),2),P=L[0],D=L[1],x=g(Object(r.useState)(!1),2),F=x[0],H=x[1],G=g(Object(r.useState)(!1),2),j=G[0],B=G[1],z=Object(r.useRef)(null),V=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){E===n.messageId?V&&V.current&&(V.current.scrollIntoView({block:"center",inline:"center"}),H(!1),setTimeout(function(){B(!0)},500)):B(!1)},[E,V.current,n.messageId]),Object(r.useLayoutEffect)(function(){v===n.messageId?V&&V.current&&(V.current.scrollIntoView({block:"center",inline:"center"}),B(!1),setTimeout(function(){H(!0)},500)):H(!1)},[v,V.current,n.messageId]);var q=Object(r.useMemo)(function(){return S?S(n,O,p,m):null},[n,n.message,S]),K=t===A.userId||"pending"===n.requestState||"failed"===n.requestState;return q?a.a.createElement("div",{ref:V,className:Gi(["sendbird-msg-hoc sendbird-msg--scroll-ref",F?"sendbird-msg-hoc__animated":"",j?"sendbird-msg-hoc__highlighted":""])},o&&a.a.createElement(Jo,null,a.a.createElement($a,{type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},kn(n.createdAt,"MMMM dd, yyyy"))),a.a.createElement(q,{message:n})):I?a.a.createElement(el,{isEdit:!0,disabled:s,ref:z,name:n.messageId,onSendMessage:u,onCancelEdit:function(){R(!1)},value:n.message}):a.a.createElement("div",{ref:V,className:Gi(["sendbird-msg-hoc sendbird-msg--scroll-ref",F?"sendbird-msg-hoc__animated":"",j?"sendbird-msg-hoc__highlighted":""]),style:{marginBottom:"2px"}},o&&a.a.createElement(Jo,null,a.a.createElement($a,{type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},kn(n.createdAt,"MMMM dd, yyyy"))),a.a.createElement(hu,{className:"sendbird-message-hoc__message-content",userId:t,scrollToMessage:c,channel:O,message:n,disabled:i,chainTop:p,chainBottom:m,useReaction:h,replyType:f,nicknamesMap:_,emojiContainer:y,showEdit:R,showRemove:U,showFileViewer:D,resendMessage:d,toggleReaction:b,quoteMessage:C,setQuoteMessage:N}),M&&a.a.createElement(fu,{message:n,onCloseModal:function(){return U(!1)},onDeleteMessage:function(){l(n),(null===n||void 0===n?void 0:n.messageId)===(null===C||void 0===C?void 0:C.messageId)&&N(null)}}),P&&a.a.createElement(tl,{onClose:function(){return D(!1)},message:n,onDelete:function(){l(n,function(){D(!1)})},isByMe:K}))}fu.propTypes={onCloseModal:I.a.func.isRequired,onDeleteMessage:I.a.func.isRequired,message:I.a.shape({threadInfo:I.a.shape({replyCount:I.a.number})}).isRequired},pu.propTypes={userId:I.a.string,message:I.a.shape({isFileMessage:I.a.func,isAdminMessage:I.a.func,isUserMessage:I.a.func,isDateseparator:I.a.func,messageId:I.a.number,type:I.a.string,createdAt:I.a.number,message:I.a.string,requestState:I.a.string,messageType:I.a.string,sender:I.a.shape({userId:I.a.string}),ogMetaData:I.a.shape({}),parentMessageId:I.a.number}),animatedMessageId:I.a.oneOfType([I.a.string,I.a.number]),highLightedMessageId:I.a.oneOfType([I.a.string,I.a.number]),renderCustomMessage:I.a.func,currentGroupChannel:I.a.shape({}),hasSeparator:I.a.bool,disabled:I.a.bool,editDisabled:I.a.bool,deleteMessage:I.a.func.isRequired,scrollToMessage:I.a.func,updateMessage:I.a.func.isRequired,resendMessage:I.a.func.isRequired,useReaction:I.a.bool.isRequired,replyType:I.a.oneOf(["NONE","QUOTE_REPLY","THREAD"]).isRequired,chainTop:I.a.bool.isRequired,chainBottom:I.a.bool.isRequired,membersMap:I.a.instanceOf(Map).isRequired,emojiContainer:I.a.shape({emojiCategories:I.a.arrayOf(I.a.shape({emojis:I.a.arrayOf(I.a.shape({key:I.a.string,url:I.a.string}))}))}),toggleReaction:I.a.func,quoteMessage:I.a.shape({messageId:I.a.string}),setQuoteMessage:I.a.func.isRequired},pu.defaultProps={userId:"",editDisabled:!1,renderCustomMessage:null,currentGroupChannel:{},message:{},hasSeparator:!1,disabled:!1,animatedMessageId:null,highLightedMessageId:null,toggleReaction:function(){},scrollToMessage:function(){},emojiContainer:{},quoteMessage:null};var mu=function(e){d(t,r["Component"]);var n=m(t);function t(){var e;o(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return c(p(e=n.call.apply(n,[this].concat(a))),"onScroll",function(n){var t=e.props,r=t.scrollRef,a=t.hasMore,i=t.messagesDispatcher,s=t.onScroll,o=t.onScrollDown,l=t.currentGroupChannel,u=n.target,c=u.scrollTop,d=u.clientHeight,h=u.scrollHeight;if(0===c){if(!a)return;var f=r.current.querySelectorAll(".sendbird-msg--scroll-ref"),p=f&&f[0];s(function(e){if(g(e,1)[0])try{p.scrollIntoView()}catch(n){}})}if(d+c===h){var m=r.current.querySelectorAll(".sendbird-msg--scroll-ref"),_=m&&m[m.length-1];o(function(e){if(g(e,1)[0])try{_.scrollIntoView()}catch(n){}})}setTimeout(function(){d+c===h&&(i({type:Cl}),l.markAsRead())},500)}),e}return u(t,[{key:"render",value:function(){var e=this.props,n=e.userId,t=e.disabled,r=e.scrollRef,i=e.membersMap,s=e.allMessages,o=e.scrollToMessage,l=e.useReaction,u=e.replyType,c=e.emojiAllMap,d=e.editDisabled,h=e.deleteMessage,f=e.updateMessage,p=e.resendMessage,m=e.renderCustomMessage,_=e.renderChatItem,y=e.animatedMessageId,v=e.highLightedMessageId,E=e.emojiContainer,b=e.toggleReaction,C=e.useMessageGrouping,N=e.currentGroupChannel,S=e.memoizedEmojiListItems,O=e.showScrollBot,T=e.onClickScrollBot,A=e.quoteMessage,w=e.setQuoteMessage;return s.length<1?a.a.createElement(ii,{className:"sendbird-conversation__no-messages",type:ai.NO_MESSAGES}):a.a.createElement("div",{className:"sendbird-conversation__messages"},a.a.createElement("div",{ref:r,className:"sendbird-conversation__scroll-container",onScroll:this.onScroll},a.a.createElement("div",{className:"sendbird-conversation__padding"}),a.a.createElement("div",{className:"sendbird-conversation__messages-padding"},s.map(function(e,r){var O=s[r-1],T=s[r+1],I=g(C?function(e,n,t){var r=(null===n||void 0===n?void 0:n.sendingStatus)||"",a="pending"!==r&&"failed"!==r;return[Pl(e,n)&&a,Pl(n,t)&&a]}(O,e,T):[!1,!1],2),R=I[0],k=I[1],M=O&&O.createdAt,U=e.createdAt,L=!(M&&$s(U,M));return _?a.a.createElement("div",{key:e.messageId||e.reqId,className:"sendbird-msg--scroll-ref"},_({message:e,animatedMessageId:y,highLightedMessageId:v,channel:N,onDeleteMessage:h,onUpdateMessage:f,onResendMessage:p,onScrollToMessage:o,onReplyMessage:w,emojiContainer:E,chainTop:R,chainBottom:k,hasSeparator:L,menuDisabled:t})):a.a.createElement(pu,{animatedMessageId:y,highLightedMessageId:v,renderCustomMessage:m,key:e.messageId||e.reqId,userId:n,message:e,quoteMessage:A,scrollToMessage:o,currentGroupChannel:N,disabled:t,membersMap:i,chainTop:R,useReaction:l,replyType:u,emojiAllMap:c,emojiContainer:E,editDisabled:d,hasSeparator:L,chainBottom:k,updateMessage:f,deleteMessage:h,resendMessage:p,toggleReaction:b,setQuoteMessage:w,memoizedEmojiListItems:S})}))),O&&a.a.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:T,onKeyDown:T,tabIndex:0,role:"button"},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.CHEVRON_DOWN,fillColor:Ba.PRIMARY})))}}]),t}();function gu(e){var n=e.count,t=e.time,i=e.onClick,s=Object(r.useContext)(T).stringSet,o=t.split(" ");return o.splice(-2,0,s.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),a.a.createElement("div",{className:"sendbird-notification",onClick:i},a.a.createElement($a,{className:"sendbird-notification__text",color:ei.ONCONTENT_1,type:Za.CAPTION_2},"".concat(n," "),s.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(o.join(" "))),a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.CHEVRON_DOWN,fillColor:Ba.CONTENT}))}mu.propTypes={scrollRef:I.a.shape({current:I.a.oneOfType([I.a.element,I.a.shape({})])}).isRequired,hasMore:I.a.bool,messagesDispatcher:I.a.func.isRequired,onScroll:I.a.func,onScrollDown:I.a.func,editDisabled:I.a.bool,disabled:I.a.bool,userId:I.a.string,allMessages:I.a.arrayOf(I.a.shape({createdAt:I.a.number})).isRequired,deleteMessage:I.a.func.isRequired,resendMessage:I.a.func.isRequired,updateMessage:I.a.func.isRequired,currentGroupChannel:I.a.shape({markAsRead:I.a.func,members:I.a.arrayOf(I.a.shape({}))}).isRequired,animatedMessageId:I.a.oneOfType([I.a.string,I.a.number]),highLightedMessageId:I.a.oneOfType([I.a.string,I.a.number]),renderChatItem:I.a.element,renderCustomMessage:I.a.func,scrollToMessage:I.a.func,useReaction:I.a.bool,replyType:I.a.oneOf(["NONE","QUOTE_REPLY","THREAD"]),showScrollBot:I.a.bool,onClickScrollBot:I.a.func,emojiContainer:I.a.shape({}),emojiAllMap:I.a.instanceOf(Map),membersMap:I.a.instanceOf(Map),useMessageGrouping:I.a.bool,toggleReaction:I.a.func,memoizedEmojiListItems:I.a.func,quoteMessage:I.a.shape({}),setQuoteMessage:I.a.func.isRequired},mu.defaultProps={hasMore:!1,editDisabled:!1,disabled:!1,userId:"",renderCustomMessage:null,renderChatItem:null,animatedMessageId:null,highLightedMessageId:null,onScroll:null,onScrollDown:null,useReaction:!0,replyType:"NONE",emojiContainer:{},showScrollBot:!1,onClickScrollBot:function(){},scrollToMessage:function(){},emojiAllMap:new Map,membersMap:new Map,useMessageGrouping:!0,toggleReaction:function(){},memoizedEmojiListItems:function(){return""},quoteMessage:null},gu.propTypes={count:I.a.oneOfType([I.a.string,I.a.number]),time:I.a.string,onClick:I.a.func.isRequired},gu.defaultProps={count:0,time:""};var _u=function(){var e=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-notification sendbird-notification--frozen"},a.a.createElement($a,{className:"sendbird-notification__text",type:Za.CAPTION_2},e.CHANNEL_FROZEN))},yu=function(e){var n=e.members,t=Object(r.useContext)(T).stringSet;return n&&0!==n.length?n&&1===n.length?"".concat(n[0].nickname," ").concat(t.TYPING_INDICATOR__IS_TYPING):n&&2===n.length?"".concat(n[0].nickname," ").concat(t.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(t.TYPING_INDICATOR__ARE_TYPING):t.TYPING_INDICATOR__MULTIPLE_TYPING:""};function vu(e){var n=e.className,t=e.channelUrl,i=e.sb,s=e.logger,o=g(Object(r.useState)(S()),2),l=o[0],u=o[1],c=g(Object(r.useState)([]),2),d=c[0],h=c[1];return Object(r.useEffect)(function(){if(i&&i.ChannelHandler){i.removeChannelHandler(l);var e=S(),n=new i.ChannelHandler;n.onTypingStatusUpdated=function(e){s.info("Channel > Typing Indicator: onTypingStatusUpdated",e);var n=e.getTypingMembers();e.url===t&&h(n)},i.addChannelHandler(e,n),u(e)}return function(){h([]),i&&i.removeChannelHandler&&i.removeChannelHandler(l)}},[t]),a.a.createElement($a,{className:n,type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},a.a.createElement(yu,{members:d}))}vu.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),channelUrl:I.a.string.isRequired,sb:I.a.shape({ChannelHandler:I.a.func,removeChannelHandler:I.a.func,addChannelHandler:I.a.func}).isRequired,logger:I.a.shape({info:I.a.func}).isRequired},vu.defaultProps={className:""};var Eu="sendbird-quote_message_input__avatar";function bu(e){var n=e.message;if(!Ai(n))return null;var t=n.thumbnails&&n.thumbnails.length>0&&n.thumbnails[0].url||ki(n)&&n.url;return Ri(n)&&t?a.a.createElement(Mn,{className:Eu,url:t,alt:n.type,width:"44px",height:"44px",fixedSize:!0}):Li(n)?a.a.createElement("div",{className:Eu},a.a.createElement(Ga,{type:ja.FILE_AUDIO,fillColor:Ba.ON_BACKGROUND_2,width:"24px",height:"24px"})):a.a.createElement("div",{className:Eu},a.a.createElement(Ga,{type:ja.FILE_DOCUMENT,fillColor:Ba.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function Cu(e){var n,t=e.className,i=e.replyingMessage,s=e.onClose,o=Object(r.useContext)(T).stringSet,l=i,u=null===(n=i)||void 0===n?void 0:n.sender;return a.a.createElement("div",{className:Gi(["sendbird-quote_message_input",t])},a.a.createElement(bu,{message:l}),a.a.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - "+(l.isFileMessage()?"164px":"120px")+")",left:l.isFileMessage()?"92px":"40px"}},a.a.createElement($a,{className:"sendbird-quote_message_input__body__sender-name",type:Za.CAPTION_1,color:ei.ONBACKGROUND_1},o.QUOTE_MESSAGE_INPUT__REPLY_TO+" "+(u&&u.nickname?u.nickname:o.NO_NAME)),a.a.createElement($a,{className:"sendbird-quote_message_input__body__message-content",type:Za.BODY_2,color:ei.ONBACKGROUND_3},ki(l)&&!Ui(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,Mi(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,Ui(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Ti(i)&&i.message,Ai(l)&&!Ri(l)&&l.name)),a.a.createElement(Ga,{className:"sendbird-quote_message_input__close-button",type:ja.CLOSE,fillColor:Ba.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return s(i)}}))}var Nu=function(e,n){var t=e.channel,i=e.user,s=e.isOnline,o=e.initialized,l=e.quoteMessage,u=e.onSendMessage,c=e.onFileUpload,d=e.setQuoteMessage,h=e.renderMessageInput,f=Object(r.useContext)(T).stringSet,p=!o||kl(t)||Ml(t)||!s,m=Rl(t),g=t.isBroadcast;return h?h({channel:t,user:i,disabled:p,quoteMessage:l}):g&&!m?null:a.a.createElement("div",{className:"sendbird-message-input-wrapper"},l&&a.a.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},a.a.createElement(Cu,{replyingMessage:l,onClose:function(){return d(null)}})),a.a.createElement(el,{className:"sendbird-message-input-wrapper__message-input",channelUrl:null===t||void 0===t?void 0:t.url,placeholder:l&&f.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||kl(t)&&f.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||Ml(t)&&f.MESSAGE_INPUT__PLACE_HOLDER__MUTED,ref:n,disabled:p,onStartTyping:function(){t.startTyping()},onSendMessage:function(){u(l),d(null)},onFileUpload:function(e){c(e,l),d(null)}}))},Su=a.a.forwardRef(Nu);function Ou(){var e=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-connection-status"},a.a.createElement($a,{type:Za.BODY_2,color:ei.ONBACKGROUND_2},e.TRYING_TO_CONNECT),a.a.createElement(Ga,{type:ja.DISCONNECTED,fillColor:Ba.SENT,width:"14px",height:"14px"}))}var Tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ni;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?t.NO_MEMBERS:e.members.filter(function(e){return e.userId!==n}).map(function(e){return e.nickname||t.NO_NAME}).join(", "):t.NO_TITLE},Au=function(){};function wu(e){var n=e.currentGroupChannel,t=e.currentUser,i=e.title,s=e.subTitle,o=e.isMuted,l=e.theme,u=e.showSearchIcon,c=e.onSearchClick,d=e.onActionClick,h=t.userId,f=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-chat-header"},a.a.createElement("div",{className:"sendbird-chat-header__left"},a.a.createElement(Ps,{theme:l,channel:n,userId:h,height:32,width:32}),a.a.createElement($a,{className:"sendbird-chat-header__left__title",type:Za.H_2,color:ei.ONBACKGROUND_1},i||Tu(n,h,f)),a.a.createElement($a,{className:"sendbird-chat-header__left__subtitle",type:Za.BODY_1,color:ei.ONBACKGROUND_2},s)),a.a.createElement("div",{className:"sendbird-chat-header__right"},("string"===typeof o&&"true"===o||"boolean"===typeof o&&o)&&a.a.createElement(Ga,{className:"sendbird-chat-header__right__mute",type:ja.NOTIFICATIONS_OFF_FILLED,width:"24px",height:"24px"}),u&&a.a.createElement(ns,{className:"sendbird-chat-header__right__search",width:"32px",height:"32px",onClick:c},a.a.createElement(Ga,{type:ja.SEARCH,fillColor:Ba.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(ns,{className:"sendbird-chat-header__right__info",width:"32px",height:"32px",onClick:d},a.a.createElement(Ga,{type:ja.INFO,fillColor:Ba.PRIMARY,width:"24px",height:"24px"}))))}wu.propTypes={currentGroupChannel:I.a.shape({members:I.a.arrayOf(I.a.shape({})),coverUrl:I.a.string}),currentUser:I.a.shape({userId:I.a.string}),title:I.a.string,subTitle:I.a.oneOfType([I.a.bool,I.a.string]),isMuted:I.a.oneOfType([I.a.string,I.a.bool]),theme:I.a.string,showSearchIcon:I.a.bool,onSearchClick:I.a.func,onActionClick:I.a.func},wu.defaultProps={currentGroupChannel:{},currentUser:{},title:"",subTitle:"",isMuted:!1,theme:"light",showSearchIcon:!1,onSearchClick:Au,onActionClick:Au};var Iu=function(){},Ru=function(e){var n=e.channelUrl,t=e.stores,i=t.sdkStore,o=t.userStore,l=e.config,u=l.userId,c=l.logger,d=l.pubSub,h=l.isOnline,f=l.theme,p=l.imageCompression,m=e.dispatchers.reconnect,_=e.queries,y=void 0===_?{}:_,v=e.startingPoint,E=e.highlightedMessage,b=e.useReaction,C=e.replyType,N=e.showSearchIcon,O=e.onSearchClick,T=e.renderChatItem,A=e.renderChatHeader,w=e.renderCustomMessage,I=e.renderUserProfile,R=e.disableUserProfile,k=e.renderMessageInput,M=e.useMessageGrouping,U=e.onChatHeaderActionClick,L=e.onBeforeSendUserMessage,P=e.onBeforeSendFileMessage,D=e.onBeforeUpdateUserMessage,x=i.sdk,F=e.config,H=i.error,G=i.initialized,j=o.user;y.messageListQuery&&console.warn("messageListQuery has been deprecated, please use messageListParams instead"),Object(r.useEffect)(function(){w&&console.info("The parameter type of renderCustomMessage will be changed to the object in the next minor update.")},[]);var B=g(Object(r.useState)(v),2),z=B[0],V=B[1];Object(r.useEffect)(function(){V(v)},[v,n]);var q=g(Object(r.useState)(""),2),K=q[0],Y=q[1],Q=g(Object(r.useState)(E),2),W=Q[0],J=Q[1];Object(r.useEffect)(function(){J(E)},[E]);var X=y.messageListParams,$=g(Object(r.useState)(null),2),Z=$[0],ee=$[1],ne=g(Object(r.useReducer)(Vl,Hl),2),te=ne[0],re=ne[1],ae=Object(r.useRef)(null),ie=te.allMessages,se=te.loading,oe=te.initialized,le=te.unreadCount,ue=te.unreadSince,ce=te.isInvalid,de=te.currentGroupChannel,he=void 0===de?{}:de,fe=te.hasMore,pe=te.lastMessageTimeStamp,me=te.hasMoreToBottom,ge=te.latestFetchedMessageTimeStamp,_e=te.emojiContainer,ye=te.readStatus,ve=he.isFrozen,Ee=he.isBroadcast,be=he.isSuper,Ce=x.appInfo,Ne=(void 0===Ce?{}:Ce).isUsingReaction&&!Ee&&!be&&b,Se=R||F.disableUserProfile,Oe=I||F.renderUserProfile,Te=me,Ae=Object(r.useMemo)(function(){return Ne?function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,n=void 0===e?[]:e,t=new Map,r=0;r<n.length;r+=1)for(var a=n[r].emojis,i=0;i<a.length;i+=1){var s=a[i],o=s.key,l=s.url;t.set(o,l)}return t}(_e):new Map},[_e]),we=Object(r.useMemo)(function(){return Ne?Ul(_e):[]},[_e]),Ie=Object(r.useMemo)(function(){return Ne?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=new Map,t=0;t<e.length;t+=1){var r=e[t],a=r.userId,i=r.nickname;n.set(a,i)}return n}(he.members):new Map},[he.members]),Re=function(e,n){var t=e.currentGroupChannel,a=e.lastMessageTimeStamp,i=e.userFilledMessageListQuery,s=e.replyType,o=n.hasMore,l=n.logger,u=n.messagesDispatcher,c=n.sdk;return Object(r.useCallback)(function(e){if(o){var n=c.appInfo,r=(void 0===n?{}:n).isUsingReaction||!1,d=new c.MessageListParams;d.prevResultSize=30,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=r,s&&"QUOTE_REPLY"===s&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach(function(e){d[e]=i[e]}),l.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t.getMessagesByTimestamp(a||(new Date).getTime(),d).then(function(n){var r=n&&n.length>0,a=r?n[0].createdAt:null;u({type:ol,payload:{messages:n,hasMore:r,lastMessageTimeStamp:a,currentGroupChannel:t}}),e([n,null])}).catch(function(n){l.error("Channel: Fetching messages failed",n),u({type:ol,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:t}}),e([null,n])}).finally(function(){t.markAsRead()})}},[t,a,s])}({currentGroupChannel:he,lastMessageTimeStamp:pe,userFilledMessageListQuery:X,replyType:C},{hasMore:fe,logger:c,messagesDispatcher:re,sdk:x}),ke=function(e,n){var t=e.setIntialTimeStamp,a=e.setAnimatedMessageId,i=e.allMessages,s=n.logger;return Object(r.useCallback)(function(e,n){var r=i.find(function(e){return e.messageId===n});a(null),setTimeout(function(){r?(s.info("Channel: scroll to message - message is present"),a(n)):(s.info("Channel: scroll to message - fetching older messages"),t(null),t(e),a(n))})},[t,a,i])}({setIntialTimeStamp:V,setAnimatedMessageId:Y,allMessages:ie},{logger:c}),Me=function(e,n){var t=e.currentGroupChannel,a=e.latestFetchedMessageTimeStamp,i=e.userFilledMessageListQuery,s=e.hasMoreToBottom,o=e.replyType,l=n.logger,u=n.messagesDispatcher,c=n.sdk;return Object(r.useCallback)(function(e){if(s){var n=c.appInfo,r=(void 0===n?{}:n).isUsingReaction||!1,d=new c.MessageListParams;d.nextResultSize=Ql,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=r,o&&"QUOTE_REPLY"===o&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach(function(e){d[e]=i[e]}),l.info("Channel: Fetching later messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t.getMessagesByTimestamp(a||(new Date).getTime(),d).then(function(n){var r=n&&n.length||0,a=r>0&&d.nextResultSize===r,i=a?n[n.length-1].createdAt:null;u({type:ll,payload:{messages:n,hasMoreToBottom:a,latestFetchedMessageTimeStamp:i,currentGroupChannel:t}}),e([n,null])}).catch(function(n){l.error("Channel: Fetching later messages failed",n),u({type:ul,payload:{messages:[],hasMoreToBottom:!1,latestFetchedMessageTimeStamp:0,currentGroupChannel:t}}),e([null,n])}).finally(function(){t.markAsRead()})}},[t,a,s,o])}({currentGroupChannel:he,latestFetchedMessageTimeStamp:ge,userFilledMessageListQuery:X,hasMoreToBottom:me,replyType:C},{logger:c,messagesDispatcher:re,sdk:x}),Ue=function(e,n){var t=e.currentGroupChannel,a=n.logger;return Object(r.useCallback)(function(e,n,r){r?t.deleteReaction(e,n).then(function(e){a.info("Delete reaction success",e)}).catch(function(e){a.warning("Delete reaction failed",e)}):t.addReaction(e,n).then(function(e){a.info("Add reaction success",e)}).catch(function(e){a.warning("Add reaction failed",e)})},[t])}({currentGroupChannel:he},{logger:c}),Le=function(e,n){var t=e.emojiContainer,i=e.toggleReaction,s=n.useReaction,o=n.logger,l=n.userId,u=n.emojiAllList;return Object(r.useMemo)(function(){return function(e){var n=e.parentRef,t=e.parentContainRef,r=e.message,c=e.closeDropdown,d=e.spaceFromTrigger,h=void 0===d?{}:d;return s&&(n||t||r||c)?a.a.createElement(Is,{parentRef:n,parentContainRef:t,closeDropdown:c,spaceFromTrigger:h},u.map(function(e){var n=r.reactions.filter(function(n){return n.key===e.key})[0],t=!!n&&!(n.userIds.indexOf(l)<0);return a.a.createElement(Wl,{key:e.key,width:"36px",height:"36px",selected:t,onClick:function(){c(),i(r,e.key,t)}},a.a.createElement(Mn,{url:e.url,width:"28px",height:"28px",defaultComponent:a.a.createElement(Ga,{width:"28px",height:"28px",type:ja.QUESTION})}))})):(o.warning("Channel: Invalid Params in memoizedEmojiListItems"),null)}},[t,i])}({emojiContainer:_e,toggleReaction:Ue},{useReaction:Ne,logger:c,userId:u,emojiAllList:we});!function(e,n){var t=e.channelUrl,a=e.sdkInit,i=n.messagesDispatcher,s=n.sdk,o=n.logger;Object(r.useEffect)(function(){t&&a&&s&&s.GroupChannel&&(o.info("Channel | useSetChannel fetching channel",t),s.GroupChannel.getChannel(t).then(function(e){o.info("Channel | useSetChannel fetched channel",e),i({type:El,payload:e}),o.info("Channel: Mark as read",e),e.markAsRead()}).catch(function(e){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:t,e:e}),i({type:bl})}),s.getAllEmoji(function(e,n){n?o.error("Channel: Getting emojis failed",n):(o.info("Channel: Getting emojis success",e),i({type:Sl,payload:e}))}))},[t,a])}({channelUrl:n,sdkInit:G},{messagesDispatcher:re,sdk:x,logger:c}),Object(r.useEffect)(function(){ee(null)},[n]),function(e,n){var t=e.currentGroupChannel,a=e.sdkInit,i=e.hasMoreToBottom,s=n.messagesDispatcher,o=n.sdk,l=n.logger,u=n.scrollRef,c=n.setQuoteMessage,d=t&&t.url;Object(r.useEffect)(function(){var e=S();if(d&&o&&o.ChannelHandler){var n=new o.ChannelHandler;l.info("Channel | useHandleChannelEvents: Setup event handler",e),n.onMessageReceived=function(e,n){if(Yo(e.url,t.url)&&!i){var r=!1;try{var a=u.current;r=a.offsetHeight+a.scrollTop>=a.scrollHeight}catch(o){}if(l.info("Channel | useHandleChannelEvents: onMessageReceived",n),s({type:pl,payload:{channel:e,message:n,scrollToEnd:r}}),r)try{setTimeout(function(){t.markAsRead(),Il()})}catch(o){l.warning("Channel | onMessageReceived | scroll to end failed")}}Yo(e.url,t.url)&&i&&s({type:ml,payload:{channel:e}})},n.onMessageUpdated=function(e,n){l.info("Channel | useHandleChannelEvents: onMessageUpdated",n),s({type:gl,payload:{channel:e,message:n}})},n.onThreadInfoUpdated=function(e,n){l.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",n),s({type:_l,payload:{channel:e,event:n}})},n.onMessageDeleted=function(e,n){l.info("Channel | useHandleChannelEvents: onMessageDeleted",n),c(null),s({type:yl,payload:n})},n.onReactionUpdated=function(e,n){l.info("Channel | useHandleChannelEvents: onReactionUpdated",n),s({type:Nl,payload:n})},n.onChannelChanged=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onChannelChanged",e),s({type:El,payload:e}))},n.onChannelFrozen=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onChannelFrozen",e),s({type:El,payload:e}))},n.onChannelUnfrozen=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onChannelUnFrozen",e),s({type:El,payload:e}))},n.onUserMuted=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onUserMuted",e),s({type:El,payload:e}))},n.onUserUnmuted=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onUserUnmuted",e),s({type:El,payload:e}))},n.onUserBanned=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onUserBanned",e),s({type:El,payload:e}))},n.onOperatorUpdated=function(e){Yo(e.url,t.url)&&(l.info("Channel | useHandleChannelEvents: onOperatorUpdated",e),s({type:El,payload:e}))},o.addChannelHandler(e,n)}return function(){o&&o.removeChannelHandler&&(l.info("Channel | useHandleChannelEvents: Removing message reciver handler",e),o.removeChannelHandler(e))}},[d,a])}({currentGroupChannel:he,sdkInit:G,hasMoreToBottom:me},{messagesDispatcher:re,sdk:x,logger:c,scrollRef:ae,setQuoteMessage:ee}),function(e,n){var t=e.currentGroupChannel,a=e.userFilledMessageListQuery,i=e.intialTimeStamp,s=e.replyType,o=n.sdk,l=n.logger,u=n.messagesDispatcher,c=t&&t.url;Object(r.useEffect)(function(){if(l.info("Channel useInitialMessagesFetch: Setup started",t),u({type:rl}),o&&o.MessageListParams&&t&&t.getMessagesByTimestamp){var e=new o.MessageListParams;e.prevResultSize=ql,e.isInclusive=!0,e.includeReplies=!1,e.includeReaction=!0,s&&"QUOTE_REPLY"===s&&(e.includeThreadInfo=!0,e.includeParentMessageInfo=!0,e.replyType="only_reply_to_channel"),a&&Object.keys(a).forEach(function(n){e[n]=a[n]}),(s&&"QUOTE_REPLY"===s||a)&&(l.info("Channel useInitialMessagesFetch: Setup messageListParams",e),u({type:Ol,payload:e})),l.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:a}),u({type:sl}),i?(e.nextResultSize=Kl,t.getMessagesByTimestamp(i,e).then(function(e){var n=e&&e.length>0,r=n?e[0].createdAt:null,i=Yl(e),l=new o.MessageListParams;l.nextResultSize=Kl,l.isInclusive=!0,l.includeReplies=!1,l.includeReaction=!0,s&&"QUOTE_REPLY"===s&&(l.includeThreadInfo=!0,l.includeParentMessageInfo=!0,l.replyType="only_reply_to_channel"),a&&Object.keys(a).forEach(function(e){l[e]=a[e]}),t.getMessagesByTimestamp(i||(new Date).getTime(),l).then(function(a){u({type:ol,payload:{messages:e,hasMore:n,lastMessageTimeStamp:r,currentGroupChannel:t,latestFetchedMessageTimeStamp:i,hasMoreToBottom:a&&a.length>0}})})}).catch(function(e){l.error("Channel: Fetching messages failed",e),u({type:ol,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:t}})}).finally(function(){i||setTimeout(function(){return Il()}),t.markAsRead()})):t.getMessagesByTimestamp((new Date).getTime(),e).then(function(e){var n=e&&e.length>0,r=n?e[0].createdAt:null,a=Yl(e);u({type:ol,payload:{messages:e,hasMore:n,lastMessageTimeStamp:r,currentGroupChannel:t,latestFetchedMessageTimeStamp:a,hasMoreToBottom:!1}})}).catch(function(e){l.error("Channel: Fetching messages failed",e),u({type:ol,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:t}})}).finally(function(){i||setTimeout(function(){return Il()}),t.markAsRead()})}},[c,a,i])}({currentGroupChannel:he,userFilledMessageListQuery:X,intialTimeStamp:z,replyType:C},{sdk:x,logger:c,messagesDispatcher:re}),Object(r.useEffect)(function(){var e=function(e,n,t){var r=new Map;return n&&n.subscribe?(r.set("SEND_USER_MESSAGE",n.subscribe("SEND_USER_MESSAGE",function(n){var r=n.channel,a=n.message;Il(),r&&e===r.url&&t({type:dl,payload:a})})),r.set(_s,n.subscribe(_s,function(n){var r=n.channel,a=n.message;r&&e===r.url&&t({type:cl,payload:a})})),r.set("SEND_FILE_MESSAGE",n.subscribe("SEND_FILE_MESSAGE",function(n){var r=n.channel,a=n.message;Il(),r&&e===r.url&&t({type:dl,payload:a})})),r.set(ys,n.subscribe(ys,function(n){var r=n.channel,a=n.message;n.fromSelector&&r&&e===r.url&&t({type:gl,payload:{channel:r,message:a}})})),r.set("DELETE_MESSAGE",n.subscribe("DELETE_MESSAGE",function(n){var r=n.channel,a=n.messageId;r&&e===r.url&&t({type:yl,payload:a})})),r):r}(n,d,re);return function(){e.forEach(function(e){try{e.remove()}catch(n){}})}},[n,G]),function(e,n){var t=e.isOnline,a=e.replyType,i=n.logger,s=n.sdk,o=n.currentGroupChannel,l=n.messagesDispatcher,u=n.userFilledMessageListQuery;Object(r.useEffect)(function(){var e=!t;return function(){var n;if(e&&(null===o||void 0===o?void 0:o.url)){i.info("Refreshing conversation state");var t=(null===(n=null===s||void 0===s?void 0:s.appInfo)||void 0===n?void 0:n.isUsingReaction)||!1,r=new s.MessageListParams;r.prevResultSize=30,r.isInclusive=!0,r.includeReplies=!1,r.includeReaction=t,a&&"QUOTE_REPLY"===a&&(r.includeThreadInfo=!0,r.includeParentMessageInfo=!0,r.replyType="only_reply_to_channel"),u&&Object.keys(u).forEach(function(e){r[e]=u[e]}),i.info("Channel: Fetching messages",{currentGroupChannel:o,userFilledMessageListQuery:u}),l({type:sl,payload:null}),s.GroupChannel.getChannel(o.url).then(function(e){var n=(new Date).getTime();e.getMessagesByTimestamp(n,r).then(function(e){l({type:il,payload:null});var n=(null===e||void 0===e?void 0:e.length)>0,t=n?e[0].createdAt:null;l({type:ol,payload:{messages:e,hasMore:n,lastMessageTimeStamp:t,currentGroupChannel:o}}),setTimeout(function(){return Il()})}).catch(function(e){i.error("Channel: Fetching messages failed",e)}).finally(function(){var e;null===(e=o.markAsRead)||void 0===e||e.call(o)})})}}},[t,a])}({isOnline:h,replyType:C},{logger:c,sdk:x,currentGroupChannel:he,messagesDispatcher:re,userFilledMessageListQuery:X});var Pe=function(e,n){var t=e.currentGroupChannel,a=e.messagesDispatcher,i=n.logger;return Object(r.useCallback)(function(e,n){i.info("Channel | useDeleteMessageCallback: Deleting message",e);var r=e.requestState;if(i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",r),"failed"===r||"pending"===r)return i.info("Channel | useDeleteMessageCallback: Deleted message from local:",e),a({type:vl,payload:e.reqId}),void(n&&n());t.deleteMessage(e,function(t){i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",r),n&&n(t),t?i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",t):(i.info("Channel | useDeleteMessageCallback: Deleting message success!",e),a({type:yl,payload:e.messageId}))})},[t,a])}({currentGroupChannel:he,messagesDispatcher:re},{logger:c}),De=function(e,n){var t=e.currentGroupChannel,a=e.messagesDispatcher,i=e.onBeforeUpdateUserMessage,s=n.logger,o=n.pubSub,l=n.sdk;return Object(r.useCallback)(function(e,n,r){i&&"function"===typeof i&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var u=i?i(n):function(e){var n=new l.UserMessageParams;return n.message=e,n}(n);t.updateUserMessage(e,u,function(e,n){s.info("Channel: Updating message!",u);var i=e,c=n;l.getErrorFirstCallback()&&(i=n,c=e),r&&r(c,i),c?s.warning("Channel: Updating message failed!",c):(s.info("Channel: Updating message success!",i),a({type:gl,payload:{channel:t,message:i}}),o.publish(ys,{message:i,channel:t}))})},[t.url,a,i])}({currentGroupChannel:he,messagesDispatcher:re,onBeforeUpdateUserMessage:D},{logger:c,sdk:x,pubSub:d}),xe=function(e,n){var t=e.currentGroupChannel,a=e.messagesDispatcher,i=n.logger;return Object(r.useCallback)(function(e){i.info("Channel: Resending message has started",e);var n=e.messageType,r=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",a({type:fl,payload:e}),"user"===n)return t.resendUserMessage(e).then(function(e){i.info("Channel: Resending message success!",{message:e}),a({type:dl,payload:e})}).catch(function(n){i.warning("Channel: Resending message failed!",{e:n}),e.requestState="failed",a({type:hl,payload:e})}),e.requestState="pending",void a({type:fl,payload:e});"file"===n&&(t.resendFileMessage(e,r).then(function(e){i.info("Channel: Resending file message success!",{message:e}),a({type:dl,payload:e})}).catch(function(n){i.warning("Channel: Resending file message failed!",{e:n}),e.requestState="failed",a({type:hl,payload:e})}),e.requestState="pending",a({type:fl,payload:e}))}else console.error("Message is not resendable"),i.warning("Message is not resendable",e)},[t,a])}({currentGroupChannel:he,messagesDispatcher:re},{logger:c}),Fe=g(function(e,n){var t=e.currentGroupChannel,a=e.onBeforeSendUserMessage,i=n.sdk,s=n.logger,o=n.pubSub,l=n.messagesDispatcher,u=Object(r.useRef)(null),c=Object(r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=u.current.value;a&&"function"===typeof a&&s.info("Channel: creating params using onBeforeSendUserMessage",a);var r=a?a(n,e):function(n){var t="string"===typeof n?n.trim():n,r=new i.UserMessageParams;return r.message=t,e&&(r.isReplyToChannel=!0,r.parentMessageId=e.messageId),r}(n);s.info("Channel: Sending message has started",r);var c=t.sendUserMessage(r,function(e,n){var t=e,r=n;if(i.getErrorFirstCallback()&&(t=n,r=e),r)return s.warning("Channel: Sending message failed!",{message:t}),void l({type:hl,payload:t});s.info("Channel: Sending message success!",t),l({type:dl,payload:t})});o.publish(_s,{message:c,channel:t}),setTimeout(function(){return Il()})},[t,a]);return[u,c]}({currentGroupChannel:he,onBeforeSendUserMessage:L},{sdk:x,logger:c,pubSub:d,messagesDispatcher:re}),2),He=Fe[0],Ge=Fe[1],je=function(e,n){var t=e.currentGroupChannel,a=e.onBeforeSendFileMessage,i=e.imageCompression,o=void 0===i?{}:i,l=n.sdk,u=n.logger,c=n.pubSub,d=n.messagesDispatcher;return[Object(r.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=o.compressionRate,i=o.resizingWidth,h=o.resizingHeight,f=a&&"function"===typeof a,p="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,m=r>0&&r<1,_=Fl(i)||Fl(h),y=function(e){var t=new l.FileMessageParams;return t.file=e,n&&(t.isReplyToChannel=!0,t.parentMessageId=n.messageId),t};if(p&&(m||_))try{var v=document.createElement("img");v.src=URL.createObjectURL(e),v.onload=function(){URL.revokeObjectURL(v.src);var o=document.createElement("canvas"),p=v.naturalWidth||v.width,m=v.naturalHeight||v.height,E=Fl(i)||p,b=Fl(h)||m;"image/png"!==e.type||_||(E*=r,b*=r),o.width=E,o.height=b;var C=o.getContext("2d");C.drawImage(v,0,0,E,b),C.canvas.toBlob(function(r){var i=new File([r],e.name,{type:e.type});f&&u.info("Channel: Creating params using onBeforeSendFileMessage",a);var o=f?a(i,n):y(i);u.info("Channel: Uploading file message start!",o);var h=t.sendFileMessage(o,function(e,n){var t=g(l.getErrorFirstCallback()?[n,e]:[e,n],2),r=t[0],a=t[1];if(a)return u.error("Channel: Sending file message failed!",{message:r,error:a}),r.localUrl=URL.createObjectURL(i),r.file=i,void d({type:hl,payload:r});u.info("Channel: Sending file message success!",r),d({type:dl,payload:r})});c.publish(_s,{message:s(s({},h),{},{url:URL.createObjectURL(i),requestState:"pending"}),channel:t}),setTimeout(function(){return Il()},1e3)},e.type,r)}}catch(C){u.error("Channel: Sending file message failed!",C)}else{f&&u.info("Channel: creating params using onBeforeSendFileMessage",a);var E=a?a(e):y(e);u.info("Channel: Uploading file message start!",E);var b=t.sendFileMessage(E,function(n,t){var r=g(l.getErrorFirstCallback()?[t,n]:[n,t],2),a=r[0],i=r[1];if(i)return u.error("Channel: Sending file message failed!",{message:a,error:i}),a.localUrl=URL.createObjectURL(e),a.file=e,void d({type:hl,payload:a});u.info("Channel: Sending message success!",a),d({type:dl,payload:a})});c.publish(_s,{message:s(s({},b),{},{url:URL.createObjectURL(e),requestState:"pending"}),channel:t}),setTimeout(function(){return Il()},1e3)}},[t,a,o])]}({currentGroupChannel:he,onBeforeSendFileMessage:P,imageCompression:p},{sdk:x,logger:c,pubSub:d,messagesDispatcher:re}),Be=g(je,1)[0];return n?ce?a.a.createElement("div",{className:"sendbird-conversation"},a.a.createElement(ii,{type:ai.WRONG})):H?a.a.createElement("div",{className:"sendbird-conversation"},a.a.createElement(ii,{type:ai.WRONG,retryToConnect:function(){c.info("Channel: reconnecting"),m()}})):a.a.createElement(oi,{className:"sendbird-conversation",disableUserProfile:Se,renderUserProfile:Oe},A?A({channel:he,user:j}):a.a.createElement(wu,{theme:f,currentGroupChannel:he,currentUser:j,showSearchIcon:N,onSearchClick:O,onActionClick:U,subTitle:he.members&&2!==he.members.length,isMuted:!1}),ve&&a.a.createElement(_u,null),le>0&&a.a.createElement(gu,{count:le,onClick:function(){z?(V(null),Y(null),J(null)):(Il(),0===ae.current.scrollTop&&(he.markAsRead(),re({type:Cl})))},time:ue}),se?a.a.createElement("div",{className:"sendbird-conversation"},a.a.createElement(ii,{type:ai.LOADING})):a.a.createElement(mu,{swapParams:x&&x.getErrorFirstCallback&&x.getErrorFirstCallback(),animatedMessageId:K,highLightedMessageId:W,userId:u,hasMore:fe,disabled:!h,onScroll:Re,onScrollDown:Me,scrollRef:ae,readStatus:ye,useReaction:Ne,replyType:C,allMessages:ie,scrollToMessage:ke,emojiAllMap:Ae,membersMap:Ie,editDisabled:kl(he),deleteMessage:Pe,updateMessage:De,resendMessage:xe,toggleReaction:Ue,emojiContainer:_e,renderChatItem:T,quoteMessage:Z,setQuoteMessage:ee,showScrollBot:Te,onClickScrollBot:function(){V(null),Y(null),J(null)},renderCustomMessage:w,useMessageGrouping:M,messagesDispatcher:re,currentGroupChannel:he,memoizedEmojiListItems:Le}),a.a.createElement("div",{className:"sendbird-conversation__footer"},a.a.createElement(Su,{channel:he,user:j,ref:He,isOnline:h,initialized:oe,onSendMessage:Ge,onFileUpload:Be,quoteMessage:Z,setQuoteMessage:ee,renderMessageInput:k}),a.a.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},a.a.createElement(vu,{className:"sendbird-conversation__footer__typing-indicator__text",channelUrl:n,sb:x,logger:c}),!h&&a.a.createElement(Ou,{sdkInit:G,sb:x,logger:c})))):a.a.createElement("div",{className:"sendbird-conversation"},a.a.createElement(ii,{type:ai.NO_CHANNELS}))};Ru.propTypes={channelUrl:I.a.string,stores:I.a.shape({sdkStore:I.a.shape({initialized:I.a.bool,sdk:I.a.shape({getErrorFirstCallback:I.a.func,removeChannelHandler:I.a.func,GroupChannel:I.a.any,ChannelHandler:I.a.any,addChannelHandler:I.a.func,UserMessageParams:I.a.any,FileMessageParams:I.a.any,getAllEmoji:I.a.func,appInfo:I.a.shape({})}),error:I.a.bool}),userStore:I.a.shape({user:I.a.shape({})})}).isRequired,dispatchers:I.a.shape({reconnect:I.a.func}).isRequired,config:I.a.shape({disableUserProfile:I.a.bool,renderUserProfile:I.a.func,userId:I.a.string.isRequired,isOnline:I.a.bool.isRequired,theme:I.a.string,logger:I.a.shape({info:I.a.func,error:I.a.func,warning:I.a.func}),pubSub:I.a.shape({subscribe:I.a.func,publish:I.a.func}),imageCompression:I.a.shape({compressionRate:I.a.number,resizingWidth:I.a.oneOfType([I.a.number,I.a.string]),resizingHeight:I.a.oneOfType([I.a.number,I.a.string])})}).isRequired,queries:I.a.shape({messageListParams:I.a.shape({includeMetaArray:I.a.bool,includeParentMessageText:I.a.bool,includeReaction:I.a.bool,includeReplies:I.a.bool,includeThreadInfo:I.a.bool,limit:I.a.number,reverse:I.a.bool,senderUserIdsFilter:I.a.arrayOf(I.a.string)})}),startingPoint:I.a.number,highlightedMessage:I.a.oneOfType([I.a.string,I.a.number]),onBeforeSendUserMessage:I.a.func,onBeforeSendFileMessage:I.a.func,onBeforeUpdateUserMessage:I.a.func,renderChatItem:I.a.oneOfType([I.a.element,I.a.func]),renderCustomMessage:I.a.func,renderMessageInput:I.a.oneOfType([I.a.element,I.a.func]),renderChatHeader:I.a.oneOfType([I.a.element,I.a.func]),showSearchIcon:I.a.bool,onSearchClick:I.a.func,onChatHeaderActionClick:I.a.func,useReaction:I.a.bool,replyType:I.a.oneOf(["NONE","QUOTE_REPLY","THREAD"]),disableUserProfile:I.a.bool,renderUserProfile:I.a.func,useMessageGrouping:I.a.bool},Ru.defaultProps={channelUrl:null,queries:{},onBeforeSendUserMessage:null,onBeforeSendFileMessage:null,onBeforeUpdateUserMessage:null,startingPoint:null,highlightedMessage:null,renderChatItem:null,renderCustomMessage:null,renderMessageInput:null,renderChatHeader:null,useReaction:!0,replyType:"NONE",showSearchIcon:!1,onSearchClick:Iu,disableUserProfile:!1,renderUserProfile:null,useMessageGrouping:!0,onChatHeaderActionClick:Iu};var ku=b(Ru),Mu=a.a.createContext({opened:"",setOpened:Fs}),Uu=Mu.Consumer,Lu=Mu.Provider;function Pu(e){var n=e.className,t=e.id,i=e.renderTitle,s=e.renderContent,o=e.renderFooter,l=Object(r.useState)(!1),u=l[0],c=l[1];return a.a.createElement(Uu,null,function(e){var r=e.opened,l=e.setOpened;c(t===r);var d=function(){l(u?"":t)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-accordion__panel-header"],!1).join(" "),id:t,role:"switch","aria-checked":!1,onClick:d,onKeyDown:d,tabIndex:0},i(),a.a.createElement(Ga,{type:ja.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",u?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"})),u&&a.a.createElement("div",{className:"sendbird-accordion"},a.a.createElement("div",{className:"sendbird-accordion__list"},s()),o&&a.a.createElement("div",{className:"sendbird-accordion__footer"},o())))})}var Du=function(e){var n=e.children,t=e.className,i=void 0===t?"":t,s=Object(r.useState)(""),o=s[0],l=s[1];return a.a.createElement(Lu,{value:{opened:o,setOpened:l}},a.a.createElement("div",{className:i},n))},xu=function(e){var n=e.onSubmit,t=e.onCancel,i=e.channel,s=e.userId,o=e.theme,l=Object(r.useRef)(null),u=Object(r.useRef)(null),c=Object(r.useRef)(null),d=g(Object(r.useState)(null),2),h=d[0],f=d[1],p=g(Object(r.useState)(null),2),m=p[0],_=p[1],y=Object(r.useContext)(T).stringSet,v=i.name;return a.a.createElement(fs,{titleText:y.MODAL__CHANNEL_INFORMATION__TITLE,submitText:y.BUTTON__SAVE,onCancel:t,onSubmit:function(){""===v||l.current.value?(n(m,l.current.value),t()):u.current.reportValidity&&u.current.reportValidity()},type:rs.PRIMARY},a.a.createElement("form",{className:"channel-profile-form",ref:u,onSubmit:function(e){e.preventDefault()}},a.a.createElement("div",{className:"channel-profile-form__img-section"},a.a.createElement(Ds,null,y.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),a.a.createElement("div",{className:"channel-profile-form__avatar"},h?a.a.createElement(Ya,{height:"80px",width:"80px",src:h}):a.a.createElement(Ps,{height:80,width:80,channel:i,userId:s,theme:o})),a.a.createElement("input",{ref:c,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){f(URL.createObjectURL(e.target.files[0])),_(e.target.files[0]),c.current.value=""}}),a.a.createElement(gs,{className:"channel-profile-form__avatar-button",onClick:function(){return c.current.click()},notUnderline:!0},a.a.createElement($a,{type:Za.BUTTON_1,color:ei.PRIMARY},y.MODAL__CHANNEL_INFORMATION__UPLOAD))),a.a.createElement("div",{className:"channel-profile-form__name-section"},a.a.createElement(Ds,null,y.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),a.a.createElement(xs,{required:""!==v,name:"channel-profile-form__name",ref:l,value:v,placeHolder:y.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))};xu.propTypes={onSubmit:I.a.func.isRequired,onCancel:I.a.func.isRequired,channel:I.a.shape({name:I.a.string}).isRequired,userId:I.a.string.isRequired,theme:I.a.string.isRequired};var Fu=function(e){var n=e.disabled,t=e.channel,i=e.userId,s=e.theme,o=e.onChannelInfoChange,l=g(Object(r.useState)(!1),2),u=l[0],c=l[1],d=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-channel-profile"},a.a.createElement("div",{className:"sendbird-channel-profile--inner"},a.a.createElement("div",{className:"sendbird-channel-profile__avatar"},a.a.createElement(Ps,{channel:t,userId:i,theme:s,width:80,height:80})),a.a.createElement($a,{className:"sendbird-channel-profile__title",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},t&&t.name&&"Group Channel"!==t.name?t.name:!t||"Group Channel"!==t.name&&t.name?d.NO_TITLE:t.members.map(function(e){return e.nickname||d.NO_NAME}).join(", ")),a.a.createElement(gs,{disabled:n,className:"sendbird-channel-profile__edit",onClick:function(){n||c(!0)},notUnderline:!0},a.a.createElement($a,{type:Za.BUTTON_1,color:n?ei.ONBACKGROUND_2:ei.PRIMARY},d.CHANNEL_SETTING__PROFILE__EDIT)),u&&a.a.createElement(xu,{onCancel:function(){return c(!1)},onSubmit:o,channel:t,userId:i,theme:s})))};function Hu(e){var n=e.hideModal,t=e.channel,i=e.currentUser,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)(null),c=u[0],d=u[1];return Object(r.useEffect)(function(){var e=t.createMemberListQuery();e.limit=20,e.next(function(e,n){n||l(e)}),d(e)},[]),a.a.createElement("div",null,a.a.createElement(fs,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Fs,titleText:"All Members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=c.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&c.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{user:e,key:e.userId,currentUser:i,action:function(n){var r=n.parentRef,i=n.actionRef;return a.a.createElement(a.a.Fragment,null,"operator"===t.myRole&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:r,parentRef:i,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){"operator"!==e.role?t.addOperators([e.userId],function(){l(o.map(function(n){return n.userId===e.userId?C(C({},e),{role:"operator"}):n})),n()}):t.removeOperators([e.userId],function(){l(o.map(function(n){return n.userId===e.userId?C(C({},e),{role:""}):n})),n()})}},"operator"!==e.role?"Promote to operator":"Demote operator"),!t.isBroadcast&&a.a.createElement(Rs,{onClick:function(){e.isMuted?t.unmuteUser(e,function(){l(o.map(function(n){return n.userId===e.userId?C(C({},e),{isMuted:!1}):n})),n()}):t.muteUser(e,function(){l(o.map(function(n){return n.userId===e.userId?C(C({},e),{isMuted:!0}):n})),n()})}},e.isMuted?"Unmute":"Mute"),a.a.createElement(Rs,{onClick:function(){t.banUser(e,-1,"",function(){l(o.filter(function(n){return n.userId!==e.userId}))})}},"Ban"))}}))}})}))))}Fu.propTypes={channel:I.a.shape({name:I.a.string,members:I.a.arrayOf(I.a.shape({nickname:I.a.string}))}).isRequired,userId:I.a.string.isRequired,theme:I.a.string,disabled:I.a.bool,onChannelInfoChange:I.a.func},Fu.defaultProps={theme:"light",disabled:!1,onChannelInfoChange:function(){}};var Gu=function(e){var n=e.member,t=void 0===n?{}:n,i=e.currentUser,s=void 0===i?"":i,o=Object(r.useRef)(null),l=Object(r.useContext)(si),u=l.disableUserProfile,c=l.renderUserProfile,d=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-members-accordion__member"},a.a.createElement("div",{className:"sendbird-members-accordion__member-avatar"},a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{onClick:function(){u||e()},ref:o,src:t.profileUrl,width:24,height:24})},menuItems:function(e){return a.a.createElement(ws,{openLeft:!0,parentRef:o,parentContainRef:o,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},c?c({user:t,currentUserId:s,close:e}):a.a.createElement(Ns,{user:t,currentUserId:s,onSuccess:e}))}})),a.a.createElement($a,{type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},t.nickname||d.NO_NAME,s===t.userId&&d.CHANNEL_SETTING__MEMBERS__YOU))};Gu.propTypes={member:I.a.shape({userId:I.a.string,profileUrl:I.a.string,nickname:I.a.string}).isRequired,currentUser:I.a.string.isRequired};var ju=function(e){var n=e.channel,t=e.disabled,i=e.currentUser,s=e.userQueryCreator,o=e.onInviteMembers,l=e.swapParams,u=n.members||[],c=g(Object(r.useState)(!1),2),d=c[0],h=c[1],f=g(Object(r.useState)(!1),2),p=f[0],m=f[1],_=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-members-accordion"},a.a.createElement("div",{className:"sendbird-members-accordion__list"},u.slice(0,10).map(function(e){return a.a.createElement(Gu,{member:e,currentUser:i,key:e.userId})})),a.a.createElement("div",{className:"sendbird-members-accordion__footer"},u.length>=10&&a.a.createElement(os,{className:"sendbird-members-accordion__footer__all-members",type:ls.SECONDARY,size:us.SMALL,onClick:function(){return h(!0)}},_.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS),u.length>=10&&d&&a.a.createElement(Hu,{currentUser:i,hideModal:function(){h(!1)},channel:n}),a.a.createElement(os,{className:"sendbird-members-accordion__footer__invite-users",type:ls.SECONDARY,size:us.SMALL,disabled:t,onClick:function(){t||m(!0)}},_.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER),p&&a.a.createElement(zs,{swapParams:l,titleText:_.MODAL__INVITE_MEMBER__TITLE,submitText:_.BUTTON__INVITE,closeModal:function(){return m(!1)},idsToFilter:u.map(function(e){return e.userId}),userQueryCreator:s,onSubmit:o})))};ju.propTypes={swapParams:I.a.bool,disabled:I.a.bool,channel:I.a.shape({members:I.a.arrayOf(I.a.shape({}))}),currentUser:I.a.string,userQueryCreator:I.a.func.isRequired,onInviteMembers:I.a.func.isRequired},ju.defaultProps={swapParams:!1,currentUser:"",disabled:!1,channel:{}};var Bu="sendbird-user-list-item--small",zu=function(e){var n=e.user,t=e.className,i=e.currentUser,s=e.action,o=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null),c=Object(r.useContext)(T).stringSet,d=Object(r.useContext)(si),h=d.disableUserProfile,f=d.renderUserProfile,p=Array.isArray(t)?t:[t];return a.a.createElement("div",{ref:l,className:N([Bu],p,!0).join(" ")},n.isMuted&&a.a.createElement(Hs,null),a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{onClick:function(){h||e()},ref:u,className:Bu+"__avatar",src:n.profileUrl,width:24,height:24})},menuItems:function(e){return a.a.createElement(ws,{openLeft:!0,parentRef:u,parentContainRef:u,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},f?f({user:n,currentUserId:i,close:e}):a.a.createElement(Ns,{user:n,currentUserId:i,onSuccess:e}))}}),a.a.createElement($a,{className:Bu+"__title",type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},n.nickname||c.NO_NAME,i===n.userId&&" (You)"),!n.nickname&&a.a.createElement($a,{className:Bu+"__subtitle",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},n.userId),"operator"===n.role&&a.a.createElement($a,{className:Bu+"__operator",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_2},"Operator"),s&&a.a.createElement("div",{ref:o,className:Bu+"__action"},s({actionRef:o,parentRef:l})))};function Vu(e){var n=e.hideModal,t=e.channel,i=e.currentUser,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)(null),c=u[0],d=u[1];return Object(r.useEffect)(function(){var e=t.createOperatorListQuery();e.limit=20,e.next(function(e,n){n||l(e)}),d(e)},[]),a.a.createElement("div",null,a.a.createElement(fs,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Fs,titleText:"All operators"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=c.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&c.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{currentUser:i,user:e,key:e.userId,action:function(n){var r=n.parentRef,i=n.actionRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:r,parentRef:i,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){t.removeOperators([e.userId],function(n,t){t||l(o.filter(function(n){return n.userId!==e.userId}))}),n()}},"Dismiss operator"))}})}})}))))}function qu(e){var n=e.hideModal,t=e.channel,i=e.onSubmit,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)({}),c=u[0],d=u[1],h=Object(r.useState)(null),f=h[0],p=h[1],m=Object(r.useContext)(T).stringSet;Object(r.useEffect)(function(){var e=t.createMemberListQuery();e.limit=20,e.next(function(e,n){n||l(e)}),p(e)},[]);var g=Object.keys(c).filter(function(e){return c[e]}).length;return a.a.createElement("div",null,a.a.createElement(fs,{type:rs.PRIMARY,submitText:"Add",onCancel:function(){return n()},onSubmit:function(){var e=Object.keys(c).filter(function(e){return c[e]});i(e)},titleText:"Select members"},a.a.createElement($a,{color:g>0?ei.PRIMARY:ei.ONBACKGROUND_3,type:Za.CAPTION_1},g+" "+m.MODAL__INVITE_MEMBER__SELECTEC),a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=f.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&f.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{checkBox:!0,checked:c[e.userId],onChange:function(e){var n,t=C(C({},c),((n={})[e.target.id]=e.target.checked,n));e.target.checked||delete t[e.target.id],d(t)},user:e,key:e.userId})}))))}var Ku=b(function(e){var n=e.sdk,t=e.channel,i=Object(r.useState)([]),s=i[0],o=i[1],l=Object(r.useState)(!1),u=l[0],c=l[1],d=Object(r.useState)(!1),h=d[0],f=d[1],p=Object(r.useState)(!1),m=p[0],g=p[1],_=Object(r.useContext)(T).stringSet;Object(r.useEffect)(function(){if(t){var e=t.createOperatorListQuery();e.limit=10,e.next(function(n,t){t||(o(n),g(e.hasNext))})}else o([])},[t]);var y=Object(r.useCallback)(function(){if(t){var e=t.createOperatorListQuery();e.limit=10,e.next(function(n,t){t||(o(n),g(e.hasNext))})}else o([])},[t]);return a.a.createElement(a.a.Fragment,null,s.map(function(e){return a.a.createElement(zu,{key:e.userId,user:e,currentUser:n.currentUser.userId,action:function(n){var r=n.actionRef,i=n.parentRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:i,parentRef:r,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){t.removeOperators([e.userId],function(n,t){t||o(s.filter(function(n){return n.userId!==e.userId}))}),n()}},"Dismiss operator"))}})}})}),m&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){c(!0)}},_.CHANNEL_SETTING__OPERATORS__TITLE_ALL),a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){f(!0)}},_.CHANNEL_SETTING__OPERATORS__TITLE_ADD)),u&&a.a.createElement(Vu,{currentUser:n.currentUser.userId,hideModal:function(){c(!1),y()},channel:t}),h&&a.a.createElement(qu,{hideModal:function(){return f(!1)},channel:t,onSubmit:function(e){f(!1),t.addOperators(e,function(){y()})}}))},function(e){return{sdk:vs(e)}});function Yu(e){var n=e.hideModal,t=e.userQueryCreator,i=e.onSubmit,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)({}),c=u[0],d=u[1],h=Object(r.useState)(null),f=h[0],p=h[1];return Object(r.useEffect)(function(){var e=t();e.limit=20,e.next(function(e,n){n||l(e)}),p(e)},[]),a.a.createElement("div",null,a.a.createElement(fs,{disabled:0===Object.keys(c).length,submitText:"Invite",type:rs.PRIMARY,onCancel:function(){return n()},onSubmit:function(){var e=Object.keys(c).filter(function(e){return c[e]});i(e)},titleText:"Select members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=f.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&f.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{checkBox:!0,checked:c[e.userId],onChange:function(e){var n,t=C(C({},c),((n={})[e.target.id]=e.target.checked,n));e.target.checked||delete t[e.target.id],d(t)},user:e,key:e.userId})}))))}var Qu=b(function(e){var n=e.sdk,t=e.channel,i=e.userQueryCreator,s=e.userId,o=Object(r.useState)([]),l=o[0],u=o[1],c=Object(r.useState)(!1),d=c[0],h=c[1],f=Object(r.useState)(!1),p=f[0],m=f[1],g=Object(r.useState)(!1),_=g[0],y=g[1];Object(r.useEffect)(function(){if(t){var e=t.createMemberListQuery();e.limit=10,e.next(function(n,t){t||(u(n),h(e.hasNext))})}else u([])},[t]);var v=Object(r.useCallback)(function(){if(t){var e=t.createMemberListQuery();e.limit=10,e.next(function(n,t){t||(u(n),h(e.hasNext))})}else u([])},[t]);return a.a.createElement(a.a.Fragment,null,l.map(function(e){return a.a.createElement(zu,{key:e.userId,user:e,currentUser:n.currentUser.userId,action:s!==e.userId?function(n){var r=n.actionRef,i=n.parentRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:i,parentRef:r,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){"operator"!==e.role?t.addOperators([e.userId],function(){v(),n()}):t.removeOperators([e.userId],function(){v(),n()})}},"operator"!==e.role?"Promote to operator":"Demote operator"),!t.isBroadcast&&a.a.createElement(Rs,{onClick:function(){e.isMuted?t.unmuteUser(e,function(){v(),n()}):t.muteUser(e,function(){v(),n()})}},e.isMuted?"Unmute":"Mute"),a.a.createElement(Rs,{onClick:function(){t.banUser(e,-1,"",function(){v(),n()})}},"Ban"))}})}:null})}),a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},d&&a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){return m(!0)}},"All members"),a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){return y(!0)}},"Invite members")),p&&a.a.createElement(Hu,{currentUser:n.currentUser.userId,channel:t,hideModal:function(){m(!1),v()}}),_&&a.a.createElement(Yu,{userQueryCreator:i,onSubmit:function(e){t.inviteWithUserIds(e,function(){y(!1),v()})},channel:t,hideModal:function(){return y(!1)}}))},function(e){return{sdk:vs(e)}});function Wu(e){var n=e.hideModal,t=e.channel,i=Object(r.useState)([]),s=i[0],o=i[1],l=Object(r.useState)(null),u=l[0],c=l[1];return Object(r.useEffect)(function(){var e=t.createBannedUserListQuery();e.next(function(e,n){n||o(e)}),c(e)},[]),a.a.createElement("div",null,a.a.createElement(fs,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Fs,titleText:"Muted members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=u.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&u.next(function(e,n){n||o(N(N([],s,!0),e,!0))})}},s.map(function(e){return a.a.createElement(js,{user:e,key:e.userId,action:function(n){var r=n.parentRef,i=n.actionRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:r,parentRef:i,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){t.unbanUser(e,function(){n(),o(s.filter(function(n){return n.userId!==e.userId}))})}},"Unban"))}})}})}))))}var Ju=b(function(e){var n=e.channel,t=Object(r.useState)([]),i=t[0],s=t[1],o=Object(r.useState)(!1),l=o[0],u=o[1],c=Object(r.useState)(!1),d=c[0],h=c[1];Object(r.useEffect)(function(){if(n){var e=n.createBannedUserListQuery();e.next(function(n,t){t||(s(n),u(e.hasNext))})}else s([])},[n]);var f=Object(r.useCallback)(function(){if(n){var e=n.createBannedUserListQuery();e.next(function(n,t){t||(s(n),u(e.hasNext))})}else s([])},[n]);return a.a.createElement(a.a.Fragment,null,i.map(function(e){return a.a.createElement(zu,{key:e.userId,user:e,action:function(t){var r=t.actionRef,i=t.parentRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(ws,{parentContainRef:i,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(Rs,{onClick:function(){n.unbanUser(e,function(){t(),f()})}},"Unban"))}})}})}),i&&0===i.length&&a.a.createElement($a,{className:"sendbird-channel-settings__empty-list",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_3},"No banned members yet"),l&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){h(!0)}},"All banned members")),d&&a.a.createElement(Wu,{channel:n,hideModal:function(){h(!1),f()}}))},function(e){return{sdk:vs(e)}});function Xu(e){var n=e.hideModal,t=e.channel,i=e.currentUser,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)(null),c=u[0],d=u[1];return Object(r.useEffect)(function(){var e=t.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(e,n){n||l(e)}),d(e)},[]),a.a.createElement("div",null,a.a.createElement(fs,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Fs,titleText:"Muted members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=c.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&c.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{currentUser:i,user:e,key:e.userId,action:function(n){var r=n.actionRef,i=n.parentRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{parentContainRef:i,parentRef:r,closeDropdown:n,openLeft:!0},a.a.createElement(Rs,{onClick:function(){t.unmuteUser(e,function(){n(),l(o.filter(function(n){return n.userId!==e.userId}))})}},"Unmute"))}})}})}))))}var $u=b(function(e){var n=e.sdk,t=e.channel,i=Object(r.useState)([]),s=i[0],o=i[1],l=Object(r.useState)(!1),u=l[0],c=l[1],d=Object(r.useState)(!1),h=d[0],f=d[1];Object(r.useEffect)(function(){if(t){var e=t.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(n,t){t||(o(n),c(e.hasNext))})}else o([])},[t]);var p=Object(r.useCallback)(function(){if(t){var e=t.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(n,t){t||(o(n),c(e.hasNext))})}else o([])},[t]);return a.a.createElement(a.a.Fragment,null,s.map(function(e){return a.a.createElement(zu,{key:e.userId,user:e,currentUser:n.currentUser.userId,action:function(n){var r=n.actionRef,i=n.parentRef;return a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(ns,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.MORE,fillColor:Ba.CONTENT_INVERSE}))},menuItems:function(n){return a.a.createElement(ws,{closeDropdown:n,openLeft:!0,parentContainRef:i,parentRef:r},a.a.createElement(Rs,{onClick:function(){t.unmuteUser(e,function(){p(),n()})}},"Unmute"))}})}})}),s&&0===s.length&&a.a.createElement($a,{className:"sendbird-channel-settings__empty-list",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_3},"No muted members yet"),u&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(os,{type:ls.SECONDARY,size:us.SMALL,onClick:function(){f(!0)}},"All muted members")),h&&a.a.createElement(Xu,{currentUser:n.currentUser.userId,channel:t,hideModal:function(){f(!1),p()}}))},function(e){return{sdk:vs(e)}}),Zu=function(e){return Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":e};function ec(e){var n=e.userQueryCreator,t=e.channel,i=e.userId,s=Object(r.useState)(!1),o=s[0],l=s[1];Object(r.useEffect)(function(){l(t.isFrozen)},[t]);var u=Object(r.useContext)(T).stringSet;return a.a.createElement(Du,{className:"sendbird-channel-settings__operator"},a.a.createElement(Pu,{className:"sendbird-channel-settings__operators-list",id:"operators",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ga,{type:ja.OPERATOR,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},u.CHANNEL_SETTING__OPERATORS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ku,{channel:t}))}}),a.a.createElement(Pu,{className:"sendbird-channel-settings__members-list",id:"members",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ga,{type:ja.MEMBERS,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},u.CHANNEL_SETTING__MEMBERS__TITLE),a.a.createElement(Bs,{count:Zu(t.memberCount)}))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Qu,{userQueryCreator:n,channel:t,userId:i}))}}),!t.isBroadcast&&a.a.createElement(Pu,{id:"mutedMembers",className:"sendbird-channel-settings__muted-members-list",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ga,{type:ja.MUTE,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},u.CHANNEL_SETTING__MUTED_MEMBERS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement($u,{channel:t}))}}),a.a.createElement(Pu,{className:"sendbird-channel-settings__banned-members-list",id:"bannedMembers",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ga,{type:ja.BAN,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},u.CHANNEL_SETTING__BANNED_MEMBERS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ju,{channel:t}))}}),!t.isBroadcast&&a.a.createElement("div",{className:"sendbird-channel-settings__freeze"},a.a.createElement(Ga,{type:ja.FREEZE,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},u.CHANNEL_SETTING__FREEZE_CHANNEL),a.a.createElement("div",{className:"sendbird-channel-settings__frozen-icon"},o?a.a.createElement(Ga,{onClick:function(){t.unfreeze(function(){l(!1)})},type:ja.TOGGLE_ON,fillColor:Ba.PRIMARY,width:44,height:24}):a.a.createElement(Ga,{onClick:function(){t.freeze(function(){l(!0)})},type:ja.TOGGLE_OFF,fillColor:Ba.PRIMARY,width:44,height:24}))))}var nc="sendbird-channel-settings",tc=function(e){return Math.abs(e)>999?"".concat((Math.abs(e)/1e3).toFixed(1),"K"):e};function rc(e){var n=e.className,t=e.onCloseClick,i=e.channelUrl,s=e.disableUserProfile,o=e.renderUserProfile,l=e.onChannelModified,u=e.renderChannelProfile,c=e.onBeforeUpdateChannel,d=e.stores.sdkStore,h=e.config,f=h.userListQuery,p=h.theme,m=h.userId,y=h.logger,v=h.isOnline,E=e.queries,b=void 0===E?{}:E,C=e.config,N=void 0===C?{}:C,O=s||N.disableUserProfile,A=o||N.renderUserProfile,w=b.applicationUserListQuery,I=Object(r.useContext)(T).stringSet,R=d.sdk,k=d.initialized,M=g(Object(r.useState)(S()),2),U=M[0],L=M[1],P=g(Object(r.useState)(null),2),D=P[0],x=P[1],F=g(Object(r.useState)(!1),2),H=F[0],G=F[1],j=g(Object(r.useState)(!1),2),B=j[0],z=j[1],V=g(Object(r.useState)(!1),2),q=V[0],K=V[1],Y=(Array.isArray(n)?[nc].concat(_(n)):[nc,n]).join(" ");return Object(r.useEffect)(function(){if(y.info("ChannelSettings: Setting up"),i&&k&&R){if(!R||!R.GroupChannel)return void y.warning("ChannelSettings: No GroupChannel");R.GroupChannel.getChannel(i,function(e){e?(y.info("ChannelSettings: Fetched group channel",e),G(!1),x(e)):(y.warning("ChannelSettings: Channel not found"),G(!0))})}else y.warning("ChannelSettings: Setting up failed","No channelUrl or sdk uninitialized"),G(!1)},[i,k,U]),!D||H?a.a.createElement("div",{className:Y},a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},I.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(Ga,{className:"sendbird-channel-settings__close-icon",type:ja.CLOSE,height:"24px",width:"24px",onClick:function(){y.info("ChannelSettings: Click close"),t()}})),a.a.createElement("div",null,a.a.createElement(ii,{type:ti.WRONG}))):a.a.createElement(oi,{className:Y,disableUserProfile:O,renderUserProfile:A},a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},I.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement("div",{className:"sendbird-channel-settings__header-icon"},a.a.createElement(ns,{width:"32px",height:"32px",onClick:function(){y.info("ChannelSettings: Click close"),t()}},a.a.createElement(Ga,{className:"sendbird-channel-settings__close-icon",type:ja.CLOSE,height:"22px",width:"22px"})))),a.a.createElement("div",{className:"sendbird-channel-settings__scroll-area"},u?u({channel:D}):a.a.createElement(Fu,{disabled:!v,channel:D,userId:m,theme:p,onChannelInfoChange:function(e,n){y.info("ChannelSettings: Channel information being updated");var t=R.getErrorFirstCallback();if(c){var r=c(n,e,D.data);D.updateChannel(r,function(e,n){var r=e;t&&(r=n),l(r),L(S())})}else D.updateChannel(n,e,D.data,function(e,n){var r=e;t&&(r=n),y.info("ChannelSettings: Channel information updated",r),l(r),L(S())})}}),"operator"===D.myRole?a.a.createElement(ec,{channel:D,userId:m,onChannelModified:function(e){l(e)},userQueryCreator:function(){return f&&"function"===typeof f?f():Vs({sdk:R,userFilledApplicationUserListQuery:w})}}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__members"].join(" "),role:"switch","aria-checked":B,onKeyDown:function(){return z(!B)},onClick:function(){return z(!B)},tabIndex:0},a.a.createElement(Ga,{className:"sendbird-channel-settings__panel-icon-left",type:ja.MEMBERS,fillColor:Ba.PRIMARY,height:"24px",width:"24px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},I.CHANNEL_SETTING__MEMBERS__TITLE,a.a.createElement(Bs,{count:tc(D.memberCount)})),a.a.createElement(Ga,{className:["sendbird-channel-settings__panel-icon-right","sendbird-channel-settings__panel-icon--chevron",B?"sendbird-channel-settings__panel-icon--open":""].join(" "),type:ja.CHEVRON_RIGHT,height:"24px",width:"24px"})),B&&a.a.createElement(ju,{currentUser:m,disabled:!v,userQueryCreator:function(){return f&&"function"===typeof f?f():Vs({sdk:R,userFilledApplicationUserListQuery:w})},swapParams:R&&R.getErrorFirstCallback&&R.getErrorFirstCallback(),channel:D,members:D.members,onInviteMembers:function(e){y.info("ChannelSettings: Inviting new users"),D.inviteWithUserIds(e).then(function(e){l(e),L(S()),y.info("ChannelSettings: Inviting new users success!",e)})}})),a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__leave-channel",v?"":"sendbird-channel-settings__panel-item__disabled"].join(" "),role:"button",disabled:!0,onKeyDown:function(){v&&K(!0)},onClick:function(){v&&K(!0)},tabIndex:0},a.a.createElement(Ga,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:ja.LEAVE,fillColor:Ba.ERROR,height:"24px",width:"24px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},I.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)),q&&a.a.createElement(Js,{onCloseModal:function(){return K(!1)},onLeaveChannel:function(){y.info("ChannelSettings: Leaving channel",D),D.leave().then(function(){y.info("ChannelSettings: Leaving channel successful!",D),t()})}})))}rc.propTypes={className:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)]),onCloseClick:I.a.func,onChannelModified:I.a.func,onBeforeUpdateChannel:I.a.func,renderChannelProfile:I.a.oneOfType([I.a.element,I.a.func]),disableUserProfile:I.a.bool,renderUserProfile:I.a.func,channelUrl:I.a.string.isRequired,queries:I.a.shape({applicationUserListQuery:I.a.shape({limit:I.a.number,userIdsFilter:I.a.arrayOf(I.a.string),metaDataKeyFilter:I.a.string,metaDataValuesFilter:I.a.arrayOf(I.a.string)})}),stores:I.a.shape({sdkStore:I.a.shape({sdk:I.a.shape({getErrorFirstCallback:I.a.func,GroupChannel:I.a.oneOfType([I.a.shape({getChannel:I.a.func}),I.a.func]),createApplicationUserListQuery:I.a.any}),initialized:I.a.bool})}).isRequired,config:I.a.shape({userId:I.a.string,theme:I.a.string,userListQuery:I.a.func,isOnline:I.a.bool,logger:I.a.shape({info:I.a.func,error:I.a.func,warning:I.a.func})}).isRequired},rc.defaultProps={className:"",onBeforeUpdateChannel:null,queries:{},disableUserProfile:!1,renderUserProfile:null,renderChannelProfile:null,onCloseClick:function(){},onChannelModified:function(){}};var ac=b(rc),ic="GET_SEARCHED_MESSAGES",sc="GET_NEXT_SEARCHED_MESSAGES",oc="START_MESSAGE_SEARCH",lc="START_GETTING_SEARCHED_MESSAGES",uc="SET_QUERY_INVALID",cc="SET_CURRENT_CHANNEL",dc="CHANNEL_INVALID",hc="RESET_SEARCH_STRING";function fc(e,n){switch(n.type){case cc:var t=n.payload;return C(C({},e),{currentChannel:t,initialized:!0});case dc:return C(C({},e),{currentChannel:null,initialized:!1});case ic:var r=n.payload,a=r.messages,i=r.createdQuery;return i&&i.channelUrl===e.currentMessageSearchQuery.channelUrl&&i.key===e.currentMessageSearchQuery.key?C(C({},e),{loading:!1,isInvalid:!1,allMessages:N([],a,!0),hasMoreResult:e.currentMessageSearchQuery.hasNext}):C({},e);case uc:return C(C({},e),{isInvalid:!0});case oc:return C(C({},e),{isInvalid:!1,loading:!1});case lc:var s=n.payload;return C(C({},e),{loading:!0,currentMessageSearchQuery:s});case sc:a=n.payload;return C(C({},e),{allMessages:N(N([],e.allMessages,!0),a,!0),hasMoreResult:e.currentMessageSearchQuery.hasNext});case hc:return C(C({},e),{allMessages:[]});default:return e}}var pc={allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,hasMoreResult:!1};var mc=function(e){return e?Zs(e)?kn(e,"p"):no(e)?"Yesterday":kn(e,"MMM dd"):""};function gc(e){var n=e.className,t=e.message,i=e.selected,s=e.onClick,o=t.createdAt,l=t.message,u=t.sender||t._sender,c=u.profileUrl,d=u.nickname,h=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-item",i?"sendbird-message-search-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),s(t)}},a.a.createElement("div",{className:"sendbird-message-search-item__left"},a.a.createElement(Ya,{className:"sendbird-message-search-item__left__sender-avatar",src:c,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-item__right"},a.a.createElement($a,{className:"sendbird-message-search-item__right__sender-name",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},d||h.NO_NAME),a.a.createElement($a,{className:"sendbird-message-search-item__right__message-text",type:Za.BODY_2,color:ei.ONBACKGROUND_3},l),a.a.createElement($a,{className:"sendbird-message-search-item__right__message-created-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},mc(o))),a.a.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}function _c(e){var n=e.url.match(/\.([^.]*?)(?=\?|#|$)/)[1];return/(jpg|jpeg|png)$/i.test(n)?ja.PHOTO:/mp4$/i.test(n)?ja.PLAY:/mp3/i.test(n)?ja.FILE_AUDIO:/gif/i.test(n)?ja.GIF:ja.FILE_DOCUMENT}function yc(e){var n=e.className,t=e.message,i=e.selected,s=e.onClick,o=t.createdAt,l=t.url,u=t.name,c=l,d=t.sender||t._sender,h=d.profileUrl,f=d.nickname,p=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-file-item",i?"sendbird-message-search-file-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),s(t)}},a.a.createElement("div",{className:"sendbird-message-search-file-item__left"},a.a.createElement(Ya,{className:"sendbird-message-search-file-item__left__sender-avatar",src:h,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-file-item__right"},a.a.createElement($a,{className:"sendbird-message-search-file-item__right__sender-name",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},f||p.NO_NAME),a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content"},a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},a.a.createElement(Ga,{type:_c(t),fillColor:Ba.PRIMARY,width:"18px",height:"18px"})),a.a.createElement($a,{className:"sendbird-message-search-file-item__right__content__url",type:Za.BODY_2,color:ei.ONBACKGROUND_1},function(e,n){if(e.length<=n)return e;var t=n-"...".length,r=Math.ceil(t/2),a=Math.floor(t/2);return e.substr(0,r)+"..."+e.substr(e.length-a)}(u||c,28)))),a.a.createElement($a,{className:"sendbird-message-search-file-item__message-created-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},function(e){return e?Zs(e)?kn(e,"p"):no(e)?"Yesterday":kn(e,"MMM dd"):""}(o)),a.a.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}var vc=500;var Ec="sendbird-message-search";var bc=b(function(e){var n=e.stores,t=e.config,i=e.channelUrl,s=e.searchString,o=e.messageSearchQuery,l=e.renderSearchItem,u=e.onResultLoaded,c=e.onResultClick,d=Object(r.useContext)(T).stringSet,h=Object(r.useState)(0),f=h[0],p=h[1],m=Object(r.useState)(0),g=m[0],_=m[1],y=Object(r.useReducer)(fc,pc),v=y[0],E=y[1],b=v.allMessages,N=v.loading,S=v.isInvalid,O=v.currentChannel,A=v.currentMessageSearchQuery,w=v.hasMoreResult,I=n.sdkStore,R=t.logger,k=I.sdk,M=I.initialized,U=Object(r.useRef)(null);!function(e,n){var t=e.channelUrl,a=e.sdkInit,i=n.sdk,s=n.logger,o=n.messageSearchDispathcer;Object(r.useEffect)(function(){t&&a&&i&&(i.OpenChannel||i.GroupChannel)&&i.GroupChannel.getChannel(t,function(e,n){n?o({type:dc,payload:null}):(s.info("MessageSearch | useSetChannel group channel",e),o({type:cc,payload:e}))})},[t,a])}({channelUrl:i,sdkInit:M},{sdk:k,logger:R,messageSearchDispathcer:E});var L=function(e,n){var t=e.searchString,a=n.messageSearchDispathcer,i=Object(r.useState)(""),s=i[0],o=i[1],l=Object(r.useState)(null),u=l[0],c=l[1];return Object(r.useEffect)(function(){clearTimeout(u),t?c(setTimeout(function(){o(t)},vc)):(o(""),a({type:hc,payload:""}))},[t]),s}({searchString:s},{messageSearchDispathcer:E});!function(e,n){var t=e.currentChannel,a=e.channelUrl,i=e.requestString,s=e.messageSearchQuery,o=e.onResultLoaded,l=e.retryCount,u=n.sdk,c=n.logger,d=n.messageSearchDispathcer;Object(r.useEffect)(function(){if(d({type:oc,payload:null}),u&&a&&u.createMessageSearchQuery&&t)if(i){var e=C(C({},s),{order:"ts",channelUrl:a,messageTimestampFrom:t.invitedAt}),n=u.createMessageSearchQuery(i,e);n.next(function(e,t){t?(c.warning("MessageSearch | useGetSearchedMessages: getting failed",t),d({type:uc,payload:null}),o&&"function"===typeof o&&o(null,t)):(c.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",e),d({type:ic,payload:{messages:e,createdQuery:n}}),o&&"function"===typeof o&&o(e,null))}),d({type:lc,payload:n})}else c.info("MessageSearch | useGetSeasrchedMessages: search string is empty")},[a,s,i,t,l])}({currentChannel:O,channelUrl:i,requestString:L,messageSearchQuery:o,onResultLoaded:u,retryCount:f},{sdk:k,logger:R,messageSearchDispathcer:E});var P=function(e,n){var t=e.currentMessageSearchQuery,a=e.hasMoreResult,i=e.onResultLoaded,s=n.logger,o=n.messageSearchDispathcer;return Object(r.useCallback)(function(e){a||s.warning("MessageSearch | useScrollCallback: no more searched results",a),t&&t.hasNext?t.next(function(n,t){t?(s.warning("MessageSearch | useScrollCallback: failed getting searched messages",t),e(null,t),i&&"function"===typeof i&&i(null,t)):(s.info("MessageSearch | useScrollCallback: succeeded getting searched messages",n),o({type:sc,payload:n}),e(n,null),i&&"function"===typeof i&&i(n,null))}):s.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")},[t,a])}({currentMessageSearchQuery:A,hasMoreResult:w,onResultLoaded:u},{logger:R,messageSearchDispathcer:E});return S&&s&&L?a.a.createElement("div",{className:Ec},a.a.createElement(ii,{type:ai.WRONG,retryToConnect:function(){p(f+1)}})):N&&s&&L?a.a.createElement("div",{className:Ec},a.a.createElement(ii,{type:ai.SEARCHING})):s?a.a.createElement("div",{className:Ec,onScroll:function(e){var n=e.target,t=n.scrollTop,r=n.scrollHeight,a=n.clientHeight;w&&t+a>=r&&P(function(){})},ref:U},b.length>0?b.map(function(e){return l?l({message:e,onResultClick:c}):"file"===e.messageType?a.a.createElement(yc,{className:Ec+"__message-search-item",message:e,key:e.messageId,selected:g===e.messageId,onClick:function(){c(e),_(e.messageId)}}):a.a.createElement(gc,{className:Ec+"__message-search-item",message:e,key:e.messageId,selected:g===e.messageId,onClick:function(){c(e),_(e.messageId)}})}):a.a.createElement(ii,{type:ai.NO_RESULTS})):a.a.createElement("div",{className:Ec},a.a.createElement(ii,{type:ai.SEARCH_IN,searchInString:O&&O.name&&"Group Channel"!==O.name?O.name:!O||"Group Channel"!==O.name&&O.name?d.NO_TITLE:O.members.map(function(e){return e.nickname||d.NO_NAME}).join(", ")}))}),Cc="sendbird-message-search-pannel";function Nc(e){var n=e.channelUrl,t=e.onResultClick,i=e.onCloseClick,s=Object(r.useState)(""),o=s[0],l=s[1],u=Object(r.useState)(""),c=u[0],d=u[1],h=Object(r.useState)(!1),f=h[0],p=h[1],m=Object(r.useContext)(T).stringSet,g=null;Object(r.useEffect)(function(){g&&clearTimeout(g),g=setTimeout(function(){l(c),p(!0),g=null},500)},[c]);return a.a.createElement("div",{className:Cc},a.a.createElement("div",{className:Cc+"__header"},a.a.createElement($a,{className:Cc+"__header__title",type:Za.H_2,color:ei.ONBACKGROUND_1},m.SEARCH_IN_CHANNEL),a.a.createElement(ns,{className:Cc+"__header__close-button",width:"32px",height:"32px",onClick:i},a.a.createElement(Ga,{type:ja.CLOSE,fillColor:Ba.ON_BACKGROUND_1,width:"22px",height:"22px"}))),a.a.createElement("div",{className:Cc+"__input"},a.a.createElement("div",{className:Cc+"__input__container"},a.a.createElement(Ga,{className:Cc+"__input__container__search-icon",type:ja.SEARCH,fillColor:Ba.ON_BACKGROUND_3,width:"24px",height:"24px"}),a.a.createElement("input",{className:Cc+"__input__container__input-area",placeholder:m.SEARCH,value:c,onChange:function(e){d(e.target.value)}}),c&&f&&a.a.createElement(ri,{className:Cc+"__input__container__spinner",width:"20px",height:"20px"},a.a.createElement(Ga,{type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"20px",height:"20px"})),!f&&c&&a.a.createElement(Ga,{className:Cc+"__input__container__reset-input-button",type:ja.REMOVE,fillColor:Ba.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:function(e){e.stopPropagation(),d(""),l("")}}))),a.a.createElement("div",{className:Cc+"__message-search"},a.a.createElement(bc,{channelUrl:n,searchString:o,onResultClick:t,onResultLoaded:function(){p(!1)}})))}function Sc(e){var n=e.appId,t=e.userId,i=e.accessToken,s=e.theme,o=e.userListQuery,l=e.nickname,u=e.profileUrl,c=e.config,d=void 0===c?{}:c,h=e.useReaction,f=e.replyType,p=e.useMessageGrouping,m=e.colorSet,_=e.stringSet,y=e.allowProfileEdit,v=e.disableUserProfile,E=e.renderUserProfile,b=e.showSearchIcon,C=e.onProfileEditSuccess,N=e.imageCompression,S=g(Object(r.useState)(null),2),O=S[0],T=S[1],A=g(Object(r.useState)(!1),2),w=A[0],I=A[1],R=g(Object(r.useState)(!1),2),k=R[0],M=R[1],U=g(Object(r.useState)(null),2),L=U[0],P=U[1],D=g(Object(r.useState)(null),2),x=D[0],F=D[1];return a.a.createElement(Re,{stringSet:_,appId:n,userId:t,accessToken:i,theme:s,nickname:l,profileUrl:u,userListQuery:o,config:d,colorSet:m,disableUserProfile:v,renderUserProfile:E,imageCompression:N,useReaction:h},a.a.createElement("div",{className:"sendbird-app__wrap"},a.a.createElement("div",{className:"sendbird-app__channellist-wrap"},a.a.createElement(qo,{allowProfileEdit:y,onProfileEditSuccess:C,onChannelSelect:function(e){F(null),P(null),e&&e.url?T(e.url):T("")}})),a.a.createElement("div",{className:"\n            ".concat(w?"sendbird-app__conversation--settings-open":"","\n            ").concat(k?"sendbird-app__conversation--search-open":"","\n            sendbird-app__conversation-wrap\n          ")},a.a.createElement(ku,{channelUrl:O,onChatHeaderActionClick:function(){M(!1),I(!w)},onSearchClick:function(){I(!1),M(!k)},showSearchIcon:b,startingPoint:x,highlightedMessage:L,useReaction:h,replyType:f,useMessageGrouping:p})),w&&a.a.createElement("div",{className:"sendbird-app__settingspanel-wrap"},a.a.createElement(ac,{className:"sendbird-channel-settings",channelUrl:O,onCloseClick:function(){I(!1)}})),k&&a.a.createElement("div",{className:"sendbird-app__searchpanel-wrap"},a.a.createElement(Nc,{channelUrl:O,onResultClick:function(e){e.messageId===L?(P(null),setTimeout(function(){P(e.messageId)})):(F(e.createdAt),P(e.messageId))},onCloseClick:function(){M(!1)}}))))}Sc.propTypes={appId:I.a.string.isRequired,userId:I.a.string.isRequired,accessToken:I.a.string,theme:I.a.string,userListQuery:I.a.func,nickname:I.a.string,profileUrl:I.a.string,allowProfileEdit:I.a.bool,disableUserProfile:I.a.bool,renderUserProfile:I.a.func,onProfileEditSuccess:I.a.func,config:I.a.shape({logLevel:I.a.oneOfType([I.a.string,I.a.arrayOf(I.a.string)])}),useReaction:I.a.bool,replyType:I.a.oneOf(["NONE","QUOTE_REPLY","THREAD"]),showSearchIcon:I.a.bool,useMessageGrouping:I.a.bool,stringSet:I.a.objectOf(I.a.string),colorSet:I.a.objectOf(I.a.string),imageCompression:I.a.shape({compressionRate:I.a.number,resizingWidth:I.a.oneOfType([I.a.number,I.a.string]),resizingHeight:I.a.oneOfType([I.a.number,I.a.string])})},Sc.defaultProps={accessToken:"",theme:"light",nickname:"",profileUrl:"",userListQuery:null,allowProfileEdit:!1,onProfileEditSuccess:null,disableUserProfile:!1,showSearchIcon:!1,renderUserProfile:null,config:{},useReaction:!0,replyType:"NONE",useMessageGrouping:!0,stringSet:null,colorSet:null,imageCompression:{}};var Oc=function(e){return kn(e.createdAt,"p")},Tc=function e(n){void 0===n&&(n=0);var t=n;if(!(t>10))try{var r=document.querySelector(".sendbird-openchannel-conversation-scroll");r.scrollTop=r.scrollHeight}catch(a){setTimeout(function(){e(t+1)},500*t)}},Ac=function(e,n){return!!(e&&n&&"admin"!==e.messageType&&"admin"!==n.messageType&&e.sender&&n.sender&&e.createdAt&&n.createdAt&&e.sender.userId&&n.sender.userId)&&(e.sendingStatus===n.sendingStatus&&e.sender.userId===n.sender.userId&&Oc(e)===Oc(n))},wc=function(e,n,t){return[Ac(e,n),Ac(n,t)]},Ic=function(e,n,t){n.info("OpenChannel | FetchUserList start",e),function e(r){r.hasNext?r.next(function(a,i){a?n.warning("OpenChannel | FetchUserList failed",a):(t(i),e(r))}):n.info("OpenChannel | FetchUserList finished")}(e)},Rc=function(e){if("number"===typeof e)return e;if("string"===typeof e){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return null},kc=function(e,n){var t=e.channel,i=e.user,s=e.disabled,o=e.onSendMessage,l=e.onFileUpload,u=e.renderMessageInput;if(t){var c=Object(r.useContext)(T).stringSet;return u?u({channel:t,user:i,disabled:s}):a.a.createElement("div",{className:"sendbird-openchannel-footer"},a.a.createElement(el,{ref:n,disabled:s,onSendMessage:o,onFileUpload:l,placeholder:s&&c.MESSAGE_INPUT__PLACE_HOLDER__DISABLED}))}},Mc=a.a.forwardRef(kc),Uc=function(){var e=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-frozen-channel-notification"},a.a.createElement($a,{className:"sendbird-frozen-channel-notification__text",type:Za.CAPTION_2},e.CHANNEL_FROZEN))};function Lc(e){var n=e.coverImage,t=e.title,i=e.subTitle,s=e.amIOperator,o=e.onActionClick,l=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-conversation-header"},a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__left"},n?a.a.createElement(Ya,{className:"sendbird-openchannel-conversation-header__left__cover-image",src:n,alt:"channel cover image",width:"32px",height:"32px"}):a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__left__cover-image--icon",style:{width:32,height:32}},a.a.createElement(Ga,{type:ja.CHANNELS,fillColor:Ba.CONTENT,width:"18px",height:"18px"})),a.a.createElement($a,{className:"sendbird-openchannel-conversation-header__left__title",type:Za.H_2,color:ei.ONBACKGROUND_1},t||l.NO_TITLE),a.a.createElement($a,{className:"sendbird-openchannel-conversation-header__left__sub-title",type:Za.BODY_2,color:ei.ONBACKGROUND_2},i||l.NO_TITLE)),a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__right"},a.a.createElement(ns,{className:"sendbird-openchannel-conversation-header__right__trigger",width:"32px",height:"32px",onClick:o},a.a.createElement(Ga,{type:s?ja.INFO:ja.MEMBERS,fillColor:Ba.PRIMARY,width:"24px",height:"24px"}))))}var Pc=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(t){return!1}finally{document.body.removeChild(n)}}return!1},Dc="pending",xc="failed",Fc="succeeded",Hc=function(e){return e.sender||e._sender},Gc=function(e){return e===Fc},jc=function(e){return e===Dc},Bc=function(e){return e===xc},zc=function(e,n){return Hc(e).userId===n},Vc=function(e){var n=e.message;return"user"===n.messageType&&n.message.length>0},qc=function(e){var n=e.message,t=e.status,r=e.userId;return zc(n,r)&&Bc(t)&&n.isResendable&&n.isResendable()},Kc=function(e){var n=e.message,t=e.status,r=e.userId;return zc(n,r)&&Gc(t)},Yc=function(e){var n=e.message,t=e.userId;return zc(n,t)},Qc=function(e){var n=e.message,t=e.status,r=e.userId;return"user"===n.messageType?Yc({message:n,status:t,userId:r})||Kc({message:n,status:t,userId:r})||Vc({message:n,status:t,userId:r})||qc({message:n,status:t,userId:r}):Yc({message:n,status:t,userId:r})||qc({message:n,status:t,userId:r})};function Wc(e){var n=e.className,t=e.message,i=e.userId,s=e.resendMessage,o=e.disabled,l=e.showEdit,u=e.showRemove,c=e.chainTop,d=e.status;if(!t||"user"!==t.messageType)return null;var h=Object(r.useContext)(T).stringSet,f=Object(r.useContext)(si),p=f.disableUserProfile,m=f.renderUserProfile,g=Object(r.useRef)(null),_=Object(r.useRef)(null),y=Object(r.useRef)(null),v=Object(r.useState)({}),E=v[0],b=v[1],C=zc(t,i),O=jc(d),A=Bc(d),w=Hc(t),I=Object(r.useMemo)(function(){return function(){var e=t.message.split(/\r/).map(function(e){return""!==e?e:a.a.createElement("br",null)});return t.updatedAt>0&&e.push(a.a.createElement($a,{key:S(),type:Za.BODY_1,color:ei.ONBACKGROUND_2,calssName:"sendbird-openchannel-user-message-word"}," "+h.MESSAGE_EDITED+" ")),e}},[t,t.updatedAt]);return Object(r.useEffect)(function(){var e;(null===(e=null===g||void 0===g?void 0:g.current)||void 0===e?void 0:e.clientHeight)>36?b({top:"8px "}):b({top:"2px"})},[window.innerWidth]),a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:g},a.a.createElement("div",{className:"sendbird-openchannel-user-message__left"},!c&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{className:"sendbird-openchannel-user-message__left__avatar",src:w.profileUrl||"",ref:_,width:"28px",height:"28px",onClick:function(){p||e()}})},menuItems:function(e){return a.a.createElement(ws,{parentRef:_,parentContainRef:_,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},m?m({user:w,close:e}):a.a.createElement(Ns,{user:w,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-user-message__right"},!c&&a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},a.a.createElement($a,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:Za.CAPTION_2,color:C?ei.SECONDARY_3:ei.ONBACKGROUND_2},w&&(w.friendName||w.nickname||w.userId)),a.a.createElement($a,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_3},t.createdAt&&kn(t.createdAt,"p"))),a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__bottom"},a.a.createElement($a,{className:"sendbird-openchannel-user-message__right__bottom__message",type:Za.BODY_1,color:ei.ONBACKGROUND_1},I())),(O||A)&&a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},O&&a.a.createElement(ri,{width:"16px",height:"16px"},a.a.createElement(Ga,{className:"sendbird-openchannel-user-message__right__tail__pending",type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"16px",height:"16px"})),A&&a.a.createElement(Ga,{className:"sendbird-openchannel-user-message__right__tail__failed",type:ja.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:y,style:E},a.a.createElement(ks,{menuTrigger:function(e){return Qc({message:t,userId:i,status:d})&&a.a.createElement(ns,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){e()}},a.a.createElement(Ga,{type:ja.MORE,fillColor:Ba.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(ws,{parentRef:y,parentContainRef:y,closeDropdown:e,openLeft:!0},Vc({message:t,userId:i,status:d})&&a.a.createElement(Rs,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){Pc(t.message),e()}},h.CONTEXT_MENU_DROPDOWN__COPY),Kc({message:t,userId:i,status:d})&&a.a.createElement(Rs,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){o||(l(!0),e())}},h.CONTEXT_MENU_DROPDOWN__EDIT),qc({message:t,userId:i,status:d})&&a.a.createElement(Rs,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){s(t),e()}},h.CONTEXT_MENU_DROPDOWN__RESEND),Yc({message:t,userId:i,status:d})&&a.a.createElement(Rs,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){o||(u(!0),e())}},h.CONTEXT_MENU_DROPDOWN__DELETE))}})))}function Jc(e){var n=e.className,t=e.message;return a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},a.a.createElement($a,{className:"sendbird-openchannel-admin-message__text",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},t.message||""))}var Xc=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,$c=function(e){return function(n){return e.test(n)}},Zc=function(e){var n=e.ogMetaData;return!!n&&!!n.url};function ed(e){var n=e.message,t=e.className,i=e.disabled,s=e.showEdit,o=e.showRemove,l=e.resendMessage,u=e.chainTop,c=e.status,d=e.userId;if(!n||"user"!==n.messageType)return null;var h=n.ogMetaData,f=h.defaultImage,p=Object(r.useContext)(T).stringSet,m=Object(r.useContext)(si),g=m.disableUserProfile,_=m.renderUserProfile,y=Object(r.useState)({}),v=y[0],E=y[1],b=Object(r.useRef)(null),C=Object(r.useRef)(null),O=Object(r.useRef)(null),A=$c(Xc),w=zc(n,d),I=jc(c),R=Bc(c),k=Hc(n),M=Object(r.useMemo)(function(){return function(){var e="sendbird-openchannel-og-message--word",t=n.message.split(" ").map(function(n){return A(n)?a.a.createElement(Wo,{key:S(),className:[e,"sendbird-openchannel-og-message--word--link"],src:n,type:Za.BODY_1,color:ei.PRIMARY},n):a.a.createElement($a,{key:S(),className:e,type:Za.BODY_1,color:ei.ONBACKGROUND_1},n)});return n.updatedAt>0&&t.push(a.a.createElement($a,{key:S(),className:e,type:Za.BODY_1,color:ei.ONBACKGROUND_2},p.MESSAGE_EDITED)),t}},[n,n.updatedAt]),U=function(){if(Zc(n)){var e=h.url;window.open(e)}};return Object(r.useEffect)(function(){var e;(null===(e=null===b||void 0===b?void 0:b.current)||void 0===e?void 0:e.clientHeight)>36?E({top:"8px "}):E({top:"2px"})},[window.innerWidth]),a.a.createElement("div",{className:N(N([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:b},a.a.createElement("div",{className:"sendbird-openchannel-og-message__top"},a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!u&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{className:"sendbird-openchannel-og-message__top__left__avatar",src:k.profileUrl||"",ref:O,width:"28px",height:"28px",onClick:function(){g||e()}})},menuItems:function(e){return a.a.createElement(ws,{parentRef:O,parentContainRef:O,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},_?_({user:k,close:e}):a.a.createElement(Ns,{user:k,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!u&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},a.a.createElement($a,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:Za.CAPTION_2,color:w?ei.SECONDARY_3:ei.ONBACKGROUND_2},k&&(k.friendName||k.nickname||k.userId)),a.a.createElement($a,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_3},n.createdAt&&kn(n.createdAt,"p"))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},a.a.createElement($a,{className:"sendbird-openchannel-og-message__top__right__description__message",type:Za.BODY_1,color:ei.ONBACKGROUND_1},M()))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:C,style:v},a.a.createElement(ks,{menuTrigger:function(e){return Qc({message:n,userId:d,status:c})&&a.a.createElement(ns,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){e()}},a.a.createElement(Ga,{type:ja.MORE,fillColor:Ba.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(ws,{parentRef:C,parentContainRef:C,closeDropdown:e,openLeft:!0},Vc({message:n,userId:d,status:c})&&a.a.createElement(Rs,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){Pc(n.message),e()}},p.CONTEXT_MENU_DROPDOWN__COPY),Kc({message:n,userId:d,status:c})&&a.a.createElement(Rs,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){i||(s(!0),e())}},p.CONTEXT_MENU_DROPDOWN__EDIT),qc({message:n,userId:d,status:c})&&a.a.createElement(Rs,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){l(n),e()}},p.CONTEXT_MENU_DROPDOWN__RESEND),Yc({message:n,userId:d,status:c})&&a.a.createElement(Rs,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){i||(o(!0),e())}},p.CONTEXT_MENU_DROPDOWN__DELETE))}}))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag"},h.url&&a.a.createElement($a,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:Za.CAPTION_3,color:ei.ONBACKGROUND_2},h.url),h.title&&a.a.createElement(Wo,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:h.url,type:Za.SUBTITLE_2,color:ei.PRIMARY},h.title),h.description&&a.a.createElement($a,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:Za.BODY_2,color:ei.ONBACKGROUND_1},h.description),h.url&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:U,onKeyDown:U,tabIndex:0},f&&a.a.createElement(Mn,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:f.url||"",alt:f.alt||"",height:"189px",defaultComponent:a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},a.a.createElement(Ga,{type:ja.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(I||R)&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},I&&a.a.createElement(ri,{width:"16px",height:"16px"},a.a.createElement(Ga,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"16px",height:"16px"})),R&&a.a.createElement(Ga,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:ja.ERROR,width:"16px",height:"16px"}))))}var nd={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},td={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},rd=function(e){return td.IMAGE.indexOf(e)>=0?nd.IMAGE:td.VIDEO.indexOf(e)>=0?nd.VIDEO:nd.UNSUPPORTED};function ad(e){var n,t=e.className,i=e.message,s=e.disabled,o=e.userId,l=e.status,u=e.chainTop,c=e.onClick,d=e.showRemove,h=e.resendMessage,f=i.type,p=i.url,m=i.localUrl,g=i.thumbnails,_=g&&g.length>0&&g[0].url||null,y=Object(r.useContext)(T).stringSet,v=Object(r.useContext)(si),E=v.disableUserProfile,b=v.renderUserProfile,C=Object(r.useState)(360),S=C[0],O=C[1],A=Object(r.useRef)(null),w=Object(r.useRef)(null),I=Object(r.useRef)(null),R=Object(r.useMemo)(function(){return function(e){return function(n){var t=n.style;return a.a.createElement("div",{style:t},a.a.createElement(Ga,{type:e,fillColor:Ba.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),k=zc(i,o),M=Gc(l),U=jc(l),L=Bc(l),P=Hc(i);return Object(r.useEffect)(function(){var e,n=(null===(e=null===A||void 0===A?void 0:A.current)||void 0===e?void 0:e.clientWidth)-80;O(n>360?360:n)},[]),a.a.createElement("div",{className:N(N([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:A},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!u&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:P.profileUrl||"",ref:I,width:"28px",height:"28px",onClick:function(){E||e()}})},menuItems:function(e){return a.a.createElement(ws,{parentRef:I,parentContainRef:I,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},b?b({user:P,close:e}):a.a.createElement(Ns,{user:P,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!u&&a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},a.a.createElement($a,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:Za.CAPTION_2,color:k?ei.SECONDARY_3:ei.ONBACKGROUND_2},P&&(P.friendName||P.nickname||P.userId)),a.a.createElement($a,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_3},i.createdAt&&kn(i.createdAt,"p"))),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body"},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){M&&c(!0)},onKeyDown:function(){M&&c(!0)},tabIndex:0},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[nd.VIDEO]=p||m?a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},_?a.a.createElement(Mn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:_,width:S,height:"270px",alt:"image",placeHolder:R(ja.PLAY)}):a.a.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},a.a.createElement("source",{src:p||m,type:f})),a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:ja.PLAY,fillColor:Ba.ON_BACKGROUND_2,width:"56px",height:"56px"})):a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:ja.PHOTO,fillColor:Ba.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[nd.IMAGE]=p||m?a.a.createElement(Mn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:_||p||m,alt:"image",width:S,height:"270px",placeHolder:R(ja.PHOTO)}):a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:ja.PHOTO,fillColor:Ba.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[nd.UNSUPPORTED]=a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:ja.PHOTO,fillColor:Ba.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[rd(f)])),(U||L)&&a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},U&&a.a.createElement(ri,{width:"16px",height:"16px"},a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"16px",height:"16px"})),L&&a.a.createElement(Ga,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:ja.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:w},a.a.createElement(ks,{menuTrigger:function(e){return Qc({message:i,userId:o,status:l})&&a.a.createElement(ns,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{type:ja.MORE,fillColor:Ba.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(ws,{parentRef:w,parentContainRef:w,closeDropdown:e,openLeft:!0},qc({message:i,userId:o,status:l})&&a.a.createElement(Rs,{onClick:function(){h(i),e()}},y.CONTEXT_MENU_DROPDOWN__RESEND),Yc({message:i,userId:o,status:l})&&a.a.createElement(Rs,{onClick:function(){s||(d(!0),e())}},y.CONTEXT_MENU_DROPDOWN__DELETE))}})))}var id=function(e){return/(\.mp3)$/i.test(e)?ja.FILE_AUDIO:/(\.gif)$/i.test(e)?ja.GIF:ja.FILE_DOCUMENT},sd=function(e,n){if(null===e||void 0===e)return"";if(e.length<=n)return e;var t=n-"...".length,r=Math.ceil(t/2),a=Math.floor(t/2);return e.substr(0,r)+"..."+e.substr(e.length-a)};function od(e){var n=e.className,t=e.message,i=e.userId,s=e.disabled,o=e.chainTop,l=e.status,u=e.showRemove,c=e.resendMessage,d=Object(r.useRef)(null),h=Object(r.useRef)(null),f=Object(r.useContext)(T).stringSet,p=Object(r.useContext)(si),m=p.disableUserProfile,g=p.renderUserProfile,_=zc(t,i),y=jc(l),v=Bc(l),E=Hc(t);return a.a.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" ")},a.a.createElement("div",{className:"sendbird-openchannel-file-message__left"},!o&&a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{className:"sendbird-openchannel-file-message__left__avatar",src:E.profileUrl||"",ref:h,width:"28px",height:"28px",onClick:function(){m||e()}})},menuItems:function(e){return a.a.createElement(ws,{parentRef:h,parentContainRef:h,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},g?g({user:E,close:e}):a.a.createElement(Ns,{user:E,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-file-message__right"},!o&&a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},a.a.createElement($a,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:Za.CAPTION_2,color:_?ei.SECONDARY_3:ei.ONBACKGROUND_2},E&&(E.friendName||E.nickname||E.userId)),a.a.createElement($a,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:Za.CAPTION_3,color:ei.ONBACKGROUND_3},t.createdAt&&kn(t.createdAt,"p"))),a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__body"},id(t.url)&&a.a.createElement(Ga,{className:"sendbird-openchannel-file-message__right__body__icon",type:id(t.url),fillColor:Ba.PRIMARY,width:"48px",height:"48px"}),a.a.createElement(gs,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:function(){window.open(t.url)}},a.a.createElement($a,{type:Za.BODY_1,color:ei.ONBACKGROUND_1},sd(t.name||t.url,40)))),(y||v)&&a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},y&&a.a.createElement(ri,{width:"16px",height:"16px"},a.a.createElement(Ga,{className:"sendbird-openchannel-file-message__right__tail__pending",type:ja.SPINNER,fillColor:Ba.PRIMARY,width:"16px",height:"16px"})),v&&a.a.createElement(Ga,{className:"sendbird-openchannel-file-message__right__tail__failed",type:ja.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:d},a.a.createElement(ks,{menuTrigger:function(e){return Qc({message:t,userId:i,status:l})&&a.a.createElement(ns,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:e},a.a.createElement(Ga,{type:ja.MORE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(ws,{parentRef:d,parentContainRef:d,closeDropdown:e,openLeft:!0},qc({message:t,userId:i,status:l})&&a.a.createElement(Rs,{onClick:function(){s||(c(t),e())}},f.CONTEXT_MENU_DROPDOWN__RESEND),Yc({message:t,userId:i,status:l})&&a.a.createElement(Rs,{onClick:function(){s||(u(!0),e())}},f.CONTEXT_MENU_DROPDOWN__DELETE))}})))}function ld(e){var n=e.onCloseModal,t=e.onDeleteMessage,i=Object(r.useContext)(T).stringSet;return a.a.createElement(fs,{onCancel:n,onSubmit:t,submitText:"Delete",titleText:i.MODAL__DELETE_MESSAGE__TITLE})}var ud={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},cd={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},dd={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},hd=function(e){return e.isUserMessage&&e.isUserMessage()||"user"===e.messageType?e.ogMetaData?cd.OG:cd.USER:e.isAdminMessage&&e.isAdminMessage()?cd.ADMIN:"file"===e.messageType?(n=e.type,ud.IMAGE.indexOf(n)>=0||function(e){return ud.VIDEO.indexOf(e)>=0}(e.type)?cd.THUMBNAIL:cd.FILE):cd.UNKNOWN;var n};function fd(e){var n,t=e.message,i=e.userId,s=e.disabled,o=e.editDisabled,l=e.hasSeparator,u=e.channel,c=e.renderCustomMessage,d=e.deleteMessage,h=e.updateMessage,f=e.resendMessage,p=e.status,m=e.chainTop,g=e.chainBottom,_=null;"admin"!==t.messageType&&(_=t.sender);var y=Object(r.useMemo)(function(){return c?c(t,u,m,g):null},[t,c]),v=Object(r.useState)(!1),E=v[0],b=v[1],C=Object(r.useState)(!1),N=C[0],S=C[1],O=Object(r.useState)(!1),T=O[0],A=O[1],w=Object(r.useRef)(null),I=!1;return _&&"admin"!==t.messageType&&(I=i===_.userId||t.requestState===dd.PENDING||t.requestState===dd.FAILED),y?a.a.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},a.a.createElement(y,{message:t})):"user"===t.messageType&&E?a.a.createElement(el,{isEdit:!0,disabled:o,ref:w,name:t.messageId,onSendMessage:h,onCancelEdit:function(){b(!1)},value:t.message}):a.a.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},l&&a.a.createElement(Jo,null,a.a.createElement($a,{type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},kn(t.createdAt,"MMMM dd, yyyy"))),(n={},n[cd.ADMIN]=function(){if("admin"===t.messageType)return a.a.createElement(Jc,{message:t})}(),n[cd.FILE]=function(){if("file"===t.messageType)return a.a.createElement(od,{message:t,disabled:s,userId:i,showRemove:S,resendMessage:f,status:p,chainTop:m,chainBottom:g})}(),n[cd.OG]=function(){if("user"===t.messageType)return a.a.createElement(ed,{message:t,status:p,userId:i,showEdit:b,disabled:s,showRemove:S,resendMessage:f,chainTop:m,chainBottom:g})}(),n[cd.THUMBNAIL]=function(){if("file"===t.messageType)return a.a.createElement(ad,{message:t,disabled:s,userId:i,showRemove:S,resendMessage:f,onClick:A,status:p,chainTop:m,chainBottom:g})}(),n[cd.USER]=function(){if("user"===t.messageType)return a.a.createElement(Wc,{message:t,userId:i,disabled:s,showEdit:b,showRemove:S,resendMessage:f,status:p,chainTop:m,chainBottom:g})}(),n[cd.UNKNOWN]=void 0,n)[hd(t)],N&&a.a.createElement(ld,{onCloseModal:function(){return S(!1)},onDeleteMessage:function(){"admin"!==t.messageType&&d(t)}}),T&&"file"===t.messageType&&a.a.createElement(tl,{onClose:function(){return A(!1)},message:t,onDelete:function(){return d(t)},isByMe:I}))}function pd(e,n){var t=e.useMessageGrouping,i=void 0===t||t,s=e.openchannel,o=e.user,l=e.allMessages,u=e.isOnline,c=void 0===u||u,d=e.hasMore,h=e.onScroll,f=e.renderCustomMessage,p=e.updateMessage,m=e.deleteMessage,g=e.resendMessage,_=n||Object(r.useRef)(null),y=Object(r.useState)(!1),v=y[0],E=y[1],b=function(){_&&_.current&&(_.current.scrollTo(0,_.current.scrollHeight),E(!1))},C=Object(r.useMemo)(function(){return l.length>0},[l.length]);return a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll",onScroll:function(e){var n=e.target,t=n.scrollTop;if(n.scrollHeight>t+n.clientHeight&&window.navigator.userAgent.indexOf("MSIE ")<0?E(!0):E(!1),d&&0===t){var r=_.current.querySelectorAll(".sendbird-msg--scroll-ref"),a=r&&r[0];h(function(){try{a.scrollIntoView()}catch(e){}})}},ref:_},a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__item-container"+(C?"":"--no-messages")},C?l.map(function(e,n){var t;"admin"!==e.messageType&&(t=e.sendingStatus);var r=l[n-1],u=l[n-1],d=r&&r.createdAt,h=e.createdAt,_=!(d&&$s(h,d)),y=i?wc(r,e,u):[!1,!1],v=y[0],E=y[1];return a.a.createElement(fd,{renderCustomMessage:f,channel:s,key:e.messageId,message:e,status:t,userId:o.userId,disabled:!c,editDisabled:s.isFrozen,hasSeparator:_,chainTop:v,chainBottom:E,deleteMessage:m,updateMessage:p,resendMessage:g})}):a.a.createElement(ii,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:ai.NO_MESSAGES})),v&&a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:b,onKeyDown:b,tabIndex:0,role:"button"},a.a.createElement(Ga,{width:"24px",height:"24px",type:ja.CHEVRON_DOWN,fillColor:Ba.CONTENT}))))}var md=a.a.forwardRef(pd),gd="SET_CURRENT_CHANNEL",_d="SET_CHANNEL_INVALID",yd="RESET_MESSAGES",vd="GET_PREV_MESSAGES_START",Ed="GET_PREV_MESSAGES_SUCESS",bd="GET_PREV_MESSAGES_FAIL",Cd="SENDING_MESSAGE_FAILED",Nd="SENDING_MESSAGE_SUCCEEDED",Sd="SENDING_MESSAGE_START",Od="RESENDING_MESSAGE_START",Td="FETCH_PARTICIPANT_LIST",Ad="FETCH_BANNED_USER_LIST",wd="FETCH_MUTED_USER_LIST",Id="ON_MESSAGE_RECEIVED",Rd="ON_MESSAGE_UPDATED",kd="ON_MESSAGE_DELETED",Md="ON_MESSAGE_DELETED_BY_REQ_ID",Ud="ON_OPERATOR_UPDATED",Ld="ON_USER_ENTERED",Pd="ON_USER_EXITED",Dd="ON_USER_MUTED",xd="ON_USER_UNMUTED",Fd="ON_USER_BANNED",Hd="ON_USER_UNBANNED",Gd="ON_CHANNEL_FROZEN",jd="ON_CHANNEL_UNFROZEN",Bd="ON_CHANNEL_CHANGED",zd="ON_META_DATA_CREATED",Vd="ON_META_DATA_UPDATED",qd="ON_META_DATA_DELETED",Kd="ON_META_COUNTERS_CREATED",Yd="ON_META_COUNTERS_UPDATED",Qd="ON_META_COUNTERS_DELETED",Wd="ON_MENTION_RECEIVED",Jd=Object.freeze({__proto__:null,SET_CURRENT_CHANNEL:gd,SET_CHANNEL_INVALID:_d,RESET_MESSAGES:yd,GET_PREV_MESSAGES_START:vd,GET_PREV_MESSAGES_SUCESS:Ed,GET_PREV_MESSAGES_FAIL:bd,SENDING_MESSAGE_FAILED:Cd,SENDING_MESSAGE_SUCCEEDED:Nd,SENDING_MESSAGE_START:Sd,RESENDING_MESSAGE_START:Od,FETCH_PARTICIPANT_LIST:Td,FETCH_BANNED_USER_LIST:Ad,FETCH_MUTED_USER_LIST:wd,ON_MESSAGE_RECEIVED:Id,ON_MESSAGE_UPDATED:Rd,ON_MESSAGE_DELETED:kd,ON_MESSAGE_DELETED_BY_REQ_ID:Md,ON_OPERATOR_UPDATED:Ud,ON_USER_ENTERED:Ld,ON_USER_EXITED:Pd,ON_USER_MUTED:Dd,ON_USER_UNMUTED:xd,ON_USER_BANNED:Fd,ON_USER_UNBANNED:Hd,ON_CHANNEL_FROZEN:Gd,ON_CHANNEL_UNFROZEN:jd,ON_CHANNEL_CHANGED:Bd,ON_META_DATA_CREATED:zd,ON_META_DATA_UPDATED:Vd,ON_META_DATA_DELETED:qd,ON_META_COUNTERS_CREATED:Kd,ON_META_COUNTERS_UPDATED:Yd,ON_META_COUNTERS_DELETED:Qd,ON_MENTION_RECEIVED:Wd});function Xd(e,n){switch(n.type){case yd:return C(C({},e),{allMessages:[]});case gd:var t=n.payload,r=t.operators;return!e.isInvalid&&e.currentOpenChannel&&e.currentOpenChannel.url&&e.currentOpenChannel.url===t.url?e:C(C({},e),{currentOpenChannel:t,isInvalid:!1,operators:r,participants:r,bannedParticipantIds:[],mutedParticipantIds:[]});case _d:return C(C({},e),{isInvalid:!0});case vd:return C(C({},e),{loading:!0});case Ed:case bd:var a=n.type===bd,i=n.payload,s=i.currentOpenChannel,o=void 0===s?{}:s,l=i.messages,u=void 0===l?[]:l,c=i.hasMore,d=i.lastMessageTimestamp,h=o.url,f=a?[]:u,p=!a&&c,m=a?0:d;if(h!==e.currentOpenChannel.url)return e;var g=e.allMessages.filter(function(e){return!f.find(function(n){return Yo(n.messageId,e.messageId)})});return C(C({},e),{loading:!1,initialized:!0,hasMore:p,lastMessageTimestamp:m,allMessages:N(N([],f,!0),g,!0)});case Sd:var _=n.payload,y=_.message;return _.channel.url!==e.currentOpenChannel.url?e:C(C({},e),{allMessages:N(N([],e.allMessages,!0),[C({},y)],!1)});case Nd:var v=n.payload,E=e.allMessages.map(function(e){return Yo(e.reqId,v.reqId)?v:e});return C(C({},e),{allMessages:E});case Cd:var b=n.payload;return C(C({},e),{allMessages:e.allMessages.map(function(e){return Yo(e.reqId,b.reqId)?b:e})});case Od:var S=n.payload.channel,O=n.payload.message;return S.url!==e.currentOpenChannel.url?e:C(C({},e),{allMessages:e.allMessages.map(function(e){return Yo(e.reqId,O.reqId)?O:e})});case Td:S=n.payload.channel;var T=n.payload.users;return S.url!==e.currentOpenChannel.url?e:C(C({},e),{participants:N(N([],e.participants,!0),T,!0)});case Ad:S=n.payload.channel;var A=n.payload.users;return S.url===e.currentOpenChannel.url&&A.every(function(e){return"string"===typeof e.userId})?C(C({},e),{bannedParticipantIds:N(N([],e.bannedParticipantIds,!0),A.map(function(e){return e.userId}),!0)}):e;case wd:S=n.payload.channel;var w=n.payload.users;return S.url===e.currentOpenChannel.url&&w.every(function(e){return"string"===typeof e.userId})?C(C({},e),{mutedParticipantIds:N(N([],e.bannedParticipantIds,!0),w.map(function(e){return e.userId}),!0)}):e;case Id:S=n.payload.channel;var I=n.payload.message;o=e.currentOpenChannel;return Yo(S.url,o.url)&&e.allMessages.map(function(e){return e.messageId}).indexOf(I.messageId)<0?C(C({},e),{allMessages:N(N([],e.allMessages,!0),[I],!1)}):e;case Rd:S=n.payload.channel;var R=n.payload.message;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url?e:C(C({},e),{allMessages:e.allMessages.map(function(e){return e.isIdentical(R)?R:e})});case kd:S=n.payload.channel;var k=n.payload.messageId;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url?e:C(C({},e),{allMessages:e.allMessages.filter(function(e){return!Yo(e.messageId,k)})});case Md:return C(C({},e),{allMessages:e.allMessages.filter(function(e){return!Yo(e.reqId,n.payload)})});case Ud:S=n.payload.channel;var M=n.payload.operators;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url?e:C(C({},e),{currentOpenChannel:C(C({},e.currentOpenChannel),{operators:M}),operators:M});case Ld:S=n.payload.channel;var U=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url?e:C(C({},e),{participants:N(N([],e.participants,!0),[U],!1)});case Pd:S=n.payload.channel;var L=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url?e:C(C({},e),{participants:e.participants.filter(function(e){return!Yo(e.userId,L.userId)})});case Dd:S=n.payload.channel;var P=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url||e.mutedParticipantIds.indexOf(P.userId)>=0?e:C(C({},e),{mutedParticipantIds:N(N([],e.mutedParticipantIds,!0),[P.userId],!1)});case xd:S=n.payload.channel;var D=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url||e.mutedParticipantIds.indexOf(D.userId)<0?e:C(C({},e),{mutedParticipantIds:e.mutedParticipantIds.filter(function(e){return e!==D.userId})});case Fd:S=n.payload.channel;var x=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url||e.bannedParticipantIds.indexOf(x.userId)>=0?e:C(C({},e),{bannedParticipantIds:N(N([],e.bannedParticipantIds,!0),[x.userId],!1)});case Hd:S=n.payload.channel;var F=n.payload.user;return!(j=e.currentOpenChannel)||j.url&&j.url!==S.url||e.bannedParticipantIds.indexOf(F.userId)<0?e:C(C({},e),{bannedParticipantIds:e.bannedParticipantIds.filter(function(e){return e!==F.userId})});case Gd:var H=n.payload;return!(j=e.currentOpenChannel)||j.url&&j.url!==H.url?e:C(C({},e),{frozen:!0});case jd:var G=n.payload;return!(j=e.currentOpenChannel)||j.url&&j.url!==G.url?e:C(C({},e),{frozen:!1});case Bd:var j,B=n.payload;return!(j=e.currentOpenChannel)||j.url&&j.url!==B.url?e:C(C({},e),{currentOpenChannel:B});case zd:case Vd:case qd:case Kd:case Yd:case Qd:case Wd:default:return e}}var $d={allMessages:[],loading:!1,initialized:!1,currentOpenChannel:null,isInvalid:!1,hasMore:!1,lastMessageTimestamp:0,frozen:!1,operators:[],participants:[],bannedParticipantIds:[],mutedParticipantIds:[]};b(function(e){var n=e.stores,t=e.config,i=e.useMessageGrouping,s=e.channelUrl,o=e.queries,l=void 0===o?{}:o,u=e.disableUserProfile,c=e.fetchingParticipants,d=void 0!==c&&c,h=e.renderCustomMessage,f=e.renderUserProfile,p=e.renderChannelTitle,m=e.renderMessageInput,g=e.onBeforeSendUserMessage,_=e.onBeforeSendFileMessage,y=e.onChatHeaderActionClick,v=n.sdkStore,E=n.userStore,b=t.userId,N=t.isOnline,O=t.logger,A=t.pubSub,w=t.imageCompression,I=v.sdk,R=E.user,k=Object(r.useReducer)(Xd,$d),M=k[0],U=k[1],L=M.allMessages,P=M.loading,D=M.initialized,x=M.currentOpenChannel,F=M.isInvalid,H=M.hasMore,G=M.lastMessageTimestamp,j=M.operators,B=M.bannedParticipantIds,z=M.mutedParticipantIds,V=Object(r.useRef)(null),q=Object(r.useRef)(null),K=Object(r.useContext)(T).stringSet,Y=v.initialized,Q=l?l.messageListParams:null,W=!D||!N||function(e,n){return e.isFrozen&&!function(e,n){return!(e.operators.map(function(e){return e.userId}).indexOf(n)<0)}(e,n)}(x,b),J=u||t.disableUserProfile,X=f||t.renderUserProfile,$=Object(r.useMemo)(function(){return B.indexOf(R.userId)>=0},[s,B,R]),Z=Object(r.useMemo)(function(){return z.indexOf(R.userId)>=0},[s,z,R]),ee=Object(r.useMemo)(function(){return j.map(function(e){return e.userId}).indexOf(R.userId)>=0},[s,j,R]);!function(e,n){var t=e.channelUrl,a=e.sdkInit,i=e.fetchingParticipants,s=n.sdk,o=n.logger,l=n.messagesDispatcher;Object(r.useEffect)(function(){t&&a&&s&&s.OpenChannel&&(o.info("OpenChannel | useSetChannel fetching channel",t),s.OpenChannel.getChannel(t,function(e,n){n?(o.warning("OpenChannel | useSetChannel fetching channel failed",{channelUrl:t,error:n}),l({type:_d,payload:null})):(o.info("OpenChannel | useSetChannel fetched channel",e),l({type:gd,payload:e}),e.enter(function(n,r){if(r&&(o.warning("OpenChannel | useSetChannel enter channel failed",{channelUrl:t,error:r}),l({type:_d,payload:null})),i){var a=e.createParticipantListQuery(),s=e.createBannedUserListQuery(),u=e.createMutedUserListQuery();Ic(a,o,function(n){l({type:Td,payload:{channel:e,users:n}})}),Ic(s,o,function(n){l({type:Ad,payload:{channel:e,users:n}})}),Ic(u,o,function(n){l({type:wd,payload:{channel:e,users:n}})})}}))}))},[t,a,i])}({channelUrl:s,sdkInit:Y,fetchingParticipants:d},{sdk:I,logger:O,messagesDispatcher:U}),Object(r.useEffect)(function(){h&&console.info("The parameter type of renderCustomMessage will be changed to the object in the next minor update.")},[]);var ne=function(e,n){var t=e.conversationScrollRef,a=n.logger;return Object(r.useCallback)(function(){var e=!0;if(t)try{var n=t.current;e=n.scrollHeight<=n.scrollTop+n.clientHeight}catch(r){a.error("OpenChannel | useCheckScrollBottom",r)}return e},[t])}({conversationScrollRef:q},{logger:O});!function(e,n){var t=e.currentOpenChannel,a=e.checkScrollBottom,i=n.sdk,s=n.logger,o=n.messagesDispatcher;Object(r.useEffect)(function(){var e=S();if(t&&t.url&&i&&i.ChannelHandler){var n=new i.ChannelHandler;s.info("OpenChannel | useHandleChannelEvents: Setup evnet handler",e),n.onMessageReceived=function(e,n){var t=a(),r=e.url;if(s.info("OpenChannel | useHandleChannelEvents: onMessageReceived",{channelUrl:r,message:n}),o({type:Id,payload:{channel:e,message:n}}),t)try{setTimeout(function(){Tc()})}catch(i){s.warning("OpenChannel | onMessageReceived | scroll to end failed")}},n.onMessageUpdated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageUpdated",{channelUrl:t,message:n}),o({type:Rd,payload:{channel:e,message:n}})},n.onMessageDeleted=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageDeleted",{channelUrl:t,messageId:n}),o({type:kd,payload:{channel:e,messageId:n}})},n.onOperatorUpdated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onOperatorUpdated",{channelUrl:t,operators:n}),o({type:Ud,payload:{channel:e,operators:n}})},n.onUserEntered=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserEntered",{channelUrl:t,user:n}),o({type:Ld,payload:{channel:e,user:n}})},n.onUserExited=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserExited",{channelUrl:t,user:n}),o({type:Pd,payload:{channel:e,user:n}})},n.onUserMuted=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserMuted",{channelUrl:t,user:n}),o({type:Dd,payload:{channel:e,user:n}})},n.onUserUnmuted=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnmuted",{channelUrl:t,user:n}),o({type:xd,payload:{channel:e,user:n}})},n.onUserBanned=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserBanned",{channelUrl:t,user:n}),o({type:Fd,payload:{channel:e,user:n}})},n.onUserUnbanned=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnbanned",{channelUrl:t,user:n}),o({type:Hd,payload:{channel:e,user:n}})},n.onChannelFrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelFrozen",e),o({type:Gd,payload:e})},n.onChannelUnfrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelUnfrozen",e),o({type:jd,payload:e})},n.onChannelChanged=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelChanged",e),o({type:Bd,payload:e})},n.onMetaDataCreated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataCreated",{channelUrl:t,metaData:n}),o({type:zd,payload:{channel:e,metaData:n}})},n.onMetaDataUpdated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataUpdated",{channelUrl:t,metaData:n}),o({type:Vd,payload:{channel:e,metaData:n}})},n.onMetaDataDeleted=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataDeleted",{channelUrl:t,metaDataKeys:n}),o({type:qd,payload:{channel:e,metaDataKeys:n}})},n.onMetaCountersCreated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersCreated",{channelUrl:t,metaCounter:n}),o({type:Kd,payload:{channel:e,metaCounter:n}})},n.onMetaCountersUpdated=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersUpdated",{channelUrl:t,metaCounter:n}),o({type:Yd,payload:{channel:e,metaCounter:n}})},n.onMetaCountersDeleted=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersDeleted",{channelUrl:t,metaCounterKeys:n}),o({type:Qd,payload:{channel:e,metaCounterKeys:n}})},n.onMentionReceived=function(e,n){var t=e.url;s.info("OpenChannel | useHandleChannelEvents: onMentionReceived",{channelUrl:t,message:n}),o({type:Wd,payload:{channel:e,message:n}})},i.addChannelHandler(e,n)}return function(){i&&i.removeChannelHandler&&(s.info("OpenChannel | useHandleChannelEvents: Removing message receiver handler",e),i.removeChannelHandler(e))}},[t])}({currentOpenChannel:x,checkScrollBottom:ne},{sdk:I,logger:O,messagesDispatcher:U}),function(e,n){var t=e.currentOpenChannel,a=e.userFilledMessageListParams,i=n.sdk,s=n.logger,o=n.messagesDispatcher;Object(r.useEffect)(function(){if(s.info("OpenChannel | useInitialMessagesFetch: Setup started",t),o({type:yd,payload:null}),i&&i.MessageListParams&&t&&t.getMessagesByTimestamp){var e=new i.MessageListParams;e.prevResultSize=30,e.isInclusive=!0,e.includeReplies=!1,e.includeReactions=!1,a&&(Object.keys(a).forEach(function(n){e[n]=a[n]}),s.info("OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams")),s.info("OpenChannel | useInitialMessagesFetch: Fetching messages",{currentOpenChannel:t,messageListParams:e}),o({type:vd,payload:null}),t.getMessagesByTimestamp((new Date).getTime(),e,function(e,n){if(n)s.error("OpenChannel | useInitialMessagesFetch: Fetching messages failed",n),o({type:bd,payload:{currentOpenChannel:t,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{s.info("OpenChannel | useInitialMessagesFetch: Fetching messages succeeded",e);var r=e&&e.length>0,a=r?e[0].createdAt:null;o({type:Ed,payload:{currentOpenChannel:t,messages:e,hasMore:r,lastMessageTimestamp:a}}),setTimeout(function(){Tc()})}})}},[t,a])}({currentOpenChannel:x,userFilledMessageListParams:Q},{sdk:I,logger:O,messagesDispatcher:U});var te,re=function(e,n){var t=e.currentOpenChannel,a=e.lastMessageTimestamp,i=n.sdk,s=n.logger,o=n.messagesDispatcher,l=n.hasMore,u=n.userFilledMessageListParams;return Object(r.useCallback)(function(e){if(l&&i&&i.MessageListParams){s.info("OpenChannel | useScrollCallback: start");var n=new i.MessageListParams;n.prevResultSize=30,n.includeReplies=!1,n.includeReactions=!1,u&&(Object.keys(u).forEach(function(e){n[e]=u[e]}),s.info("OpenChannel | useScrollCallback: Used userFilledMessageListParams",u)),s.info("OpenChannel | useScrollCallback: Fetching messages",{currentOpenChannel:t,messageListParams:n}),t.getMessagesByTimestamp(a||(new Date).getTime(),n,function(n,r){if(r)s.error("OpenChannel | useScrollCallback: Fetching messages failed",r),o({type:bd,payload:{currentOpenChannel:t,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{s.info("OpenChannel | useScrollCallback: Fetching messages succeeded",n);var a=n&&n.length>0,i=a?n[0].createdAt:null;o({type:Ed,payload:{currentOpenChannel:t,messages:n,hasMore:a,lastMessageTimestamp:i}}),setTimeout(function(){e()})}})}},[t,a])}({currentOpenChannel:x,lastMessageTimestamp:G},{sdk:I,logger:O,messagesDispatcher:U,hasMore:H,userFilledMessageListParams:Q}),ae=function(e,n){var t=e.currentOpenChannel,a=e.onBeforeSendUserMessage,i=e.checkScrollBottom,s=e.messageInputRef,o=n.sdk,l=n.logger,u=n.messagesDispatcher;return Object(r.useCallback)(function(){if(o&&o.UserMessageParams){var e=s.current.value;a&&"function"===typeof a&&l.info("OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage",a);var n=a?a(e):function(e){var n="string"===typeof e?e.trim():e.toString(10).trim(),t=new o.UserMessageParams;return t.message=n,t}(e);l.info("OpenChannel | useSendMessageCallback: Sending message has started",n);var r=i(),c=t.sendUserMessage(n,function(e,n){n?(l.warning("OpenChannel | useSendMessageCallback: Sending message failed",n),u({type:Cd,payload:Jd})):(l.info("OpenChannel | useSendMessageCallback: Sending message succeeded",e),u({type:Nd,payload:e}),r&&setTimeout(function(){Tc()}))});u({type:Sd,payload:{message:c,channel:t}})}},[t,a,i,s])}({currentOpenChannel:x,onBeforeSendUserMessage:g,checkScrollBottom:ne,messageInputRef:V},{sdk:I,logger:O,messagesDispatcher:U}),ie=function(e,n){var t=e.currentOpenChannel,a=e.checkScrollBottom,i=e.imageCompression,s=void 0===i?{}:i,o=e.onBeforeSendFileMessage,l=n.sdk,u=n.logger,c=n.messagesDispatcher;return Object(r.useCallback)(function(e){if(l&&l.FileMessageParams){var n=s.compressionRate,r=s.resizingWidth,i=s.resizingHeight,d=o&&"function"===typeof o,h="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,f=n>0&&n<1,p=Rc(r)||Rc(i),m=function(e){var n=new l.FileMessageParams;return n.file=e,n};if(h&&(f||p))try{var g=document.createElement("img");g.src=URL.createObjectURL(e),g.onload=function(){URL.revokeObjectURL(g.src);var s=document.createElement("canvas"),l=g.naturalWidth||g.width,h=g.naturalHeight||g.height,f=Rc(r)||l,_=Rc(i)||h;"image/png"!==e.type||p||(f*=n,_*=n),s.width=f,s.height=_;var y=s.getContext("2d");y.drawImage(g,0,0,f,_),y.canvas.toBlob(function(n){var r=new File([n],e.name,{type:e.type});d&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",o);var i=o?o(r):m(r);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",i);var s=a(),l=t.sendFileMessage(i,function(n,t){t?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:n,error:t}),n.localUrl=URL.createObjectURL(e),n.file=e,c({type:Cd,payload:n})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",n),c({type:Nd,payload:n}),s&&setTimeout(function(){Tc()}))});c({type:Sd,payload:{message:C(C({},l),{url:URL.createObjectURL(e),requestState:"pending"}),channel:t}})},e.type,n)}}catch(E){u.warning("OpenChannel | useFileUploadCallback: Sending file message with image compression failed",E)}else{d&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",o);var _=o?o(e):m(e);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",_);var y=a(),v=t.sendFileMessage(_,function(n,t){t?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:n,error:t}),n.localUrl=URL.createObjectURL(e),n.file=e,c({type:Cd,payload:n})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",n),c({type:Nd,payload:n}),y&&setTimeout(function(){Tc()}))});c({type:Sd,payload:{message:C(C({},v),{url:URL.createObjectURL(e),requestState:"pending"}),channel:t}})}}},[t,o,a,s])}({currentOpenChannel:x,onBeforeSendFileMessage:_,checkScrollBottom:ne,imageCompression:w},{sdk:I,logger:O,messagesDispatcher:U}),se=function(e,n){var t=e.currentOpenChannel,a=e.onBeforeSendUserMessage,i=n.sdk,s=n.logger,o=n.messagesDispatcher;return Object(r.useCallback)(function(e,n,r){a&&"function"===typeof a&&s.info("OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage");var l=a?a(n):function(e){var n=new i.UserMessageParams;return n.message=e,n}(n);t.updateUserMessage(e,l,function(e,n){r&&r(),n?s.warning("OpenChannel | useUpdateMessageCallback: Updating message failed",n):(s.info("OpenChannel | useUpdateMessageCallback: Updating message succeeded",{message:e,params:l}),o({type:Rd,payload:{channel:t,message:e}}))})},[t,a])}({currentOpenChannel:x,onBeforeSendUserMessage:g},{sdk:I,logger:O,messagesDispatcher:U}),oe=function(e,n){var t=e.currentOpenChannel,a=n.logger,i=n.messagesDispatcher;return Object(r.useCallback)(function(e,n){a.info("OpenChannel | useDeleteMessageCallback: Deleting message",e);var r=e.sendingStatus;if(a.info("OpenChannel | useDeleteMessageCallback: Deleting message requestState",r),"failed"===r||"pending"===r)a.info("OpenChannel | useDeleteMessageCallback: Deleted message from local",e),i({type:Md,payload:e.reqId}),n&&n();else{if("file"!==e.messageType&&"user"!==e.messageType)return;var s=e;t.deleteMessage(s,function(s){a.info("OpenChannel | useDeleteMessageCallback: Deleting message on server",r),n&&n(),s?a.warning("OpenChannel | useDeleteMessageCallback: Deleting message failed",s):(a.info("OpenChannel | useDeleteMessageCallback: Deleting message succeeded",e),i({type:kd,payload:{channel:t,messageId:e.messageId}}))})}},[t])}({currentOpenChannel:x},{logger:O,messagesDispatcher:U}),le=function(e,n){var t=e.currentOpenChannel,a=n.logger,i=n.messagesDispatcher;return Object(r.useCallback)(function(e){a.info("OpenChannel | useResendMessageCallback: Resending message has started",e);var n=e.messageType,r=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",i({type:Od,payload:{channel:t,message:e}}),"user"===n&&"user"===e.messageType)return void t.resendUserMessage(e,function(n,t){t?(a.warning("OpenChannel | useResendMessageCallback: Resending message failed",t),e.requestState="failed",i({type:Cd,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Reseding message succeeded",n),i({type:Nd,payload:n}))});"file"===n&&"file"===e.messageType&&t.resendFileMessage(e,r,function(n,t){t?(a.warning("OpenChannel | useResendMessageCallback: Resending file message failed",t),e.requestState="failed",i({type:Cd,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Resending file message succeeded",n),i({type:Nd,payload:n}))})}else console.error("OpenChannel | useResendMessageCallback: Message is not resendable"),a.warning("OpenChannel | useResendMessageCallback: Message is not resendable",e)},[t])}({currentOpenChannel:x},{logger:O,messagesDispatcher:U});return Object(r.useEffect)(function(){var e=new Map;if(A&&A.subscribe)return e.set("SEND_USER_MESSAGE",A.subscribe("SEND_USER_MESSAGE",function(e){var n=e.channel,t=e.message;Tc(),n&&s===n.url&&U({type:Nd,payload:t})})),e.set(_s,A.subscribe(_s,function(e){var n=e.channel,t=e.message;n&&s===n.url&&U({type:Sd,payload:{message:t,channel:n}})})),e.set("SEND_FILE_MESSAGE",A.subscribe("SEND_FILE_MESSAGE",function(e){var n=e.channel,t=e.message;Tc(),n&&s===n.url&&U({type:Nd,payload:{message:t,channel:n}})})),e.set(ys,A.subscribe(ys,function(e){var n=e.channel,t=e.message;e.fromSelector&&n&&s===n.url&&U({type:Rd,payload:{channel:n,message:t}})})),e.set("DELETE_MESSAGE",A.subscribe("DELETE_MESSAGE",function(e){var n=e.channel,t=e.messageId;n&&s===n.url&&U({type:kd,payload:t})})),function(){e&&e.forEach(function(e){try{e.remove()}catch(o){}})}},[s,Y]),x&&x.url&&!$?P?a.a.createElement("div",{className:"sendbird-openchannel-conversation"},a.a.createElement(ii,{type:ai.LOADING})):F?a.a.createElement("div",{className:"sendbird-openchannel-conversation"},a.a.createElement(ii,{type:ai.WRONG})):a.a.createElement(oi,{className:"sendbird-openchannel-conversation",disableUserProfile:J,renderUserProfile:X},p?p({channel:x,user:R}):a.a.createElement(Lc,{title:x.name,subTitle:(te=x.participantCount,(Math.abs(te)>999999?(Math.abs(te)/1e6).toFixed(1)+"M":Math.abs(te)>999?(Math.abs(te)/1e3).toFixed(1)+"K":""+te)+" "+K.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS),coverImage:x.coverUrl,onActionClick:y,amIOperator:ee}),x.isFrozen&&a.a.createElement(Uc,null),a.a.createElement(md,{ref:q,renderCustomMessage:h,openchannel:x,user:R,useMessageGrouping:i,isOnline:N,allMessages:L,onScroll:re,hasMore:H,updateMessage:se,deleteMessage:oe,resendMessage:le}),m?a.a.createElement("div",{className:"sendbird-openchannel-footer"},m({channel:x,user:R,disabled:W})):a.a.createElement(Mc,{channel:x,user:R,ref:V,disabled:W||Z,onSendMessage:ae,onFileUpload:ie,renderMessageInput:m})):a.a.createElement("div",{className:"sendbird-openchannel-conversation"},a.a.createElement(ii,{type:ai.NO_CHANNELS}))});function Zd(e){var n=e.channel,t=e.theme,i=e.height,s=void 0===i?56:i,o=e.width,l=void 0===o?56:o,u=Object(r.useContext)(T).stringSet,c=Object(r.useMemo)(function(){return a.a.createElement(Ya,{className:"sendbird-chat-header__avatar--open-channel",src:Ms(n),width:l+"px",height:s+"px",alt:n.name||u.OPEN_CHANNEL_SETTINGS__NO_TITLE})},[n.coverUrl,t]);return a.a.createElement(a.a.Fragment,null,c)}var eh=function(e){var n=e.onSubmit,t=e.onCancel,i=e.channel,s=e.theme,o=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null),c=Object(r.useState)(null),d=c[0],h=c[1],f=Object(r.useState)(null),p=f[0],m=f[1],g=Object(r.useContext)(T).stringSet,_=i.name;return a.a.createElement(fs,{titleText:g.MODAL__CHANNEL_INFORMATION__TITLE,submitText:g.BUTTON__SAVE,onCancel:t,onSubmit:function(){""===_||o.current.value?(n(p,o.current.value),t()):l.current.reportValidity&&l.current.reportValidity()},type:rs.PRIMARY},a.a.createElement("form",{className:"channel-profile-form",ref:l,onSubmit:function(e){e.preventDefault()}},a.a.createElement("div",{className:"channel-profile-form__img-section"},a.a.createElement(Ds,null,g.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),a.a.createElement("div",{className:"channel-profile-form__avatar"},d?a.a.createElement(Ya,{height:"80px",width:"80px",src:d}):a.a.createElement(Zd,{height:80,width:80,channel:i,theme:s})),a.a.createElement("input",{ref:u,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){h(URL.createObjectURL(e.target.files[0])),m(e.target.files[0]),u.current.value=""}}),a.a.createElement(gs,{className:"channel-profile-form__avatar-button",onClick:function(){return u.current.click()},notUnderline:!0},a.a.createElement($a,{type:Za.BUTTON_1,color:ei.PRIMARY},g.MODAL__CHANNEL_INFORMATION__UPLOAD))),a.a.createElement("div",{className:"channel-profile-form__name-section"},a.a.createElement(Ds,null,g.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),a.a.createElement(xs,{required:""!==_,name:"channel-profile-form__name",ref:o,value:_,placeHolder:g.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))};function nh(e){var n=e.disabled,t=e.channel,i=e.theme,s=e.onChannelInfoChange,o=t.name,l=Object(r.useState)(!1),u=l[0],c=l[1],d=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-profile"},a.a.createElement("div",{className:"sendbird-openchannel-profile--inner"},a.a.createElement("div",{className:"sendbird-openchannel-profile__avatar"},a.a.createElement(Zd,{channel:t,theme:i,height:80,width:80})),a.a.createElement($a,{type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1,className:"sendbird-openchannel-profile__title"},o||d.OPEN_CHANNEL_SETTINGS__NO_TITLE),a.a.createElement(gs,{disabled:n,className:"sendbird-openchannel-profile__edit",onClick:function(){n||c(!0)},notUnderline:!0},a.a.createElement($a,{type:Za.BUTTON_1,color:n?ei.ONBACKGROUND_2:ei.PRIMARY},d.CHANNEL_SETTING__PROFILE__EDIT)),u&&a.a.createElement(eh,{onCancel:function(){return c(!1)},onSubmit:s,channel:t,theme:i})))}function th(e){var n=e.hideModal,t=e.channel,i=Object(r.useContext)(T).stringSet,s=Object(r.useState)([]),o=s[0],l=s[1],u=Object(r.useState)(null),c=u[0],d=u[1];return Object(r.useEffect)(function(){if(t&&t.createParticipantListQuery){var e=t.createParticipantListQuery();d(e),e.next(function(e,n){n||l(e)})}},[]),a.a.createElement("div",null,a.a.createElement(fs,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Fs,titleText:i.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var n=c.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&c.next(function(e,n){n||l(N(N([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(js,{user:e,key:e.userId})}))))}var rh=10,ah=function(e){var n=e.member,t=e.currentUser,i=void 0===t?"":t,s=Object(r.useRef)(null),o=Object(r.useContext)(si),l=o.disableUserProfile,u=o.renderUserProfile,c=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-participants-accordion__member"},a.a.createElement("div",{className:"sendbird-participants-accordion__member-avatar"},a.a.createElement(ks,{menuTrigger:function(e){return a.a.createElement(Ya,{onClick:function(){l||e()},ref:s,src:n.profileUrl,width:24,height:24})},menuItems:function(e){return a.a.createElement(ws,{openLeft:!0,parentRef:s,parentContainRef:s,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},u?u({user:n,currentUserId:i,close:e}):a.a.createElement(Ns,{disableMessaging:!0,user:n,currentUserId:i,onSuccess:e}))}})),a.a.createElement($a,{type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_1},n.nickname||c.NO_NAME,i===n.userId&&c.CHANNEL_SETTING__MEMBERS__YOU))};function ih(e){var n=e.channel,t=e.currentUser,i=Object(r.useState)([]),s=i[0],o=i[1],l=Object(r.useState)(!1),u=l[0],c=l[1],d=Object(r.useContext)(T).stringSet;return Object(r.useEffect)(function(){n&&n.createParticipantListQuery&&n.createParticipantListQuery().next(function(e,n){n||o(e)})},[n]),a.a.createElement(Pu,{className:"sendbird-participants-accordion",id:"participants",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ga,{type:ja.MEMBERS,fillColor:Ba.PRIMARY,width:24,height:24,className:"sendbird-openchannel-settings__accordion-icon"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},d.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE))},renderContent:function(){return a.a.createElement("div",{className:""},a.a.createElement("div",{className:"sendbird-participants-accordion__list"},s.slice(0,rh).map(function(e){return a.a.createElement(ah,{member:e,currentUser:t,key:e.userId})}),s&&0===s.length?a.a.createElement($a,{className:"sendbird-channel-settings__empty-list",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_3},d.OPEN_CHANNEL_SETTINGS__EMPTY_LIST):null),s.length>=rh&&a.a.createElement("div",{className:"sendbird-participants-accordion__footer"},a.a.createElement(os,{className:"sendbird-participants-accordion__footer__all-participants",type:ls.SECONDARY,size:us.SMALL,onClick:function(){return c(!0)}},d.OPEN_CHANNEL_SETTINGS__SEE_ALL),u&&a.a.createElement(th,{currentUser:t,hideModal:function(){c(!1)},channel:n})))}})}function sh(e){var n=e.isOnline,t=e.onDeleteChannel,i=Object(r.useState)(!1),s=i[0],o=i[1],l=Object(r.useContext)(T).stringSet;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-openchannel-settings__panel-item\n          sendbird-openchannel-settings__delete-channel\n            "+(n?"":"sendbird-openchannel-settings__panel-item__disabled"),role:"button",tabIndex:0,onKeyDown:function(){n&&o(!0)},onClick:function(){n&&o(!0)}},a.a.createElement(Ga,{type:ja.DELETE,className:["sendbird-openchannel-settings__panel-icon-left","sendbird-openchannel-settings__panel-icon__delete"].join(" "),height:"24px",width:"24px"}),a.a.createElement($a,{type:Za.SUBTITLE_1,color:ei.ONBACKGROUND_1},l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL)),s&&a.a.createElement(fs,{onCancel:function(){o(!1)},onSubmit:function(){t()},submitText:l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT,titleText:l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE}))}function oh(e){var n=e.channel,t=e.onCloseClick,i=e.currentUser,s=Object(r.useContext)(T).stringSet,o=Object(r.useState)([]),l=o[0],u=o[1],c=Object(r.useState)(null),d=c[0],h=c[1];return Object(r.useEffect)(function(){if(n&&n.createParticipantListQuery){var e=n.createParticipantListQuery();h(e),e.next(function(e,n){n||u(e)})}},[n]),a.a.createElement("div",{className:"sendbird-openchannel-settings__participant"},a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},s.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE),a.a.createElement(Ga,{type:ja.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){t()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__participants-list",onScroll:function(e){var n=d.hasNext,t=e.target,r=t.clientHeight+t.scrollTop===t.scrollHeight;n&&r&&d.next(function(e,n){n||u(N(N([],l,!0),e,!0))})}},a.a.createElement("div",null,l.map(function(e){return a.a.createElement(ah,{member:e,currentUser:i,key:e.userId})}),l&&0===l.length?a.a.createElement($a,{className:"sendbird-channel-settings__empty-list",type:Za.SUBTITLE_2,color:ei.ONBACKGROUND_3},s.OPEN_CHANNEL_SETTINGS__EMPTY_LIST):null)))}function lh(e){var n=e.onCloseClick,t=Object(r.useContext)(T).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-settings"},a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},t.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(Ga,{type:ja.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){n()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__placeholder"},a.a.createElement(ii,{type:ti.WRONG})))}var uh=function(){return{info:Fs,error:Fs,warning:Fs}};b(function(e){var n=e.channelUrl,t=e.onCloseClick,i=void 0===t?Fs:t,s=e.onBeforeUpdateChannel,o=e.onChannelModified,l=void 0===o?Fs:o,u=e.renderChannelProfile,c=e.renderUserProfile,d=e.onDeleteChannel,h=e.disableUserProfile,f=void 0!==h&&h,p=e.logger,m=void 0===p?uh():p,g=e.sdk,_=e.theme,y=e.user,v=e.isOnline,E=y.userId,b=Object(r.useState)(null),C=b[0],N=b[1],S=Object(r.useContext)(T).stringSet;return Object(r.useEffect)(function(){n&&g&&g.getConnectionState?g.OpenChannel.getChannel(n,function(e,n){N(n?null:e)}):N(null)},[n,g]),C?a.a.createElement(oi,{className:"sendbird-openchannel-settings",disableUserProfile:f,renderUserProfile:c},C.isOperator(y)?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement($a,{type:Za.H_2,color:ei.ONBACKGROUND_1},S.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(Ga,{className:"sendbird-openchannel-settings__close-icon",type:ja.CLOSE,height:"24px",width:"24px",onClick:function(){i()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__profile"},u?u({channel:C,user:y}):a.a.createElement(nh,{disabled:!v,channel:C,theme:_,onChannelInfoChange:function(e,n){if(m.info("ChannelSettings: Channel information being updated"),s){var t=s(n,e,C.data);m.info("ChannelSettings: onBeforeUpdateChannel",t),C.updateChannel(t,function(e){l(e),N(null),N(e)})}else C.updateChannel(n,e,C.data,function(e){m.info("ChannelSettings: Channel information updated",e),l(e),N(null),N(e)})}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__url"},a.a.createElement(Ga,{className:"sendbird-openchannel-settings__copy-icon",type:ja.COPY,height:"22px",width:"22px",onClick:function(){Ki(C.url)}}),a.a.createElement($a,{className:"sendbird-openchannel-settings__url-label",type:Za.CAPTION_2,color:ei.ONBACKGROUND_2},S.OPEN_CHANNEL_SETTINGS__OPERATOR_URL),a.a.createElement($a,{className:"sendbird-openchannel-settings__url-value",type:Za.SUBTITLE_2},C.url)),a.a.createElement(Du,null,a.a.createElement(ih,{channel:C,currentUser:E})),a.a.createElement(sh,{isOnline:v,onDeleteChannel:function(){C.delete(function(e,n){n?m.warning("OpenChannelSettings: Delete channel failed",n):(m.info("OpenChannelSettings: Delete channel success",e),d&&d(C))})}})):a.a.createElement(oh,{currentUser:E,channel:C,onCloseClick:function(){i()}})):a.a.createElement(lh,{onCloseClick:function(){m.info("OpenChannelSettings: Click close"),i&&i()}})},function(e){var n=e&&e.config&&e.config.logger,t=e&&e.config&&e.config.theme||"light",r=e&&e.config&&e.config.isOnline,a=e&&e.stores&&e.stores.userStore&&e.stores.userStore.user;return{sdk:Cs(e),logger:n,theme:t,isOnline:r,user:a}});t.d(n,"a",function(){return Sc})},,function(e,n,t){"use strict";var r=t(6),a=60103,i=60106;n.Fragment=60107,n.StrictMode=60108,n.Profiler=60114;var s=60109,o=60110,l=60112;n.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),n.Fragment=d("react.fragment"),n.StrictMode=d("react.strict_mode"),n.Profiler=d("react.profiler"),s=d("react.provider"),o=d("react.context"),l=d("react.forward_ref"),n.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||p}function _(){}function y(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,n,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=g.prototype;var v=y.prototype=new _;v.constructor=y,r(v,g.prototype),v.isPureReactComponent=!0;var E={current:null},b=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,n,t){var r,i={},s=null,o=null;if(null!=n)for(r in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(s=""+n.key),n)b.call(n,r)&&!C.hasOwnProperty(r)&&(i[r]=n[r]);var l=arguments.length-2;if(1===l)i.children=t;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:s,ref:o,props:i,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var O=/\/+/g;function T(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return n[e]})}(""+e.key):n.toString(36)}function A(e,n,t,r,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return s=s(l=e),e=""===r?"."+T(l,0):r,Array.isArray(s)?(t="",null!=e&&(t=e.replace(O,"$&/")+"/"),A(s,n,t,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,n){return{$$typeof:a,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),n.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+T(o=e[u],u);l+=A(o,n,t,c,s)}else if("function"===typeof(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),u=0;!(o=e.next()).done;)l+=A(o=o.value,n,t,c=r+T(o,u++),s);else if("object"===o)throw n=""+e,Error(f(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n));return l}function w(e,n,t){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return n.call(t,e,a++)}),r}function I(e){if(-1===e._status){var n=e._result;n=n(),e._status=0,e._result=n,n.then(function(n){0===e._status&&(n=n.default,e._status=1,e._result=n)},function(n){0===e._status&&(e._status=2,e._result=n)})}if(1===e._status)return e._result;throw e._result}var R={current:null};function k(){var e=R.current;if(null===e)throw Error(f(321));return e}var M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};n.Children={map:w,forEach:function(e,n,t){w(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return w(e,function(){n++}),n},toArray:function(e){return w(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},n.Component=g,n.PureComponent=y,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,n.cloneElement=function(e,n,t){if(null===e||void 0===e)throw Error(f(267,e));var i=r({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,l=E.current),void 0!==n.key&&(s=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in n)b.call(n,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===n[c]&&void 0!==u?u[c]:n[c])}var c=arguments.length-2;if(1===c)i.children=t;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:a,type:e.type,key:s,ref:o,props:i,_owner:l}},n.createContext=function(e,n){return void 0===n&&(n=null),(e={$$typeof:o,_calculateChangedBits:n,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=N,n.createFactory=function(e){var n=N.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:l,render:e}},n.isValidElement=S,n.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},n.memo=function(e,n){return{$$typeof:u,type:e,compare:void 0===n?null:n}},n.useCallback=function(e,n){return k().useCallback(e,n)},n.useContext=function(e,n){return k().useContext(e,n)},n.useDebugValue=function(){},n.useEffect=function(e,n){return k().useEffect(e,n)},n.useImperativeHandle=function(e,n,t){return k().useImperativeHandle(e,n,t)},n.useLayoutEffect=function(e,n){return k().useLayoutEffect(e,n)},n.useMemo=function(e,n){return k().useMemo(e,n)},n.useReducer=function(e,n,t){return k().useReducer(e,n,t)},n.useRef=function(e){return k().useRef(e)},n.useState=function(e){return k().useState(e)},n.version="17.0.0"},function(e,n,t){"use strict";var r=t(5),a=t(6),i=t(10);function s(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var o=new Set,l={};function u(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(l[e]=n,e=0;e<n.length;e++)o.add(n[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,n,t,r,a,i,s){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];_[n]=new g(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function E(e,n,t,r){var a=_.hasOwnProperty(n)?_[n]:null;(null!==a?0===a.type:!r&&(2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])))||(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=60103,N=60106,S=60107,O=60108,T=60114,A=60109,w=60110,I=60112,R=60113,k=60120,M=60115,U=60116,L=60121,P=60128,D=60129,x=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var H=Symbol.for;C=H("react.element"),N=H("react.portal"),S=H("react.fragment"),O=H("react.strict_mode"),T=H("react.profiler"),A=H("react.provider"),w=H("react.context"),I=H("react.forward_ref"),R=H("react.suspense"),k=H("react.suspense_list"),M=H("react.memo"),U=H("react.lazy"),L=H("react.block"),H("react.scope"),P=H("react.opaque.id"),D=H("react.debug_trace_mode"),x=H("react.offscreen"),F=H("react.legacy_hidden")}var G,j="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}function z(e){if(void 0===G)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);G=n&&n[1]||""}return"\n"+G+e}var V=!1;function q(e,n){if(!e||V)return"";V=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(l){var r=l}Reflect.construct(e,[],n)}else{try{n.call()}catch(l){r=l}e.call(n.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o])return"\n"+a[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case N:return"Portal";case T:return"Profiler";case O:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case w:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var n=e.render;return n=n.displayName||n.name||"",e.displayName||(""!==n?"ForwardRef("+n+")":"ForwardRef");case M:return Y(e.type);case L:return Y(e._render);case U:n=e._payload,e=e._init;try{return Y(e(n))}catch(t){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function W(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function J(e){e._valueTracker||(e._valueTracker=function(e){var n=W(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function X(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Z(e,n){var t=n.checked;return a({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function ee(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=Q(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function ne(e,n){null!=(n=n.checked)&&E(e,"checked",n,!1)}function te(e,n){ne(e,n);var t=Q(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ae(e,n.type,t):n.hasOwnProperty("defaultValue")&&ae(e,n.type,Q(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function re(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ae(e,n,t){"number"===n&&$(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}function ie(e,n){return e=a({children:void 0},n),(n=function(e){var n="";return r.Children.forEach(e,function(e){null!=e&&(n+=e)}),n}(n.children))&&(e.children=n),e}function se(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+Q(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function oe(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(s(91));return a({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(s(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(s(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:Q(t)}}function ue(e,n){var t=Q(n.value),r=Q(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ce(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?he(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,n){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=n;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction(function(){return me(e,n)})}:me);function _e(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function Ee(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||ye.hasOwnProperty(e)&&ye[e]?(""+n).trim():n+"px"}function be(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=Ee(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(ye).forEach(function(e){ve.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ye[n]=ye[e]})});var Ce=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(e,n){if(n){if(Ce[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(s(60));if(!("object"===typeof n.dangerouslySetInnerHTML&&"__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(s(62))}}function Se(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ae=null,we=null;function Ie(e){if(e=Jr(e)){if("function"!==typeof Te)throw Error(s(280));var n=e.stateNode;n&&(n=$r(n),Te(e.stateNode,e.type,n))}}function Re(e){Ae?we?we.push(e):we=[e]:Ae=e}function ke(){if(Ae){var e=Ae,n=we;if(we=Ae=null,Ie(e),n)for(e=0;e<n.length;e++)Ie(n[e])}}function Me(e,n){return e(n)}function Ue(e,n,t,r,a){return e(n,t,r,a)}function Le(){}var Pe=Me,De=!1,xe=!1;function Fe(){null===Ae&&null===we||(Le(),ke())}function He(e,n){var t=e.stateNode;if(null===t)return null;var r=$r(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(s(231,n,typeof t));return t}var Ge=!1;if(d)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ge=!1}var Be=!1,ze=null,Ve=!1,qe=null,Ke={onError:function(e){Be=!0,ze=e}};function Ye(e,n,t,r,a,i,s,o,l){Be=!1,ze=null,function(e,n,t,r,a,i,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}.apply(Ke,arguments)}function Qe(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(1026&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(s(188))}function Xe(e){if(!(e=function(e){var n=e.alternate;if(!n){if(null===(n=Qe(e)))throw Error(s(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){t=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Je(a),e;if(i===r)return Je(a),n;i=i.sibling}throw Error(s(188))}if(t.return!==r.return)t=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===t){o=!0,t=a,r=i;break}if(l===r){o=!0,r=a,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,r=a;break}if(l===r){o=!0,r=i,t=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(t.alternate!==r)throw Error(s(190))}if(3!==t.tag)throw Error(s(188));return t.stateNode.current===t?e:n}(e)))return null;for(var n=e;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===e)break;for(;!n.sibling;){if(!n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function $e(e,n){for(var t=e.alternate;null!==n;){if(n===e||n===t)return!0;n=n.return}return!1}var Ze,en,nn,tn,rn=!1,an=[],sn=null,on=null,ln=null,un=new Map,cn=new Map,dn=[],hn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fn(e,n,t,r,a){return{blockedOn:e,domEventName:n,eventSystemFlags:16|t,nativeEvent:a,targetContainers:[r]}}function pn(e,n){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":un.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(n.pointerId)}}function mn(e,n,t,r,a,i){return null===e||e.nativeEvent!==i?(e=fn(n,t,r,a,i),null!==n&&(null!==(n=Jr(n))&&en(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function gn(e){var n=Wr(e.target);if(null!==n){var t=Qe(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void tn(e.lanePriority,function(){i.unstable_runWithPriority(e.priority,function(){nn(t)})})}else if(3===n&&t.stateNode.hydrate)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function _n(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=Jr(t))&&en(n),e.blockedOn=t,!1;n.shift()}return!0}function yn(e,n,t){_n(e)&&t.delete(n)}function vn(){for(rn=!1;0<an.length;){var e=an[0];if(null!==e.blockedOn){null!==(e=Jr(e.blockedOn))&&Ze(e);break}for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t){e.blockedOn=t;break}n.shift()}null===e.blockedOn&&an.shift()}null!==sn&&_n(sn)&&(sn=null),null!==on&&_n(on)&&(on=null),null!==ln&&_n(ln)&&(ln=null),un.forEach(yn),cn.forEach(yn)}function En(e,n){e.blockedOn===n&&(e.blockedOn=null,rn||(rn=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vn)))}function bn(e){function n(n){return En(n,e)}if(0<an.length){En(an[0],e);for(var t=1;t<an.length;t++){var r=an[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==sn&&En(sn,e),null!==on&&En(on,e),null!==ln&&En(ln,e),un.forEach(n),cn.forEach(n),t=0;t<dn.length;t++)(r=dn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<dn.length&&null===(t=dn[0]).blockedOn;)gn(t),null===t.blockedOn&&dn.shift()}function Cn(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Nn={animationend:Cn("Animation","AnimationEnd"),animationiteration:Cn("Animation","AnimationIteration"),animationstart:Cn("Animation","AnimationStart"),transitionend:Cn("Transition","TransitionEnd")},Sn={},On={};function Tn(e){if(Sn[e])return Sn[e];if(!Nn[e])return e;var n,t=Nn[e];for(n in t)if(t.hasOwnProperty(n)&&n in On)return Sn[e]=t[n];return e}d&&(On=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var An=Tn("animationend"),wn=Tn("animationiteration"),In=Tn("animationstart"),Rn=Tn("transitionend"),kn=new Map,Mn=new Map,Un=["abort","abort",An,"animationEnd",wn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rn,"transitionEnd","waiting","waiting"];function Ln(e,n){for(var t=0;t<e.length;t+=2){var r=e[t],a=e[t+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mn.set(r,n),kn.set(r,a),u(a,[r])}}(0,i.unstable_now)();var Pn=8;function Dn(e){if(0!==(1&e))return Pn=15,1;if(0!==(2&e))return Pn=14,2;if(0!==(4&e))return Pn=13,4;var n=24&e;return 0!==n?(Pn=12,n):0!==(32&e)?(Pn=11,32):0!==(n=192&e)?(Pn=10,n):0!==(256&e)?(Pn=9,256):0!==(n=3584&e)?(Pn=8,n):0!==(4096&e)?(Pn=7,4096):0!==(n=4186112&e)?(Pn=6,n):0!==(n=62914560&e)?(Pn=5,n):67108864&e?(Pn=4,67108864):0!==(134217728&e)?(Pn=3,134217728):0!==(n=805306368&e)?(Pn=2,n):0!==(1073741824&e)?(Pn=1,1073741824):(Pn=8,e)}function xn(e,n){var t=e.pendingLanes;if(0===t)return Pn=0;var r=0,a=0,i=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==i)r=i,a=Pn=15;else if(0!==(i=134217727&t)){var l=i&~s;0!==l?(r=Dn(l),a=Pn):0!==(o&=i)&&(r=Dn(o),a=Pn)}else 0!==(i=t&~s)?(r=Dn(i),a=Pn):0!==o&&(r=Dn(o),a=Pn);if(0===r)return 0;if(r=t&((0>(r=31-Bn(r))?0:1<<r)<<1)-1,0!==n&&n!==r&&0===(n&s)){if(Dn(n),a<=Pn)return n;Pn=a}if(0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-Bn(n)),r|=e[t],n&=~a;return r}function Fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Hn(e,n){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Gn(24&~n))?Hn(10,n):e;case 10:return 0===(e=Gn(192&~n))?Hn(8,n):e;case 8:return 0===(e=Gn(3584&~n))&&(0===(e=Gn(4186112&~n))&&(e=512)),e;case 2:return 0===(n=Gn(805306368&~n))&&(n=268435456),n}throw Error(s(358,e))}function Gn(e){return e&-e}function jn(e,n,t){e.pendingLanes|=n;var r=n-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[n=31-Bn(n)]=t}var Bn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zn(e)/Vn|0)|0},zn=Math.log,Vn=Math.LN2;var qn=i.unstable_UserBlockingPriority,Kn=i.unstable_runWithPriority,Yn=!0;function Qn(e,n,t,r){De||Le();var a=Jn,i=De;De=!0;try{Ue(a,e,n,t,r)}finally{(De=i)||Fe()}}function Wn(e,n,t,r){Kn(qn,Jn.bind(null,e,n,t,r))}function Jn(e,n,t,r){var a;if(Yn)if((a=0===(4&n))&&0<an.length&&-1<hn.indexOf(e))e=fn(null,e,n,t,r),an.push(e);else{var i=Xn(e,n,t,r);if(null===i)a&&pn(e,r);else{if(a){if(-1<hn.indexOf(e))return e=fn(i,e,n,t,r),void an.push(e);if(function(e,n,t,r,a){switch(n){case"focusin":return sn=mn(sn,e,n,t,r,a),!0;case"dragenter":return on=mn(on,e,n,t,r,a),!0;case"mouseover":return ln=mn(ln,e,n,t,r,a),!0;case"pointerover":var i=a.pointerId;return un.set(i,mn(un.get(i)||null,e,n,t,r,a)),!0;case"gotpointercapture":return i=a.pointerId,cn.set(i,mn(cn.get(i)||null,e,n,t,r,a)),!0}return!1}(i,e,n,t,r))return;pn(e,r)}wr(e,n,r,null,t)}}}function Xn(e,n,t,r){var a=Oe(r);if(null!==(a=Wr(a))){var i=Qe(a);if(null===i)a=null;else{var s=i.tag;if(13===s){if(null!==(a=We(i)))return a;a=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return wr(e,n,r,a,t),null}var $n=null,Zn=null,et=null;function nt(){if(et)return et;var e,n,t=Zn,r=t.length,a="value"in $n?$n.value:$n.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return et=a.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function at(){return!1}function it(e){function n(n,t,r,a,i){for(var s in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rt:at,this.isPropagationStopped=at,this}return a(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var st,ot,lt,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=it(ut),dt=a({},ut,{view:0,detail:0}),ht=it(dt),ft=a({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:St,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(st=e.screenX-lt.screenX,ot=e.screenY-lt.screenY):ot=st=0,lt=e),st)},movementY:function(e){return"movementY"in e?e.movementY:ot}}),pt=it(ft),mt=it(a({},ft,{dataTransfer:0})),gt=it(a({},dt,{relatedTarget:0})),_t=it(a({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),yt=it(a({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vt=it(a({},ut,{data:0})),Et={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=Ct[e])&&!!n[e]}function St(){return Nt}var Ot=it(a({},dt,{key:function(e){if(e.key){var n=Et[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:St,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Tt=it(a({},ft,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),At=it(a({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:St})),wt=it(a({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),It=it(a({},ft,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rt=[9,13,27,32],kt=d&&"CompositionEvent"in window,Mt=null;d&&"documentMode"in document&&(Mt=document.documentMode);var Ut=d&&"TextEvent"in window&&!Mt,Lt=d&&(!kt||Mt&&8<Mt&&11>=Mt),Pt=String.fromCharCode(32),Dt=!1;function xt(e,n){switch(e){case"keyup":return-1!==Rt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ft(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ht=!1;var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Gt[e.type]:"textarea"===n}function Bt(e,n,t,r){Re(r),0<(n=Rr(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var zt=null,Vt=null;function qt(e){Cr(e,0)}function Kt(e){if(X(Xr(e)))return e}function Yt(e,n){if("change"===e)return n}var Qt=!1;if(d){var Wt;if(d){var Jt="oninput"in document;if(!Jt){var Xt=document.createElement("div");Xt.setAttribute("oninput","return;"),Jt="function"===typeof Xt.oninput}Wt=Jt}else Wt=!1;Qt=Wt&&(!document.documentMode||9<document.documentMode)}function $t(){zt&&(zt.detachEvent("onpropertychange",Zt),Vt=zt=null)}function Zt(e){if("value"===e.propertyName&&Kt(Vt)){var n=[];if(Bt(n,Vt,e,Oe(e)),e=qt,De)e(n);else{De=!0;try{Me(e,n)}finally{De=!1,Fe()}}}}function er(e,n,t){"focusin"===e?($t(),Vt=t,(zt=n).attachEvent("onpropertychange",Zt)):"focusout"===e&&$t()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kt(Vt)}function tr(e,n){if("click"===e)return Kt(n)}function rr(e,n){if("input"===e||"change"===e)return Kt(n)}var ar="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},ir=Object.prototype.hasOwnProperty;function sr(e,n){if(ar(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!ir.call(n,t[r])||!ar(e[t[r]],n[t[r]]))return!1;return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,n){var t,r=or(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function ur(){for(var e=window,n=$();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=$((e=n.contentWindow).document)}return n}function cr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}var dr=d&&"documentMode"in document&&11>=document.documentMode,hr=null,fr=null,pr=null,mr=!1;function gr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;mr||null==hr||hr!==$(r)||("selectionStart"in(r=hr)&&cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&sr(pr,r)||(pr=r,0<(r=Rr(fr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=hr)))}Ln("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ln("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ln(Un,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),yr=0;yr<_r.length;yr++)Mn.set(_r[yr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function br(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,i,o,l,u){if(Ye.apply(this,arguments),Be){if(!Be)throw Error(s(198));var c=ze;Be=!1,ze=null,Ve||(Ve=!0,qe=c)}}(r,n,void 0,e),e.currentTarget=null}function Cr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var i=void 0;if(n)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;br(a,o,u),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,u=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;br(a,o,u),i=l}}}if(Ve)throw e=qe,Ve=!1,qe=null,e}function Nr(e,n){var t=Zr(n),r=e+"__bubble";t.has(r)||(Ar(n,e,2,!1),t.add(r))}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Sr]||(e[Sr]=!0,o.forEach(function(n){Er.has(n)||Tr(n,!1,e,null),Tr(n,!0,e,null)}))}function Tr(e,n,t,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=t;if("selectionchange"===e&&9!==t.nodeType&&(i=t.ownerDocument),null!==r&&!n&&Er.has(e)){if("scroll"!==e)return;a|=2,i=r}var s=Zr(i),o=e+"__"+(n?"capture":"bubble");s.has(o)||(n&&(a|=4),Ar(i,e,a,n),s.add(o))}function Ar(e,n,t,r){var a=Mn.get(n);switch(void 0===a?2:a){case 0:a=Qn;break;case 1:a=Wn;break;default:a=Jn}t=a.bind(null,n,t,e),a=void 0,!Ge||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function wr(e,n,t,r,a){var i=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=Wr(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}!function(e,n,t){if(xe)return e(n,t);xe=!0;try{Pe(e,n,t)}finally{xe=!1,Fe()}}(function(){var r=i,a=Oe(t),s=[];e:{var o=kn.get(e);if(void 0!==o){var l=ct,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":l=Ot;break;case"focusin":u="focus",l=gt;break;case"focusout":u="blur",l=gt;break;case"beforeblur":case"afterblur":l=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=At;break;case An:case wn:case In:l=_t;break;case Rn:l=wt;break;case"scroll":l=ht;break;case"wheel":l=It;break;case"copy":case"cut":case"paste":l=yt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tt}var c=0!==(4&n),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=He(p,h))&&c.push(Ir(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,t,a),s.push({event:o,listeners:c}))}}if(0===(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&n)||!(u=t.relatedTarget||t.fromElement)||!Wr(u)&&!u[Yr])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=t.relatedTarget||t.toElement)?Wr(u):null)&&(u!==(d=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pt,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tt,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Xr(l),f=null==u?o:Xr(u),(o=new c(m,p+"leave",l,t,a)).target=d,o.relatedTarget=f,m=null,Wr(a)===r&&((c=new c(h,p+"enter",u,t,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=kr(f))p++;for(f=0,m=h;m;m=kr(m))f++;for(;0<p-f;)c=kr(c),p--;for(;0<f-p;)h=kr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=kr(c),h=kr(h)}c=null}else c=null;null!==l&&Mr(s,o,l,c,!1),null!==u&&null!==d&&Mr(s,d,u,c,!0)}if("select"===(l=(o=r?Xr(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yt;else if(jt(o))if(Qt)g=rr;else{g=nr;var _=er}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=tr);switch(g&&(g=g(e,r))?Bt(s,g,t,a):(_&&_(e,o,r),"focusout"===e&&(_=o._wrapperState)&&_.controlled&&"number"===o.type&&ae(o,"number",o.value)),_=r?Xr(r):window,e){case"focusin":(jt(_)||"true"===_.contentEditable)&&(hr=_,fr=r,pr=null);break;case"focusout":pr=fr=hr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(s,t,a);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(s,t,a)}var y;if(kt)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ht?xt(e,t)&&(v="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(v="onCompositionStart");v&&(Lt&&"ko"!==t.locale&&(Ht||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ht&&(y=nt()):(Zn="value"in($n=a)?$n.value:$n.textContent,Ht=!0)),0<(_=Rr(r,v)).length&&(v=new vt(v,e,null,t,a),s.push({event:v,listeners:_}),y?v.data=y:null!==(y=Ft(t))&&(v.data=y))),(y=Ut?function(e,n){switch(e){case"compositionend":return Ft(n);case"keypress":return 32!==n.which?null:(Dt=!0,Pt);case"textInput":return(e=n.data)===Pt&&Dt?null:e;default:return null}}(e,t):function(e,n){if(Ht)return"compositionend"===e||!kt&&xt(e,n)?(e=nt(),et=Zn=$n=null,Ht=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Lt&&"ko"!==n.locale?null:n.data;default:return null}}(e,t))&&(0<(r=Rr(r,"onBeforeInput")).length&&(a=new vt("onBeforeInput","beforeinput",null,t,a),s.push({event:a,listeners:r}),a.data=y))}Cr(s,n)})}function Ir(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Rr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=He(e,t))&&r.unshift(Ir(e,i,a)),null!=(i=He(e,n))&&r.push(Ir(e,i,a))),e=e.return}return r}function kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,n,t,r,a){for(var i=n._reactName,s=[];null!==t&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=He(t,i))&&s.unshift(Ir(t,l,o)):a||null!=(l=He(t,i))&&s.push(Ir(t,l,o))),t=t.return}0!==s.length&&e.push({event:n,listeners:s})}function Ur(){}var Lr=null,Pr=null;function Dr(e,n){switch(e){case"button":case"input":case"select":case"textarea":return!!n.autoFocus}return!1}function xr(e,n){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var Fr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function jr(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break}return e}function Br(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var zr=0;var Vr=Math.random().toString(36).slice(2),qr="__reactFiber$"+Vr,Kr="__reactProps$"+Vr,Yr="__reactContainer$"+Vr,Qr="__reactEvents$"+Vr;function Wr(e){var n=e[qr];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Yr]||t[qr]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=Br(e);null!==e;){if(t=e[qr])return t;e=Br(e)}return n}t=(e=t).parentNode}return null}function Jr(e){return!(e=e[qr]||e[Yr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function $r(e){return e[Kr]||null}function Zr(e){var n=e[Qr];return void 0===n&&(n=e[Qr]=new Set),n}var ea=[],na=-1;function ta(e){return{current:e}}function ra(e){0>na||(e.current=ea[na],ea[na]=null,na--)}function aa(e,n){ea[++na]=e.current,e.current=n}var ia={},sa=ta(ia),oa=ta(!1),la=ia;function ua(e,n){var t=e.type.contextTypes;if(!t)return ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in t)i[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),i}function ca(e){return null!==(e=e.childContextTypes)&&void 0!==e}function da(){ra(oa),ra(sa)}function ha(e,n,t){if(sa.current!==ia)throw Error(s(168));aa(sa,n),aa(oa,t)}function fa(e,n,t){var r=e.stateNode;if(e=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,Y(n)||"Unknown",i));return a({},t,r)}function pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,la=sa.current,aa(sa,e),aa(oa,oa.current),!0}function ma(e,n,t){var r=e.stateNode;if(!r)throw Error(s(169));t?(e=fa(e,n,la),r.__reactInternalMemoizedMergedChildContext=e,ra(oa),ra(sa),aa(sa,e)):ra(oa),aa(oa,t)}var ga=null,_a=null,ya=i.unstable_runWithPriority,va=i.unstable_scheduleCallback,Ea=i.unstable_cancelCallback,ba=i.unstable_shouldYield,Ca=i.unstable_requestPaint,Na=i.unstable_now,Sa=i.unstable_getCurrentPriorityLevel,Oa=i.unstable_ImmediatePriority,Ta=i.unstable_UserBlockingPriority,Aa=i.unstable_NormalPriority,wa=i.unstable_LowPriority,Ia=i.unstable_IdlePriority,Ra={},ka=void 0!==Ca?Ca:function(){},Ma=null,Ua=null,La=!1,Pa=Na(),Da=1e4>Pa?Na:function(){return Na()-Pa};function xa(){switch(Sa()){case Oa:return 99;case Ta:return 98;case Aa:return 97;case wa:return 96;case Ia:return 95;default:throw Error(s(332))}}function Fa(e){switch(e){case 99:return Oa;case 98:return Ta;case 97:return Aa;case 96:return wa;case 95:return Ia;default:throw Error(s(332))}}function Ha(e,n){return e=Fa(e),ya(e,n)}function Ga(e,n,t){return e=Fa(e),va(e,n,t)}function ja(){if(null!==Ua){var e=Ua;Ua=null,Ea(e)}Ba()}function Ba(){if(!La&&null!==Ma){La=!0;var e=0;try{var n=Ma;Ha(99,function(){for(;e<n.length;e++){var t=n[e];do{t=t(!0)}while(null!==t)}}),Ma=null}catch(t){throw null!==Ma&&(Ma=Ma.slice(e+1)),va(Oa,ja),t}finally{La=!1}}}var za=b.ReactCurrentBatchConfig;function Va(e,n){if(e&&e.defaultProps){for(var t in n=a({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var qa=ta(null),Ka=null,Ya=null,Qa=null;function Wa(){Qa=Ya=Ka=null}function Ja(e){var n=qa.current;ra(qa),e.type._context._currentValue=n}function Xa(e,n){for(;null!==e;){var t=e.alternate;if((e.childLanes&n)===n){if(null===t||(t.childLanes&n)===n)break;t.childLanes|=n}else e.childLanes|=n,null!==t&&(t.childLanes|=n);e=e.return}}function $a(e,n){Ka=e,Qa=Ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(ws=!0),e.firstContext=null)}function Za(e,n){if(Qa!==e&&!1!==n&&0!==n)if("number"===typeof n&&1073741823!==n||(Qa=e,n=1073741823),n={context:e,observedBits:n,next:null},null===Ya){if(null===Ka)throw Error(s(308));Ya=n,Ka.dependencies={lanes:0,firstContext:n,responders:null}}else Ya=Ya.next=n;return e._currentValue}var ei=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ti(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ri(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ai(e,n){if(null!==(e=e.updateQueue)){var t=(e=e.shared).pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}}function ii(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,i=null;if(null!==(t=t.firstBaseUpdate)){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===i?a=i=s:i=i.next=s,t=t.next}while(null!==t);null===i?a=i=n:i=i.next=n}else a=i=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function si(e,n,t,r){var i=e.updateQueue;ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===o?s=c:o.next=c,o=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==o&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==s){for(h=i.baseState,o=0,d=c=u=null;;){l=s.lane;var f=s.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(l=n,f=t,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,h,l):p)||void 0===l)break e;h=a({},h,l);break e;case 2:ei=!0}}null!==s.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=f,u=h):d=d.next=f,o|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,Mo|=o,e.lanes=o,e.memoizedState=h}}function oi(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var li=(new r.Component).refs;function ui(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:a({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var ci={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=rl(),a=al(e),i=ri(r,a);i.payload=n,void 0!==t&&null!==t&&(i.callback=t),ai(e,i),il(e,a,r)},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=rl(),a=al(e),i=ri(r,a);i.tag=1,i.payload=n,void 0!==t&&null!==t&&(i.callback=t),ai(e,i),il(e,a,r)},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=rl(),r=al(e),a=ri(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),ai(e,a),il(e,r,t)}};function di(e,n,t,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!n.prototype||!n.prototype.isPureReactComponent||(!sr(t,r)||!sr(a,i))}function hi(e,n,t){var r=!1,a=ia,i=n.contextType;return"object"===typeof i&&null!==i?i=Za(i):(a=ca(n)?la:sa.current,i=(r=null!==(r=n.contextTypes)&&void 0!==r)?ua(e,a):ia),n=new n(t,i),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ci,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function fi(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&ci.enqueueReplaceState(n,n.state,null)}function pi(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs=li,ni(e);var i=n.contextType;"object"===typeof i&&null!==i?a.context=Za(i):(i=ca(n)?la:sa.current,a.context=ua(e,i)),si(e,t,a,r),a.state=e.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(ui(e,n,i,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&ci.enqueueReplaceState(a,a.state,null),si(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var mi=Array.isArray;function gi(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(s(309));var r=t.stateNode}if(!r)throw Error(s(147,e));var a=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===a?n.ref:((n=function(e){var n=r.refs;n===li&&(n=r.refs={}),null===e?delete n[a]:n[a]=e})._stringRef=a,n)}if("string"!==typeof e)throw Error(s(284));if(!t._owner)throw Error(s(290,e))}return e}function _i(e,n){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n))}function yi(e){function n(n,t){if(e){var r=n.lastEffect;null!==r?(r.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t,t.nextEffect=null,t.flags=8}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Ll(e,n)).index=0,e.sibling=null,e}function i(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags=2,t):r:(n.flags=2,t):t}function o(n){return e&&null===n.alternate&&(n.flags=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=Fl(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function u(e,n,t,r){return null!==n&&n.elementType===t.type?((r=a(n,t.props)).ref=gi(e,n,t),r.return=e,r):((r=Pl(t.type,t.key,t.props,null,e.mode,r)).ref=gi(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Hl(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function d(e,n,t,r,i){return null===n||7!==n.tag?((n=Dl(t,e.mode,r,i)).return=e,n):((n=a(n,t)).return=e,n)}function h(e,n,t){if("string"===typeof n||"number"===typeof n)return(n=Fl(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return(t=Pl(n.type,n.key,n.props,null,e.mode,t)).ref=gi(e,null,n),t.return=e,t;case N:return(n=Hl(n,e.mode,t)).return=e,n}if(mi(n)||B(n))return(n=Dl(n,e.mode,t,null)).return=e,n;_i(e,n)}return null}function f(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t||"number"===typeof t)return null!==a?null:l(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return t.key===a?t.type===S?d(e,n,t.props.children,r,a):u(e,n,t,r):null;case N:return t.key===a?c(e,n,t,r):null}if(mi(t)||B(t))return null!==a?null:d(e,n,t,r,null);_i(e,t)}return null}function p(e,n,t,r,a){if("string"===typeof r||"number"===typeof r)return l(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return e=e.get(null===r.key?t:r.key)||null,r.type===S?d(n,e,r.props.children,a,r.key):u(n,e,r,a);case N:return c(n,e=e.get(null===r.key?t:r.key)||null,r,a)}if(mi(r)||B(r))return d(n,e=e.get(t)||null,r,a,null);_i(n,r)}return null}function m(a,s,o,l){for(var u=null,c=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var _=f(a,d,o[m],l);if(null===_){null===d&&(d=g);break}e&&d&&null===_.alternate&&n(a,d),s=i(_,s,m),null===c?u=_:c.sibling=_,c=_,d=g}if(m===o.length)return t(a,d),u;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(a,d);m<o.length;m++)null!==(g=p(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=i(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return n(a,e)}),u}function g(a,o,l,u){var c=B(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=o,g=o=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=f(a,m,y.value,u);if(null===v){null===m&&(m=_);break}e&&m&&null===v.alternate&&n(a,m),o=i(v,o,g),null===d?c=v:d.sibling=v,d=v,m=_}if(y.done)return t(a,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,u))&&(o=i(y,o,g),null===d?c=y:d.sibling=y,d=y);return c}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return n(a,e)}),c}return function(e,r,i,l){var u="object"===typeof i&&null!==i&&i.type===S&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case C:e:{for(c=i.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(i.type===S){t(e,u.sibling),(r=a(u,i.props.children)).return=e,e=r;break e}break;default:if(u.elementType===i.type){t(e,u.sibling),(r=a(u,i.props)).ref=gi(e,u,i),r.return=e,e=r;break e}}t(e,u);break}n(e,u),u=u.sibling}i.type===S?((r=Dl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Pl(i.type,i.key,i.props,null,e.mode,l)).ref=gi(e,r,i),l.return=e,e=l)}return o(e);case N:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){t(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}t(e,r);break}n(e,r),r=r.sibling}(r=Hl(i,e.mode,l)).return=e,e=r}return o(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(t(e,r.sibling),(r=a(r,i)).return=e,e=r):(t(e,r),(r=Fl(i,e.mode,l)).return=e,e=r),o(e);if(mi(i))return m(e,r,i,l);if(B(i))return g(e,r,i,l);if(c&&_i(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Y(e.type)||"Component"))}return t(e,r)}}var vi=yi(!0),Ei=yi(!1),bi={},Ci=ta(bi),Ni=ta(bi),Si=ta(bi);function Oi(e){if(e===bi)throw Error(s(174));return e}function Ti(e,n){switch(aa(Si,n),aa(Ni,e),aa(Ci,bi),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:fe(null,"");break;default:n=fe(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}ra(Ci),aa(Ci,n)}function Ai(){ra(Ci),ra(Ni),ra(Si)}function wi(e){Oi(Si.current);var n=Oi(Ci.current),t=fe(n,e.type);n!==t&&(aa(Ni,e),aa(Ci,t))}function Ii(e){Ni.current===e&&(ra(Ci),ra(Ni))}var Ri=ta(0);function ki(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(64&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Mi=null,Ui=null,Li=!1;function Pi(e,n){var t=Ml(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=n,t.return=e,t.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t}function Di(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,!0);case 13:default:return!1}}function xi(e){if(Li){var n=Ui;if(n){var t=n;if(!Di(e,n)){if(!(n=jr(t.nextSibling))||!Di(e,n))return e.flags=-1025&e.flags|2,Li=!1,void(Mi=e);Pi(Mi,t)}Mi=e,Ui=jr(n.firstChild)}else e.flags=-1025&e.flags|2,Li=!1,Mi=e}}function Fi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Mi=e}function Hi(e){if(e!==Mi)return!1;if(!Li)return Fi(e),Li=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!xr(n,e.memoizedProps))for(n=Ui;n;)Pi(e,n),n=jr(n.nextSibling);if(Fi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){Ui=jr(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}Ui=null}}else Ui=Mi?jr(e.stateNode.nextSibling):null;return!0}function Gi(){Ui=Mi=null,Li=!1}var ji=[];function Bi(){for(var e=0;e<ji.length;e++)ji[e]._workInProgressVersionPrimary=null;ji.length=0}var zi=b.ReactCurrentDispatcher,Vi=b.ReactCurrentBatchConfig,qi=0,Ki=null,Yi=null,Qi=null,Wi=!1,Ji=!1;function Xi(){throw Error(s(321))}function $i(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!ar(e[t],n[t]))return!1;return!0}function Zi(e,n,t,r,a,i){if(qi=i,Ki=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,zi.current=null===e||null===e.memoizedState?Ss:Os,e=t(r,a),Ji){i=0;do{if(Ji=!1,!(25>i))throw Error(s(301));i+=1,Qi=Yi=null,n.updateQueue=null,zi.current=Ts,e=t(r,a)}while(Ji)}if(zi.current=Ns,n=null!==Yi&&null!==Yi.next,qi=0,Qi=Yi=Ki=null,Wi=!1,n)throw Error(s(300));return e}function es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qi?Ki.memoizedState=Qi=e:Qi=Qi.next=e,Qi}function ns(){if(null===Yi){var e=Ki.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var n=null===Qi?Ki.memoizedState:Qi.next;if(null!==n)Qi=n,Yi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===Qi?Ki.memoizedState=Qi=e:Qi=Qi.next=e}return Qi}function ts(e,n){return"function"===typeof n?n(e):n}function rs(e){var n=ns(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=Yi,a=r.baseQueue,i=t.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,t.pending=null}if(null!==a){a=a.next,r=r.baseState;var l=o=i=null,u=a;do{var c=u.lane;if((qi&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,Ki.lanes|=c,Mo|=c}u=u.next}while(null!==u&&u!==a);null===l?i=r:l.next=o,ar(r,n.memoizedState)||(ws=!0),n.memoizedState=r,n.baseState=i,n.baseQueue=l,t.lastRenderedState=r}return[n.memoizedState,t.dispatch]}function as(e){var n=ns(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,i=n.memoizedState;if(null!==a){t.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);ar(i,n.memoizedState)||(ws=!0),n.memoizedState=i,null===n.baseQueue&&(n.baseState=i),t.lastRenderedState=i}return[i,r]}function is(e,n,t){var r=n._getVersion;r=r(n._source);var a=n._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(qi&e)===e)&&(n._workInProgressVersionPrimary=r,ji.push(n))),e)return t(n._source);throw ji.push(n),Error(s(350))}function ss(e,n,t,r){var a=So;if(null===a)throw Error(s(349));var i=n._getVersion,o=i(n._source),l=zi.current,u=l.useState(function(){return is(a,n,t)}),c=u[1],d=u[0];u=Qi;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var g=Ki;return e.memoizedState={refs:f,source:n,subscribe:r},l.useEffect(function(){f.getSnapshot=t,f.setSnapshot=c;var e=i(n._source);if(!ar(o,e)){e=t(n._source),ar(d,e)||(c(e),e=al(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,s=e;0<s;){var l=31-Bn(s),u=1<<l;r[l]|=e,s&=~u}}},[t,n,r]),l.useEffect(function(){return r(n._source,function(){var e=f.getSnapshot,t=f.setSnapshot;try{t(e(n._source));var r=al(g);a.mutableReadLanes|=r&a.pendingLanes}catch(i){t(function(){throw i})}})},[n,r]),ar(p,t)&&ar(m,n)&&ar(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ts,lastRenderedState:d}).dispatch=c=Cs.bind(null,Ki,e),u.queue=e,u.baseQueue=null,d=is(a,n,t),u.memoizedState=u.baseState=d),d}function os(e,n,t){return ss(ns(),e,n,t)}function ls(e){var n=es();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e}).dispatch=Cs.bind(null,Ki,e),[n.memoizedState,e]}function us(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=Ki.updateQueue)?(n={lastEffect:null},Ki.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function cs(e){return e={current:e},es().memoizedState=e}function ds(){return ns().memoizedState}function hs(e,n,t,r){var a=es();Ki.flags|=e,a.memoizedState=us(1|n,t,void 0,void 0===r?null:r)}function fs(e,n,t,r){var a=ns();r=void 0===r?null:r;var i=void 0;if(null!==Yi){var s=Yi.memoizedState;if(i=s.destroy,null!==r&&$i(r,s.deps))return void us(n,t,i,r)}Ki.flags|=e,a.memoizedState=us(1|n,t,i,r)}function ps(e,n){return hs(516,4,e,n)}function ms(e,n){return fs(516,4,e,n)}function gs(e,n){return fs(4,2,e,n)}function _s(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function ys(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,fs(4,2,_s.bind(null,n,e),t)}function vs(){}function Es(e,n){var t=ns();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&$i(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function bs(e,n){var t=ns();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&$i(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Cs(e,n,t){var r=rl(),a=al(e),i={lane:a,action:t,eagerReducer:null,eagerState:null,next:null},s=n.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),n.pending=i,s=e.alternate,e===Ki||null!==s&&s===Ki)Ji=Wi=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=n.lastRenderedReducer))try{var o=n.lastRenderedState,l=s(o,t);if(i.eagerReducer=s,i.eagerState=l,ar(l,o))return}catch(u){}il(e,a,r)}}var Ns={readContext:Za,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useOpaqueIdentifier:Xi,unstable_isNewReconciler:!1},Ss={readContext:Za,useCallback:function(e,n){return es().memoizedState=[e,void 0===n?null:n],e},useContext:Za,useEffect:ps,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,hs(4,2,_s.bind(null,n,e),t)},useLayoutEffect:function(e,n){return hs(4,2,e,n)},useMemo:function(e,n){var t=es();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=es();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:n}).dispatch=Cs.bind(null,Ki,e),[r.memoizedState,e]},useRef:cs,useState:ls,useDebugValue:vs,useDeferredValue:function(e){var n=ls(e),t=n[0],r=n[1];return ps(function(){var n=Vi.transition;Vi.transition=1;try{r(e)}finally{Vi.transition=n}},[e]),t},useTransition:function(){var e=ls(!1),n=e[0];return cs(e=function(e,n){var t=xa();Ha(98>t?98:t,function(){e(!0)}),Ha(97<t?97:t,function(){var t=Vi.transition;Vi.transition=1;try{e(!1),n()}finally{Vi.transition=t}})}.bind(null,e[1])),[e,n]},useMutableSource:function(e,n,t){var r=es();return r.memoizedState={refs:{getSnapshot:n,setSnapshot:null},source:e,subscribe:t},ss(r,e,n,t)},useOpaqueIdentifier:function(){if(Li){var e=!1,n=function(e){return{$$typeof:P,toString:e,valueOf:e}}(function(){throw e||(e=!0,t("r:"+(zr++).toString(36))),Error(s(355))}),t=ls(n)[1];return 0===(2&Ki.mode)&&(Ki.flags|=516,us(5,function(){t("r:"+(zr++).toString(36))},void 0,null)),n}return ls(n="r:"+(zr++).toString(36)),n},unstable_isNewReconciler:!1},Os={readContext:Za,useCallback:Es,useContext:Za,useEffect:ms,useImperativeHandle:ys,useLayoutEffect:gs,useMemo:bs,useReducer:rs,useRef:ds,useState:function(){return rs(ts)},useDebugValue:vs,useDeferredValue:function(e){var n=rs(ts),t=n[0],r=n[1];return ms(function(){var n=Vi.transition;Vi.transition=1;try{r(e)}finally{Vi.transition=n}},[e]),t},useTransition:function(){var e=rs(ts)[0];return[ds().current,e]},useMutableSource:os,useOpaqueIdentifier:function(){return rs(ts)[0]},unstable_isNewReconciler:!1},Ts={readContext:Za,useCallback:Es,useContext:Za,useEffect:ms,useImperativeHandle:ys,useLayoutEffect:gs,useMemo:bs,useReducer:as,useRef:ds,useState:function(){return as(ts)},useDebugValue:vs,useDeferredValue:function(e){var n=as(ts),t=n[0],r=n[1];return ms(function(){var n=Vi.transition;Vi.transition=1;try{r(e)}finally{Vi.transition=n}},[e]),t},useTransition:function(){var e=as(ts)[0];return[ds().current,e]},useMutableSource:os,useOpaqueIdentifier:function(){return as(ts)[0]},unstable_isNewReconciler:!1},As=b.ReactCurrentOwner,ws=!1;function Is(e,n,t,r){n.child=null===e?Ei(n,null,t,r):vi(n,e.child,t,r)}function Rs(e,n,t,r,a){t=t.render;var i=n.ref;return $a(n,a),r=Zi(e,n,t,r,i,a),null===e||ws?(n.flags|=1,Is(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-517,e.lanes&=~a,Xs(e,n,a))}function ks(e,n,t,r,a,i){if(null===e){var s=t.type;return"function"!==typeof s||Ul(s)||void 0!==s.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Pl(t.type,null,r,n,n.mode,i)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=s,Ms(e,n,s,r,a,i))}return s=e.child,0===(a&i)&&(a=s.memoizedProps,(t=null!==(t=t.compare)?t:sr)(a,r)&&e.ref===n.ref)?Xs(e,n,i):(n.flags|=1,(e=Ll(s,r)).ref=n.ref,e.return=n,n.child=e)}function Ms(e,n,t,r,a,i){if(null!==e&&sr(e.memoizedProps,r)&&e.ref===n.ref){if(ws=!1,0===(i&a))return n.lanes=e.lanes,Xs(e,n,i);0!==(16384&e.flags)&&(ws=!0)}return Ps(e,n,t,r,i)}function Us(e,n,t){var r=n.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&n.mode))n.memoizedState={baseLanes:0},hl(n,t);else{if(0===(1073741824&t))return e=null!==i?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e},hl(n,e),null;n.memoizedState={baseLanes:0},hl(n,null!==i?i.baseLanes:t)}else null!==i?(r=i.baseLanes|t,n.memoizedState=null):r=t,hl(n,r);return Is(e,n,a,t),n.child}function Ls(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=128)}function Ps(e,n,t,r,a){var i=ca(t)?la:sa.current;return i=ua(n,i),$a(n,a),t=Zi(e,n,t,r,i,a),null===e||ws?(n.flags|=1,Is(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-517,e.lanes&=~a,Xs(e,n,a))}function Ds(e,n,t,r,a){if(ca(t)){var i=!0;pa(n)}else i=!1;if($a(n,a),null===n.stateNode)null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),hi(n,t,r),pi(n,t,r,a),r=!0;else if(null===e){var s=n.stateNode,o=n.memoizedProps;s.props=o;var l=s.context,u=t.contextType;"object"===typeof u&&null!==u?u=Za(u):u=ua(n,u=ca(t)?la:sa.current);var c=t.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&fi(n,s,r,u),ei=!1;var h=n.memoizedState;s.state=h,si(n,r,s,a),l=n.memoizedState,o!==r||h!==l||oa.current||ei?("function"===typeof c&&(ui(n,t,c,r),l=n.memoizedState),(o=ei||di(n,t,o,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(n.flags|=4)):("function"===typeof s.componentDidMount&&(n.flags|=4),n.memoizedProps=r,n.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"===typeof s.componentDidMount&&(n.flags|=4),r=!1)}else{s=n.stateNode,ti(e,n),o=n.memoizedProps,u=n.type===n.elementType?o:Va(n.type,o),s.props=u,d=n.pendingProps,h=s.context,"object"===typeof(l=t.contextType)&&null!==l?l=Za(l):l=ua(n,l=ca(t)?la:sa.current);var f=t.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&fi(n,s,r,l),ei=!1,h=n.memoizedState,s.state=h,si(n,r,s,a);var p=n.memoizedState;o!==d||h!==p||oa.current||ei?("function"===typeof f&&(ui(n,t,f,r),p=n.memoizedState),(u=ei||di(n,t,u,r,h,p,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(n.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(n.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=256),n.memoizedProps=r,n.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=256),r=!1)}return xs(e,n,t,r,i,a)}function xs(e,n,t,r,a,i){Ls(e,n);var s=0!==(64&n.flags);if(!r&&!s)return a&&ma(n,t,!1),Xs(e,n,i);r=n.stateNode,As.current=n;var o=s&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&s?(n.child=vi(n,e.child,null,i),n.child=vi(n,null,o,i)):Is(e,n,o,i),n.memoizedState=r.state,a&&ma(n,t,!0),n.child}function Fs(e){var n=e.stateNode;n.pendingContext?ha(0,n.pendingContext,n.pendingContext!==n.context):n.context&&ha(0,n.context,!1),Ti(e,n.containerInfo)}var Hs,Gs,js,Bs,zs={dehydrated:null,retryLane:0};function Vs(e,n,t){var r,a=n.pendingProps,i=Ri.current,s=!1;return(r=0!==(64&n.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,n.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),aa(Ri,1&i),null===e?(void 0!==a.fallback&&xi(n),e=a.children,i=a.fallback,s?(e=qs(n,e,i,t),n.child.memoizedState={baseLanes:t},n.memoizedState=zs,e):"number"===typeof a.unstable_expectedLoadTime?(e=qs(n,e,i,t),n.child.memoizedState={baseLanes:t},n.memoizedState=zs,n.lanes=33554432,e):((t=xl({mode:"visible",children:e},n.mode,t,null)).return=n,n.child=t)):(e.memoizedState,s?(a=Ys(e,n,a.children,a.fallback,t),s=n.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=e.childLanes&~t,n.memoizedState=zs,a):(t=Ks(e,n,a.children,t),n.memoizedState=null,t))}function qs(e,n,t,r){var a=e.mode,i=e.child;return n={mode:"hidden",children:n},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=n):i=xl(n,a,0,null),t=Dl(t,a,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,t}function Ks(e,n,t,r){var a=e.child;return e=a.sibling,t=Ll(a,{mode:"visible",children:t}),0===(2&n.mode)&&(t.lanes=r),t.return=n,t.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,n.firstEffect=n.lastEffect=e),n.child=t}function Ys(e,n,t,r,a){var i=n.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:t};return 0===(2&i)&&n.child!==s?((t=n.child).childLanes=0,t.pendingProps=o,null!==(s=t.lastEffect)?(n.firstEffect=t.firstEffect,n.lastEffect=s,s.nextEffect=null):n.firstEffect=n.lastEffect=null):t=Ll(s,o),null!==e?r=Ll(e,r):(r=Dl(r,i,a,null)).flags|=2,r.return=n,t.return=n,t.sibling=r,n.child=t,r}function Qs(e,n){e.lanes|=n;var t=e.alternate;null!==t&&(t.lanes|=n),Xa(e.return,n)}function Ws(e,n,t,r,a,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a,lastEffect:i}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=a,s.lastEffect=i)}function Js(e,n,t){var r=n.pendingProps,a=r.revealOrder,i=r.tail;if(Is(e,n,r.children,t),0!==(2&(r=Ri.current)))r=1&r|2,n.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qs(e,t);else if(19===e.tag)Qs(e,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(aa(Ri,r),0===(2&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===ki(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Ws(n,!1,a,t,i,n.lastEffect);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ki(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Ws(n,!0,t,null,i,n.lastEffect);break;case"together":Ws(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function Xs(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Mo|=n.lanes,0!==(t&n.childLanes)){if(null!==e&&n.child!==e.child)throw Error(s(153));if(null!==n.child){for(t=Ll(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Ll(e,e.pendingProps)).return=n;t.sibling=null}return n.child}return null}function $s(e,n){if(!Li)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zs(e,n,t){var r=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ca(n.type)&&da(),null;case 3:return Ai(),ra(oa),ra(sa),Bi(),(r=n.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Hi(n)?n.flags|=4:r.hydrate||(n.flags|=256)),Gs(n),null;case 5:Ii(n);var i=Oi(Si.current);if(t=n.type,null!==e&&null!=n.stateNode)js(e,n,t,r,i),e.ref!==n.ref&&(n.flags|=128);else{if(!r){if(null===n.stateNode)throw Error(s(166));return null}if(e=Oi(Ci.current),Hi(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[qr]=n,r[Kr]=o,t){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<vr.length;e++)Nr(vr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,o),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Nr("invalid",r);break;case"textarea":le(r,o),Nr("invalid",r)}for(var u in Ne(t,o),e=null,o)o.hasOwnProperty(u)&&(i=o[u],"children"===u?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&Nr("scroll",r));switch(t){case"input":J(r),re(r,o,!0);break;case"textarea":J(r),ce(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Ur)}r=e,n.updateQueue=r,null!==r&&(n.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,e===de.html&&(e=he(t)),e===de.html?"script"===t?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(t,{is:r.is}):(e=u.createElement(t),"select"===t&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,t),e[qr]=n,e[Kr]=r,Hs(e,n,!1,!1),n.stateNode=e,u=Se(t,r),t){case"dialog":Nr("cancel",e),Nr("close",e),i=r;break;case"iframe":case"object":case"embed":Nr("load",e),i=r;break;case"video":case"audio":for(i=0;i<vr.length;i++)Nr(vr[i],e);i=r;break;case"source":Nr("error",e),i=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),i=r;break;case"details":Nr("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Nr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":le(e,r),i=oe(e,r),Nr("invalid",e);break;default:i=r}Ne(t,i);var c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?be(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ge(e,d):"children"===o?"string"===typeof d?("textarea"!==t||""!==d)&&_e(e,d):"number"===typeof d&&_e(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Nr("scroll",e):null!=d&&E(e,o,d,u))}switch(t){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Ur)}Dr(t,r)&&(n.flags|=4)}null!==n.ref&&(n.flags|=128)}return null;case 6:if(e&&null!=n.stateNode)Bs(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(s(166));t=Oi(Si.current),Oi(Ci.current),Hi(n)?(r=n.stateNode,t=n.memoizedProps,r[qr]=n,r.nodeValue!==t&&(n.flags|=4)):((r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[qr]=n,n.stateNode=r)}return null;case 13:return ra(Ri),r=n.memoizedState,0!==(64&n.flags)?(n.lanes=t,n):(r=null!==r,t=!1,null===e?void 0!==n.memoizedProps.fallback&&Hi(n):t=null!==e.memoizedState,r&&!t&&0!==(2&n.mode)&&(null===e&&!0!==n.memoizedProps.unstable_avoidThisFallback||0!==(1&Ri.current)?0===Io&&(Io=3):(0!==Io&&3!==Io||(Io=4),null===So||0===(134217727&Mo)&&0===(134217727&Uo)||ll(So,To))),(r||t)&&(n.flags|=4),null);case 4:return Ai(),Gs(n),null===e&&Or(n.stateNode.containerInfo),null;case 10:return Ja(n),null;case 17:return ca(n.type)&&da(),null;case 19:if(ra(Ri),null===(r=n.memoizedState))return null;if(o=0!==(64&n.flags),null===(u=r.rendering))if(o)$s(r,!1);else{if(0!==Io||null!==e&&0!==(64&e.flags))for(e=n.child;null!==e;){if(null!==(u=ki(e))){for(n.flags|=64,$s(r,!1),null!==(o=u.updateQueue)&&(n.updateQueue=o,n.flags|=4),null===r.lastEffect&&(n.firstEffect=null),n.lastEffect=r.lastEffect,r=t,t=n.child;null!==t;)e=r,(o=t).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return aa(Ri,1&Ri.current|2),n.child}e=e.sibling}null!==r.tail&&Da()>xo&&(n.flags|=64,o=!0,$s(r,!1),n.lanes=33554432)}else{if(!o)if(null!==(e=ki(u))){if(n.flags|=64,o=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),$s(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Li)return null!==(n=n.lastEffect=r.lastEffect)&&(n.nextEffect=null),null}else 2*Da()-r.renderingStartTime>xo&&1073741824!==t&&(n.flags|=64,o=!0,$s(r,!1),n.lanes=33554432);r.isBackwards?(u.sibling=n.child,n.child=u):(null!==(t=r.last)?t.sibling=u:n.child=u,r.last=u)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=n.lastEffect,r.renderingStartTime=Da(),t.sibling=null,n=Ri.current,aa(Ri,o?1&n|2:1&n),t):null;case 23:case 24:return fl(),null!==e&&null!==e.memoizedState!==(null!==n.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(n.flags|=4),null}throw Error(s(156,n.tag))}function eo(e){switch(e.tag){case 1:ca(e.type)&&da();var n=e.flags;return 4096&n?(e.flags=-4097&n|64,e):null;case 3:if(Ai(),ra(oa),ra(sa),Bi(),0!==(64&(n=e.flags)))throw Error(s(285));return e.flags=-4097&n|64,e;case 5:return Ii(e),null;case 13:return ra(Ri),4096&(n=e.flags)?(e.flags=-4097&n|64,e):null;case 19:return ra(Ri),null;case 4:return Ai(),null;case 10:return Ja(e),null;case 23:case 24:return fl(),null;default:return null}}function no(e,n){try{var t="",r=n;do{t+=K(r),r=r.return}while(r);var a=t}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:n,stack:a}}function to(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}Hs=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Gs=function(){},js=function(e,n,t,r){var i=e.memoizedProps;if(i!==r){e=n.stateNode,Oi(Ci.current);var s,o=null;switch(t){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"option":i=ie(e,i),r=ie(e,r),o=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":i=oe(e,i),r=oe(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(d in Ne(t,r),t=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(t||(t={}),t[s]=c[s])}else t||(o||(o=[]),o.push(d,t)),t=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Nr("scroll",e),o||u===c||(o=[])):"object"===typeof c&&null!==c&&c.$$typeof===P?c.toString():(o=o||[]).push(d,c))}t&&(o=o||[]).push("style",t);var d=o;(n.updateQueue=d)&&(n.flags|=4)}},Bs=function(e,n,t,r){t!==r&&(n.flags|=4)};var ro="function"===typeof WeakMap?WeakMap:Map;function ao(e,n,t){(t=ri(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){jo||(jo=!0,Bo=r),to(0,n)},t}function io(e,n,t){(t=ri(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return to(0,n),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(t.callback=function(){"function"!==typeof r&&(null===zo?zo=new Set([this]):zo.add(this),to(0,n));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}var so="function"===typeof WeakSet?WeakSet:Set;function oo(e){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(t){Il(e,t)}else n.current=null}function lo(e,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&n.flags&&null!==e){var t=e.memoizedProps,r=e.memoizedState;n=(e=n.stateNode).getSnapshotBeforeUpdate(n.elementType===n.type?t:Va(n.type,t),r),e.__reactInternalSnapshotBeforeUpdate=n}return;case 3:return void(256&n.flags&&Gr(n.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function uo(e,n,t){switch(t.tag){case 0:case 11:case 15:case 22:if(null!==(n=null!==(n=t.updateQueue)?n.lastEffect:null)){e=n=n.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==n)}if(null!==(n=null!==(n=t.updateQueue)?n.lastEffect:null)){e=n=n.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Tl(t,e),Ol(t,e)),e=r}while(e!==n)}return;case 1:return e=t.stateNode,4&t.flags&&(null===n?e.componentDidMount():(r=t.elementType===t.type?n.memoizedProps:Va(t.type,n.memoizedProps),e.componentDidUpdate(r,n.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(n=t.updateQueue)&&oi(t,n,e));case 3:if(null!==(n=t.updateQueue)){if(e=null,null!==t.child)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}oi(t,n,e)}return;case 5:return e=t.stateNode,void(null===n&&4&t.flags&&Dr(t.type,t.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===t.memoizedState&&(t=t.alternate,null!==t&&(t=t.memoizedState,null!==t&&(t=t.dehydrated,null!==t&&bn(t)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function co(e,n){for(var t=e;;){if(5===t.tag){var r=t.stateNode;if(n)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var a=t.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ee("display",a)}}else if(6===t.tag)t.stateNode.nodeValue=n?"":t.memoizedProps;else if((23!==t.tag&&24!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function ho(e,n){if(_a&&"function"===typeof _a.onCommitFiberUnmount)try{_a.onCommitFiberUnmount(ga,n)}catch(i){}switch(n.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=n.updateQueue)&&null!==(e=e.lastEffect)){var t=e=e.next;do{var r=t,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Tl(n,t);else{r=n;try{a()}catch(i){Il(r,i)}}t=t.next}while(t!==e)}break;case 1:if(oo(n),"function"===typeof(e=n.stateNode).componentWillUnmount)try{e.props=n.memoizedProps,e.state=n.memoizedState,e.componentWillUnmount()}catch(i){Il(n,i)}break;case 5:oo(n);break;case 4:go(e,n)}}function fo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function po(e){return 5===e.tag||3===e.tag||4===e.tag}function mo(e){e:{for(var n=e.return;null!==n;){if(po(n))break e;n=n.return}throw Error(s(160))}var t=n;switch(n=t.stateNode,t.tag){case 5:var r=!1;break;case 3:case 4:n=n.containerInfo,r=!0;break;default:throw Error(s(161))}16&t.flags&&(_e(n,""),t.flags&=-17);e:n:for(t=e;;){for(;null===t.sibling;){if(null===t.return||po(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue n;if(null===t.child||4===t.tag)continue n;t.child.return=t,t=t.child}if(!(2&t.flags)){t=t.stateNode;break e}}r?function e(n,t,r){var a=n.tag,i=5===a||6===a;if(i)n=i?n.stateNode:n.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(n,t):r.insertBefore(n,t):(8===r.nodeType?(t=r.parentNode,t.insertBefore(n,r)):(t=r,t.appendChild(n)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==t.onclick||(t.onclick=Ur));else if(4!==a&&(n=n.child,null!==n))for(e(n,t,r),n=n.sibling;null!==n;)e(n,t,r),n=n.sibling}(e,t,n):function e(n,t,r){var a=n.tag,i=5===a||6===a;if(i)n=i?n.stateNode:n.stateNode.instance,t?r.insertBefore(n,t):r.appendChild(n);else if(4!==a&&(n=n.child,null!==n))for(e(n,t,r),n=n.sibling;null!==n;)e(n,t,r),n=n.sibling}(e,t,n)}function go(e,n){for(var t,r,a=n,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(s(160));switch(t=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:t=t.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var o=e,l=a,u=l;;)if(ho(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(o=t,l=a.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):t.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){t=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(ho(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function _o(e,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:var t=n.updateQueue;if(null!==(t=null!==t?t.lastEffect:null)){var r=t=t.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==t)}return;case 1:return;case 5:if(null!=(t=n.stateNode)){r=n.memoizedProps;var a=null!==e?e.memoizedProps:r;e=n.type;var i=n.updateQueue;if(n.updateQueue=null,null!==i){for(t[Kr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ne(t,r),Se(e,a),n=Se(e,r),a=0;a<i.length;a+=2){var o=i[a],l=i[a+1];"style"===o?be(t,l):"dangerouslySetInnerHTML"===o?ge(t,l):"children"===o?_e(t,l):E(t,o,l,n)}switch(e){case"input":te(t,r);break;case"textarea":ue(t,r);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?se(t,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(t,!!r.multiple,r.defaultValue,!0):se(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===n.stateNode)throw Error(s(162));return void(n.stateNode.nodeValue=n.memoizedProps);case 3:return void((t=n.stateNode).hydrate&&(t.hydrate=!1,bn(t.containerInfo)));case 12:return;case 13:return null!==n.memoizedState&&(Do=Da(),co(n.child,!0)),void yo(n);case 19:return void yo(n);case 17:return;case 23:case 24:return void co(n,null!==n.memoizedState)}throw Error(s(163))}function yo(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new so),n.forEach(function(n){var r=function(e,n){var t=e.stateNode;null!==t&&t.delete(n),0===(n=0)&&(0===(2&(n=e.mode))?n=1:0===(4&n)?n=99===xa()?1:2:(0===Zo&&(Zo=ko),0===(n=Gn(62914560&~Zo))&&(n=4194304))),t=rl(),null!==(e=sl(e,n))&&(jn(e,n,t),ol(e,t))}.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function vo(e,n){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(n=n.memoizedState)&&null===n.dehydrated)}var Eo=Math.ceil,bo=b.ReactCurrentDispatcher,Co=b.ReactCurrentOwner,No=0,So=null,Oo=null,To=0,Ao=0,wo=ta(0),Io=0,Ro=null,ko=0,Mo=0,Uo=0,Lo=0,Po=null,Do=0,xo=1/0;function Fo(){xo=Da()+500}var Ho,Go=null,jo=!1,Bo=null,zo=null,Vo=!1,qo=null,Ko=90,Yo=[],Qo=[],Wo=null,Jo=0,Xo=null,$o=-1,Zo=0,el=0,nl=null,tl=!1;function rl(){return 0!==(48&No)?Da():-1!==$o?$o:$o=Da()}function al(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===xa()?1:2;if(0===Zo&&(Zo=ko),0!==za.transition){0!==el&&(el=null!==Po?Po.pendingLanes:0),e=Zo;var n=4186112&~el;return 0===(n&=-n)&&(0===(n=(e=4186112&~e)&-e)&&(n=8192)),n}return e=xa(),0!==(4&No)&&98===e?e=Hn(12,Zo):e=Hn(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Zo),e}function il(e,n,t){if(50<Jo)throw Jo=0,Xo=null,Error(s(185));if(null===(e=sl(e,n)))return null;jn(e,n,t),e===So&&(Uo|=n,4===Io&&ll(e,To));var r=xa();1===n?0!==(8&No)&&0===(48&No)?ul(e):(ol(e,t),0===No&&(Fo(),ja())):(0===(4&No)||98!==r&&99!==r||(null===Wo?Wo=new Set([e]):Wo.add(e)),ol(e,t)),Po=e}function sl(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}function ol(e,n){for(var t=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Bn(o),u=1<<l,c=i[l];if(-1===c){if(0===(u&r)||0!==(u&a)){c=n,Dn(u);var d=Pn;i[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=n&&(e.expiredLanes|=u);o&=~u}if(r=xn(e,e===So?To:0),n=Pn,0===r)null!==t&&(t!==Ra&&Ea(t),e.callbackNode=null,e.callbackPriority=0);else{if(null!==t){if(e.callbackPriority===n)return;t!==Ra&&Ea(t)}15===n?(t=ul.bind(null,e),null===Ma?(Ma=[t],Ua=va(Oa,Ba)):Ma.push(t),t=Ra):14===n?t=Ga(99,ul.bind(null,e)):t=Ga(t=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(n),function e(n){$o=-1;el=Zo=0;if(0!==(48&No))throw Error(s(327));var t=n.callbackNode;if(Sl()&&n.callbackNode!==t)return null;var r=xn(n,n===So?To:0);if(0===r)return null;var a=r;var i=No;No|=16;var o=gl();So===n&&To===a||(Fo(),pl(n,a));for(;;)try{vl();break}catch(l){ml(n,l)}Wa();bo.current=o;No=i;null!==Oo?a=0:(So=null,To=0,a=Io);if(0!==(ko&Uo))pl(n,0);else if(0!==a){if(2===a&&(No|=64,n.hydrate&&(n.hydrate=!1,Gr(n.containerInfo)),0!==(r=Fn(n))&&(a=_l(n,r))),1===a)throw t=Ro,pl(n,0),ll(n,r),ol(n,Da()),t;switch(n.finishedWork=n.current.alternate,n.finishedLanes=r,a){case 0:case 1:throw Error(s(345));case 2:Cl(n);break;case 3:if(ll(n,r),(62914560&r)===r&&10<(a=Do+500-Da())){if(0!==xn(n,0))break;if(((i=n.suspendedLanes)&r)!==r){rl(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Fr(Cl.bind(null,n),a);break}Cl(n);break;case 4:if(ll(n,r),(4186112&r)===r)break;for(a=n.eventTimes,i=-1;0<r;){var u=31-Bn(r);o=1<<u,(u=a[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Da()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eo(r/1960))-r)){n.timeoutHandle=Fr(Cl.bind(null,n),r);break}Cl(n);break;case 5:Cl(n);break;default:throw Error(s(329))}}ol(n,Da());return n.callbackNode===t?e.bind(null,n):null}.bind(null,e)),e.callbackPriority=n,e.callbackNode=t}}function ll(e,n){for(n&=~Lo,n&=~Uo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-Bn(n),r=1<<t;e[t]=-1,n&=~r}}function ul(e){if(0!==(48&No))throw Error(s(327));if(Sl(),e===So&&0!==(e.expiredLanes&To)){var n=To,t=_l(e,n);0!==(ko&Uo)&&(t=_l(e,n=xn(e,n)))}else t=_l(e,n=xn(e,0));if(0!==e.tag&&2===t&&(No|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Fn(e))&&(t=_l(e,n))),1===t)throw t=Ro,pl(e,0),ll(e,n),ol(e,Da()),t;return e.finishedWork=e.current.alternate,e.finishedLanes=n,Cl(e),ol(e,Da()),null}function cl(e,n){var t=No;No|=1;try{return e(n)}finally{0===(No=t)&&(Fo(),ja())}}function dl(e,n){var t=No;No&=-2,No|=8;try{return e(n)}finally{0===(No=t)&&(Fo(),ja())}}function hl(e,n){aa(wo,Ao),Ao|=n,ko|=n}function fl(){Ao=wo.current,ra(wo)}function pl(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,Hr(t)),null!==Oo)for(t=Oo.return;null!==t;){var r=t;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&da();break;case 3:Ai(),ra(oa),ra(sa),Bi();break;case 5:Ii(r);break;case 4:Ai();break;case 13:case 19:ra(Ri);break;case 10:Ja(r);break;case 23:case 24:fl()}t=t.return}So=e,Oo=Ll(e.current,null),To=Ao=ko=n,Io=0,Ro=null,Lo=Uo=Mo=0}function ml(e,n){for(;;){var t=Oo;try{if(Wa(),zi.current=Ns,Wi){for(var r=Ki.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Wi=!1}if(qi=0,Qi=Yi=Ki=null,Ji=!1,Co.current=null,null===t||null===t.return){Io=1,Ro=n,Oo=null;break}e:{var i=e,s=t.return,o=t,l=n;if(n=To,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=0!==(1&Ri.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var g=h.updateQueue;if(null===g){var _=new Set;_.add(u),h.updateQueue=_}else g.add(u);if(0===(2&h.mode)){if(h.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=ri(-1,1);y.tag=2,ai(o,y)}o.lanes|=1;break e}l=void 0,o=n;var v=i.pingCache;if(null===v?(v=i.pingCache=new ro,l=new Set,v.set(u,l)):void 0===(l=v.get(u))&&(l=new Set,v.set(u,l)),!l.has(o)){l.add(o);var E=Rl.bind(null,i,u,o);u.then(E,E)}h.flags|=4096,h.lanes=n;break e}h=h.return}while(null!==h);l=Error((Y(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Io&&(Io=2),l=no(l,o),h=s;do{switch(h.tag){case 3:i=l,h.flags|=4096,n&=-n,h.lanes|=n,ii(h,ao(0,i,n));break e;case 1:i=l;var b=h.type,C=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===zo||!zo.has(C)))){h.flags|=4096,n&=-n,h.lanes|=n,ii(h,io(h,i,n));break e}}h=h.return}while(null!==h)}bl(t)}catch(N){n=N,Oo===t&&null!==t&&(Oo=t=t.return);continue}break}}function gl(){var e=bo.current;return bo.current=Ns,null===e?Ns:e}function _l(e,n){var t=No;No|=16;var r=gl();for(So===e&&To===n||pl(e,n);;)try{yl();break}catch(a){ml(e,a)}if(Wa(),No=t,bo.current=r,null!==Oo)throw Error(s(261));return So=null,To=0,Io}function yl(){for(;null!==Oo;)El(Oo)}function vl(){for(;null!==Oo&&!ba();)El(Oo)}function El(e){var n=Ho(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,null===n?bl(e):Oo=n,Co.current=null}function bl(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(2048&n.flags)){if(null!==(t=Zs(t,n,Ao)))return void(Oo=t);if(24!==(t=n).tag&&23!==t.tag||null===t.memoizedState||0!==(1073741824&Ao)||0===(4&t.mode)){for(var r=0,a=t.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;t.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=n.firstEffect),null!==n.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=n.firstEffect),e.lastEffect=n.lastEffect),1<n.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=n:e.firstEffect=n,e.lastEffect=n))}else{if(null!==(t=eo(n)))return t.flags&=2047,void(Oo=t);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(n=n.sibling))return void(Oo=n);Oo=n=e}while(null!==n);0===Io&&(Io=5)}function Cl(e){var n=xa();return Ha(99,function(e,n){do{Sl()}while(null!==qo);if(0!==(48&No))throw Error(s(327));var t=e.finishedWork;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(s(177));e.callbackNode=null;var r=t.lanes|t.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<i;){var u=31-Bn(i),c=1<<u;a[u]=0,o[u]=-1,l[u]=-1,i&=~c}if(null!==Wo&&0===(24&r)&&Wo.has(e)&&Wo.delete(e),e===So&&(Oo=So=null,To=0),1<t.flags?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,null!==r){if(a=No,No|=32,Co.current=null,Lr=Yn,cr(o=ur())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,i=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break e}var d=0,h=-1,f=-1,p=0,m=0,g=o,_=null;n:for(;;){for(var y;g!==l||0!==i&&3!==g.nodeType||(h=d+i),g!==u||0!==c&&3!==g.nodeType||(f=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)_=g,g=y;for(;;){if(g===o)break n;if(_===l&&++p===i&&(h=d),_===u&&++m===c&&(f=d),null!==(y=g.nextSibling))break;_=(g=_).parentNode}g=y}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Pr={focusedElem:o,selectionRange:l},Yn=!1,nl=null,tl=!1,Go=r;do{try{Nl()}catch(T){if(null===Go)throw Error(s(330));Il(Go,T),Go=Go.nextEffect}}while(null!==Go);nl=null,Go=r;do{try{for(o=e;null!==Go;){var v=Go.flags;if(16&v&&_e(Go.stateNode,""),128&v){var E=Go.alternate;if(null!==E){var b=E.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&v){case 2:mo(Go),Go.flags&=-3;break;case 6:mo(Go),Go.flags&=-3,_o(Go.alternate,Go);break;case 1024:Go.flags&=-1025;break;case 1028:Go.flags&=-1025,_o(Go.alternate,Go);break;case 4:_o(Go.alternate,Go);break;case 8:go(o,l=Go);var C=l.alternate;fo(l),null!==C&&fo(C)}Go=Go.nextEffect}}catch(T){if(null===Go)throw Error(s(330));Il(Go,T),Go=Go.nextEffect}}while(null!==Go);if(b=Pr,E=ur(),v=b.focusedElem,o=b.selectionRange,E!==v&&v&&v.ownerDocument&&function e(n,t){return!(!n||!t)&&(n===t||(!n||3!==n.nodeType)&&(t&&3===t.nodeType?e(n,t.parentNode):"contains"in n?n.contains(t):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(t))))}(v.ownerDocument.documentElement,v)){null!==o&&cr(v)&&(E=o.start,void 0===(b=o.end)&&(b=E),"selectionStart"in v?(v.selectionStart=E,v.selectionEnd=Math.min(b,v.value.length)):(b=(E=v.ownerDocument||document)&&E.defaultView||window).getSelection&&(b=b.getSelection(),l=v.textContent.length,C=Math.min(o.start,l),o=void 0===o.end?C:Math.min(o.end,l),!b.extend&&C>o&&(l=o,o=C,C=l),l=lr(v,C),i=lr(v,o),l&&i&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==i.node||b.focusOffset!==i.offset)&&((E=E.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),C>o?(b.addRange(E),b.extend(i.node,i.offset)):(E.setEnd(i.node,i.offset),b.addRange(E))))),E=[];for(b=v;b=b.parentNode;)1===b.nodeType&&E.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<E.length;v++)(b=E[v]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yn=!!Lr,Pr=Lr=null,e.current=t,Go=r;do{try{for(v=e;null!==Go;){var N=Go.flags;if(36&N&&uo(v,Go.alternate,Go),128&N){E=void 0;var S=Go.ref;if(null!==S){var O=Go.stateNode;switch(Go.tag){case 5:E=O;break;default:E=O}"function"===typeof S?S(E):S.current=E}}Go=Go.nextEffect}}catch(T){if(null===Go)throw Error(s(330));Il(Go,T),Go=Go.nextEffect}}while(null!==Go);Go=null,ka(),No=a}else e.current=t;if(Vo)Vo=!1,qo=e,Ko=n;else for(Go=r;null!==Go;)n=Go.nextEffect,Go.nextEffect=null,8&Go.flags&&((N=Go).sibling=null,N.stateNode=null),Go=n;if(0===(r=e.pendingLanes)&&(zo=null),1===r?e===Xo?Jo++:(Jo=0,Xo=e):Jo=0,t=t.stateNode,_a&&"function"===typeof _a.onCommitFiberRoot)try{_a.onCommitFiberRoot(ga,t,void 0,64===(64&t.current.flags))}catch(T){}if(ol(e,Da()),jo)throw jo=!1,e=Bo,Bo=null,e;return 0!==(8&No)?null:(ja(),null)}.bind(null,e,n)),null}function Nl(){for(;null!==Go;){var e=Go.alternate;tl||null===nl||(0!==(8&Go.flags)?$e(Go,nl)&&(tl=!0):13===Go.tag&&vo(e,Go)&&$e(Go,nl)&&(tl=!0));var n=Go.flags;0!==(256&n)&&lo(e,Go),0===(512&n)||Vo||(Vo=!0,Ga(97,function(){return Sl(),null})),Go=Go.nextEffect}}function Sl(){if(90!==Ko){var e=97<Ko?97:Ko;return Ko=90,Ha(e,Al)}return!1}function Ol(e,n){Yo.push(n,e),Vo||(Vo=!0,Ga(97,function(){return Sl(),null}))}function Tl(e,n){Qo.push(n,e),Vo||(Vo=!0,Ga(97,function(){return Sl(),null}))}function Al(){if(null===qo)return!1;var e=qo;if(qo=null,0!==(48&No))throw Error(s(331));var n=No;No|=32;var t=Qo;Qo=[];for(var r=0;r<t.length;r+=2){var a=t[r],i=t[r+1],o=a.destroy;if(a.destroy=void 0,"function"===typeof o)try{o()}catch(u){if(null===i)throw Error(s(330));Il(i,u)}}for(t=Yo,Yo=[],r=0;r<t.length;r+=2){a=t[r],i=t[r+1];try{var l=a.create;a.destroy=l()}catch(u){if(null===i)throw Error(s(330));Il(i,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return No=n,ja(),!0}function wl(e,n,t){ai(e,n=ao(0,n=no(t,n),1)),n=rl(),null!==(e=sl(e,1))&&(jn(e,1,n),ol(e,n))}function Il(e,n){if(3===e.tag)wl(e,e,n);else for(var t=e.return;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zo||!zo.has(r))){var a=io(t,e=no(n,e),1);if(ai(t,a),a=rl(),null!==(t=sl(t,1)))jn(t,1,a),ol(t,a);else if("function"===typeof r.componentDidCatch&&(null===zo||!zo.has(r)))try{r.componentDidCatch(n,e)}catch(i){}break}}t=t.return}}function Rl(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=rl(),e.pingedLanes|=e.suspendedLanes&t,So===e&&(To&t)===t&&(4===Io||3===Io&&(62914560&To)===To&&500>Da()-Do?pl(e,0):Lo|=t),ol(e,n)}function kl(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ml(e,n,t,r){return new kl(e,n,t,r)}function Ul(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,n){var t=e.alternate;return null===t?((t=Ml(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Pl(e,n,t,r,a,i){var o=2;if(r=e,"function"===typeof e)Ul(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Dl(t.children,a,i,n);case D:o=8,a|=16;break;case O:o=8,a|=1;break;case T:return(e=Ml(12,t,n,8|a)).elementType=T,e.type=T,e.lanes=i,e;case R:return(e=Ml(13,t,n,a)).type=R,e.elementType=R,e.lanes=i,e;case k:return(e=Ml(19,t,n,a)).elementType=k,e.lanes=i,e;case x:return xl(t,a,i,n);case F:return(e=Ml(24,t,n,a)).elementType=F,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case w:o=9;break e;case I:o=11;break e;case M:o=14;break e;case U:o=16,r=null;break e;case L:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(n=Ml(o,t,n,a)).elementType=e,n.type=r,n.lanes=i,n}function Dl(e,n,t,r){return(e=Ml(7,e,r,n)).lanes=t,e}function xl(e,n,t,r){return(e=Ml(23,e,r,n)).elementType=x,e.lanes=t,e}function Fl(e,n,t){return(e=Ml(6,e,null,n)).lanes=t,e}function Hl(e,n,t){return(n=Ml(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Gl(e,n,t){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Array(31).fill(0),this.expirationTimes=Array(31).fill(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Array(31).fill(0),this.mutableSourceEagerHydrationData=null}function jl(e,n,t,r){var a=n.current,i=rl(),o=al(a);e:if(t){n:{if(Qe(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var l=t;do{switch(l.tag){case 3:l=l.stateNode.context;break n;case 1:if(ca(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break n}}l=l.return}while(null!==l);throw Error(s(171))}if(1===t.tag){var u=t.type;if(ca(u)){t=fa(t,u,l);break e}}t=l}else t=ia;return null===n.context?n.context=t:n.pendingContext=t,(n=ri(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),ai(a,n),il(a,o,i),o}function Bl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zl(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function Vl(e,n){zl(e,n),(e=e.alternate)&&zl(e,n)}function ql(e,n,t){var r=null!=t&&null!=t.hydrationOptions&&t.hydrationOptions.mutableSources||null;if(t=new Gl(e,n,null!=t&&!0===t.hydrate),n=Ml(3,null,null,2===n?7:1===n?3:0),t.current=n,n.stateNode=t,ni(n),e[Yr]=t.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(n=r[e])._getVersion;a=a(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a)}this._internalRoot=t}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yl(e,n,t,r,a){var i=t._reactRootContainer;if(i){var s=i._internalRoot;if("function"===typeof a){var o=a;a=function(){var e=Bl(s);o.call(e)}}jl(n,s,e,a)}else{if(i=t._reactRootContainer=function(e,n){if(n||(n=!(!(n=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==n.nodeType||!n.hasAttribute("data-reactroot"))),!n)for(var t;t=e.lastChild;)e.removeChild(t);return new ql(e,0,n?{hydrate:!0}:void 0)}(t,r),s=i._internalRoot,"function"===typeof a){var l=a;a=function(){var e=Bl(s);l.call(e)}}dl(function(){jl(n,s,e,a)})}return Bl(s)}function Ql(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(n))throw Error(s(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)}Ho=function(e,n,t){var r=n.lanes;if(null!==e)if(e.memoizedProps!==n.pendingProps||oa.current)ws=!0;else{if(0===(t&r)){switch(ws=!1,n.tag){case 3:Fs(n),Gi();break;case 5:wi(n);break;case 1:ca(n.type)&&pa(n);break;case 4:Ti(n,n.stateNode.containerInfo);break;case 10:r=n.memoizedProps.value;var a=n.type._context;aa(qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==n.memoizedState)return 0!==(t&n.child.childLanes)?Vs(e,n,t):(aa(Ri,1&Ri.current),null!==(n=Xs(e,n,t))?n.sibling:null);aa(Ri,1&Ri.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(64&e.flags)){if(r)return Js(e,n,t);n.flags|=64}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),aa(Ri,Ri.current),r)break;return null;case 23:case 24:return n.lanes=0,Us(e,n,t)}return Xs(e,n,t)}ws=0!==(16384&e.flags)}else ws=!1;switch(n.lanes=0,n.tag){case 2:if(r=n.type,null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,a=ua(n,sa.current),$a(n,t),a=Zi(null,n,r,e,a,t),n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,ca(r)){var i=!0;pa(n)}else i=!1;n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(n);var o=r.getDerivedStateFromProps;"function"===typeof o&&ui(n,r,o,e),a.updater=ci,n.stateNode=a,a._reactInternals=n,pi(n,r,e,t),n=xs(null,n,r,!0,i,t)}else n.tag=0,Is(null,n,a,t),n=n.child;return n;case 16:a=n.elementType;e:{switch(null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,a=(i=a._init)(a._payload),n.type=a,i=n.tag=function(e){if("function"===typeof e)return Ul(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===M)return 14}return 2}(a),e=Va(a,e),i){case 0:n=Ps(null,n,a,e,t);break e;case 1:n=Ds(null,n,a,e,t);break e;case 11:n=Rs(null,n,a,e,t);break e;case 14:n=ks(null,n,a,Va(a.type,e),r,t);break e}throw Error(s(306,a,""))}return n;case 0:return r=n.type,a=n.pendingProps,Ps(e,n,r,a=n.elementType===r?a:Va(r,a),t);case 1:return r=n.type,a=n.pendingProps,Ds(e,n,r,a=n.elementType===r?a:Va(r,a),t);case 3:if(Fs(n),r=n.updateQueue,null===e||null===r)throw Error(s(282));if(r=n.pendingProps,a=null!==(a=n.memoizedState)?a.element:null,ti(e,n),si(n,r,null,t),(r=n.memoizedState.element)===a)Gi(),n=Xs(e,n,t);else{if((i=(a=n.stateNode).hydrate)&&(Ui=jr(n.stateNode.containerInfo.firstChild),Mi=n,i=Li=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],ji.push(i);for(t=Ei(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|1024,t=t.sibling}else Is(e,n,r,t),Gi();n=n.child}return n;case 5:return wi(n),null===e&&xi(n),r=n.type,a=n.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,xr(r,a)?o=null:null!==i&&xr(r,i)&&(n.flags|=16),Ls(e,n),Is(e,n,o,t),n.child;case 6:return null===e&&xi(n),null;case 13:return Vs(e,n,t);case 4:return Ti(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=vi(n,null,r,t):Is(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,Rs(e,n,r,a=n.elementType===r?a:Va(r,a),t);case 7:return Is(e,n,n.pendingProps,t),n.child;case 8:case 12:return Is(e,n,n.pendingProps.children,t),n.child;case 10:e:{r=n.type._context,a=n.pendingProps,o=n.memoizedProps,i=a.value;var l=n.type._context;if(aa(qa,l._currentValue),l._currentValue=i,null!==o)if(l=o.value,0===(i=ar(l,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(o.children===a.children&&!oa.current){n=Xs(e,n,t);break e}}else for(null!==(l=n.child)&&(l.return=n);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&i)){1===l.tag&&((c=ri(-1,t&-t)).tag=2,ai(l,c)),l.lanes|=t,null!==(c=l.alternate)&&(c.lanes|=t),Xa(l.return,t),u.lanes|=t;break}c=c.next}}else o=10===l.tag&&l.type===n.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===n){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Is(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=(i=n.pendingProps).children,$a(n,t),r=r(a=Za(a,i.unstable_observedBits)),n.flags|=1,Is(e,n,r,t),n.child;case 14:return i=Va(a=n.type,n.pendingProps),ks(e,n,a,i=Va(a.type,i),r,t);case 15:return Ms(e,n,n.type,n.pendingProps,r,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:Va(r,a),null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,ca(r)?(e=!0,pa(n)):e=!1,$a(n,t),hi(n,r,a),pi(n,r,a,t),xs(null,n,r,!0,e,t);case 19:return Js(e,n,t);case 23:case 24:return Us(e,n,t)}throw Error(s(156,n.tag))},ql.prototype.render=function(e){jl(e,this._internalRoot,null,null)},ql.prototype.unmount=function(){var e=this._internalRoot,n=e.containerInfo;jl(null,e,null,function(){n[Yr]=null})},Ze=function(e){13===e.tag&&(il(e,4,rl()),Vl(e,4))},en=function(e){13===e.tag&&(il(e,67108864,rl()),Vl(e,67108864))},nn=function(e){if(13===e.tag){var n=rl(),t=al(e);il(e,t,n),Vl(e,t)}},tn=function(e,n){return n()},Te=function(e,n,t){switch(n){case"input":if(te(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=$r(r);if(!a)throw Error(s(90));X(r),te(r,a)}}}break;case"textarea":ue(e,t);break;case"select":null!=(n=t.value)&&se(e,!!t.multiple,n,!1)}},Me=cl,Ue=function(e,n,t,r,a){var i=No;No|=4;try{return Ha(98,e.bind(null,n,t,r,a))}finally{0===(No=i)&&(Fo(),ja())}},Le=function(){0===(49&No)&&(function(){if(null!==Wo){var e=Wo;Wo=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ol(e,Da())})}ja()}(),Sl())},Pe=function(e,n){var t=No;No|=2;try{return e(n)}finally{0===(No=t)&&(Fo(),ja())}};var Wl={Events:[Jr,Xr,$r,Re,ke,Sl,{current:!1}]},Jl={findFiberByHostInstance:Wr,bundleType:0,version:"17.0.0",rendererPackageName:"react-dom"},Xl={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{ga=$l.inject(Xl),_a=$l}catch(me){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wl,n.createPortal=Ql,n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Xe(n))?null:e.stateNode},n.flushSync=function(e,n){var t=No;if(0!==(48&t))return e(n);No|=1;try{if(e)return Ha(99,e.bind(null,n))}finally{No=t,ja()}},n.hydrate=function(e,n,t){if(!Kl(n))throw Error(s(200));return Yl(null,e,n,!0,t)},n.render=function(e,n,t){if(!Kl(n))throw Error(s(200));return Yl(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(s(40));return!!e._reactRootContainer&&(dl(function(){Yl(null,null,e,!1,function(){e._reactRootContainer=null,e[Yr]=null})}),!0)},n.unstable_batchedUpdates=cl,n.unstable_createPortal=function(e,n){return Ql(e,n,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Kl(t))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Yl(e,n,t,!1,r)},n.version="17.0.0"},function(e,n,t){"use strict";var r,a,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,d=null,h=function e(){if(null!==c)try{var t=n.unstable_now();c(!0,t),c=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(h,0))},a=function(e,n){d=setTimeout(e,n)},i=function(){clearTimeout(d)},n.unstable_shouldYield=function(){return!1},s=n.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,_=null,y=-1,v=5,E=0;n.unstable_shouldYield=function(){return n.unstable_now()>=E},s=function(){},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,C=b.port2;b.port1.onmessage=function(){if(null!==_){var e=n.unstable_now();E=e+v;try{_(!0,e)?C.postMessage(null):(g=!1,_=null)}catch(t){throw C.postMessage(null),t}}else g=!1},r=function(e){_=e,g||(g=!0,C.postMessage(null))},a=function(e,t){y=f(function(){e(n.unstable_now())},t)},i=function(){p(y),y=-1}}function N(e,n){var t=e.length;e.push(n);e:for(;;){var r=t-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,n)))break e;e[r]=n,e[t]=a,t=r}}function S(e){return void 0===(e=e[0])?null:e}function O(e){var n=e[0];if(void 0!==n){var t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,s=e[i],o=i+1,l=e[o];if(void 0!==s&&0>T(s,t))void 0!==l&&0>T(l,s)?(e[r]=l,e[o]=t,r=o):(e[r]=s,e[i]=t,r=i);else{if(!(void 0!==l&&0>T(l,t)))break e;e[r]=l,e[o]=t,r=o}}}return n}return null}function T(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}var A=[],w=[],I=1,R=null,k=3,M=!1,U=!1,L=!1;function P(e){for(var n=S(w);null!==n;){if(null===n.callback)O(w);else{if(!(n.startTime<=e))break;O(w),n.sortIndex=n.expirationTime,N(A,n)}n=S(w)}}function D(e){if(L=!1,P(e),!U)if(null!==S(A))U=!0,r(x);else{var n=S(w);null!==n&&a(D,n.startTime-e)}}function x(e,t){U=!1,L&&(L=!1,i()),M=!0;var r=k;try{for(P(t),R=S(A);null!==R&&(!(R.expirationTime>t)||e&&!n.unstable_shouldYield());){var s=R.callback;if("function"===typeof s){R.callback=null,k=R.priorityLevel;var o=s(R.expirationTime<=t);t=n.unstable_now(),"function"===typeof o?R.callback=o:R===S(A)&&O(A),P(t)}else O(A);R=S(A)}if(null!==R)var l=!0;else{var u=S(w);null!==u&&a(D,u.startTime-t),l=!1}return l}finally{R=null,k=r,M=!1}}var F=s;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){U||M||(U=!0,r(x))},n.unstable_getCurrentPriorityLevel=function(){return k},n.unstable_getFirstCallbackNode=function(){return S(A)},n.unstable_next=function(e){switch(k){case 1:case 2:case 3:var n=3;break;default:n=k}var t=k;k=n;try{return e()}finally{k=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=F,n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=k;k=e;try{return n()}finally{k=t}},n.unstable_scheduleCallback=function(e,t,s){var o=n.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:I++,callback:t,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>o?(e.sortIndex=s,N(w,e),null===S(A)&&e===S(w)&&(L?i():L=!0,a(D,s-o))):(e.sortIndex=l,N(A,e),U||M||(U=!0,r(x))),e},n.unstable_wrapCallback=function(e){var n=k;return function(){var t=k;k=n;try{return e.apply(this,arguments)}finally{k=t}}}},function(e,n,t){"use strict";var r=t(6),a=60103,i=60106;n.Fragment=60107,n.StrictMode=60108,n.Profiler=60114;var s=60109,o=60110,l=60112;n.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),n.Fragment=d("react.fragment"),n.StrictMode=d("react.strict_mode"),n.Profiler=d("react.profiler"),s=d("react.provider"),o=d("react.context"),l=d("react.forward_ref"),n.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||p}function _(){}function y(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,n,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=g.prototype;var v=y.prototype=new _;v.constructor=y,r(v,g.prototype),v.isPureReactComponent=!0;var E={current:null},b=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,n,t){var r,i={},s=null,o=null;if(null!=n)for(r in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(s=""+n.key),n)b.call(n,r)&&!C.hasOwnProperty(r)&&(i[r]=n[r]);var l=arguments.length-2;if(1===l)i.children=t;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:s,ref:o,props:i,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var O=/\/+/g;function T(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return n[e]})}(""+e.key):n.toString(36)}function A(e,n,t,r,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return s=s(l=e),e=""===r?"."+T(l,0):r,Array.isArray(s)?(t="",null!=e&&(t=e.replace(O,"$&/")+"/"),A(s,n,t,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,n){return{$$typeof:a,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),n.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+T(o=e[u],u);l+=A(o,n,t,c,s)}else if("function"===typeof(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),u=0;!(o=e.next()).done;)l+=A(o=o.value,n,t,c=r+T(o,u++),s);else if("object"===o)throw n=""+e,Error(f(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n));return l}function w(e,n,t){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return n.call(t,e,a++)}),r}function I(e){if(-1===e._status){var n=e._result;n=n(),e._status=0,e._result=n,n.then(function(n){0===e._status&&(n=n.default,e._status=1,e._result=n)},function(n){0===e._status&&(e._status=2,e._result=n)})}if(1===e._status)return e._result;throw e._result}var R={current:null};function k(){var e=R.current;if(null===e)throw Error(f(321));return e}var M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};n.Children={map:w,forEach:function(e,n,t){w(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return w(e,function(){n++}),n},toArray:function(e){return w(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},n.Component=g,n.PureComponent=y,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,n.cloneElement=function(e,n,t){if(null===e||void 0===e)throw Error(f(267,e));var i=r({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,l=E.current),void 0!==n.key&&(s=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in n)b.call(n,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===n[c]&&void 0!==u?u[c]:n[c])}var c=arguments.length-2;if(1===c)i.children=t;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:a,type:e.type,key:s,ref:o,props:i,_owner:l}},n.createContext=function(e,n){return void 0===n&&(n=null),(e={$$typeof:o,_calculateChangedBits:n,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=N,n.createFactory=function(e){var n=N.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:l,render:e}},n.isValidElement=S,n.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},n.memo=function(e,n){return{$$typeof:u,type:e,compare:void 0===n?null:n}},n.useCallback=function(e,n){return k().useCallback(e,n)},n.useContext=function(e,n){return k().useContext(e,n)},n.useDebugValue=function(){},n.useEffect=function(e,n){return k().useEffect(e,n)},n.useImperativeHandle=function(e,n,t){return k().useImperativeHandle(e,n,t)},n.useLayoutEffect=function(e,n){return k().useLayoutEffect(e,n)},n.useMemo=function(e,n){return k().useMemo(e,n)},n.useReducer=function(e,n,t){return k().useReducer(e,n,t)},n.useRef=function(e){return k().useRef(e)},n.useState=function(e){return k().useState(e)},n.version="17.0.2"},function(e,n,t){"use strict";n.byteLength=function(e){var n=u(e),t=n[0],r=n[1];return 3*(t+r)/4-r},n.toByteArray=function(e){var n,t,r=u(e),s=r[0],o=r[1],l=new i(function(e,n,t){return 3*(n+t)/4-t}(0,s,o)),c=0,d=o>0?s-4:s;for(t=0;t<d;t+=4)n=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],l[c++]=n>>16&255,l[c++]=n>>8&255,l[c++]=255&n;2===o&&(n=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,l[c++]=255&n);1===o&&(n=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,l[c++]=n>>8&255,l[c++]=255&n);return l},n.fromByteArray=function(e){for(var n,t=e.length,a=t%3,i=[],s=0,o=t-a;s<o;s+=16383)i.push(c(e,s,s+16383>o?o:s+16383));1===a?(n=e[t-1],i.push(r[n>>2]+r[n<<4&63]+"==")):2===a&&(n=(e[t-2]<<8)+e[t-1],i.push(r[n>>10]+r[n>>4&63]+r[n<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;function u(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return-1===t&&(t=n),[t,t===n?0:4-t%4]}function c(e,n,t){for(var a,i,s=[],o=n;o<t;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,n){n.read=function(e,n,t,r,a){var i,s,o=8*a-r-1,l=(1<<o)-1,u=l>>1,c=-7,d=t?a-1:0,h=t?-1:1,f=e[n+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=o;c>0;i=256*i+e[n+d],d+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+e[n+d],d+=h,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=u}return(f?-1:1)*s*Math.pow(2,i-r)},n.write=function(e,n,t,r,a,i){var s,o,l,u=8*i-a-1,c=(1<<u)-1,d=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,s=c):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),(n+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(n*l-1)*Math.pow(2,a),s+=d):(o=n*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[t+f]=255&o,f+=p,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[t+f]=255&s,f+=p,s/=256,u-=8);e[t+f-p]|=128*m}},function(e,n){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e,n,t){e.exports=t(34)},function(e,n,t){"use strict";var r=t(2),a=t(14),i=t(35),s=t(21);var o=function e(n){var t=new i(n),o=a(i.prototype.request,t);return r.extend(o,i.prototype,t),r.extend(o,t),o.create=function(t){return e(s(n,t))},o}(t(9));o.Axios=i,o.CanceledError=t(7),o.CancelToken=t(49),o.isCancel=t(20),o.VERSION=t(22).version,o.toFormData=t(17),o.AxiosError=t(4),o.Cancel=o.CanceledError,o.all=function(e){return Promise.all(e)},o.spread=t(50),o.isAxiosError=t(51),e.exports=o,e.exports.default=o},function(e,n,t){"use strict";var r=t(2),a=t(15),i=t(36),s=t(37),o=t(21),l=t(19),u=t(48),c=u.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,n){"string"===typeof e?(n=n||{}).url=e:n=e||{},(n=o(this.defaults,n)).method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var t=n.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(n)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var i,l=[];if(this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)}),!a){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(l),i=Promise.resolve(n);d.length;)i=i.then(d.shift(),d.shift());return i}for(var h=n;r.length;){var f=r.shift(),p=r.shift();try{h=f(h)}catch(m){p(m);break}}try{i=s(h)}catch(m){return Promise.reject(m)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},d.prototype.getUri=function(e){e=o(this.defaults,e);var n=l(e.baseURL,e.url);return a(n,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(n,t){return this.request(o(t||{},{method:e,url:n,data:(t||{}).data}))}}),r.forEach(["post","put","patch"],function(e){function n(n){return function(t,r,a){return this.request(o(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:t,data:r}))}}d.prototype[e]=n(),d.prototype[e+"Form"]=n(!0)}),e.exports=d},function(e,n,t){"use strict";var r=t(2);function a(){this.handlers=[]}a.prototype.use=function(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,function(n){null!==n&&e(n)})},e.exports=a},function(e,n,t){"use strict";var r=t(2),a=t(38),i=t(20),s=t(9),o=t(7);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]}),(e.adapter||s.adapter)(e).then(function(n){return l(e),n.data=a.call(e,n.data,n.headers,e.transformResponse),n},function(n){return i(n)||(l(e),n&&n.response&&(n.response.data=a.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}},function(e,n,t){"use strict";var r=t(2),a=t(9);e.exports=function(e,n,t){var i=this||a;return r.forEach(t,function(t){e=t.call(i,e,n)}),e}},function(e,n,t){"use strict";var r=t(2);e.exports=function(e,n){r.forEach(e,function(t,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(e[n]=t,delete e[r])})}},function(e,n,t){"use strict";var r=t(4);e.exports=function(e,n,t){var a=t.config.validateStatus;t.status&&a&&!a(t.status)?n(new r("Request failed with status code "+t.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}},function(e,n,t){"use strict";var r=t(2);e.exports=r.isStandardBrowserEnv()?{write:function(e,n,t,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(n)),r.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,n,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(e,n,t){"use strict";e.exports=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}},function(e,n,t){"use strict";var r=t(2),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var n,t,i,s={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),n=r.trim(e.substr(0,i)).toLowerCase(),t=r.trim(e.substr(i+1)),n){if(s[n]&&a.indexOf(n)>=0)return;s[n]="set-cookie"===n?(s[n]?s[n]:[]).concat([t]):s[n]?s[n]+", "+t:t}}),s):s}},function(e,n,t){"use strict";var r=t(2);e.exports=r.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function a(e){var r=e;return n&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=a(window.location.href),function(n){var t=r.isString(n)?a(n):n;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0}},function(e,n,t){"use strict";e.exports=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}},function(e,n){e.exports=null},function(e,n,t){"use strict";var r=t(22).version,a=t(4),i={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){i[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}});var s={};i.transitional=function(e,n,t){function i(e,n){return"[Axios v"+r+"] Transitional option '"+e+"'"+n+(t?". "+t:"")}return function(t,r,o){if(!1===e)throw new a(i(r," has been removed"+(n?" in "+n:"")),a.ERR_DEPRECATED);return n&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(t,r,o)}},e.exports={assertOptions:function(e,n,t){if("object"!==typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=n[s];if(o){var l=e[s],u=void 0===l||o(l,s,e);if(!0!==u)throw new a("option "+s+" must be "+u,a.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new a("Unknown option "+s,a.ERR_BAD_OPTION)}},validators:i}},function(e,n,t){"use strict";var r=t(7);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var t=this;this.promise.then(function(e){if(t._listeners){var n,r=t._listeners.length;for(n=0;n<r;n++)t._listeners[n](e);t._listeners=null}}),this.promise.then=function(e){var n,r=new Promise(function(e){t.subscribe(e),n=e}).then(e);return r.cancel=function(){t.unsubscribe(n)},r},e(function(e){t.reason||(t.reason=new r(e),n(t.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var n=this._listeners.indexOf(e);-1!==n&&this._listeners.splice(n,1)}},a.source=function(){var e;return{token:new a(function(n){e=n}),cancel:e}},e.exports=a},function(e,n,t){"use strict";e.exports=function(e){return function(n){return e.apply(null,n)}}},function(e,n,t){"use strict";var r=t(2);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},function(e,n){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,n,t){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,n,t){"use strict";var r=t(55);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,n,t,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:a};return t.PropTypes=t,t}},function(e,n,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,n,t){"use strict";var r=t(0),a=t(6),i=t(10);function s(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var o=new Set,l={};function u(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(l[e]=n,e=0;e<n.length;e++)o.add(n[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,n,t,r,a,i,s){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];_[n]=new g(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function E(e,n,t,r){var a=_.hasOwnProperty(n)?_[n]:null;(null!==a?0===a.type:!r&&(2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])))||(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(y,v);_[n]=new g(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=60103,N=60106,S=60107,O=60108,T=60114,A=60109,w=60110,I=60112,R=60113,k=60120,M=60115,U=60116,L=60121,P=60128,D=60129,x=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var H=Symbol.for;C=H("react.element"),N=H("react.portal"),S=H("react.fragment"),O=H("react.strict_mode"),T=H("react.profiler"),A=H("react.provider"),w=H("react.context"),I=H("react.forward_ref"),R=H("react.suspense"),k=H("react.suspense_list"),M=H("react.memo"),U=H("react.lazy"),L=H("react.block"),H("react.scope"),P=H("react.opaque.id"),D=H("react.debug_trace_mode"),x=H("react.offscreen"),F=H("react.legacy_hidden")}var G,j="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}function z(e){if(void 0===G)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);G=n&&n[1]||""}return"\n"+G+e}var V=!1;function q(e,n){if(!e||V)return"";V=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(l){var r=l}Reflect.construct(e,[],n)}else{try{n.call()}catch(l){r=l}e.call(n.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o])return"\n"+a[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case N:return"Portal";case T:return"Profiler";case O:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case w:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var n=e.render;return n=n.displayName||n.name||"",e.displayName||(""!==n?"ForwardRef("+n+")":"ForwardRef");case M:return Y(e.type);case L:return Y(e._render);case U:n=e._payload,e=e._init;try{return Y(e(n))}catch(t){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function W(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function J(e){e._valueTracker||(e._valueTracker=function(e){var n=W(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function X(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Z(e,n){var t=n.checked;return a({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function ee(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=Q(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function ne(e,n){null!=(n=n.checked)&&E(e,"checked",n,!1)}function te(e,n){ne(e,n);var t=Q(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ae(e,n.type,t):n.hasOwnProperty("defaultValue")&&ae(e,n.type,Q(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function re(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ae(e,n,t){"number"===n&&$(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}function ie(e,n){return e=a({children:void 0},n),(n=function(e){var n="";return r.Children.forEach(e,function(e){null!=e&&(n+=e)}),n}(n.children))&&(e.children=n),e}function se(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+Q(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function oe(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(s(91));return a({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(s(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(s(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:Q(t)}}function ue(e,n){var t=Q(n.value),r=Q(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ce(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?he(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,n){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=n;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction(function(){return me(e,n)})}:me);function _e(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function Ee(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||ye.hasOwnProperty(e)&&ye[e]?(""+n).trim():n+"px"}function be(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=Ee(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(ye).forEach(function(e){ve.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ye[n]=ye[e]})});var Ce=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(e,n){if(n){if(Ce[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(s(60));if(!("object"===typeof n.dangerouslySetInnerHTML&&"__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(s(62))}}function Se(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ae=null,we=null;function Ie(e){if(e=Xr(e)){if("function"!==typeof Te)throw Error(s(280));var n=e.stateNode;n&&(n=Zr(n),Te(e.stateNode,e.type,n))}}function Re(e){Ae?we?we.push(e):we=[e]:Ae=e}function ke(){if(Ae){var e=Ae,n=we;if(we=Ae=null,Ie(e),n)for(e=0;e<n.length;e++)Ie(n[e])}}function Me(e,n){return e(n)}function Ue(e,n,t,r,a){return e(n,t,r,a)}function Le(){}var Pe=Me,De=!1,xe=!1;function Fe(){null===Ae&&null===we||(Le(),ke())}function He(e,n){var t=e.stateNode;if(null===t)return null;var r=Zr(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(s(231,n,typeof t));return t}var Ge=!1;if(d)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ge=!1}var Be=!1,ze=null,Ve=!1,qe=null,Ke={onError:function(e){Be=!0,ze=e}};function Ye(e,n,t,r,a,i,s,o,l){Be=!1,ze=null,function(e,n,t,r,a,i,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}.apply(Ke,arguments)}function Qe(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(1026&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(s(188))}function Xe(e){if(!(e=function(e){var n=e.alternate;if(!n){if(null===(n=Qe(e)))throw Error(s(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){t=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Je(a),e;if(i===r)return Je(a),n;i=i.sibling}throw Error(s(188))}if(t.return!==r.return)t=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===t){o=!0,t=a,r=i;break}if(l===r){o=!0,r=a,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,r=a;break}if(l===r){o=!0,r=i,t=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(t.alternate!==r)throw Error(s(190))}if(3!==t.tag)throw Error(s(188));return t.stateNode.current===t?e:n}(e)))return null;for(var n=e;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===e)break;for(;!n.sibling;){if(!n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function $e(e,n){for(var t=e.alternate;null!==n;){if(n===e||n===t)return!0;n=n.return}return!1}var Ze,en,nn,tn,rn=!1,an=[],sn=null,on=null,ln=null,un=new Map,cn=new Map,dn=[],hn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fn(e,n,t,r,a){return{blockedOn:e,domEventName:n,eventSystemFlags:16|t,nativeEvent:a,targetContainers:[r]}}function pn(e,n){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":un.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(n.pointerId)}}function mn(e,n,t,r,a,i){return null===e||e.nativeEvent!==i?(e=fn(n,t,r,a,i),null!==n&&(null!==(n=Xr(n))&&en(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function gn(e){var n=Jr(e.target);if(null!==n){var t=Qe(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void tn(e.lanePriority,function(){i.unstable_runWithPriority(e.priority,function(){nn(t)})})}else if(3===n&&t.stateNode.hydrate)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function _n(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=$n(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=Xr(t))&&en(n),e.blockedOn=t,!1;n.shift()}return!0}function yn(e,n,t){_n(e)&&t.delete(n)}function vn(){for(rn=!1;0<an.length;){var e=an[0];if(null!==e.blockedOn){null!==(e=Xr(e.blockedOn))&&Ze(e);break}for(var n=e.targetContainers;0<n.length;){var t=$n(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t){e.blockedOn=t;break}n.shift()}null===e.blockedOn&&an.shift()}null!==sn&&_n(sn)&&(sn=null),null!==on&&_n(on)&&(on=null),null!==ln&&_n(ln)&&(ln=null),un.forEach(yn),cn.forEach(yn)}function En(e,n){e.blockedOn===n&&(e.blockedOn=null,rn||(rn=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vn)))}function bn(e){function n(n){return En(n,e)}if(0<an.length){En(an[0],e);for(var t=1;t<an.length;t++){var r=an[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==sn&&En(sn,e),null!==on&&En(on,e),null!==ln&&En(ln,e),un.forEach(n),cn.forEach(n),t=0;t<dn.length;t++)(r=dn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<dn.length&&null===(t=dn[0]).blockedOn;)gn(t),null===t.blockedOn&&dn.shift()}function Cn(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Nn={animationend:Cn("Animation","AnimationEnd"),animationiteration:Cn("Animation","AnimationIteration"),animationstart:Cn("Animation","AnimationStart"),transitionend:Cn("Transition","TransitionEnd")},Sn={},On={};function Tn(e){if(Sn[e])return Sn[e];if(!Nn[e])return e;var n,t=Nn[e];for(n in t)if(t.hasOwnProperty(n)&&n in On)return Sn[e]=t[n];return e}d&&(On=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var An=Tn("animationend"),wn=Tn("animationiteration"),In=Tn("animationstart"),Rn=Tn("transitionend"),kn=new Map,Mn=new Map,Un=["abort","abort",An,"animationEnd",wn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rn,"transitionEnd","waiting","waiting"];function Ln(e,n){for(var t=0;t<e.length;t+=2){var r=e[t],a=e[t+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mn.set(r,n),kn.set(r,a),u(a,[r])}}(0,i.unstable_now)();var Pn=8;function Dn(e){if(0!==(1&e))return Pn=15,1;if(0!==(2&e))return Pn=14,2;if(0!==(4&e))return Pn=13,4;var n=24&e;return 0!==n?(Pn=12,n):0!==(32&e)?(Pn=11,32):0!==(n=192&e)?(Pn=10,n):0!==(256&e)?(Pn=9,256):0!==(n=3584&e)?(Pn=8,n):0!==(4096&e)?(Pn=7,4096):0!==(n=4186112&e)?(Pn=6,n):0!==(n=62914560&e)?(Pn=5,n):67108864&e?(Pn=4,67108864):0!==(134217728&e)?(Pn=3,134217728):0!==(n=805306368&e)?(Pn=2,n):0!==(1073741824&e)?(Pn=1,1073741824):(Pn=8,e)}function xn(e,n){var t=e.pendingLanes;if(0===t)return Pn=0;var r=0,a=0,i=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==i)r=i,a=Pn=15;else if(0!==(i=134217727&t)){var l=i&~s;0!==l?(r=Dn(l),a=Pn):0!==(o&=i)&&(r=Dn(o),a=Pn)}else 0!==(i=t&~s)?(r=Dn(i),a=Pn):0!==o&&(r=Dn(o),a=Pn);if(0===r)return 0;if(r=t&((0>(r=31-zn(r))?0:1<<r)<<1)-1,0!==n&&n!==r&&0===(n&s)){if(Dn(n),a<=Pn)return n;Pn=a}if(0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-zn(n)),r|=e[t],n&=~a;return r}function Fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Hn(e,n){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Gn(24&~n))?Hn(10,n):e;case 10:return 0===(e=Gn(192&~n))?Hn(8,n):e;case 8:return 0===(e=Gn(3584&~n))&&(0===(e=Gn(4186112&~n))&&(e=512)),e;case 2:return 0===(n=Gn(805306368&~n))&&(n=268435456),n}throw Error(s(358,e))}function Gn(e){return e&-e}function jn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Bn(e,n,t){e.pendingLanes|=n;var r=n-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[n=31-zn(n)]=t}var zn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vn(e)/qn|0)|0},Vn=Math.log,qn=Math.LN2;var Kn=i.unstable_UserBlockingPriority,Yn=i.unstable_runWithPriority,Qn=!0;function Wn(e,n,t,r){De||Le();var a=Xn,i=De;De=!0;try{Ue(a,e,n,t,r)}finally{(De=i)||Fe()}}function Jn(e,n,t,r){Yn(Kn,Xn.bind(null,e,n,t,r))}function Xn(e,n,t,r){var a;if(Qn)if((a=0===(4&n))&&0<an.length&&-1<hn.indexOf(e))e=fn(null,e,n,t,r),an.push(e);else{var i=$n(e,n,t,r);if(null===i)a&&pn(e,r);else{if(a){if(-1<hn.indexOf(e))return e=fn(i,e,n,t,r),void an.push(e);if(function(e,n,t,r,a){switch(n){case"focusin":return sn=mn(sn,e,n,t,r,a),!0;case"dragenter":return on=mn(on,e,n,t,r,a),!0;case"mouseover":return ln=mn(ln,e,n,t,r,a),!0;case"pointerover":var i=a.pointerId;return un.set(i,mn(un.get(i)||null,e,n,t,r,a)),!0;case"gotpointercapture":return i=a.pointerId,cn.set(i,mn(cn.get(i)||null,e,n,t,r,a)),!0}return!1}(i,e,n,t,r))return;pn(e,r)}Ir(e,n,r,null,t)}}}function $n(e,n,t,r){var a=Oe(r);if(null!==(a=Jr(a))){var i=Qe(a);if(null===i)a=null;else{var s=i.tag;if(13===s){if(null!==(a=We(i)))return a;a=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Ir(e,n,r,a,t),null}var Zn=null,et=null,nt=null;function tt(){if(nt)return nt;var e,n,t=et,r=t.length,a="value"in Zn?Zn.value:Zn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return nt=a.slice(e,1<n?1-n:void 0)}function rt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function at(){return!0}function it(){return!1}function st(e){function n(n,t,r,a,i){for(var s in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?at:it,this.isPropagationStopped=it,this}return a(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){},isPersistent:at}),n}var ot,lt,ut,ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dt=st(ct),ht=a({},ct,{view:0,detail:0}),ft=st(ht),pt=a({},ht,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ut&&(ut&&"mousemove"===e.type?(ot=e.screenX-ut.screenX,lt=e.screenY-ut.screenY):lt=ot=0,ut=e),ot)},movementY:function(e){return"movementY"in e?e.movementY:lt}}),mt=st(pt),gt=st(a({},pt,{dataTransfer:0})),_t=st(a({},ht,{relatedTarget:0})),yt=st(a({},ct,{animationName:0,elapsedTime:0,pseudoElement:0})),vt=st(a({},ct,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Et=st(a({},ct,{data:0})),bt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ct={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function St(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=Nt[e])&&!!n[e]}function Ot(){return St}var Tt=st(a({},ht,{key:function(e){if(e.key){var n=bt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=rt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ct[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(e){return"keypress"===e.type?rt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),At=st(a({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wt=st(a({},ht,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot})),It=st(a({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rt=st(a({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kt=[9,13,27,32],Mt=d&&"CompositionEvent"in window,Ut=null;d&&"documentMode"in document&&(Ut=document.documentMode);var Lt=d&&"TextEvent"in window&&!Ut,Pt=d&&(!Mt||Ut&&8<Ut&&11>=Ut),Dt=String.fromCharCode(32),xt=!1;function Ft(e,n){switch(e){case"keyup":return-1!==kt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ht(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gt=!1;var jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!jt[e.type]:"textarea"===n}function zt(e,n,t,r){Re(r),0<(n=kr(n,"onChange")).length&&(t=new dt("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Vt=null,qt=null;function Kt(e){Nr(e,0)}function Yt(e){if(X($r(e)))return e}function Qt(e,n){if("change"===e)return n}var Wt=!1;if(d){var Jt;if(d){var Xt="oninput"in document;if(!Xt){var $t=document.createElement("div");$t.setAttribute("oninput","return;"),Xt="function"===typeof $t.oninput}Jt=Xt}else Jt=!1;Wt=Jt&&(!document.documentMode||9<document.documentMode)}function Zt(){Vt&&(Vt.detachEvent("onpropertychange",er),qt=Vt=null)}function er(e){if("value"===e.propertyName&&Yt(qt)){var n=[];if(zt(n,qt,e,Oe(e)),e=Kt,De)e(n);else{De=!0;try{Me(e,n)}finally{De=!1,Fe()}}}}function nr(e,n,t){"focusin"===e?(Zt(),qt=t,(Vt=n).attachEvent("onpropertychange",er)):"focusout"===e&&Zt()}function tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yt(qt)}function rr(e,n){if("click"===e)return Yt(n)}function ar(e,n){if("input"===e||"change"===e)return Yt(n)}var ir="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},sr=Object.prototype.hasOwnProperty;function or(e,n){if(ir(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!sr.call(n,t[r])||!ir(e[t[r]],n[t[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,n){var t,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function cr(){for(var e=window,n=$();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=$((e=n.contentWindow).document)}return n}function dr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}var hr=d&&"documentMode"in document&&11>=document.documentMode,fr=null,pr=null,mr=null,gr=!1;function _r(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;gr||null==fr||fr!==$(r)||("selectionStart"in(r=fr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&or(mr,r)||(mr=r,0<(r=kr(pr,"onSelect")).length&&(n=new dt("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=fr)))}Ln("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ln("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ln(Un,2);for(var yr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),vr=0;vr<yr.length;vr++)Mn.set(yr[vr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),br=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Cr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,i,o,l,u){if(Ye.apply(this,arguments),Be){if(!Be)throw Error(s(198));var c=ze;Be=!1,ze=null,Ve||(Ve=!0,qe=c)}}(r,n,void 0,e),e.currentTarget=null}function Nr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var i=void 0;if(n)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Cr(a,o,u),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,u=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Cr(a,o,u),i=l}}}if(Ve)throw e=qe,Ve=!1,qe=null,e}function Sr(e,n){var t=ea(n),r=e+"__bubble";t.has(r)||(wr(n,e,2,!1),t.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Tr(e){e[Or]||(e[Or]=!0,o.forEach(function(n){br.has(n)||Ar(n,!1,e,null),Ar(n,!0,e,null)}))}function Ar(e,n,t,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=t;if("selectionchange"===e&&9!==t.nodeType&&(i=t.ownerDocument),null!==r&&!n&&br.has(e)){if("scroll"!==e)return;a|=2,i=r}var s=ea(i),o=e+"__"+(n?"capture":"bubble");s.has(o)||(n&&(a|=4),wr(i,e,a,n),s.add(o))}function wr(e,n,t,r){var a=Mn.get(n);switch(void 0===a?2:a){case 0:a=Wn;break;case 1:a=Jn;break;default:a=Xn}t=a.bind(null,n,t,e),a=void 0,!Ge||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Ir(e,n,t,r,a){var i=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=Jr(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}!function(e,n,t){if(xe)return e(n,t);xe=!0;try{Pe(e,n,t)}finally{xe=!1,Fe()}}(function(){var r=i,a=Oe(t),s=[];e:{var o=kn.get(e);if(void 0!==o){var l=dt,u=e;switch(e){case"keypress":if(0===rt(t))break e;case"keydown":case"keyup":l=Tt;break;case"focusin":u="focus",l=_t;break;case"focusout":u="blur",l=_t;break;case"beforeblur":case"afterblur":l=_t;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=wt;break;case An:case wn:case In:l=yt;break;case Rn:l=It;break;case"scroll":l=ft;break;case"wheel":l=Rt;break;case"copy":case"cut":case"paste":l=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=At}var c=0!==(4&n),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=He(p,h))&&c.push(Rr(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,t,a),s.push({event:o,listeners:c}))}}if(0===(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&n)||!(u=t.relatedTarget||t.fromElement)||!Jr(u)&&!u[Qr])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=t.relatedTarget||t.toElement)?Jr(u):null)&&(u!==(d=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mt,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=At,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:$r(l),f=null==u?o:$r(u),(o=new c(m,p+"leave",l,t,a)).target=d,o.relatedTarget=f,m=null,Jr(a)===r&&((c=new c(h,p+"enter",u,t,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Mr(f))p++;for(f=0,m=h;m;m=Mr(m))f++;for(;0<p-f;)c=Mr(c),p--;for(;0<f-p;)h=Mr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Mr(c),h=Mr(h)}c=null}else c=null;null!==l&&Ur(s,o,l,c,!1),null!==u&&null!==d&&Ur(s,d,u,c,!0)}if("select"===(l=(o=r?$r(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qt;else if(Bt(o))if(Wt)g=ar;else{g=tr;var _=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=rr);switch(g&&(g=g(e,r))?zt(s,g,t,a):(_&&_(e,o,r),"focusout"===e&&(_=o._wrapperState)&&_.controlled&&"number"===o.type&&ae(o,"number",o.value)),_=r?$r(r):window,e){case"focusin":(Bt(_)||"true"===_.contentEditable)&&(fr=_,pr=r,mr=null);break;case"focusout":mr=pr=fr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,_r(s,t,a);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":_r(s,t,a)}var y;if(Mt)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Gt?Ft(e,t)&&(v="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(v="onCompositionStart");v&&(Pt&&"ko"!==t.locale&&(Gt||"onCompositionStart"!==v?"onCompositionEnd"===v&&Gt&&(y=tt()):(et="value"in(Zn=a)?Zn.value:Zn.textContent,Gt=!0)),0<(_=kr(r,v)).length&&(v=new Et(v,e,null,t,a),s.push({event:v,listeners:_}),y?v.data=y:null!==(y=Ht(t))&&(v.data=y))),(y=Lt?function(e,n){switch(e){case"compositionend":return Ht(n);case"keypress":return 32!==n.which?null:(xt=!0,Dt);case"textInput":return(e=n.data)===Dt&&xt?null:e;default:return null}}(e,t):function(e,n){if(Gt)return"compositionend"===e||!Mt&&Ft(e,n)?(e=tt(),nt=et=Zn=null,Gt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Pt&&"ko"!==n.locale?null:n.data;default:return null}}(e,t))&&(0<(r=kr(r,"onBeforeInput")).length&&(a=new Et("onBeforeInput","beforeinput",null,t,a),s.push({event:a,listeners:r}),a.data=y))}Nr(s,n)})}function Rr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function kr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=He(e,t))&&r.unshift(Rr(e,i,a)),null!=(i=He(e,n))&&r.push(Rr(e,i,a))),e=e.return}return r}function Mr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,n,t,r,a){for(var i=n._reactName,s=[];null!==t&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=He(t,i))&&s.unshift(Rr(t,l,o)):a||null!=(l=He(t,i))&&s.push(Rr(t,l,o))),t=t.return}0!==s.length&&e.push({event:n,listeners:s})}function Lr(){}var Pr=null,Dr=null;function xr(e,n){switch(e){case"button":case"input":case"select":case"textarea":return!!n.autoFocus}return!1}function Fr(e,n){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function jr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Br(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break}return e}function zr(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var Vr=0;var qr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+qr,Yr="__reactProps$"+qr,Qr="__reactContainer$"+qr,Wr="__reactEvents$"+qr;function Jr(e){var n=e[Kr];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Qr]||t[Kr]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=zr(e);null!==e;){if(t=e[Kr])return t;e=zr(e)}return n}t=(e=t).parentNode}return null}function Xr(e){return!(e=e[Kr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function $r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Zr(e){return e[Yr]||null}function ea(e){var n=e[Wr];return void 0===n&&(n=e[Wr]=new Set),n}var na=[],ta=-1;function ra(e){return{current:e}}function aa(e){0>ta||(e.current=na[ta],na[ta]=null,ta--)}function ia(e,n){na[++ta]=e.current,e.current=n}var sa={},oa=ra(sa),la=ra(!1),ua=sa;function ca(e,n){var t=e.type.contextTypes;if(!t)return sa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in t)i[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),i}function da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ha(){aa(la),aa(oa)}function fa(e,n,t){if(oa.current!==sa)throw Error(s(168));ia(oa,n),ia(la,t)}function pa(e,n,t){var r=e.stateNode;if(e=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,Y(n)||"Unknown",i));return a({},t,r)}function ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sa,ua=oa.current,ia(oa,e),ia(la,la.current),!0}function ga(e,n,t){var r=e.stateNode;if(!r)throw Error(s(169));t?(e=pa(e,n,ua),r.__reactInternalMemoizedMergedChildContext=e,aa(la),aa(oa),ia(oa,e)):aa(la),ia(la,t)}var _a=null,ya=null,va=i.unstable_runWithPriority,Ea=i.unstable_scheduleCallback,ba=i.unstable_cancelCallback,Ca=i.unstable_shouldYield,Na=i.unstable_requestPaint,Sa=i.unstable_now,Oa=i.unstable_getCurrentPriorityLevel,Ta=i.unstable_ImmediatePriority,Aa=i.unstable_UserBlockingPriority,wa=i.unstable_NormalPriority,Ia=i.unstable_LowPriority,Ra=i.unstable_IdlePriority,ka={},Ma=void 0!==Na?Na:function(){},Ua=null,La=null,Pa=!1,Da=Sa(),xa=1e4>Da?Sa:function(){return Sa()-Da};function Fa(){switch(Oa()){case Ta:return 99;case Aa:return 98;case wa:return 97;case Ia:return 96;case Ra:return 95;default:throw Error(s(332))}}function Ha(e){switch(e){case 99:return Ta;case 98:return Aa;case 97:return wa;case 96:return Ia;case 95:return Ra;default:throw Error(s(332))}}function Ga(e,n){return e=Ha(e),va(e,n)}function ja(e,n,t){return e=Ha(e),Ea(e,n,t)}function Ba(){if(null!==La){var e=La;La=null,ba(e)}za()}function za(){if(!Pa&&null!==Ua){Pa=!0;var e=0;try{var n=Ua;Ga(99,function(){for(;e<n.length;e++){var t=n[e];do{t=t(!0)}while(null!==t)}}),Ua=null}catch(t){throw null!==Ua&&(Ua=Ua.slice(e+1)),Ea(Ta,Ba),t}finally{Pa=!1}}}var Va=b.ReactCurrentBatchConfig;function qa(e,n){if(e&&e.defaultProps){for(var t in n=a({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var Ka=ra(null),Ya=null,Qa=null,Wa=null;function Ja(){Wa=Qa=Ya=null}function Xa(e){var n=Ka.current;aa(Ka),e.type._context._currentValue=n}function $a(e,n){for(;null!==e;){var t=e.alternate;if((e.childLanes&n)===n){if(null===t||(t.childLanes&n)===n)break;t.childLanes|=n}else e.childLanes|=n,null!==t&&(t.childLanes|=n);e=e.return}}function Za(e,n){Ya=e,Wa=Qa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(Is=!0),e.firstContext=null)}function ei(e,n){if(Wa!==e&&!1!==n&&0!==n)if("number"===typeof n&&1073741823!==n||(Wa=e,n=1073741823),n={context:e,observedBits:n,next:null},null===Qa){if(null===Ya)throw Error(s(308));Qa=n,Ya.dependencies={lanes:0,firstContext:n,responders:null}}else Qa=Qa.next=n;return e._currentValue}var ni=!1;function ti(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ri(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ii(e,n){if(null!==(e=e.updateQueue)){var t=(e=e.shared).pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}}function si(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,i=null;if(null!==(t=t.firstBaseUpdate)){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===i?a=i=s:i=i.next=s,t=t.next}while(null!==t);null===i?a=i=n:i=i.next=n}else a=i=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function oi(e,n,t,r){var i=e.updateQueue;ni=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===o?s=c:o.next=c,o=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==o&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==s){for(h=i.baseState,o=0,d=c=u=null;;){l=s.lane;var f=s.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(l=n,f=t,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,h,l):p)||void 0===l)break e;h=a({},h,l);break e;case 2:ni=!0}}null!==s.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=f,u=h):d=d.next=f,o|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,Uo|=o,e.lanes=o,e.memoizedState=h}}function li(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var ui=(new r.Component).refs;function ci(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:a({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var di={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=al(),a=il(e),i=ai(r,a);i.payload=n,void 0!==t&&null!==t&&(i.callback=t),ii(e,i),sl(e,a,r)},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=al(),a=il(e),i=ai(r,a);i.tag=1,i.payload=n,void 0!==t&&null!==t&&(i.callback=t),ii(e,i),sl(e,a,r)},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=al(),r=il(e),a=ai(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),ii(e,a),sl(e,r,t)}};function hi(e,n,t,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!n.prototype||!n.prototype.isPureReactComponent||(!or(t,r)||!or(a,i))}function fi(e,n,t){var r=!1,a=sa,i=n.contextType;return"object"===typeof i&&null!==i?i=ei(i):(a=da(n)?ua:oa.current,i=(r=null!==(r=n.contextTypes)&&void 0!==r)?ca(e,a):sa),n=new n(t,i),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=di,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function pi(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&di.enqueueReplaceState(n,n.state,null)}function mi(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs=ui,ti(e);var i=n.contextType;"object"===typeof i&&null!==i?a.context=ei(i):(i=da(n)?ua:oa.current,a.context=ca(e,i)),oi(e,t,a,r),a.state=e.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(ci(e,n,i,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&di.enqueueReplaceState(a,a.state,null),oi(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var gi=Array.isArray;function _i(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(s(309));var r=t.stateNode}if(!r)throw Error(s(147,e));var a=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===a?n.ref:((n=function(e){var n=r.refs;n===ui&&(n=r.refs={}),null===e?delete n[a]:n[a]=e})._stringRef=a,n)}if("string"!==typeof e)throw Error(s(284));if(!t._owner)throw Error(s(290,e))}return e}function yi(e,n){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n))}function vi(e){function n(n,t){if(e){var r=n.lastEffect;null!==r?(r.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t,t.nextEffect=null,t.flags=8}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Pl(e,n)).index=0,e.sibling=null,e}function i(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags=2,t):r:(n.flags=2,t):t}function o(n){return e&&null===n.alternate&&(n.flags=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=Hl(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function u(e,n,t,r){return null!==n&&n.elementType===t.type?((r=a(n,t.props)).ref=_i(e,n,t),r.return=e,r):((r=Dl(t.type,t.key,t.props,null,e.mode,r)).ref=_i(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Gl(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function d(e,n,t,r,i){return null===n||7!==n.tag?((n=xl(t,e.mode,r,i)).return=e,n):((n=a(n,t)).return=e,n)}function h(e,n,t){if("string"===typeof n||"number"===typeof n)return(n=Hl(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return(t=Dl(n.type,n.key,n.props,null,e.mode,t)).ref=_i(e,null,n),t.return=e,t;case N:return(n=Gl(n,e.mode,t)).return=e,n}if(gi(n)||B(n))return(n=xl(n,e.mode,t,null)).return=e,n;yi(e,n)}return null}function f(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t||"number"===typeof t)return null!==a?null:l(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return t.key===a?t.type===S?d(e,n,t.props.children,r,a):u(e,n,t,r):null;case N:return t.key===a?c(e,n,t,r):null}if(gi(t)||B(t))return null!==a?null:d(e,n,t,r,null);yi(e,t)}return null}function p(e,n,t,r,a){if("string"===typeof r||"number"===typeof r)return l(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return e=e.get(null===r.key?t:r.key)||null,r.type===S?d(n,e,r.props.children,a,r.key):u(n,e,r,a);case N:return c(n,e=e.get(null===r.key?t:r.key)||null,r,a)}if(gi(r)||B(r))return d(n,e=e.get(t)||null,r,a,null);yi(n,r)}return null}function m(a,s,o,l){for(var u=null,c=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var _=f(a,d,o[m],l);if(null===_){null===d&&(d=g);break}e&&d&&null===_.alternate&&n(a,d),s=i(_,s,m),null===c?u=_:c.sibling=_,c=_,d=g}if(m===o.length)return t(a,d),u;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(a,d);m<o.length;m++)null!==(g=p(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=i(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return n(a,e)}),u}function g(a,o,l,u){var c=B(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=o,g=o=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=f(a,m,y.value,u);if(null===v){null===m&&(m=_);break}e&&m&&null===v.alternate&&n(a,m),o=i(v,o,g),null===d?c=v:d.sibling=v,d=v,m=_}if(y.done)return t(a,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,u))&&(o=i(y,o,g),null===d?c=y:d.sibling=y,d=y);return c}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return n(a,e)}),c}return function(e,r,i,l){var u="object"===typeof i&&null!==i&&i.type===S&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case C:e:{for(c=i.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(i.type===S){t(e,u.sibling),(r=a(u,i.props.children)).return=e,e=r;break e}break;default:if(u.elementType===i.type){t(e,u.sibling),(r=a(u,i.props)).ref=_i(e,u,i),r.return=e,e=r;break e}}t(e,u);break}n(e,u),u=u.sibling}i.type===S?((r=xl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Dl(i.type,i.key,i.props,null,e.mode,l)).ref=_i(e,r,i),l.return=e,e=l)}return o(e);case N:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){t(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}t(e,r);break}n(e,r),r=r.sibling}(r=Gl(i,e.mode,l)).return=e,e=r}return o(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(t(e,r.sibling),(r=a(r,i)).return=e,e=r):(t(e,r),(r=Hl(i,e.mode,l)).return=e,e=r),o(e);if(gi(i))return m(e,r,i,l);if(B(i))return g(e,r,i,l);if(c&&yi(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Y(e.type)||"Component"))}return t(e,r)}}var Ei=vi(!0),bi=vi(!1),Ci={},Ni=ra(Ci),Si=ra(Ci),Oi=ra(Ci);function Ti(e){if(e===Ci)throw Error(s(174));return e}function Ai(e,n){switch(ia(Oi,n),ia(Si,e),ia(Ni,Ci),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:fe(null,"");break;default:n=fe(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}aa(Ni),ia(Ni,n)}function wi(){aa(Ni),aa(Si),aa(Oi)}function Ii(e){Ti(Oi.current);var n=Ti(Ni.current),t=fe(n,e.type);n!==t&&(ia(Si,e),ia(Ni,t))}function Ri(e){Si.current===e&&(aa(Ni),aa(Si))}var ki=ra(0);function Mi(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(64&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ui=null,Li=null,Pi=!1;function Di(e,n){var t=Ul(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=n,t.return=e,t.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t}function xi(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,!0);case 13:default:return!1}}function Fi(e){if(Pi){var n=Li;if(n){var t=n;if(!xi(e,n)){if(!(n=Br(t.nextSibling))||!xi(e,n))return e.flags=-1025&e.flags|2,Pi=!1,void(Ui=e);Di(Ui,t)}Ui=e,Li=Br(n.firstChild)}else e.flags=-1025&e.flags|2,Pi=!1,Ui=e}}function Hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ui=e}function Gi(e){if(e!==Ui)return!1;if(!Pi)return Hi(e),Pi=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!Fr(n,e.memoizedProps))for(n=Li;n;)Di(e,n),n=Br(n.nextSibling);if(Hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){Li=Br(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}Li=null}}else Li=Ui?Br(e.stateNode.nextSibling):null;return!0}function ji(){Li=Ui=null,Pi=!1}var Bi=[];function zi(){for(var e=0;e<Bi.length;e++)Bi[e]._workInProgressVersionPrimary=null;Bi.length=0}var Vi=b.ReactCurrentDispatcher,qi=b.ReactCurrentBatchConfig,Ki=0,Yi=null,Qi=null,Wi=null,Ji=!1,Xi=!1;function $i(){throw Error(s(321))}function Zi(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!ir(e[t],n[t]))return!1;return!0}function es(e,n,t,r,a,i){if(Ki=i,Yi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Vi.current=null===e||null===e.memoizedState?Os:Ts,e=t(r,a),Xi){i=0;do{if(Xi=!1,!(25>i))throw Error(s(301));i+=1,Wi=Qi=null,n.updateQueue=null,Vi.current=As,e=t(r,a)}while(Xi)}if(Vi.current=Ss,n=null!==Qi&&null!==Qi.next,Ki=0,Wi=Qi=Yi=null,Ji=!1,n)throw Error(s(300));return e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Yi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function ts(){if(null===Qi){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=Qi.next;var n=null===Wi?Yi.memoizedState:Wi.next;if(null!==n)Wi=n,Qi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qi=e).memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},null===Wi?Yi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function rs(e,n){return"function"===typeof n?n(e):n}function as(e){var n=ts(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=Qi,a=r.baseQueue,i=t.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,t.pending=null}if(null!==a){a=a.next,r=r.baseState;var l=o=i=null,u=a;do{var c=u.lane;if((Ki&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,Yi.lanes|=c,Uo|=c}u=u.next}while(null!==u&&u!==a);null===l?i=r:l.next=o,ir(r,n.memoizedState)||(Is=!0),n.memoizedState=r,n.baseState=i,n.baseQueue=l,t.lastRenderedState=r}return[n.memoizedState,t.dispatch]}function is(e){var n=ts(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,i=n.memoizedState;if(null!==a){t.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);ir(i,n.memoizedState)||(Is=!0),n.memoizedState=i,null===n.baseQueue&&(n.baseState=i),t.lastRenderedState=i}return[i,r]}function ss(e,n,t){var r=n._getVersion;r=r(n._source);var a=n._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Ki&e)===e)&&(n._workInProgressVersionPrimary=r,Bi.push(n))),e)return t(n._source);throw Bi.push(n),Error(s(350))}function os(e,n,t,r){var a=Oo;if(null===a)throw Error(s(349));var i=n._getVersion,o=i(n._source),l=Vi.current,u=l.useState(function(){return ss(a,n,t)}),c=u[1],d=u[0];u=Wi;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var g=Yi;return e.memoizedState={refs:f,source:n,subscribe:r},l.useEffect(function(){f.getSnapshot=t,f.setSnapshot=c;var e=i(n._source);if(!ir(o,e)){e=t(n._source),ir(d,e)||(c(e),e=il(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,s=e;0<s;){var l=31-zn(s),u=1<<l;r[l]|=e,s&=~u}}},[t,n,r]),l.useEffect(function(){return r(n._source,function(){var e=f.getSnapshot,t=f.setSnapshot;try{t(e(n._source));var r=il(g);a.mutableReadLanes|=r&a.pendingLanes}catch(i){t(function(){throw i})}})},[n,r]),ir(p,t)&&ir(m,n)&&ir(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:d}).dispatch=c=Ns.bind(null,Yi,e),u.queue=e,u.baseQueue=null,d=ss(a,n,t),u.memoizedState=u.baseState=d),d}function ls(e,n,t){return os(ts(),e,n,t)}function us(e){var n=ns();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=Ns.bind(null,Yi,e),[n.memoizedState,e]}function cs(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=Yi.updateQueue)?(n={lastEffect:null},Yi.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function ds(e){return e={current:e},ns().memoizedState=e}function hs(){return ts().memoizedState}function fs(e,n,t,r){var a=ns();Yi.flags|=e,a.memoizedState=cs(1|n,t,void 0,void 0===r?null:r)}function ps(e,n,t,r){var a=ts();r=void 0===r?null:r;var i=void 0;if(null!==Qi){var s=Qi.memoizedState;if(i=s.destroy,null!==r&&Zi(r,s.deps))return void cs(n,t,i,r)}Yi.flags|=e,a.memoizedState=cs(1|n,t,i,r)}function ms(e,n){return fs(516,4,e,n)}function gs(e,n){return ps(516,4,e,n)}function _s(e,n){return ps(4,2,e,n)}function ys(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function vs(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,ps(4,2,ys.bind(null,n,e),t)}function Es(){}function bs(e,n){var t=ts();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Zi(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Cs(e,n){var t=ts();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Zi(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Ns(e,n,t){var r=al(),a=il(e),i={lane:a,action:t,eagerReducer:null,eagerState:null,next:null},s=n.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),n.pending=i,s=e.alternate,e===Yi||null!==s&&s===Yi)Xi=Ji=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=n.lastRenderedReducer))try{var o=n.lastRenderedState,l=s(o,t);if(i.eagerReducer=s,i.eagerState=l,ir(l,o))return}catch(u){}sl(e,a,r)}}var Ss={readContext:ei,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useOpaqueIdentifier:$i,unstable_isNewReconciler:!1},Os={readContext:ei,useCallback:function(e,n){return ns().memoizedState=[e,void 0===n?null:n],e},useContext:ei,useEffect:ms,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,fs(4,2,ys.bind(null,n,e),t)},useLayoutEffect:function(e,n){return fs(4,2,e,n)},useMemo:function(e,n){var t=ns();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=ns();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:n}).dispatch=Ns.bind(null,Yi,e),[r.memoizedState,e]},useRef:ds,useState:us,useDebugValue:Es,useDeferredValue:function(e){var n=us(e),t=n[0],r=n[1];return ms(function(){var n=qi.transition;qi.transition=1;try{r(e)}finally{qi.transition=n}},[e]),t},useTransition:function(){var e=us(!1),n=e[0];return ds(e=function(e,n){var t=Fa();Ga(98>t?98:t,function(){e(!0)}),Ga(97<t?97:t,function(){var t=qi.transition;qi.transition=1;try{e(!1),n()}finally{qi.transition=t}})}.bind(null,e[1])),[e,n]},useMutableSource:function(e,n,t){var r=ns();return r.memoizedState={refs:{getSnapshot:n,setSnapshot:null},source:e,subscribe:t},os(r,e,n,t)},useOpaqueIdentifier:function(){if(Pi){var e=!1,n=function(e){return{$$typeof:P,toString:e,valueOf:e}}(function(){throw e||(e=!0,t("r:"+(Vr++).toString(36))),Error(s(355))}),t=us(n)[1];return 0===(2&Yi.mode)&&(Yi.flags|=516,cs(5,function(){t("r:"+(Vr++).toString(36))},void 0,null)),n}return us(n="r:"+(Vr++).toString(36)),n},unstable_isNewReconciler:!1},Ts={readContext:ei,useCallback:bs,useContext:ei,useEffect:gs,useImperativeHandle:vs,useLayoutEffect:_s,useMemo:Cs,useReducer:as,useRef:hs,useState:function(){return as(rs)},useDebugValue:Es,useDeferredValue:function(e){var n=as(rs),t=n[0],r=n[1];return gs(function(){var n=qi.transition;qi.transition=1;try{r(e)}finally{qi.transition=n}},[e]),t},useTransition:function(){var e=as(rs)[0];return[hs().current,e]},useMutableSource:ls,useOpaqueIdentifier:function(){return as(rs)[0]},unstable_isNewReconciler:!1},As={readContext:ei,useCallback:bs,useContext:ei,useEffect:gs,useImperativeHandle:vs,useLayoutEffect:_s,useMemo:Cs,useReducer:is,useRef:hs,useState:function(){return is(rs)},useDebugValue:Es,useDeferredValue:function(e){var n=is(rs),t=n[0],r=n[1];return gs(function(){var n=qi.transition;qi.transition=1;try{r(e)}finally{qi.transition=n}},[e]),t},useTransition:function(){var e=is(rs)[0];return[hs().current,e]},useMutableSource:ls,useOpaqueIdentifier:function(){return is(rs)[0]},unstable_isNewReconciler:!1},ws=b.ReactCurrentOwner,Is=!1;function Rs(e,n,t,r){n.child=null===e?bi(n,null,t,r):Ei(n,e.child,t,r)}function ks(e,n,t,r,a){t=t.render;var i=n.ref;return Za(n,a),r=es(e,n,t,r,i,a),null===e||Is?(n.flags|=1,Rs(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-517,e.lanes&=~a,$s(e,n,a))}function Ms(e,n,t,r,a,i){if(null===e){var s=t.type;return"function"!==typeof s||Ll(s)||void 0!==s.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Dl(t.type,null,r,n,n.mode,i)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=s,Us(e,n,s,r,a,i))}return s=e.child,0===(a&i)&&(a=s.memoizedProps,(t=null!==(t=t.compare)?t:or)(a,r)&&e.ref===n.ref)?$s(e,n,i):(n.flags|=1,(e=Pl(s,r)).ref=n.ref,e.return=n,n.child=e)}function Us(e,n,t,r,a,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===n.ref){if(Is=!1,0===(i&a))return n.lanes=e.lanes,$s(e,n,i);0!==(16384&e.flags)&&(Is=!0)}return Ds(e,n,t,r,i)}function Ls(e,n,t){var r=n.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&n.mode))n.memoizedState={baseLanes:0},fl(n,t);else{if(0===(1073741824&t))return e=null!==i?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e},fl(n,e),null;n.memoizedState={baseLanes:0},fl(n,null!==i?i.baseLanes:t)}else null!==i?(r=i.baseLanes|t,n.memoizedState=null):r=t,fl(n,r);return Rs(e,n,a,t),n.child}function Ps(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=128)}function Ds(e,n,t,r,a){var i=da(t)?ua:oa.current;return i=ca(n,i),Za(n,a),t=es(e,n,t,r,i,a),null===e||Is?(n.flags|=1,Rs(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-517,e.lanes&=~a,$s(e,n,a))}function xs(e,n,t,r,a){if(da(t)){var i=!0;ma(n)}else i=!1;if(Za(n,a),null===n.stateNode)null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),fi(n,t,r),mi(n,t,r,a),r=!0;else if(null===e){var s=n.stateNode,o=n.memoizedProps;s.props=o;var l=s.context,u=t.contextType;"object"===typeof u&&null!==u?u=ei(u):u=ca(n,u=da(t)?ua:oa.current);var c=t.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&pi(n,s,r,u),ni=!1;var h=n.memoizedState;s.state=h,oi(n,r,s,a),l=n.memoizedState,o!==r||h!==l||la.current||ni?("function"===typeof c&&(ci(n,t,c,r),l=n.memoizedState),(o=ni||hi(n,t,o,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(n.flags|=4)):("function"===typeof s.componentDidMount&&(n.flags|=4),n.memoizedProps=r,n.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"===typeof s.componentDidMount&&(n.flags|=4),r=!1)}else{s=n.stateNode,ri(e,n),o=n.memoizedProps,u=n.type===n.elementType?o:qa(n.type,o),s.props=u,d=n.pendingProps,h=s.context,"object"===typeof(l=t.contextType)&&null!==l?l=ei(l):l=ca(n,l=da(t)?ua:oa.current);var f=t.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&pi(n,s,r,l),ni=!1,h=n.memoizedState,s.state=h,oi(n,r,s,a);var p=n.memoizedState;o!==d||h!==p||la.current||ni?("function"===typeof f&&(ci(n,t,f,r),p=n.memoizedState),(u=ni||hi(n,t,u,r,h,p,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(n.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(n.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=256),n.memoizedProps=r,n.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(n.flags|=256),r=!1)}return Fs(e,n,t,r,i,a)}function Fs(e,n,t,r,a,i){Ps(e,n);var s=0!==(64&n.flags);if(!r&&!s)return a&&ga(n,t,!1),$s(e,n,i);r=n.stateNode,ws.current=n;var o=s&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&s?(n.child=Ei(n,e.child,null,i),n.child=Ei(n,null,o,i)):Rs(e,n,o,i),n.memoizedState=r.state,a&&ga(n,t,!0),n.child}function Hs(e){var n=e.stateNode;n.pendingContext?fa(0,n.pendingContext,n.pendingContext!==n.context):n.context&&fa(0,n.context,!1),Ai(e,n.containerInfo)}var Gs,js,Bs,zs,Vs={dehydrated:null,retryLane:0};function qs(e,n,t){var r,a=n.pendingProps,i=ki.current,s=!1;return(r=0!==(64&n.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,n.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),ia(ki,1&i),null===e?(void 0!==a.fallback&&Fi(n),e=a.children,i=a.fallback,s?(e=Ks(n,e,i,t),n.child.memoizedState={baseLanes:t},n.memoizedState=Vs,e):"number"===typeof a.unstable_expectedLoadTime?(e=Ks(n,e,i,t),n.child.memoizedState={baseLanes:t},n.memoizedState=Vs,n.lanes=33554432,e):((t=Fl({mode:"visible",children:e},n.mode,t,null)).return=n,n.child=t)):(e.memoizedState,s?(a=Qs(e,n,a.children,a.fallback,t),s=n.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=e.childLanes&~t,n.memoizedState=Vs,a):(t=Ys(e,n,a.children,t),n.memoizedState=null,t))}function Ks(e,n,t,r){var a=e.mode,i=e.child;return n={mode:"hidden",children:n},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=n):i=Fl(n,a,0,null),t=xl(t,a,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,t}function Ys(e,n,t,r){var a=e.child;return e=a.sibling,t=Pl(a,{mode:"visible",children:t}),0===(2&n.mode)&&(t.lanes=r),t.return=n,t.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,n.firstEffect=n.lastEffect=e),n.child=t}function Qs(e,n,t,r,a){var i=n.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:t};return 0===(2&i)&&n.child!==s?((t=n.child).childLanes=0,t.pendingProps=o,null!==(s=t.lastEffect)?(n.firstEffect=t.firstEffect,n.lastEffect=s,s.nextEffect=null):n.firstEffect=n.lastEffect=null):t=Pl(s,o),null!==e?r=Pl(e,r):(r=xl(r,i,a,null)).flags|=2,r.return=n,t.return=n,t.sibling=r,n.child=t,r}function Ws(e,n){e.lanes|=n;var t=e.alternate;null!==t&&(t.lanes|=n),$a(e.return,n)}function Js(e,n,t,r,a,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a,lastEffect:i}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=a,s.lastEffect=i)}function Xs(e,n,t){var r=n.pendingProps,a=r.revealOrder,i=r.tail;if(Rs(e,n,r.children,t),0!==(2&(r=ki.current)))r=1&r|2,n.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,t);else if(19===e.tag)Ws(e,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ia(ki,r),0===(2&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===Mi(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Js(n,!1,a,t,i,n.lastEffect);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Mi(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Js(n,!0,t,null,i,n.lastEffect);break;case"together":Js(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function $s(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Uo|=n.lanes,0!==(t&n.childLanes)){if(null!==e&&n.child!==e.child)throw Error(s(153));if(null!==n.child){for(t=Pl(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Pl(e,e.pendingProps)).return=n;t.sibling=null}return n.child}return null}function Zs(e,n){if(!Pi)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function eo(e,n,t){var r=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return da(n.type)&&ha(),null;case 3:return wi(),aa(la),aa(oa),zi(),(r=n.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gi(n)?n.flags|=4:r.hydrate||(n.flags|=256)),js(n),null;case 5:Ri(n);var i=Ti(Oi.current);if(t=n.type,null!==e&&null!=n.stateNode)Bs(e,n,t,r,i),e.ref!==n.ref&&(n.flags|=128);else{if(!r){if(null===n.stateNode)throw Error(s(166));return null}if(e=Ti(Ni.current),Gi(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[Kr]=n,r[Yr]=o,t){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Sr(Er[e],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":ee(r,o),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Sr("invalid",r);break;case"textarea":le(r,o),Sr("invalid",r)}for(var u in Ne(t,o),e=null,o)o.hasOwnProperty(u)&&(i=o[u],"children"===u?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&Sr("scroll",r));switch(t){case"input":J(r),re(r,o,!0);break;case"textarea":J(r),ce(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Lr)}r=e,n.updateQueue=r,null!==r&&(n.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,e===de.html&&(e=he(t)),e===de.html?"script"===t?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(t,{is:r.is}):(e=u.createElement(t),"select"===t&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,t),e[Kr]=n,e[Yr]=r,Gs(e,n,!1,!1),n.stateNode=e,u=Se(t,r),t){case"dialog":Sr("cancel",e),Sr("close",e),i=r;break;case"iframe":case"object":case"embed":Sr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Er.length;i++)Sr(Er[i],e);i=r;break;case"source":Sr("error",e),i=r;break;case"img":case"image":case"link":Sr("error",e),Sr("load",e),i=r;break;case"details":Sr("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Sr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Sr("invalid",e);break;case"textarea":le(e,r),i=oe(e,r),Sr("invalid",e);break;default:i=r}Ne(t,i);var c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?be(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ge(e,d):"children"===o?"string"===typeof d?("textarea"!==t||""!==d)&&_e(e,d):"number"===typeof d&&_e(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Sr("scroll",e):null!=d&&E(e,o,d,u))}switch(t){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Lr)}xr(t,r)&&(n.flags|=4)}null!==n.ref&&(n.flags|=128)}return null;case 6:if(e&&null!=n.stateNode)zs(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(s(166));t=Ti(Oi.current),Ti(Ni.current),Gi(n)?(r=n.stateNode,t=n.memoizedProps,r[Kr]=n,r.nodeValue!==t&&(n.flags|=4)):((r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[Kr]=n,n.stateNode=r)}return null;case 13:return aa(ki),r=n.memoizedState,0!==(64&n.flags)?(n.lanes=t,n):(r=null!==r,t=!1,null===e?void 0!==n.memoizedProps.fallback&&Gi(n):t=null!==e.memoizedState,r&&!t&&0!==(2&n.mode)&&(null===e&&!0!==n.memoizedProps.unstable_avoidThisFallback||0!==(1&ki.current)?0===Ro&&(Ro=3):(0!==Ro&&3!==Ro||(Ro=4),null===Oo||0===(134217727&Uo)&&0===(134217727&Lo)||ul(Oo,Ao))),(r||t)&&(n.flags|=4),null);case 4:return wi(),js(n),null===e&&Tr(n.stateNode.containerInfo),null;case 10:return Xa(n),null;case 17:return da(n.type)&&ha(),null;case 19:if(aa(ki),null===(r=n.memoizedState))return null;if(o=0!==(64&n.flags),null===(u=r.rendering))if(o)Zs(r,!1);else{if(0!==Ro||null!==e&&0!==(64&e.flags))for(e=n.child;null!==e;){if(null!==(u=Mi(e))){for(n.flags|=64,Zs(r,!1),null!==(o=u.updateQueue)&&(n.updateQueue=o,n.flags|=4),null===r.lastEffect&&(n.firstEffect=null),n.lastEffect=r.lastEffect,r=t,t=n.child;null!==t;)e=r,(o=t).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return ia(ki,1&ki.current|2),n.child}e=e.sibling}null!==r.tail&&xa()>Fo&&(n.flags|=64,o=!0,Zs(r,!1),n.lanes=33554432)}else{if(!o)if(null!==(e=Mi(u))){if(n.flags|=64,o=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Zs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Pi)return null!==(n=n.lastEffect=r.lastEffect)&&(n.nextEffect=null),null}else 2*xa()-r.renderingStartTime>Fo&&1073741824!==t&&(n.flags|=64,o=!0,Zs(r,!1),n.lanes=33554432);r.isBackwards?(u.sibling=n.child,n.child=u):(null!==(t=r.last)?t.sibling=u:n.child=u,r.last=u)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=n.lastEffect,r.renderingStartTime=xa(),t.sibling=null,n=ki.current,ia(ki,o?1&n|2:1&n),t):null;case 23:case 24:return pl(),null!==e&&null!==e.memoizedState!==(null!==n.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(n.flags|=4),null}throw Error(s(156,n.tag))}function no(e){switch(e.tag){case 1:da(e.type)&&ha();var n=e.flags;return 4096&n?(e.flags=-4097&n|64,e):null;case 3:if(wi(),aa(la),aa(oa),zi(),0!==(64&(n=e.flags)))throw Error(s(285));return e.flags=-4097&n|64,e;case 5:return Ri(e),null;case 13:return aa(ki),4096&(n=e.flags)?(e.flags=-4097&n|64,e):null;case 19:return aa(ki),null;case 4:return wi(),null;case 10:return Xa(e),null;case 23:case 24:return pl(),null;default:return null}}function to(e,n){try{var t="",r=n;do{t+=K(r),r=r.return}while(r);var a=t}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:n,stack:a}}function ro(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}Gs=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},js=function(){},Bs=function(e,n,t,r){var i=e.memoizedProps;if(i!==r){e=n.stateNode,Ti(Ni.current);var s,o=null;switch(t){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"option":i=ie(e,i),r=ie(e,r),o=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":i=oe(e,i),r=oe(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Lr)}for(d in Ne(t,r),t=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(t||(t={}),t[s]=c[s])}else t||(o||(o=[]),o.push(d,t)),t=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Sr("scroll",e),o||u===c||(o=[])):"object"===typeof c&&null!==c&&c.$$typeof===P?c.toString():(o=o||[]).push(d,c))}t&&(o=o||[]).push("style",t);var d=o;(n.updateQueue=d)&&(n.flags|=4)}},zs=function(e,n,t,r){t!==r&&(n.flags|=4)};var ao="function"===typeof WeakMap?WeakMap:Map;function io(e,n,t){(t=ai(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Bo||(Bo=!0,zo=r),ro(0,n)},t}function so(e,n,t){(t=ai(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return ro(0,n),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(t.callback=function(){"function"!==typeof r&&(null===Vo?Vo=new Set([this]):Vo.add(this),ro(0,n));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}var oo="function"===typeof WeakSet?WeakSet:Set;function lo(e){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(t){Rl(e,t)}else n.current=null}function uo(e,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&n.flags&&null!==e){var t=e.memoizedProps,r=e.memoizedState;n=(e=n.stateNode).getSnapshotBeforeUpdate(n.elementType===n.type?t:qa(n.type,t),r),e.__reactInternalSnapshotBeforeUpdate=n}return;case 3:return void(256&n.flags&&jr(n.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function co(e,n,t){switch(t.tag){case 0:case 11:case 15:case 22:if(null!==(n=null!==(n=t.updateQueue)?n.lastEffect:null)){e=n=n.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==n)}if(null!==(n=null!==(n=t.updateQueue)?n.lastEffect:null)){e=n=n.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Al(t,e),Tl(t,e)),e=r}while(e!==n)}return;case 1:return e=t.stateNode,4&t.flags&&(null===n?e.componentDidMount():(r=t.elementType===t.type?n.memoizedProps:qa(t.type,n.memoizedProps),e.componentDidUpdate(r,n.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(n=t.updateQueue)&&li(t,n,e));case 3:if(null!==(n=t.updateQueue)){if(e=null,null!==t.child)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}li(t,n,e)}return;case 5:return e=t.stateNode,void(null===n&&4&t.flags&&xr(t.type,t.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===t.memoizedState&&(t=t.alternate,null!==t&&(t=t.memoizedState,null!==t&&(t=t.dehydrated,null!==t&&bn(t)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ho(e,n){for(var t=e;;){if(5===t.tag){var r=t.stateNode;if(n)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var a=t.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ee("display",a)}}else if(6===t.tag)t.stateNode.nodeValue=n?"":t.memoizedProps;else if((23!==t.tag&&24!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function fo(e,n){if(ya&&"function"===typeof ya.onCommitFiberUnmount)try{ya.onCommitFiberUnmount(_a,n)}catch(i){}switch(n.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=n.updateQueue)&&null!==(e=e.lastEffect)){var t=e=e.next;do{var r=t,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Al(n,t);else{r=n;try{a()}catch(i){Rl(r,i)}}t=t.next}while(t!==e)}break;case 1:if(lo(n),"function"===typeof(e=n.stateNode).componentWillUnmount)try{e.props=n.memoizedProps,e.state=n.memoizedState,e.componentWillUnmount()}catch(i){Rl(n,i)}break;case 5:lo(n);break;case 4:_o(e,n)}}function po(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function mo(e){return 5===e.tag||3===e.tag||4===e.tag}function go(e){e:{for(var n=e.return;null!==n;){if(mo(n))break e;n=n.return}throw Error(s(160))}var t=n;switch(n=t.stateNode,t.tag){case 5:var r=!1;break;case 3:case 4:n=n.containerInfo,r=!0;break;default:throw Error(s(161))}16&t.flags&&(_e(n,""),t.flags&=-17);e:n:for(t=e;;){for(;null===t.sibling;){if(null===t.return||mo(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue n;if(null===t.child||4===t.tag)continue n;t.child.return=t,t=t.child}if(!(2&t.flags)){t=t.stateNode;break e}}r?function e(n,t,r){var a=n.tag,i=5===a||6===a;if(i)n=i?n.stateNode:n.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(n,t):r.insertBefore(n,t):(8===r.nodeType?(t=r.parentNode,t.insertBefore(n,r)):(t=r,t.appendChild(n)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==t.onclick||(t.onclick=Lr));else if(4!==a&&(n=n.child,null!==n))for(e(n,t,r),n=n.sibling;null!==n;)e(n,t,r),n=n.sibling}(e,t,n):function e(n,t,r){var a=n.tag,i=5===a||6===a;if(i)n=i?n.stateNode:n.stateNode.instance,t?r.insertBefore(n,t):r.appendChild(n);else if(4!==a&&(n=n.child,null!==n))for(e(n,t,r),n=n.sibling;null!==n;)e(n,t,r),n=n.sibling}(e,t,n)}function _o(e,n){for(var t,r,a=n,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(s(160));switch(t=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:t=t.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var o=e,l=a,u=l;;)if(fo(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(o=t,l=a.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):t.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){t=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(fo(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function yo(e,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:var t=n.updateQueue;if(null!==(t=null!==t?t.lastEffect:null)){var r=t=t.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==t)}return;case 1:return;case 5:if(null!=(t=n.stateNode)){r=n.memoizedProps;var a=null!==e?e.memoizedProps:r;e=n.type;var i=n.updateQueue;if(n.updateQueue=null,null!==i){for(t[Yr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ne(t,r),Se(e,a),n=Se(e,r),a=0;a<i.length;a+=2){var o=i[a],l=i[a+1];"style"===o?be(t,l):"dangerouslySetInnerHTML"===o?ge(t,l):"children"===o?_e(t,l):E(t,o,l,n)}switch(e){case"input":te(t,r);break;case"textarea":ue(t,r);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?se(t,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(t,!!r.multiple,r.defaultValue,!0):se(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===n.stateNode)throw Error(s(162));return void(n.stateNode.nodeValue=n.memoizedProps);case 3:return void((t=n.stateNode).hydrate&&(t.hydrate=!1,bn(t.containerInfo)));case 12:return;case 13:return null!==n.memoizedState&&(xo=xa(),ho(n.child,!0)),void vo(n);case 19:return void vo(n);case 17:return;case 23:case 24:return void ho(n,null!==n.memoizedState)}throw Error(s(163))}function vo(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new oo),n.forEach(function(n){var r=function(e,n){var t=e.stateNode;null!==t&&t.delete(n),0===(n=0)&&(0===(2&(n=e.mode))?n=1:0===(4&n)?n=99===Fa()?1:2:(0===el&&(el=Mo),0===(n=Gn(62914560&~el))&&(n=4194304))),t=al(),null!==(e=ol(e,n))&&(Bn(e,n,t),ll(e,t))}.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Eo(e,n){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(n=n.memoizedState)&&null===n.dehydrated)}var bo=Math.ceil,Co=b.ReactCurrentDispatcher,No=b.ReactCurrentOwner,So=0,Oo=null,To=null,Ao=0,wo=0,Io=ra(0),Ro=0,ko=null,Mo=0,Uo=0,Lo=0,Po=0,Do=null,xo=0,Fo=1/0;function Ho(){Fo=xa()+500}var Go,jo=null,Bo=!1,zo=null,Vo=null,qo=!1,Ko=null,Yo=90,Qo=[],Wo=[],Jo=null,Xo=0,$o=null,Zo=-1,el=0,nl=0,tl=null,rl=!1;function al(){return 0!==(48&So)?xa():-1!==Zo?Zo:Zo=xa()}function il(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Fa()?1:2;if(0===el&&(el=Mo),0!==Va.transition){0!==nl&&(nl=null!==Do?Do.pendingLanes:0),e=el;var n=4186112&~nl;return 0===(n&=-n)&&(0===(n=(e=4186112&~e)&-e)&&(n=8192)),n}return e=Fa(),0!==(4&So)&&98===e?e=Hn(12,el):e=Hn(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),el),e}function sl(e,n,t){if(50<Xo)throw Xo=0,$o=null,Error(s(185));if(null===(e=ol(e,n)))return null;Bn(e,n,t),e===Oo&&(Lo|=n,4===Ro&&ul(e,Ao));var r=Fa();1===n?0!==(8&So)&&0===(48&So)?cl(e):(ll(e,t),0===So&&(Ho(),Ba())):(0===(4&So)||98!==r&&99!==r||(null===Jo?Jo=new Set([e]):Jo.add(e)),ll(e,t)),Do=e}function ol(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}function ll(e,n){for(var t=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-zn(o),u=1<<l,c=i[l];if(-1===c){if(0===(u&r)||0!==(u&a)){c=n,Dn(u);var d=Pn;i[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=n&&(e.expiredLanes|=u);o&=~u}if(r=xn(e,e===Oo?Ao:0),n=Pn,0===r)null!==t&&(t!==ka&&ba(t),e.callbackNode=null,e.callbackPriority=0);else{if(null!==t){if(e.callbackPriority===n)return;t!==ka&&ba(t)}15===n?(t=cl.bind(null,e),null===Ua?(Ua=[t],La=Ea(Ta,za)):Ua.push(t),t=ka):14===n?t=ja(99,cl.bind(null,e)):t=ja(t=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(n),function e(n){Zo=-1;nl=el=0;if(0!==(48&So))throw Error(s(327));var t=n.callbackNode;if(Ol()&&n.callbackNode!==t)return null;var r=xn(n,n===Oo?Ao:0);if(0===r)return null;var a=r;var i=So;So|=16;var o=_l();Oo===n&&Ao===a||(Ho(),ml(n,a));for(;;)try{El();break}catch(l){gl(n,l)}Ja();Co.current=o;So=i;null!==To?a=0:(Oo=null,Ao=0,a=Ro);if(0!==(Mo&Lo))ml(n,0);else if(0!==a){if(2===a&&(So|=64,n.hydrate&&(n.hydrate=!1,jr(n.containerInfo)),0!==(r=Fn(n))&&(a=yl(n,r))),1===a)throw t=ko,ml(n,0),ul(n,r),ll(n,xa()),t;switch(n.finishedWork=n.current.alternate,n.finishedLanes=r,a){case 0:case 1:throw Error(s(345));case 2:Nl(n);break;case 3:if(ul(n,r),(62914560&r)===r&&10<(a=xo+500-xa())){if(0!==xn(n,0))break;if(((i=n.suspendedLanes)&r)!==r){al(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Hr(Nl.bind(null,n),a);break}Nl(n);break;case 4:if(ul(n,r),(4186112&r)===r)break;for(a=n.eventTimes,i=-1;0<r;){var u=31-zn(r);o=1<<u,(u=a[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=xa()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bo(r/1960))-r)){n.timeoutHandle=Hr(Nl.bind(null,n),r);break}Nl(n);break;case 5:Nl(n);break;default:throw Error(s(329))}}ll(n,xa());return n.callbackNode===t?e.bind(null,n):null}.bind(null,e)),e.callbackPriority=n,e.callbackNode=t}}function ul(e,n){for(n&=~Po,n&=~Lo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-zn(n),r=1<<t;e[t]=-1,n&=~r}}function cl(e){if(0!==(48&So))throw Error(s(327));if(Ol(),e===Oo&&0!==(e.expiredLanes&Ao)){var n=Ao,t=yl(e,n);0!==(Mo&Lo)&&(t=yl(e,n=xn(e,n)))}else t=yl(e,n=xn(e,0));if(0!==e.tag&&2===t&&(So|=64,e.hydrate&&(e.hydrate=!1,jr(e.containerInfo)),0!==(n=Fn(e))&&(t=yl(e,n))),1===t)throw t=ko,ml(e,0),ul(e,n),ll(e,xa()),t;return e.finishedWork=e.current.alternate,e.finishedLanes=n,Nl(e),ll(e,xa()),null}function dl(e,n){var t=So;So|=1;try{return e(n)}finally{0===(So=t)&&(Ho(),Ba())}}function hl(e,n){var t=So;So&=-2,So|=8;try{return e(n)}finally{0===(So=t)&&(Ho(),Ba())}}function fl(e,n){ia(Io,wo),wo|=n,Mo|=n}function pl(){wo=Io.current,aa(Io)}function ml(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,Gr(t)),null!==To)for(t=To.return;null!==t;){var r=t;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ha();break;case 3:wi(),aa(la),aa(oa),zi();break;case 5:Ri(r);break;case 4:wi();break;case 13:case 19:aa(ki);break;case 10:Xa(r);break;case 23:case 24:pl()}t=t.return}Oo=e,To=Pl(e.current,null),Ao=wo=Mo=n,Ro=0,ko=null,Po=Lo=Uo=0}function gl(e,n){for(;;){var t=To;try{if(Ja(),Vi.current=Ss,Ji){for(var r=Yi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Ji=!1}if(Ki=0,Wi=Qi=Yi=null,Xi=!1,No.current=null,null===t||null===t.return){Ro=1,ko=n,To=null;break}e:{var i=e,s=t.return,o=t,l=n;if(n=Ao,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=0!==(1&ki.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var g=h.updateQueue;if(null===g){var _=new Set;_.add(u),h.updateQueue=_}else g.add(u);if(0===(2&h.mode)){if(h.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=ai(-1,1);y.tag=2,ii(o,y)}o.lanes|=1;break e}l=void 0,o=n;var v=i.pingCache;if(null===v?(v=i.pingCache=new ao,l=new Set,v.set(u,l)):void 0===(l=v.get(u))&&(l=new Set,v.set(u,l)),!l.has(o)){l.add(o);var E=kl.bind(null,i,u,o);u.then(E,E)}h.flags|=4096,h.lanes=n;break e}h=h.return}while(null!==h);l=Error((Y(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ro&&(Ro=2),l=to(l,o),h=s;do{switch(h.tag){case 3:i=l,h.flags|=4096,n&=-n,h.lanes|=n,si(h,io(0,i,n));break e;case 1:i=l;var b=h.type,C=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Vo||!Vo.has(C)))){h.flags|=4096,n&=-n,h.lanes|=n,si(h,so(h,i,n));break e}}h=h.return}while(null!==h)}Cl(t)}catch(N){n=N,To===t&&null!==t&&(To=t=t.return);continue}break}}function _l(){var e=Co.current;return Co.current=Ss,null===e?Ss:e}function yl(e,n){var t=So;So|=16;var r=_l();for(Oo===e&&Ao===n||ml(e,n);;)try{vl();break}catch(a){gl(e,a)}if(Ja(),So=t,Co.current=r,null!==To)throw Error(s(261));return Oo=null,Ao=0,Ro}function vl(){for(;null!==To;)bl(To)}function El(){for(;null!==To&&!Ca();)bl(To)}function bl(e){var n=Go(e.alternate,e,wo);e.memoizedProps=e.pendingProps,null===n?Cl(e):To=n,No.current=null}function Cl(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(2048&n.flags)){if(null!==(t=eo(t,n,wo)))return void(To=t);if(24!==(t=n).tag&&23!==t.tag||null===t.memoizedState||0!==(1073741824&wo)||0===(4&t.mode)){for(var r=0,a=t.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;t.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=n.firstEffect),null!==n.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=n.firstEffect),e.lastEffect=n.lastEffect),1<n.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=n:e.firstEffect=n,e.lastEffect=n))}else{if(null!==(t=no(n)))return t.flags&=2047,void(To=t);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(n=n.sibling))return void(To=n);To=n=e}while(null!==n);0===Ro&&(Ro=5)}function Nl(e){var n=Fa();return Ga(99,function(e,n){do{Ol()}while(null!==Ko);if(0!==(48&So))throw Error(s(327));var t=e.finishedWork;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(s(177));e.callbackNode=null;var r=t.lanes|t.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<i;){var u=31-zn(i),c=1<<u;a[u]=0,o[u]=-1,l[u]=-1,i&=~c}if(null!==Jo&&0===(24&r)&&Jo.has(e)&&Jo.delete(e),e===Oo&&(To=Oo=null,Ao=0),1<t.flags?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,null!==r){if(a=So,So|=32,No.current=null,Pr=Qn,dr(o=cr())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,i=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break e}var d=0,h=-1,f=-1,p=0,m=0,g=o,_=null;n:for(;;){for(var y;g!==l||0!==i&&3!==g.nodeType||(h=d+i),g!==u||0!==c&&3!==g.nodeType||(f=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)_=g,g=y;for(;;){if(g===o)break n;if(_===l&&++p===i&&(h=d),_===u&&++m===c&&(f=d),null!==(y=g.nextSibling))break;_=(g=_).parentNode}g=y}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Dr={focusedElem:o,selectionRange:l},Qn=!1,tl=null,rl=!1,jo=r;do{try{Sl()}catch(T){if(null===jo)throw Error(s(330));Rl(jo,T),jo=jo.nextEffect}}while(null!==jo);tl=null,jo=r;do{try{for(o=e;null!==jo;){var v=jo.flags;if(16&v&&_e(jo.stateNode,""),128&v){var E=jo.alternate;if(null!==E){var b=E.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&v){case 2:go(jo),jo.flags&=-3;break;case 6:go(jo),jo.flags&=-3,yo(jo.alternate,jo);break;case 1024:jo.flags&=-1025;break;case 1028:jo.flags&=-1025,yo(jo.alternate,jo);break;case 4:yo(jo.alternate,jo);break;case 8:_o(o,l=jo);var C=l.alternate;po(l),null!==C&&po(C)}jo=jo.nextEffect}}catch(T){if(null===jo)throw Error(s(330));Rl(jo,T),jo=jo.nextEffect}}while(null!==jo);if(b=Dr,E=cr(),v=b.focusedElem,o=b.selectionRange,E!==v&&v&&v.ownerDocument&&function e(n,t){return!(!n||!t)&&(n===t||(!n||3!==n.nodeType)&&(t&&3===t.nodeType?e(n,t.parentNode):"contains"in n?n.contains(t):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(t))))}(v.ownerDocument.documentElement,v)){null!==o&&dr(v)&&(E=o.start,void 0===(b=o.end)&&(b=E),"selectionStart"in v?(v.selectionStart=E,v.selectionEnd=Math.min(b,v.value.length)):(b=(E=v.ownerDocument||document)&&E.defaultView||window).getSelection&&(b=b.getSelection(),l=v.textContent.length,C=Math.min(o.start,l),o=void 0===o.end?C:Math.min(o.end,l),!b.extend&&C>o&&(l=o,o=C,C=l),l=ur(v,C),i=ur(v,o),l&&i&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==i.node||b.focusOffset!==i.offset)&&((E=E.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),C>o?(b.addRange(E),b.extend(i.node,i.offset)):(E.setEnd(i.node,i.offset),b.addRange(E))))),E=[];for(b=v;b=b.parentNode;)1===b.nodeType&&E.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<E.length;v++)(b=E[v]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Qn=!!Pr,Dr=Pr=null,e.current=t,jo=r;do{try{for(v=e;null!==jo;){var N=jo.flags;if(36&N&&co(v,jo.alternate,jo),128&N){E=void 0;var S=jo.ref;if(null!==S){var O=jo.stateNode;switch(jo.tag){case 5:E=O;break;default:E=O}"function"===typeof S?S(E):S.current=E}}jo=jo.nextEffect}}catch(T){if(null===jo)throw Error(s(330));Rl(jo,T),jo=jo.nextEffect}}while(null!==jo);jo=null,Ma(),So=a}else e.current=t;if(qo)qo=!1,Ko=e,Yo=n;else for(jo=r;null!==jo;)n=jo.nextEffect,jo.nextEffect=null,8&jo.flags&&((N=jo).sibling=null,N.stateNode=null),jo=n;if(0===(r=e.pendingLanes)&&(Vo=null),1===r?e===$o?Xo++:(Xo=0,$o=e):Xo=0,t=t.stateNode,ya&&"function"===typeof ya.onCommitFiberRoot)try{ya.onCommitFiberRoot(_a,t,void 0,64===(64&t.current.flags))}catch(T){}if(ll(e,xa()),Bo)throw Bo=!1,e=zo,zo=null,e;return 0!==(8&So)?null:(Ba(),null)}.bind(null,e,n)),null}function Sl(){for(;null!==jo;){var e=jo.alternate;rl||null===tl||(0!==(8&jo.flags)?$e(jo,tl)&&(rl=!0):13===jo.tag&&Eo(e,jo)&&$e(jo,tl)&&(rl=!0));var n=jo.flags;0!==(256&n)&&uo(e,jo),0===(512&n)||qo||(qo=!0,ja(97,function(){return Ol(),null})),jo=jo.nextEffect}}function Ol(){if(90!==Yo){var e=97<Yo?97:Yo;return Yo=90,Ga(e,wl)}return!1}function Tl(e,n){Qo.push(n,e),qo||(qo=!0,ja(97,function(){return Ol(),null}))}function Al(e,n){Wo.push(n,e),qo||(qo=!0,ja(97,function(){return Ol(),null}))}function wl(){if(null===Ko)return!1;var e=Ko;if(Ko=null,0!==(48&So))throw Error(s(331));var n=So;So|=32;var t=Wo;Wo=[];for(var r=0;r<t.length;r+=2){var a=t[r],i=t[r+1],o=a.destroy;if(a.destroy=void 0,"function"===typeof o)try{o()}catch(u){if(null===i)throw Error(s(330));Rl(i,u)}}for(t=Qo,Qo=[],r=0;r<t.length;r+=2){a=t[r],i=t[r+1];try{var l=a.create;a.destroy=l()}catch(u){if(null===i)throw Error(s(330));Rl(i,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return So=n,Ba(),!0}function Il(e,n,t){ii(e,n=io(0,n=to(t,n),1)),n=al(),null!==(e=ol(e,1))&&(Bn(e,1,n),ll(e,n))}function Rl(e,n){if(3===e.tag)Il(e,e,n);else for(var t=e.return;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vo||!Vo.has(r))){var a=so(t,e=to(n,e),1);if(ii(t,a),a=al(),null!==(t=ol(t,1)))Bn(t,1,a),ll(t,a);else if("function"===typeof r.componentDidCatch&&(null===Vo||!Vo.has(r)))try{r.componentDidCatch(n,e)}catch(i){}break}}t=t.return}}function kl(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=al(),e.pingedLanes|=e.suspendedLanes&t,Oo===e&&(Ao&t)===t&&(4===Ro||3===Ro&&(62914560&Ao)===Ao&&500>xa()-xo?ml(e,0):Po|=t),ll(e,n)}function Ml(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ul(e,n,t,r){return new Ml(e,n,t,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pl(e,n){var t=e.alternate;return null===t?((t=Ul(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Dl(e,n,t,r,a,i){var o=2;if(r=e,"function"===typeof e)Ll(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return xl(t.children,a,i,n);case D:o=8,a|=16;break;case O:o=8,a|=1;break;case T:return(e=Ul(12,t,n,8|a)).elementType=T,e.type=T,e.lanes=i,e;case R:return(e=Ul(13,t,n,a)).type=R,e.elementType=R,e.lanes=i,e;case k:return(e=Ul(19,t,n,a)).elementType=k,e.lanes=i,e;case x:return Fl(t,a,i,n);case F:return(e=Ul(24,t,n,a)).elementType=F,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case w:o=9;break e;case I:o=11;break e;case M:o=14;break e;case U:o=16,r=null;break e;case L:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(n=Ul(o,t,n,a)).elementType=e,n.type=r,n.lanes=i,n}function xl(e,n,t,r){return(e=Ul(7,e,r,n)).lanes=t,e}function Fl(e,n,t,r){return(e=Ul(23,e,r,n)).elementType=x,e.lanes=t,e}function Hl(e,n,t){return(e=Ul(6,e,null,n)).lanes=t,e}function Gl(e,n,t){return(n=Ul(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function jl(e,n,t){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jn(0),this.expirationTimes=jn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jn(0),this.mutableSourceEagerHydrationData=null}function Bl(e,n,t,r){var a=n.current,i=al(),o=il(a);e:if(t){n:{if(Qe(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var l=t;do{switch(l.tag){case 3:l=l.stateNode.context;break n;case 1:if(da(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break n}}l=l.return}while(null!==l);throw Error(s(171))}if(1===t.tag){var u=t.type;if(da(u)){t=pa(t,u,l);break e}}t=l}else t=sa;return null===n.context?n.context=t:n.pendingContext=t,(n=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),ii(a,n),sl(a,o,i),o}function zl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Vl(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function ql(e,n){Vl(e,n),(e=e.alternate)&&Vl(e,n)}function Kl(e,n,t){var r=null!=t&&null!=t.hydrationOptions&&t.hydrationOptions.mutableSources||null;if(t=new jl(e,n,null!=t&&!0===t.hydrate),n=Ul(3,null,null,2===n?7:1===n?3:0),t.current=n,n.stateNode=t,ti(n),e[Qr]=t.current,Tr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(n=r[e])._getVersion;a=a(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a)}this._internalRoot=t}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(e,n,t,r,a){var i=t._reactRootContainer;if(i){var s=i._internalRoot;if("function"===typeof a){var o=a;a=function(){var e=zl(s);o.call(e)}}Bl(n,s,e,a)}else{if(i=t._reactRootContainer=function(e,n){if(n||(n=!(!(n=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==n.nodeType||!n.hasAttribute("data-reactroot"))),!n)for(var t;t=e.lastChild;)e.removeChild(t);return new Kl(e,0,n?{hydrate:!0}:void 0)}(t,r),s=i._internalRoot,"function"===typeof a){var l=a;a=function(){var e=zl(s);l.call(e)}}hl(function(){Bl(n,s,e,a)})}return zl(s)}function Wl(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(n))throw Error(s(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)}Go=function(e,n,t){var r=n.lanes;if(null!==e)if(e.memoizedProps!==n.pendingProps||la.current)Is=!0;else{if(0===(t&r)){switch(Is=!1,n.tag){case 3:Hs(n),ji();break;case 5:Ii(n);break;case 1:da(n.type)&&ma(n);break;case 4:Ai(n,n.stateNode.containerInfo);break;case 10:r=n.memoizedProps.value;var a=n.type._context;ia(Ka,a._currentValue),a._currentValue=r;break;case 13:if(null!==n.memoizedState)return 0!==(t&n.child.childLanes)?qs(e,n,t):(ia(ki,1&ki.current),null!==(n=$s(e,n,t))?n.sibling:null);ia(ki,1&ki.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(64&e.flags)){if(r)return Xs(e,n,t);n.flags|=64}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ia(ki,ki.current),r)break;return null;case 23:case 24:return n.lanes=0,Ls(e,n,t)}return $s(e,n,t)}Is=0!==(16384&e.flags)}else Is=!1;switch(n.lanes=0,n.tag){case 2:if(r=n.type,null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,a=ca(n,oa.current),Za(n,t),a=es(null,n,r,e,a,t),n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,da(r)){var i=!0;ma(n)}else i=!1;n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ti(n);var o=r.getDerivedStateFromProps;"function"===typeof o&&ci(n,r,o,e),a.updater=di,n.stateNode=a,a._reactInternals=n,mi(n,r,e,t),n=Fs(null,n,r,!0,i,t)}else n.tag=0,Rs(null,n,a,t),n=n.child;return n;case 16:a=n.elementType;e:{switch(null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,a=(i=a._init)(a._payload),n.type=a,i=n.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===M)return 14}return 2}(a),e=qa(a,e),i){case 0:n=Ds(null,n,a,e,t);break e;case 1:n=xs(null,n,a,e,t);break e;case 11:n=ks(null,n,a,e,t);break e;case 14:n=Ms(null,n,a,qa(a.type,e),r,t);break e}throw Error(s(306,a,""))}return n;case 0:return r=n.type,a=n.pendingProps,Ds(e,n,r,a=n.elementType===r?a:qa(r,a),t);case 1:return r=n.type,a=n.pendingProps,xs(e,n,r,a=n.elementType===r?a:qa(r,a),t);case 3:if(Hs(n),r=n.updateQueue,null===e||null===r)throw Error(s(282));if(r=n.pendingProps,a=null!==(a=n.memoizedState)?a.element:null,ri(e,n),oi(n,r,null,t),(r=n.memoizedState.element)===a)ji(),n=$s(e,n,t);else{if((i=(a=n.stateNode).hydrate)&&(Li=Br(n.stateNode.containerInfo.firstChild),Ui=n,i=Pi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Bi.push(i);for(t=bi(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|1024,t=t.sibling}else Rs(e,n,r,t),ji();n=n.child}return n;case 5:return Ii(n),null===e&&Fi(n),r=n.type,a=n.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,Fr(r,a)?o=null:null!==i&&Fr(r,i)&&(n.flags|=16),Ps(e,n),Rs(e,n,o,t),n.child;case 6:return null===e&&Fi(n),null;case 13:return qs(e,n,t);case 4:return Ai(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=Ei(n,null,r,t):Rs(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,ks(e,n,r,a=n.elementType===r?a:qa(r,a),t);case 7:return Rs(e,n,n.pendingProps,t),n.child;case 8:case 12:return Rs(e,n,n.pendingProps.children,t),n.child;case 10:e:{r=n.type._context,a=n.pendingProps,o=n.memoizedProps,i=a.value;var l=n.type._context;if(ia(Ka,l._currentValue),l._currentValue=i,null!==o)if(l=o.value,0===(i=ir(l,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(o.children===a.children&&!la.current){n=$s(e,n,t);break e}}else for(null!==(l=n.child)&&(l.return=n);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&i)){1===l.tag&&((c=ai(-1,t&-t)).tag=2,ii(l,c)),l.lanes|=t,null!==(c=l.alternate)&&(c.lanes|=t),$a(l.return,t),u.lanes|=t;break}c=c.next}}else o=10===l.tag&&l.type===n.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===n){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Rs(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=(i=n.pendingProps).children,Za(n,t),r=r(a=ei(a,i.unstable_observedBits)),n.flags|=1,Rs(e,n,r,t),n.child;case 14:return i=qa(a=n.type,n.pendingProps),Ms(e,n,a,i=qa(a.type,i),r,t);case 15:return Us(e,n,n.type,n.pendingProps,r,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:qa(r,a),null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,da(r)?(e=!0,ma(n)):e=!1,Za(n,t),fi(n,r,a),mi(n,r,a,t),Fs(null,n,r,!0,e,t);case 19:return Xs(e,n,t);case 23:case 24:return Ls(e,n,t)}throw Error(s(156,n.tag))},Kl.prototype.render=function(e){Bl(e,this._internalRoot,null,null)},Kl.prototype.unmount=function(){var e=this._internalRoot,n=e.containerInfo;Bl(null,e,null,function(){n[Qr]=null})},Ze=function(e){13===e.tag&&(sl(e,4,al()),ql(e,4))},en=function(e){13===e.tag&&(sl(e,67108864,al()),ql(e,67108864))},nn=function(e){if(13===e.tag){var n=al(),t=il(e);sl(e,t,n),ql(e,t)}},tn=function(e,n){return n()},Te=function(e,n,t){switch(n){case"input":if(te(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=Zr(r);if(!a)throw Error(s(90));X(r),te(r,a)}}}break;case"textarea":ue(e,t);break;case"select":null!=(n=t.value)&&se(e,!!t.multiple,n,!1)}},Me=dl,Ue=function(e,n,t,r,a){var i=So;So|=4;try{return Ga(98,e.bind(null,n,t,r,a))}finally{0===(So=i)&&(Ho(),Ba())}},Le=function(){0===(49&So)&&(function(){if(null!==Jo){var e=Jo;Jo=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ll(e,xa())})}Ba()}(),Ol())},Pe=function(e,n){var t=So;So|=2;try{return e(n)}finally{0===(So=t)&&(Ho(),Ba())}};var Jl={Events:[Xr,$r,Zr,Re,ke,Ol,{current:!1}]},Xl={findFiberByHostInstance:Jr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},$l={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{_a=Zl.inject($l),ya=Zl}catch(me){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jl,n.createPortal=Wl,n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Xe(n))?null:e.stateNode},n.flushSync=function(e,n){var t=So;if(0!==(48&t))return e(n);So|=1;try{if(e)return Ga(99,e.bind(null,n))}finally{So=t,Ba()}},n.hydrate=function(e,n,t){if(!Yl(n))throw Error(s(200));return Ql(null,e,n,!0,t)},n.render=function(e,n,t){if(!Yl(n))throw Error(s(200));return Ql(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl(function(){Ql(null,null,e,!1,function(){e._reactRootContainer=null,e[Qr]=null})}),!0)},n.unstable_batchedUpdates=dl,n.unstable_createPortal=function(e,n){return Wl(e,n,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Yl(t))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Ql(e,n,t,!1,r)},n.version="17.0.2"},function(e,n,t){}]]);
//# sourceMappingURL=2.5f007836.chunk.js.map